{"version":3,"sources":["webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/layer/BaseVector.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/IconAnchorUnits.js","webpack:///./node_modules/.pnpm/rbush@3.0.1/node_modules/rbush/rbush.min.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/length.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/IconOrigin.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/Fill.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/IconImage.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/Icon.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/source/XYZ.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/Style.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/TextPlacement.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/Image.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/Feature.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/RegularShape.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/Circle.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/Stroke.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/colorlike.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/loadingstrategy.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/featureloader.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/source/Vector.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/source/VectorEventType.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/structs/RBush.js"],"names":["extendStatics","__extends","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","Property","BaseVectorLayer","_super","opt_options","_this","options","baseOptions","style","renderBuffer","updateWhileAnimating","updateWhileInteracting","declutter_","undefined","declutter","renderBuffer_","style_","styleFunction_","setStyle","updateWhileAnimating_","updateWhileInteracting_","getDeclutter","getFeatures","pixel","getRenderBuffer","getRenderOrder","get","getStyle","getStyleFunction","getUpdateWhileAnimating","getUpdateWhileInteracting","renderDeclutter","frameState","declutterTree","getRenderer","setRenderOrder","renderOrder","set","opt_style","changed","FRACTION","PIXELS","module","exports","t","r","e","a","h","n","o","s","l","Math","log","f","exp","u","sqrt","max","floor","min","x","i","length","_maxEntries","_minEntries","ceil","clear","indexOf","children","minX","minY","maxX","maxY","leaf","m","c","height","pop","push","all","_all","data","search","toBBox","collides","load","insert","_build","slice","_splitRoot","_insert","remove","splice","_condense","compareMinX","compareMinY","toJSON","fromJSON","apply","pow","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","v","M","_allDistMargin","sort","lineStringLength","flatCoordinates","offset","end","stride","x1","y1","x2","y2","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","Fill","color_","color","clone","getColor","isArray","setColor","taintedTestContext","IconImage","image","src","size","crossOrigin","imageState","hitDetectionImage_","image_","Image","canvas_","unlisten_","imageState_","size_","src_","tainted_","isTainted_","ImageState","LOADED","drawImage","getImageData","dispatchChangeEvent_","dispatchEvent","EventType","CHANGE","handleImageError_","ERROR","unlistenImage_","handleImageLoad_","width","getImage","pixelRatio","replaceColor_","getPixelRatio","getImageState","getHitDetectionImage","context","fillRect","canvas","getSize","getSrc","IDLE","LOADING","bind","document","createElement","ctx","getContext","scale","globalCompositeOperation","fillStyle","imgData","g","ii","putImageData","Icon","opacity","rotation","rotateWithView","displacement","declutterMode","anchor_","anchor","normalizedAnchor_","anchorOrigin_","anchorOrigin","IconOrigin","anchorXUnits_","anchorXUnits","IconAnchorUnits","anchorYUnits_","anchorYUnits","crossOrigin_","img","imgSize_","imgSize","iconImage_","iconImage","offset_","offsetOrigin_","offsetOrigin","origin_","getScale","getOpacity","getRotateWithView","getRotation","getDisplacement","getDeclutterMode","getAnchor","setAnchor","getImageSize","getOrigin","iconImageSize","listenImageChange","listener","addEventListener","unlistenImageChange","removeEventListener","XYZ","interpolate","imageSmoothing","projection","tileGrid","extent","maxResolution","maxZoom","minZoom","tileSize","attributions","cacheSize","opaque","reprojectionErrorThreshold","tileLoadFunction","tilePixelRatio","tileUrlFunction","url","urls","wrapX","transition","attributionsCollapsible","zDirection","gutter_","gutter","getGutter","Style","geometry_","geometryFunction_","defaultGeometryFunction","geometry","setGeometry","fill_","fill","renderer_","renderer","hitDetectionRenderer_","hitDetectionRenderer","stroke_","stroke","text_","text","zIndex_","zIndex","getGeometry","getFill","getStroke","getText","getZIndex","setRenderer","setHitDetectionRenderer","getHitDetectionRenderer","getGeometryFunction","setFill","setImage","setStroke","setText","feature","setZIndex","toFunction","obj","styleFunction","styles_1","defaultStyles","createDefaultStyle","resolution","radius","createEditingStyle","styles","white","blue","concat","Infinity","POINT","LINE","ImageStyle","opacity_","rotateWithView_","rotation_","scale_","scaleArray_","displacement_","declutterMode_","getScaleArray","setDisplacement","setOpacity","setRotateWithView","setRotation","setScale","Feature","opt_geometryOrProperties","on","once","un","id_","geometryName_","geometryChangeKey_","addChangeListener","handleGeometryChanged_","properties","setProperties","hasProperties","getProperties","setGeometryName","getGeometryName","getId","handleGeometryChange_","createStyleFunction","setId","id","name","removeChangeListener","RegularShape","hitDetectionCanvas_","points_","points","radius_","radius1","radius2_","radius2","angle_","angle","renderOptions_","render","getPoints","getRadius","getRadius2","getAngle","createHitDetectionCanvas_","renderOptions","draw_","calculateLineJoinSize_","lineJoin","strokeWidth","miterLimit","r1","r2","tmp","alpha","PI","sin","miterRatio","k","bevelAdd","aa","dd","innerMiterRatio","innerLength","createRenderOptions","strokeStyle","lineDash","lineDashOffset","getWidth","getLineDash","getLineDashOffset","getLineJoin","getMiterLimit","add","maxRadius","translate","createPath_","lineWidth","setLineDash","drawHitDetectionCanvas_","arc","startAngle","step","angle0","radiusC","lineTo","cos","closePath","CircleStyle","setRadius","Stroke","lineCap_","lineCap","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","width_","getLineCap","setLineCap","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","asColorLike","withCredentials","xhr","format","success","failure","source","XMLHttpRequest","open","getType","responseType","onload","event","status","type","responseText","responseXML","DOMParser","parseFromString","readFeatures","featureProjection","readProjection","onerror","send","loadFeaturesXhr","features","dataProjection","addFeatures","VectorSourceEvent","opt_feature","opt_features","Event","VectorSource","state","loader_","format_","overlaps_","overlaps","url_","loader","strategy_","strategy","collection","useSpatialIndex","featuresRtree_","RBush","loadedExtentsRtree_","loadingExtentsCount_","nullGeometryFeatures_","idIndex_","uidIndex_","featureChangeKeys_","featuresCollection_","getArray","Collection","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","getExtent","VectorEventType","ADDFEATURE","handleFeatureChange_","ObjectEventType","PROPERTYCHANGE","valid","toString","extents","newFeatures","geometryFeatures","length_1","length_2","hasListener","length_3","modifyingCollection","evt","REMOVEFEATURE","CollectionEventType","ADD","REMOVE","removeFeature","opt_fast","featureId","forEach","removeAndIgnoreReturn","removeFeatureInternal","clearEvent","CLEAR","forEachFeature","callback","forEachFeatureAtCoordinateDirect","coordinate","forEachFeatureInExtent","intersectsCoordinate","forEachInExtent","forEachFeatureIntersectingExtent","intersectsExtent","result","getFeaturesCollection","getAll","getFeaturesAtCoordinate","getFeaturesInExtent","opt_projection","canWrapX","getWrapX","getInExtent","map","anExtent","getClosestFeatureToCoordinate","opt_filter","y","closestFeature","closestPoint","NaN","minSquaredDistance","filter","previousMinSquaredDistance","closestPointXY","minDistance","opt_extent","getFeatureById","getFeatureByUid","uid","getFormat","getOverlaps","getUrl","update","sid","removeFromIdIndex_","CHANGEFEATURE","hasFeature","isEmpty","getLength","loadFeatures","loadedExtentsRtree","extentsToLoad","_loop_1","extentToLoad","object","this_1","FEATURESLOADSTART","FEATURESLOADEND","FEATURESLOADERROR","loading","refresh","removeLoadedExtent","featureChangeKeys","removed","setLoader","setUrl","Source","opt_maxEntries","rbush_","items_","value","item","values","items","bbox","forEach_","rbush"],"mappings":"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","file":"js/chunk-75cc4659.8e852b81.js","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/BaseVector\n */\nimport Layer from './Layer.js';\nimport RBush from 'rbush';\nimport { assign } from '../obj.js';\nimport { createDefaultStyle, toFunction as toStyleFunction, } from '../style/Style.js';\n/**\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {VectorSourceType} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link import(\"../PluggableMap.js\").default#addLayer map.addLayer()}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n *\n * As an optimization decluttered features from layers with the same `className` are rendered above\n * the fill and stroke styles of all of those layers regardless of z-index.  To opt out of this\n * behavior and place declutterd features with their own layer configure the layer with a `className`\n * other than `ol-layer`.\n * @property {import(\"../style/Style.js\").StyleLike|null} [style] Layer style. When set to `null`, only\n * features that have their own style will be rendered. See {@link module:ol/style/Style~Style} for the default style\n * which will be used if this is not set.\n * @property {import(\"./Base.js\").BackgroundColor} [background] Background color for the layer. If not specified, no background\n * will be rendered.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will\n * be recreated during animations. This means that no vectors will be shown clipped, but the\n * setting will have a performance impact for large amounts of vector data. When set to `false`,\n * batches will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will\n * be recreated during interactions. See also `updateWhileAnimating`.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    RENDER_ORDER: 'renderOrder',\n};\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @template {import(\"../renderer/canvas/VectorLayer.js\").default|import(\"../renderer/canvas/VectorTileLayer.js\").default|import(\"../renderer/canvas/VectorImageLayer.js\").default|import(\"../renderer/webgl/PointsLayer.js\").default} RendererType\n * @extends {Layer<VectorSourceType, RendererType>}\n * @api\n */\nvar BaseVectorLayer = /** @class */ (function (_super) {\n    __extends(BaseVectorLayer, _super);\n    /**\n     * @param {Options<VectorSourceType>} [opt_options] Options.\n     */\n    function BaseVectorLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.style;\n        delete baseOptions.renderBuffer;\n        delete baseOptions.updateWhileAnimating;\n        delete baseOptions.updateWhileInteracting;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.declutter_ =\n            options.declutter !== undefined ? options.declutter : false;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.renderBuffer_ =\n            options.renderBuffer !== undefined ? options.renderBuffer : 100;\n        /**\n         * User provided style.\n         * @type {import(\"../style/Style.js\").StyleLike}\n         * @private\n         */\n        _this.style_ = null;\n        /**\n         * Style function for use within the library.\n         * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n         * @private\n         */\n        _this.styleFunction_ = undefined;\n        _this.setStyle(options.style);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileAnimating_ =\n            options.updateWhileAnimating !== undefined\n                ? options.updateWhileAnimating\n                : false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileInteracting_ =\n            options.updateWhileInteracting !== undefined\n                ? options.updateWhileInteracting\n                : false;\n        return _this;\n    }\n    /**\n     * @return {boolean} Declutter.\n     */\n    BaseVectorLayer.prototype.getDeclutter = function () {\n        return this.declutter_;\n    };\n    /**\n     * Get the topmost feature that intersects the given pixel on the viewport. Returns a promise\n     * that resolves with an array of features. The array will either contain the topmost feature\n     * when a hit was detected, or it will be empty.\n     *\n     * The hit detection algorithm used for this method is optimized for performance, but is less\n     * accurate than the one used in {@link import(\"../PluggableMap.js\").default#getFeaturesAtPixel}: Text\n     * is not considered, and icons are only represented by their bounding box instead of the exact\n     * image.\n     *\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with an array of features.\n     * @api\n     */\n    BaseVectorLayer.prototype.getFeatures = function (pixel) {\n        return _super.prototype.getFeatures.call(this, pixel);\n    };\n    /**\n     * @return {number|undefined} Render buffer.\n     */\n    BaseVectorLayer.prototype.getRenderBuffer = function () {\n        return this.renderBuffer_;\n    };\n    /**\n     * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n     *     order.\n     */\n    BaseVectorLayer.prototype.getRenderOrder = function () {\n        return /** @type {import(\"../render.js\").OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER));\n    };\n    /**\n     * Get the style for features.  This returns whatever was passed to the `style`\n     * option at construction or to the `setStyle` method.\n     * @return {import(\"../style/Style.js\").StyleLike|null|undefined} Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the style function.\n     * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     animating.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileAnimating = function () {\n        return this.updateWhileAnimating_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     interacting.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileInteracting = function () {\n        return this.updateWhileInteracting_;\n    };\n    /**\n     * Render declutter items for this layer\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    BaseVectorLayer.prototype.renderDeclutter = function (frameState) {\n        if (!frameState.declutterTree) {\n            frameState.declutterTree = new RBush(9);\n        }\n        /** @type {*} */ (this.getRenderer()).renderDeclutter(frameState);\n    };\n    /**\n     * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n     *     Render order.\n     */\n    BaseVectorLayer.prototype.setRenderOrder = function (renderOrder) {\n        this.set(Property.RENDER_ORDER, renderOrder);\n    };\n    /**\n     * Set the style for features.  This can be a single style object, an array\n     * of styles, or a function that takes a feature and resolution and returns\n     * an array of styles. If set to `null`, the layer has no style (a `null` style),\n     * so only features that have their own styles will be rendered in the layer. Call\n     * `setStyle()` without arguments to reset to the default style. See\n     * {@link module:ol/style/Style~Style} for information on the default style.\n     * @param {import(\"../style/Style.js\").StyleLike|null} [opt_style] Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.setStyle = function (opt_style) {\n        this.style_ = opt_style !== undefined ? opt_style : createDefaultStyle;\n        this.styleFunction_ =\n            opt_style === null ? undefined : toStyleFunction(this.style_);\n        this.changed();\n    };\n    return BaseVectorLayer;\n}(Layer));\nexport default BaseVectorLayer;\n//# sourceMappingURL=BaseVector.js.map","/**\n * @module ol/style/IconAnchorUnits\n */\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n    /**\n     * Anchor is a fraction\n     * @api\n     */\n    FRACTION: 'fraction',\n    /**\n     * Anchor is in pixels\n     * @api\n     */\n    PIXELS: 'pixels',\n};\n//# sourceMappingURL=IconAnchorUnits.js.map","!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=t||self).RBush=i()}(this,function(){\"use strict\";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1),m=Math.max(e,Math.floor(r-s*f/o+u)),c=Math.min(a,Math.floor(r+(o-s)*f/o+u));t(n,r,m,c,h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});\n","/**\n * @module ol/geom/flat/length\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\nexport function lineStringLength(flatCoordinates, offset, end, stride) {\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    var length = 0;\n    for (var i = offset + stride; i < end; i += stride) {\n        var x2 = flatCoordinates[i];\n        var y2 = flatCoordinates[i + 1];\n        length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n        x1 = x2;\n        y1 = y2;\n    }\n    return length;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\nexport function linearRingLength(flatCoordinates, offset, end, stride) {\n    var perimeter = lineStringLength(flatCoordinates, offset, end, stride);\n    var dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n    var dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n    perimeter += Math.sqrt(dx * dx + dy * dy);\n    return perimeter;\n}\n//# sourceMappingURL=length.js.map","/**\n * @module ol/style/IconOrigin\n */\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n    /**\n     * Origin is at bottom left\n     * @api\n     */\n    BOTTOM_LEFT: 'bottom-left',\n    /**\n     * Origin is at bottom right\n     * @api\n     */\n    BOTTOM_RIGHT: 'bottom-right',\n    /**\n     * Origin is at top left\n     * @api\n     */\n    TOP_LEFT: 'top-left',\n    /**\n     * Origin is at top right\n     * @api\n     */\n    TOP_RIGHT: 'top-right',\n};\n//# sourceMappingURL=IconOrigin.js.map","/**\n * @module ol/style/Fill\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null} [color=null] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nvar Fill = /** @class */ (function () {\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Fill(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null}\n         */\n        this.color_ = options.color !== undefined ? options.color : null;\n    }\n    /**\n     * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n     * @return {Fill} The cloned style.\n     * @api\n     */\n    Fill.prototype.clone = function () {\n        var color = this.getColor();\n        return new Fill({\n            color: Array.isArray(color) ? color.slice() : color || undefined,\n        });\n    };\n    /**\n     * Get the fill color.\n     * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null} Color.\n     * @api\n     */\n    Fill.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Set the color.\n     *\n     * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null} color Color.\n     * @api\n     */\n    Fill.prototype.setColor = function (color) {\n        this.color_ = color;\n    };\n    return Fill;\n}());\nexport default Fill;\n//# sourceMappingURL=Fill.js.map","/**\n * @module ol/style/IconImage\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport { asString } from '../color.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { shared as iconImageCache } from './IconImageCache.js';\nimport { listenImage } from '../Image.js';\n/**\n * @type {CanvasRenderingContext2D}\n */\nvar taintedTestContext = null;\nvar IconImage = /** @class */ (function (_super) {\n    __extends(IconImage, _super);\n    /**\n     * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n     * @param {string|undefined} src Src.\n     * @param {import(\"../size.js\").Size} size Size.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"../ImageState.js\").default} imageState Image state.\n     * @param {import(\"../color.js\").Color} color Color.\n     */\n    function IconImage(image, src, size, crossOrigin, imageState, color) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.hitDetectionImage_ = null;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.image_ = !image ? new Image() : image;\n        if (crossOrigin !== null) {\n            /** @type {HTMLImageElement} */ (_this.image_).crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {Object<number, HTMLCanvasElement>}\n         */\n        _this.canvas_ = {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color}\n         */\n        _this.color_ = color;\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @private\n         * @type {import(\"../ImageState.js\").default}\n         */\n        _this.imageState_ = imageState;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = size;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         */\n        _this.tainted_;\n        return _this;\n    }\n    /**\n     * @private\n     * @return {boolean} The image canvas is tainted.\n     */\n    IconImage.prototype.isTainted_ = function () {\n        if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n            if (!taintedTestContext) {\n                taintedTestContext = createCanvasContext2D(1, 1);\n            }\n            taintedTestContext.drawImage(this.image_, 0, 0);\n            try {\n                taintedTestContext.getImageData(0, 0, 1, 1);\n                this.tainted_ = false;\n            }\n            catch (e) {\n                taintedTestContext = null;\n                this.tainted_ = true;\n            }\n        }\n        return this.tainted_ === true;\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.dispatchChangeEvent_ = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.handleImageError_ = function () {\n        this.imageState_ = ImageState.ERROR;\n        this.unlistenImage_();\n        this.dispatchChangeEvent_();\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.handleImageLoad_ = function () {\n        this.imageState_ = ImageState.LOADED;\n        if (this.size_) {\n            this.image_.width = this.size_[0];\n            this.image_.height = this.size_[1];\n        }\n        else {\n            this.size_ = [this.image_.width, this.image_.height];\n        }\n        this.unlistenImage_();\n        this.dispatchChangeEvent_();\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n     */\n    IconImage.prototype.getImage = function (pixelRatio) {\n        this.replaceColor_(pixelRatio);\n        return this.canvas_[pixelRatio] ? this.canvas_[pixelRatio] : this.image_;\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {number} Image or Canvas element.\n     */\n    IconImage.prototype.getPixelRatio = function (pixelRatio) {\n        this.replaceColor_(pixelRatio);\n        return this.canvas_[pixelRatio] ? pixelRatio : 1;\n    };\n    /**\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    IconImage.prototype.getImageState = function () {\n        return this.imageState_;\n    };\n    /**\n     * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n     */\n    IconImage.prototype.getHitDetectionImage = function () {\n        if (!this.hitDetectionImage_) {\n            if (this.isTainted_()) {\n                var width = this.size_[0];\n                var height = this.size_[1];\n                var context = createCanvasContext2D(width, height);\n                context.fillRect(0, 0, width, height);\n                this.hitDetectionImage_ = context.canvas;\n            }\n            else {\n                this.hitDetectionImage_ = this.image_;\n            }\n        }\n        return this.hitDetectionImage_;\n    };\n    /**\n     * Get the size of the icon (in pixels).\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    IconImage.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * @return {string|undefined} Image src.\n     */\n    IconImage.prototype.getSrc = function () {\n        return this.src_;\n    };\n    /**\n     * Load not yet loaded URI.\n     */\n    IconImage.prototype.load = function () {\n        if (this.imageState_ == ImageState.IDLE) {\n            this.imageState_ = ImageState.LOADING;\n            try {\n                /** @type {HTMLImageElement} */ (this.image_).src = this.src_;\n            }\n            catch (e) {\n                this.handleImageError_();\n            }\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @private\n     */\n    IconImage.prototype.replaceColor_ = function (pixelRatio) {\n        if (!this.color_ ||\n            this.canvas_[pixelRatio] ||\n            this.imageState_ !== ImageState.LOADED) {\n            return;\n        }\n        var canvas = document.createElement('canvas');\n        this.canvas_[pixelRatio] = canvas;\n        canvas.width = Math.ceil(this.image_.width * pixelRatio);\n        canvas.height = Math.ceil(this.image_.height * pixelRatio);\n        var ctx = canvas.getContext('2d');\n        ctx.scale(pixelRatio, pixelRatio);\n        ctx.drawImage(this.image_, 0, 0);\n        ctx.globalCompositeOperation = 'multiply';\n        // Internet Explorer 11 does not support the multiply operation.\n        // If the canvas is tainted in Internet Explorer this still produces\n        // a solid color image with the shape of the icon.\n        if (ctx.globalCompositeOperation === 'multiply' || this.isTainted_()) {\n            ctx.fillStyle = asString(this.color_);\n            ctx.fillRect(0, 0, canvas.width / pixelRatio, canvas.height / pixelRatio);\n            ctx.globalCompositeOperation = 'destination-in';\n            ctx.drawImage(this.image_, 0, 0);\n        }\n        else {\n            var imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n            var data = imgData.data;\n            var r = this.color_[0] / 255.0;\n            var g = this.color_[1] / 255.0;\n            var b = this.color_[2] / 255.0;\n            var a = this.color_[3];\n            for (var i = 0, ii = data.length; i < ii; i += 4) {\n                data[i] *= r;\n                data[i + 1] *= g;\n                data[i + 2] *= b;\n                data[i + 3] *= a;\n            }\n            ctx.putImageData(imgData, 0, 0);\n        }\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    IconImage.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return IconImage;\n}(EventTarget));\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n    var iconImage = iconImageCache.get(src, crossOrigin, color);\n    if (!iconImage) {\n        iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n        iconImageCache.set(src, crossOrigin, color, iconImage);\n    }\n    return iconImage;\n}\nexport default IconImage;\n//# sourceMappingURL=IconImage.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/style/Icon\n */\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from './IconAnchorUnits.js';\nimport IconOrigin from './IconOrigin.js';\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport { asArray } from '../color.js';\nimport { assert } from '../asserts.js';\nimport { get as getIconImage } from './IconImage.js';\nimport { getUid } from '../util.js';\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {import(\"./IconOrigin.js\").default} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorXUnits='fraction'] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorYUnits='fraction'] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {Array<number>} [displacement=[0,0]] Displacement of the icon.\n * @property {import(\"./IconOrigin.js\").default} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {import(\"../size.js\").Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} [declutterMode] Declutter mode\n */\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nvar Icon = /** @class */ (function (_super) {\n    __extends(Icon, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Icon(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        /**\n         * @type {number}\n         */\n        var opacity = options.opacity !== undefined ? options.opacity : 1;\n        /**\n         * @type {number}\n         */\n        var rotation = options.rotation !== undefined ? options.rotation : 0;\n        /**\n         * @type {number|import(\"../size.js\").Size}\n         */\n        var scale = options.scale !== undefined ? options.scale : 1;\n        /**\n         * @type {boolean}\n         */\n        var rotateWithView = options.rotateWithView !== undefined ? options.rotateWithView : false;\n        _this = _super.call(this, {\n            opacity: opacity,\n            rotation: rotation,\n            scale: scale,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0],\n            rotateWithView: rotateWithView,\n            declutterMode: options.declutterMode,\n        }) || this;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.normalizedAnchor_ = null;\n        /**\n         * @private\n         * @type {import(\"./IconOrigin.js\").default}\n         */\n        _this.anchorOrigin_ =\n            options.anchorOrigin !== undefined\n                ? options.anchorOrigin\n                : IconOrigin.TOP_LEFT;\n        /**\n         * @private\n         * @type {import(\"./IconAnchorUnits.js\").default}\n         */\n        _this.anchorXUnits_ =\n            options.anchorXUnits !== undefined\n                ? options.anchorXUnits\n                : IconAnchorUnits.FRACTION;\n        /**\n         * @private\n         * @type {import(\"./IconAnchorUnits.js\").default}\n         */\n        _this.anchorYUnits_ =\n            options.anchorYUnits !== undefined\n                ? options.anchorYUnits\n                : IconAnchorUnits.FRACTION;\n        /**\n         * @private\n         * @type {?string}\n         */\n        _this.crossOrigin_ =\n            options.crossOrigin !== undefined ? options.crossOrigin : null;\n        /**\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        var image = options.img !== undefined ? options.img : null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size|undefined}\n         */\n        _this.imgSize_ = options.imgSize;\n        /**\n         * @type {string|undefined}\n         */\n        var src = options.src;\n        assert(!(src !== undefined && image), 4); // `image` and `src` cannot be provided at the same time\n        assert(!image || (image && _this.imgSize_), 5); // `imgSize` must be set when `image` is provided\n        if ((src === undefined || src.length === 0) && image) {\n            src = /** @type {HTMLImageElement} */ (image).src || getUid(image);\n        }\n        assert(src !== undefined && src.length > 0, 6); // A defined and non-empty `src` or `image` must be provided\n        /**\n         * @type {import(\"../ImageState.js\").default}\n         */\n        var imageState = options.src !== undefined ? ImageState.IDLE : ImageState.LOADED;\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color}\n         */\n        _this.color_ = options.color !== undefined ? asArray(options.color) : null;\n        /**\n         * @private\n         * @type {import(\"./IconImage.js\").default}\n         */\n        _this.iconImage_ = getIconImage(image, \n        /** @type {string} */ (src), _this.imgSize_ !== undefined ? _this.imgSize_ : null, _this.crossOrigin_, imageState, _this.color_);\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n        /**\n         * @private\n         * @type {import(\"./IconOrigin.js\").default}\n         */\n        _this.offsetOrigin_ =\n            options.offsetOrigin !== undefined\n                ? options.offsetOrigin\n                : IconOrigin.TOP_LEFT;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.origin_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = options.size !== undefined ? options.size : null;\n        return _this;\n    }\n    /**\n     * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n     * @return {Icon} The cloned style.\n     * @api\n     */\n    Icon.prototype.clone = function () {\n        var scale = this.getScale();\n        return new Icon({\n            anchor: this.anchor_.slice(),\n            anchorOrigin: this.anchorOrigin_,\n            anchorXUnits: this.anchorXUnits_,\n            anchorYUnits: this.anchorYUnits_,\n            color: this.color_ && this.color_.slice\n                ? this.color_.slice()\n                : this.color_ || undefined,\n            crossOrigin: this.crossOrigin_,\n            imgSize: this.imgSize_,\n            offset: this.offset_.slice(),\n            offsetOrigin: this.offsetOrigin_,\n            opacity: this.getOpacity(),\n            rotateWithView: this.getRotateWithView(),\n            rotation: this.getRotation(),\n            scale: Array.isArray(scale) ? scale.slice() : scale,\n            size: this.size_ !== null ? this.size_.slice() : undefined,\n            src: this.getSrc(),\n            displacement: this.getDisplacement().slice(),\n            declutterMode: this.getDeclutterMode(),\n        });\n    };\n    /**\n     * Get the anchor point in pixels. The anchor determines the center point for the\n     * symbolizer.\n     * @return {Array<number>} Anchor.\n     * @api\n     */\n    Icon.prototype.getAnchor = function () {\n        var anchor = this.normalizedAnchor_;\n        if (!anchor) {\n            anchor = this.anchor_;\n            var size = this.getSize();\n            if (this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\n                this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n                if (!size) {\n                    return null;\n                }\n                anchor = this.anchor_.slice();\n                if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n                    anchor[0] *= size[0];\n                }\n                if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n                    anchor[1] *= size[1];\n                }\n            }\n            if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n                if (!size) {\n                    return null;\n                }\n                if (anchor === this.anchor_) {\n                    anchor = this.anchor_.slice();\n                }\n                if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\n                    this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                    anchor[0] = -anchor[0] + size[0];\n                }\n                if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\n                    this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                    anchor[1] = -anchor[1] + size[1];\n                }\n            }\n            this.normalizedAnchor_ = anchor;\n        }\n        var displacement = this.getDisplacement();\n        return [anchor[0] - displacement[0], anchor[1] + displacement[1]];\n    };\n    /**\n     * Set the anchor point. The anchor determines the center point for the\n     * symbolizer.\n     *\n     * @param {Array<number>} anchor Anchor.\n     * @api\n     */\n    Icon.prototype.setAnchor = function (anchor) {\n        this.anchor_ = anchor;\n        this.normalizedAnchor_ = null;\n    };\n    /**\n     * Get the icon color.\n     * @return {import(\"../color.js\").Color} Color.\n     * @api\n     */\n    Icon.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Get the image icon.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n     * @api\n     */\n    Icon.prototype.getImage = function (pixelRatio) {\n        return this.iconImage_.getImage(pixelRatio);\n    };\n    /**\n     * Get the pixel ratio.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {number} The pixel ratio of the image.\n     * @api\n     */\n    Icon.prototype.getPixelRatio = function (pixelRatio) {\n        return this.iconImage_.getPixelRatio(pixelRatio);\n    };\n    /**\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    Icon.prototype.getImageSize = function () {\n        return this.iconImage_.getSize();\n    };\n    /**\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    Icon.prototype.getImageState = function () {\n        return this.iconImage_.getImageState();\n    };\n    /**\n     * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n     */\n    Icon.prototype.getHitDetectionImage = function () {\n        return this.iconImage_.getHitDetectionImage();\n    };\n    /**\n     * Get the origin of the symbolizer.\n     * @return {Array<number>} Origin.\n     * @api\n     */\n    Icon.prototype.getOrigin = function () {\n        if (this.origin_) {\n            return this.origin_;\n        }\n        var offset = this.offset_;\n        if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n            var size = this.getSize();\n            var iconImageSize = this.iconImage_.getSize();\n            if (!size || !iconImageSize) {\n                return null;\n            }\n            offset = offset.slice();\n            if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\n                this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                offset[0] = iconImageSize[0] - size[0] - offset[0];\n            }\n            if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\n                this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                offset[1] = iconImageSize[1] - size[1] - offset[1];\n            }\n        }\n        this.origin_ = offset;\n        return this.origin_;\n    };\n    /**\n     * Get the image URL.\n     * @return {string|undefined} Image src.\n     * @api\n     */\n    Icon.prototype.getSrc = function () {\n        return this.iconImage_.getSrc();\n    };\n    /**\n     * Get the size of the icon (in pixels).\n     * @return {import(\"../size.js\").Size} Image size.\n     * @api\n     */\n    Icon.prototype.getSize = function () {\n        return !this.size_ ? this.iconImage_.getSize() : this.size_;\n    };\n    /**\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     */\n    Icon.prototype.listenImageChange = function (listener) {\n        this.iconImage_.addEventListener(EventType.CHANGE, listener);\n    };\n    /**\n     * Load not yet loaded URI.\n     * When rendering a feature with an icon style, the vector renderer will\n     * automatically call this method. However, you might want to call this\n     * method yourself for preloading or other purposes.\n     * @api\n     */\n    Icon.prototype.load = function () {\n        this.iconImage_.load();\n    };\n    /**\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     */\n    Icon.prototype.unlistenImageChange = function (listener) {\n        this.iconImage_.removeEventListener(EventType.CHANGE, listener);\n    };\n    return Icon;\n}(ImageStyle));\nexport default Icon;\n//# sourceMappingURL=Icon.js.map","/**\n * @module ol/source/XYZ\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport TileImage from './TileImage.js';\nimport { createXYZ, extentFromProjection } from '../tilegrid.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [imageSmoothing=true] Deprecated.  Use the `interpolate` option instead.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection='EPSG:3857'] Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {number} [maxZoom=42] Optional max zoom level. Not used if `tileGrid` is provided.\n * @property {number} [minZoom=0] Optional min zoom level. Not used if `tileGrid` is provided.\n * @property {number} [maxResolution] Optional tile grid resolution at level zero. Not used if `tileGrid` is provided.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {number|import(\"../size.js\").Size} [tileSize=[256, 256]] The tile size used by the tile service.\n * Not used if `tileGrid` is provided.\n * @property {number} [gutter=0] The size in pixels of the gutter around image tiles to ignore.\n * This allows artifacts of rendering at tile edges to be ignored.\n * Supported images should be wider and taller than the tile size by a value of `2 x gutter`.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get\n * tile URL given a tile coordinate and the projection.\n * Required if `url` or `urls` are not provided.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`,\n * and `{z}` placeholders. A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`,\n * may be used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition=250] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n */\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case\n * a `tileUrlFunction` can be used, such as:\n * ```js\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *      coordinate[1] + '/' + (-coordinate[2] - 1) + '.png';\n *  }\n * ```\n * @api\n */\nvar XYZ = /** @class */ (function (_super) {\n    __extends(XYZ, _super);\n    /**\n     * @param {Options} [opt_options] XYZ options.\n     */\n    function XYZ(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        var interpolate = options.imageSmoothing !== undefined ? options.imageSmoothing : true;\n        if (options.interpolate !== undefined) {\n            interpolate = options.interpolate;\n        }\n        var projection = options.projection !== undefined ? options.projection : 'EPSG:3857';\n        var tileGrid = options.tileGrid !== undefined\n            ? options.tileGrid\n            : createXYZ({\n                extent: extentFromProjection(projection),\n                maxResolution: options.maxResolution,\n                maxZoom: options.maxZoom,\n                minZoom: options.minZoom,\n                tileSize: options.tileSize,\n            });\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            crossOrigin: options.crossOrigin,\n            interpolate: interpolate,\n            opaque: options.opaque,\n            projection: projection,\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            tileGrid: tileGrid,\n            tileLoadFunction: options.tileLoadFunction,\n            tilePixelRatio: options.tilePixelRatio,\n            tileUrlFunction: options.tileUrlFunction,\n            url: options.url,\n            urls: options.urls,\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n            transition: options.transition,\n            attributionsCollapsible: options.attributionsCollapsible,\n            zDirection: options.zDirection,\n        }) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n        return _this;\n    }\n    /**\n     * @return {number} Gutter.\n     */\n    XYZ.prototype.getGutter = function () {\n        return this.gutter_;\n    };\n    return XYZ;\n}(TileImage));\nexport default XYZ;\n//# sourceMappingURL=XYZ.js.map","/**\n * @module ol/style/Style\n */\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport Stroke from './Stroke.js';\nimport { assert } from '../asserts.js';\n/**\n * A function that takes an {@link module:ol/Feature~Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style~Style} or an array of them. This way e.g. a\n * vector layer can be styled. If the function returns `undefined`, the\n * feature will not be rendered.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>|void)} StyleFunction\n */\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n/**\n * A function that takes an {@link module:ol/Feature~Feature} as argument and returns an\n * {@link module:ol/geom/Geometry~Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>),import(\"../render.js\").State): void} RenderFunction\n */\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {RenderFunction} [hitDetectionRenderer] Custom renderer for hit detection. If provided will be used\n * in hit detection rendering.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * ## Feature styles\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Circle, Fill, Stroke, Style} from 'ol/style';\n *\n *  const fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)',\n *  });\n *  const stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25,\n *  });\n *  const styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5,\n *      }),\n *      fill: fill,\n *      stroke: stroke,\n *    }),\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import {Circle, Fill, Stroke, Style} from 'ol/style';\n *\n *  const styles = {};\n *  const white = [255, 255, 255, 1];\n *  const blue = [0, 153, 255, 1];\n *  const width = 3;\n *  styles['Polygon'] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5],\n *      }),\n *    }),\n *  ];\n *  styles['MultiPolygon'] =\n *      styles['Polygon'];\n *  styles['LineString'] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2,\n *      }),\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width,\n *      }),\n *    }),\n *  ];\n *  styles['MultiLineString'] = styles['LineString'];\n *\n *  styles['Circle'] = styles['Polygon'].concat(\n *    styles['LineString']\n *  );\n *\n *  styles['Point'] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue,\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2,\n *        }),\n *      }),\n *      zIndex: Infinity,\n *    }),\n *  ];\n *  styles['MultiPoint'] =\n *      styles['Point'];\n *  styles['GeometryCollection'] =\n *      styles['Polygon'].concat(\n *          styles['LineString'],\n *          styles['Point']\n *      );\n * ```\n *\n * @api\n */\nvar Style = /** @class */ (function () {\n    /**\n     * @param {Options} [opt_options] Style options.\n     */\n    function Style(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n         */\n        this.geometry_ = null;\n        /**\n         * @private\n         * @type {!GeometryFunction}\n         */\n        this.geometryFunction_ = defaultGeometryFunction;\n        if (options.geometry !== undefined) {\n            this.setGeometry(options.geometry);\n        }\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.fill_ = options.fill !== undefined ? options.fill : null;\n        /**\n         * @private\n         * @type {import(\"./Image.js\").default}\n         */\n        this.image_ = options.image !== undefined ? options.image : null;\n        /**\n         * @private\n         * @type {RenderFunction|null}\n         */\n        this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n        /**\n         * @private\n         * @type {RenderFunction|null}\n         */\n        this.hitDetectionRenderer_ =\n            options.hitDetectionRenderer !== undefined\n                ? options.hitDetectionRenderer\n                : null;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {import(\"./Text.js\").default}\n         */\n        this.text_ = options.text !== undefined ? options.text : null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.zIndex_ = options.zIndex;\n    }\n    /**\n     * Clones the style.\n     * @return {Style} The cloned style.\n     * @api\n     */\n    Style.prototype.clone = function () {\n        var geometry = this.getGeometry();\n        if (geometry && typeof geometry === 'object') {\n            geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (geometry).clone();\n        }\n        return new Style({\n            geometry: geometry,\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            image: this.getImage() ? this.getImage().clone() : undefined,\n            renderer: this.getRenderer(),\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            text: this.getText() ? this.getText().clone() : undefined,\n            zIndex: this.getZIndex(),\n        });\n    };\n    /**\n     * Get the custom renderer function that was configured with\n     * {@link #setRenderer} or the `renderer` constructor option.\n     * @return {RenderFunction|null} Custom renderer function.\n     * @api\n     */\n    Style.prototype.getRenderer = function () {\n        return this.renderer_;\n    };\n    /**\n     * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n     * and `image` options of the style will be ignored.\n     * @param {RenderFunction|null} renderer Custom renderer function.\n     * @api\n     */\n    Style.prototype.setRenderer = function (renderer) {\n        this.renderer_ = renderer;\n    };\n    /**\n     * Sets a custom renderer function for this style used\n     * in hit detection.\n     * @param {RenderFunction|null} renderer Custom renderer function.\n     * @api\n     */\n    Style.prototype.setHitDetectionRenderer = function (renderer) {\n        this.hitDetectionRenderer_ = renderer;\n    };\n    /**\n     * Get the custom renderer function that was configured with\n     * {@link #setHitDetectionRenderer} or the `hitDetectionRenderer` constructor option.\n     * @return {RenderFunction|null} Custom renderer function.\n     * @api\n     */\n    Style.prototype.getHitDetectionRenderer = function () {\n        return this.hitDetectionRenderer_;\n    };\n    /**\n     * Get the geometry to be rendered.\n     * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     * Feature property or geometry or function that returns the geometry that will\n     * be rendered with this style.\n     * @api\n     */\n    Style.prototype.getGeometry = function () {\n        return this.geometry_;\n    };\n    /**\n     * Get the function used to generate a geometry for rendering.\n     * @return {!GeometryFunction} Function that is called with a feature\n     * and returns the geometry to render instead of the feature's geometry.\n     * @api\n     */\n    Style.prototype.getGeometryFunction = function () {\n        return this.geometryFunction_;\n    };\n    /**\n     * Get the fill style.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Style.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * Set the fill style.\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Style.prototype.setFill = function (fill) {\n        this.fill_ = fill;\n    };\n    /**\n     * Get the image style.\n     * @return {import(\"./Image.js\").default} Image style.\n     * @api\n     */\n    Style.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Set the image style.\n     * @param {import(\"./Image.js\").default} image Image style.\n     * @api\n     */\n    Style.prototype.setImage = function (image) {\n        this.image_ = image;\n    };\n    /**\n     * Get the stroke style.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Style.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * Set the stroke style.\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Style.prototype.setStroke = function (stroke) {\n        this.stroke_ = stroke;\n    };\n    /**\n     * Get the text style.\n     * @return {import(\"./Text.js\").default} Text style.\n     * @api\n     */\n    Style.prototype.getText = function () {\n        return this.text_;\n    };\n    /**\n     * Set the text style.\n     * @param {import(\"./Text.js\").default} text Text style.\n     * @api\n     */\n    Style.prototype.setText = function (text) {\n        this.text_ = text;\n    };\n    /**\n     * Get the z-index for the style.\n     * @return {number|undefined} ZIndex.\n     * @api\n     */\n    Style.prototype.getZIndex = function () {\n        return this.zIndex_;\n    };\n    /**\n     * Set a geometry that is rendered instead of the feature's geometry.\n     *\n     * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n     *     Feature property or geometry or function returning a geometry to render\n     *     for this style.\n     * @api\n     */\n    Style.prototype.setGeometry = function (geometry) {\n        if (typeof geometry === 'function') {\n            this.geometryFunction_ = geometry;\n        }\n        else if (typeof geometry === 'string') {\n            this.geometryFunction_ = function (feature) {\n                return /** @type {import(\"../geom/Geometry.js\").default} */ (feature.get(geometry));\n            };\n        }\n        else if (!geometry) {\n            this.geometryFunction_ = defaultGeometryFunction;\n        }\n        else if (geometry !== undefined) {\n            this.geometryFunction_ = function () {\n                return /** @type {import(\"../geom/Geometry.js\").default} */ (geometry);\n            };\n        }\n        this.geometry_ = geometry;\n    };\n    /**\n     * Set the z-index.\n     *\n     * @param {number|undefined} zIndex ZIndex.\n     * @api\n     */\n    Style.prototype.setZIndex = function (zIndex) {\n        this.zIndex_ = zIndex;\n    };\n    return Style;\n}());\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n    var styleFunction;\n    if (typeof obj === 'function') {\n        styleFunction = obj;\n    }\n    else {\n        /**\n         * @type {Array<Style>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof ( /** @type {?} */(obj).getZIndex) === 'function', 41); // Expected an `Style` or an array of `Style`\n            var style = /** @type {Style} */ (obj);\n            styles_1 = [style];\n        }\n        styleFunction = function () {\n            return styles_1;\n        };\n    }\n    return styleFunction;\n}\n/**\n * @type {Array<Style>|null}\n */\nvar defaultStyles = null;\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n    // We don't use an immediately-invoked function\n    // and a closure so we don't get an error at script evaluation time in\n    // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n    // canvas.getContext('2d') at construction time, which will cause an.error\n    // in such browsers.)\n    if (!defaultStyles) {\n        var fill = new Fill({\n            color: 'rgba(255,255,255,0.4)',\n        });\n        var stroke = new Stroke({\n            color: '#3399CC',\n            width: 1.25,\n        });\n        defaultStyles = [\n            new Style({\n                image: new CircleStyle({\n                    fill: fill,\n                    stroke: stroke,\n                    radius: 5,\n                }),\n                fill: fill,\n                stroke: stroke,\n            }),\n        ];\n    }\n    return defaultStyles;\n}\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/Geometry.js\").Type, Array<Style>>} Styles\n */\nexport function createEditingStyle() {\n    /** @type {Object<import(\"../geom/Geometry.js\").Type, Array<Style>>} */\n    var styles = {};\n    var white = [255, 255, 255, 1];\n    var blue = [0, 153, 255, 1];\n    var width = 3;\n    styles['Polygon'] = [\n        new Style({\n            fill: new Fill({\n                color: [255, 255, 255, 0.5],\n            }),\n        }),\n    ];\n    styles['MultiPolygon'] = styles['Polygon'];\n    styles['LineString'] = [\n        new Style({\n            stroke: new Stroke({\n                color: white,\n                width: width + 2,\n            }),\n        }),\n        new Style({\n            stroke: new Stroke({\n                color: blue,\n                width: width,\n            }),\n        }),\n    ];\n    styles['MultiLineString'] = styles['LineString'];\n    styles['Circle'] = styles['Polygon'].concat(styles['LineString']);\n    styles['Point'] = [\n        new Style({\n            image: new CircleStyle({\n                radius: width * 2,\n                fill: new Fill({\n                    color: blue,\n                }),\n                stroke: new Stroke({\n                    color: white,\n                    width: width / 2,\n                }),\n            }),\n            zIndex: Infinity,\n        }),\n    ];\n    styles['MultiPoint'] = styles['Point'];\n    styles['GeometryCollection'] = styles['Polygon'].concat(styles['LineString'], styles['Point']);\n    return styles;\n}\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n    return feature.getGeometry();\n}\nexport default Style;\n//# sourceMappingURL=Style.js.map","/**\n * @module ol/style/TextPlacement\n */\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n * @enum {string}\n */\nexport default {\n    POINT: 'point',\n    LINE: 'line',\n};\n//# sourceMappingURL=TextPlacement.js.map","/**\n * @module ol/style/Image\n */\nimport { abstract } from '../util.js';\nimport { toSize } from '../size.js';\n/**\n * @typedef {Object} Options\n * @property {number} opacity Opacity.\n * @property {boolean} rotateWithView If the image should get rotated with the view.\n * @property {number} rotation Rotation.\n * @property {number|import(\"../size.js\").Size} scale Scale.\n * @property {Array<number>} displacement Displacement.\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} declutterMode Declutter mode: `declutter`, `obstacle`, 'none */\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\nvar ImageStyle = /** @class */ (function () {\n    /**\n     * @param {Options} options Options.\n     */\n    function ImageStyle(options) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.opacity_ = options.opacity;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.rotateWithView_ = options.rotateWithView;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.rotation_ = options.rotation;\n        /**\n         * @private\n         * @type {number|import(\"../size.js\").Size}\n         */\n        this.scale_ = options.scale;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        this.scaleArray_ = toSize(options.scale);\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.displacement_ = options.displacement;\n        /**\n         * @private\n         * @type {\"declutter\"|\"obstacle\"|\"none\"|undefined}\n         */\n        this.declutterMode_ = options.declutterMode;\n    }\n    /**\n     * Clones the style.\n     * @return {ImageStyle} The cloned style.\n     * @api\n     */\n    ImageStyle.prototype.clone = function () {\n        var scale = this.getScale();\n        return new ImageStyle({\n            opacity: this.getOpacity(),\n            scale: Array.isArray(scale) ? scale.slice() : scale,\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            displacement: this.getDisplacement().slice(),\n            declutterMode: this.getDeclutterMode(),\n        });\n    };\n    /**\n     * Get the symbolizer opacity.\n     * @return {number} Opacity.\n     * @api\n     */\n    ImageStyle.prototype.getOpacity = function () {\n        return this.opacity_;\n    };\n    /**\n     * Determine whether the symbolizer rotates with the map.\n     * @return {boolean} Rotate with map.\n     * @api\n     */\n    ImageStyle.prototype.getRotateWithView = function () {\n        return this.rotateWithView_;\n    };\n    /**\n     * Get the symoblizer rotation.\n     * @return {number} Rotation.\n     * @api\n     */\n    ImageStyle.prototype.getRotation = function () {\n        return this.rotation_;\n    };\n    /**\n     * Get the symbolizer scale.\n     * @return {number|import(\"../size.js\").Size} Scale.\n     * @api\n     */\n    ImageStyle.prototype.getScale = function () {\n        return this.scale_;\n    };\n    /**\n     * Get the symbolizer scale array.\n     * @return {import(\"../size.js\").Size} Scale array.\n     */\n    ImageStyle.prototype.getScaleArray = function () {\n        return this.scaleArray_;\n    };\n    /**\n     * Get the displacement of the shape\n     * @return {Array<number>} Shape's center displacement\n     * @api\n     */\n    ImageStyle.prototype.getDisplacement = function () {\n        return this.displacement_;\n    };\n    /**\n     * Get the declutter mode of the shape\n     * @return {\"declutter\"|\"obstacle\"|\"none\"|undefined} Shape's declutter mode\n     * @api\n     */\n    ImageStyle.prototype.getDeclutterMode = function () {\n        return this.declutterMode_;\n    };\n    /**\n     * Get the anchor point in pixels. The anchor determines the center point for the\n     * symbolizer.\n     * @abstract\n     * @return {Array<number>} Anchor.\n     */\n    ImageStyle.prototype.getAnchor = function () {\n        return abstract();\n    };\n    /**\n     * Get the image element for the symbolizer.\n     * @abstract\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n     */\n    ImageStyle.prototype.getImage = function (pixelRatio) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n     */\n    ImageStyle.prototype.getHitDetectionImage = function () {\n        return abstract();\n    };\n    /**\n     * Get the image pixel ratio.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {number} Pixel ratio.\n     */\n    ImageStyle.prototype.getPixelRatio = function (pixelRatio) {\n        return 1;\n    };\n    /**\n     * @abstract\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    ImageStyle.prototype.getImageState = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    ImageStyle.prototype.getImageSize = function () {\n        return abstract();\n    };\n    /**\n     * Get the origin of the symbolizer.\n     * @abstract\n     * @return {Array<number>} Origin.\n     */\n    ImageStyle.prototype.getOrigin = function () {\n        return abstract();\n    };\n    /**\n     * Get the size of the symbolizer (in pixels).\n     * @abstract\n     * @return {import(\"../size.js\").Size} Size.\n     */\n    ImageStyle.prototype.getSize = function () {\n        return abstract();\n    };\n    /**\n     * Set the displacement.\n     *\n     * @param {Array<number>} displacement Displacement.\n     * @api\n     */\n    ImageStyle.prototype.setDisplacement = function (displacement) {\n        this.displacement_ = displacement;\n    };\n    /**\n     * Set the opacity.\n     *\n     * @param {number} opacity Opacity.\n     * @api\n     */\n    ImageStyle.prototype.setOpacity = function (opacity) {\n        this.opacity_ = opacity;\n    };\n    /**\n     * Set whether to rotate the style with the view.\n     *\n     * @param {boolean} rotateWithView Rotate with map.\n     * @api\n     */\n    ImageStyle.prototype.setRotateWithView = function (rotateWithView) {\n        this.rotateWithView_ = rotateWithView;\n    };\n    /**\n     * Set the rotation.\n     *\n     * @param {number} rotation Rotation.\n     * @api\n     */\n    ImageStyle.prototype.setRotation = function (rotation) {\n        this.rotation_ = rotation;\n    };\n    /**\n     * Set the scale.\n     *\n     * @param {number|import(\"../size.js\").Size} scale Scale.\n     * @api\n     */\n    ImageStyle.prototype.setScale = function (scale) {\n        this.scale_ = scale;\n        this.scaleArray_ = toSize(scale);\n    };\n    /**\n     * @abstract\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     */\n    ImageStyle.prototype.listenImageChange = function (listener) {\n        abstract();\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageStyle.prototype.load = function () {\n        abstract();\n    };\n    /**\n     * @abstract\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     */\n    ImageStyle.prototype.unlistenImageChange = function (listener) {\n        abstract();\n    };\n    return ImageStyle;\n}());\nexport default ImageStyle;\n//# sourceMappingURL=Image.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Feature\n */\nimport BaseObject from './Object.js';\nimport EventType from './events/EventType.js';\nimport { assert } from './asserts.js';\nimport { listen, unlistenByKey } from './events.js';\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:geometry', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types\n *     |'change:geometry', Return>} FeatureOnSignature\n */\n/***\n * @template Geometry\n * @typedef {Object<string, *> & { geometry?: Geometry }} ObjectWithGeometry\n */\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object~BaseObject} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} [Geometry=import(\"./geom/Geometry.js\").default]\n */\nvar Feature = /** @class */ (function (_super) {\n    __extends(Feature, _super);\n    /**\n     * @param {Geometry|ObjectWithGeometry<Geometry>} [opt_geometryOrProperties]\n     *     You may pass a Geometry object directly, or an object literal containing\n     *     properties. If you pass an object literal, you may include a Geometry\n     *     associated with a `geometry` key.\n     */\n    function Feature(opt_geometryOrProperties) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {FeatureOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {number|string|undefined}\n         */\n        _this.id_ = undefined;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.geometryName_ = 'geometry';\n        /**\n         * User provided style.\n         * @private\n         * @type {import(\"./style/Style.js\").StyleLike}\n         */\n        _this.style_ = null;\n        /**\n         * @private\n         * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n         */\n        _this.styleFunction_ = undefined;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.geometryChangeKey_ = null;\n        _this.addChangeListener(_this.geometryName_, _this.handleGeometryChanged_);\n        if (opt_geometryOrProperties) {\n            if (typeof (\n            /** @type {?} */ (opt_geometryOrProperties).getSimplifiedGeometry) === 'function') {\n                var geometry = /** @type {Geometry} */ (opt_geometryOrProperties);\n                _this.setGeometry(geometry);\n            }\n            else {\n                /** @type {Object<string, *>} */\n                var properties = opt_geometryOrProperties;\n                _this.setProperties(properties);\n            }\n        }\n        return _this;\n    }\n    /**\n     * Clone this feature. If the original feature has a geometry it\n     * is also cloned. The feature id is not set in the clone.\n     * @return {Feature<Geometry>} The clone.\n     * @api\n     */\n    Feature.prototype.clone = function () {\n        var clone = /** @type {Feature<Geometry>} */ (new Feature(this.hasProperties() ? this.getProperties() : null));\n        clone.setGeometryName(this.getGeometryName());\n        var geometry = this.getGeometry();\n        if (geometry) {\n            clone.setGeometry(/** @type {Geometry} */ (geometry.clone()));\n        }\n        var style = this.getStyle();\n        if (style) {\n            clone.setStyle(style);\n        }\n        return clone;\n    };\n    /**\n     * Get the feature's default geometry.  A feature may have any number of named\n     * geometries.  The \"default\" geometry (the one that is rendered by default) is\n     * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n     * @return {Geometry|undefined} The default geometry for the feature.\n     * @api\n     * @observable\n     */\n    Feature.prototype.getGeometry = function () {\n        return /** @type {Geometry|undefined} */ (this.get(this.geometryName_));\n    };\n    /**\n     * Get the feature identifier.  This is a stable identifier for the feature and\n     * is either set when reading data from a remote source or set explicitly by\n     * calling {@link module:ol/Feature~Feature#setId}.\n     * @return {number|string|undefined} Id.\n     * @api\n     */\n    Feature.prototype.getId = function () {\n        return this.id_;\n    };\n    /**\n     * Get the name of the feature's default geometry.  By default, the default\n     * geometry is named `geometry`.\n     * @return {string} Get the property name associated with the default geometry\n     *     for this feature.\n     * @api\n     */\n    Feature.prototype.getGeometryName = function () {\n        return this.geometryName_;\n    };\n    /**\n     * Get the feature's style. Will return what was provided to the\n     * {@link module:ol/Feature~Feature#setStyle} method.\n     * @return {import(\"./style/Style.js\").StyleLike|undefined} The feature style.\n     * @api\n     */\n    Feature.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the feature's style function.\n     * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n     * representing the current style of this feature.\n     * @api\n     */\n    Feature.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChanged_ = function () {\n        if (this.geometryChangeKey_) {\n            unlistenByKey(this.geometryChangeKey_);\n            this.geometryChangeKey_ = null;\n        }\n        var geometry = this.getGeometry();\n        if (geometry) {\n            this.geometryChangeKey_ = listen(geometry, EventType.CHANGE, this.handleGeometryChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * Set the default geometry for the feature.  This will update the property\n     * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n     * @param {Geometry|undefined} geometry The new geometry.\n     * @api\n     * @observable\n     */\n    Feature.prototype.setGeometry = function (geometry) {\n        this.set(this.geometryName_, geometry);\n    };\n    /**\n     * Set the style for the feature to override the layer style.  This can be a\n     * single style object, an array of styles, or a function that takes a\n     * resolution and returns an array of styles. To unset the feature style, call\n     * `setStyle()` without arguments or a falsey value.\n     * @param {import(\"./style/Style.js\").StyleLike} [opt_style] Style for this feature.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setStyle = function (opt_style) {\n        this.style_ = opt_style;\n        this.styleFunction_ = !opt_style\n            ? undefined\n            : createStyleFunction(opt_style);\n        this.changed();\n    };\n    /**\n     * Set the feature id.  The feature id is considered stable and may be used when\n     * requesting features or comparing identifiers returned from a remote source.\n     * The feature id can be used with the\n     * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n     * @param {number|string|undefined} id The feature id.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setId = function (id) {\n        this.id_ = id;\n        this.changed();\n    };\n    /**\n     * Set the property name to be used when getting the feature's default geometry.\n     * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n     * this name will be returned.\n     * @param {string} name The property name of the default geometry.\n     * @api\n     */\n    Feature.prototype.setGeometryName = function (name) {\n        this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_);\n        this.geometryName_ = name;\n        this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n        this.handleGeometryChanged_();\n    };\n    return Feature;\n}(BaseObject));\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n    if (typeof obj === 'function') {\n        return obj;\n    }\n    else {\n        /**\n         * @type {Array<import(\"./style/Style.js\").default>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof ( /** @type {?} */(obj).getZIndex) === 'function', 41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n            var style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n            styles_1 = [style];\n        }\n        return function () {\n            return styles_1;\n        };\n    }\n}\nexport default Feature;\n//# sourceMappingURL=Feature.js.map","/**\n * @module ol/style/RegularShape\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport { asArray } from '../color.js';\nimport { asColorLike } from '../colorlike.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { defaultFillStyle, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, } from '../render/canvas.js';\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] First radius of a star. Ignored if radius is set.\n * @property {number} [radius2] Second radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {Array<number>} [displacement=[0,0]] Displacement of the shape\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale. Unless two dimensional scaling is required a better\n * result may be obtained with appropriate settings for `radius`, `radius1` and `radius2`.\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} [declutterMode] Declutter mode\n */\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle] StrokeStyle.\n * @property {number} strokeWidth StrokeWidth.\n * @property {number} size Size.\n * @property {Array<number>} lineDash LineDash.\n * @property {number} lineDashOffset LineDashOffset.\n * @property {CanvasLineJoin} lineJoin LineJoin.\n * @property {number} miterLimit MiterLimit.\n */\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\nvar RegularShape = /** @class */ (function (_super) {\n    __extends(RegularShape, _super);\n    /**\n     * @param {Options} options Options.\n     */\n    function RegularShape(options) {\n        var _this = this;\n        /**\n         * @type {boolean}\n         */\n        var rotateWithView = options.rotateWithView !== undefined ? options.rotateWithView : false;\n        _this = _super.call(this, {\n            opacity: 1,\n            rotateWithView: rotateWithView,\n            rotation: options.rotation !== undefined ? options.rotation : 0,\n            scale: options.scale !== undefined ? options.scale : 1,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0],\n            declutterMode: options.declutterMode,\n        }) || this;\n        /**\n         * @private\n         * @type {Object<number, HTMLCanvasElement>}\n         */\n        _this.canvas_ = undefined;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.hitDetectionCanvas_ = null;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        _this.fill_ = options.fill !== undefined ? options.fill : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.origin_ = [0, 0];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.points_ = options.points;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.radius_ =\n            options.radius !== undefined ? options.radius : options.radius1;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.radius2_ = options.radius2;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.angle_ = options.angle !== undefined ? options.angle : 0;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        _this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = null;\n        /**\n         * @private\n         * @type {RenderOptions}\n         */\n        _this.renderOptions_ = null;\n        _this.render();\n        return _this;\n    }\n    /**\n     * Clones the style.\n     * @return {RegularShape} The cloned style.\n     * @api\n     */\n    RegularShape.prototype.clone = function () {\n        var scale = this.getScale();\n        var style = new RegularShape({\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            points: this.getPoints(),\n            radius: this.getRadius(),\n            radius2: this.getRadius2(),\n            angle: this.getAngle(),\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            scale: Array.isArray(scale) ? scale.slice() : scale,\n            displacement: this.getDisplacement().slice(),\n            declutterMode: this.getDeclutterMode(),\n        });\n        style.setOpacity(this.getOpacity());\n        return style;\n    };\n    /**\n     * Get the anchor point in pixels. The anchor determines the center point for the\n     * symbolizer.\n     * @return {Array<number>} Anchor.\n     * @api\n     */\n    RegularShape.prototype.getAnchor = function () {\n        var size = this.size_;\n        if (!size) {\n            return null;\n        }\n        var displacement = this.getDisplacement();\n        return [size[0] / 2 - displacement[0], size[1] / 2 + displacement[1]];\n    };\n    /**\n     * Get the angle used in generating the shape.\n     * @return {number} Shape's rotation in radians.\n     * @api\n     */\n    RegularShape.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    /**\n     * Get the fill style for the shape.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    RegularShape.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * Set the fill style.\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    RegularShape.prototype.setFill = function (fill) {\n        this.fill_ = fill;\n        this.render();\n    };\n    /**\n     * @return {HTMLCanvasElement} Image element.\n     */\n    RegularShape.prototype.getHitDetectionImage = function () {\n        if (!this.hitDetectionCanvas_) {\n            this.createHitDetectionCanvas_(this.renderOptions_);\n        }\n        return this.hitDetectionCanvas_;\n    };\n    /**\n     * Get the image icon.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLCanvasElement} Image or Canvas element.\n     * @api\n     */\n    RegularShape.prototype.getImage = function (pixelRatio) {\n        var image = this.canvas_[pixelRatio];\n        if (!image) {\n            var renderOptions = this.renderOptions_;\n            var context = createCanvasContext2D(renderOptions.size * pixelRatio, renderOptions.size * pixelRatio);\n            this.draw_(renderOptions, context, pixelRatio);\n            image = context.canvas;\n            this.canvas_[pixelRatio] = image;\n        }\n        return image;\n    };\n    /**\n     * Get the image pixel ratio.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {number} Pixel ratio.\n     */\n    RegularShape.prototype.getPixelRatio = function (pixelRatio) {\n        return pixelRatio;\n    };\n    /**\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    RegularShape.prototype.getImageSize = function () {\n        return this.size_;\n    };\n    /**\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    RegularShape.prototype.getImageState = function () {\n        return ImageState.LOADED;\n    };\n    /**\n     * Get the origin of the symbolizer.\n     * @return {Array<number>} Origin.\n     * @api\n     */\n    RegularShape.prototype.getOrigin = function () {\n        return this.origin_;\n    };\n    /**\n     * Get the number of points for generating the shape.\n     * @return {number} Number of points for stars and regular polygons.\n     * @api\n     */\n    RegularShape.prototype.getPoints = function () {\n        return this.points_;\n    };\n    /**\n     * Get the (primary) radius for the shape.\n     * @return {number} Radius.\n     * @api\n     */\n    RegularShape.prototype.getRadius = function () {\n        return this.radius_;\n    };\n    /**\n     * Get the secondary radius for the shape.\n     * @return {number|undefined} Radius2.\n     * @api\n     */\n    RegularShape.prototype.getRadius2 = function () {\n        return this.radius2_;\n    };\n    /**\n     * Get the size of the symbolizer (in pixels).\n     * @return {import(\"../size.js\").Size} Size.\n     * @api\n     */\n    RegularShape.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * Get the stroke style for the shape.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    RegularShape.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * Set the stroke style.\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    RegularShape.prototype.setStroke = function (stroke) {\n        this.stroke_ = stroke;\n        this.render();\n    };\n    /**\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     */\n    RegularShape.prototype.listenImageChange = function (listener) { };\n    /**\n     * Load not yet loaded URI.\n     */\n    RegularShape.prototype.load = function () { };\n    /**\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     */\n    RegularShape.prototype.unlistenImageChange = function (listener) { };\n    /**\n     * Calculate additional canvas size needed for the miter.\n     * @param {string} lineJoin Line join\n     * @param {number} strokeWidth Stroke width\n     * @param {number} miterLimit Miter limit\n     * @return {number} Additional canvas size needed\n     * @private\n     */\n    RegularShape.prototype.calculateLineJoinSize_ = function (lineJoin, strokeWidth, miterLimit) {\n        if (strokeWidth === 0 ||\n            this.points_ === Infinity ||\n            (lineJoin !== 'bevel' && lineJoin !== 'miter')) {\n            return strokeWidth;\n        }\n        // m  | ^\n        // i  | |\\                  .\n        // t >|  #\\\n        // e  | |\\ \\              .\n        // r      \\s\\\n        //      |  \\t\\          .                 .\n        //          \\r\\                      .   .\n        //      |    \\o\\      .          .  . . .\n        //          e \\k\\            .  .    . .\n        //      |      \\e\\  .    .  .       . .\n        //       d      \\ \\  .  .          . .\n        //      | _ _a_ _\\#  .            . .\n        //   r1          / `             . .\n        //      |                       . .\n        //       b     /               . .\n        //      |                     . .\n        //           / r2            . .\n        //      |                        .   .\n        //         /                           .   .\n        //      |                                   .   .\n        //       /                                         .   .\n        //       center\n        var r1 = this.radius_;\n        var r2 = this.radius2_ === undefined ? r1 : this.radius2_;\n        if (r1 < r2) {\n            var tmp = r1;\n            r1 = r2;\n            r2 = tmp;\n        }\n        var points = this.radius2_ === undefined ? this.points_ : this.points_ * 2;\n        var alpha = (2 * Math.PI) / points;\n        var a = r2 * Math.sin(alpha);\n        var b = Math.sqrt(r2 * r2 - a * a);\n        var d = r1 - b;\n        var e = Math.sqrt(a * a + d * d);\n        var miterRatio = e / a;\n        if (lineJoin === 'miter' && miterRatio <= miterLimit) {\n            return miterRatio * strokeWidth;\n        }\n        // Calculate the distnce from center to the stroke corner where\n        // it was cut short because of the miter limit.\n        //              l\n        //        ----+---- <= distance from center to here is maxr\n        //       /####|k ##\\\n        //      /#####^#####\\\n        //     /#### /+\\# s #\\\n        //    /### h/+++\\# t #\\\n        //   /### t/+++++\\# r #\\\n        //  /### a/+++++++\\# o #\\\n        // /### p/++ fill +\\# k #\\\n        ///#### /+++++^+++++\\# e #\\\n        //#####/+++++/+\\+++++\\#####\\\n        var k = strokeWidth / 2 / miterRatio;\n        var l = (strokeWidth / 2) * (d / e);\n        var maxr = Math.sqrt((r1 + k) * (r1 + k) + l * l);\n        var bevelAdd = maxr - r1;\n        if (this.radius2_ === undefined || lineJoin === 'bevel') {\n            return bevelAdd * 2;\n        }\n        // If outer miter is over the miter limit the inner miter may reach through the\n        // center and be longer than the bevel, same calculation as above but swap r1 / r2.\n        var aa = r1 * Math.sin(alpha);\n        var bb = Math.sqrt(r1 * r1 - aa * aa);\n        var dd = r2 - bb;\n        var ee = Math.sqrt(aa * aa + dd * dd);\n        var innerMiterRatio = ee / aa;\n        if (innerMiterRatio <= miterLimit) {\n            var innerLength = (innerMiterRatio * strokeWidth) / 2 - r2 - r1;\n            return 2 * Math.max(bevelAdd, innerLength);\n        }\n        return bevelAdd * 2;\n    };\n    /**\n     * @return {RenderOptions}  The render options\n     * @protected\n     */\n    RegularShape.prototype.createRenderOptions = function () {\n        var lineJoin = defaultLineJoin;\n        var miterLimit = 0;\n        var lineDash = null;\n        var lineDashOffset = 0;\n        var strokeStyle;\n        var strokeWidth = 0;\n        if (this.stroke_) {\n            strokeStyle = this.stroke_.getColor();\n            if (strokeStyle === null) {\n                strokeStyle = defaultStrokeStyle;\n            }\n            strokeStyle = asColorLike(strokeStyle);\n            strokeWidth = this.stroke_.getWidth();\n            if (strokeWidth === undefined) {\n                strokeWidth = defaultLineWidth;\n            }\n            lineDash = this.stroke_.getLineDash();\n            lineDashOffset = this.stroke_.getLineDashOffset();\n            lineJoin = this.stroke_.getLineJoin();\n            if (lineJoin === undefined) {\n                lineJoin = defaultLineJoin;\n            }\n            miterLimit = this.stroke_.getMiterLimit();\n            if (miterLimit === undefined) {\n                miterLimit = defaultMiterLimit;\n            }\n        }\n        var add = this.calculateLineJoinSize_(lineJoin, strokeWidth, miterLimit);\n        var maxRadius = Math.max(this.radius_, this.radius2_ || 0);\n        var size = Math.ceil(2 * maxRadius + add);\n        return {\n            strokeStyle: strokeStyle,\n            strokeWidth: strokeWidth,\n            size: size,\n            lineDash: lineDash,\n            lineDashOffset: lineDashOffset,\n            lineJoin: lineJoin,\n            miterLimit: miterLimit,\n        };\n    };\n    /**\n     * @protected\n     */\n    RegularShape.prototype.render = function () {\n        this.renderOptions_ = this.createRenderOptions();\n        var size = this.renderOptions_.size;\n        this.canvas_ = {};\n        this.size_ = [size, size];\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     * @param {CanvasRenderingContext2D} context The rendering context.\n     * @param {number} pixelRatio The pixel ratio.\n     */\n    RegularShape.prototype.draw_ = function (renderOptions, context, pixelRatio) {\n        context.scale(pixelRatio, pixelRatio);\n        // set origin to canvas center\n        context.translate(renderOptions.size / 2, renderOptions.size / 2);\n        this.createPath_(context);\n        if (this.fill_) {\n            var color = this.fill_.getColor();\n            if (color === null) {\n                color = defaultFillStyle;\n            }\n            context.fillStyle = asColorLike(color);\n            context.fill();\n        }\n        if (this.stroke_) {\n            context.strokeStyle = renderOptions.strokeStyle;\n            context.lineWidth = renderOptions.strokeWidth;\n            if (context.setLineDash && renderOptions.lineDash) {\n                context.setLineDash(renderOptions.lineDash);\n                context.lineDashOffset = renderOptions.lineDashOffset;\n            }\n            context.lineJoin = renderOptions.lineJoin;\n            context.miterLimit = renderOptions.miterLimit;\n            context.stroke();\n        }\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     */\n    RegularShape.prototype.createHitDetectionCanvas_ = function (renderOptions) {\n        if (this.fill_) {\n            var color = this.fill_.getColor();\n            // determine if fill is transparent (or pattern or gradient)\n            var opacity = 0;\n            if (typeof color === 'string') {\n                color = asArray(color);\n            }\n            if (color === null) {\n                opacity = 1;\n            }\n            else if (Array.isArray(color)) {\n                opacity = color.length === 4 ? color[3] : 1;\n            }\n            if (opacity === 0) {\n                // if a transparent fill style is set, create an extra hit-detection image\n                // with a default fill style\n                var context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n                this.hitDetectionCanvas_ = context.canvas;\n                this.drawHitDetectionCanvas_(renderOptions, context);\n            }\n        }\n        if (!this.hitDetectionCanvas_) {\n            this.hitDetectionCanvas_ = this.getImage(1);\n        }\n    };\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} context The context to draw in.\n     */\n    RegularShape.prototype.createPath_ = function (context) {\n        var points = this.points_;\n        var radius = this.radius_;\n        if (points === Infinity) {\n            context.arc(0, 0, radius, 0, 2 * Math.PI);\n        }\n        else {\n            var radius2 = this.radius2_ === undefined ? radius : this.radius2_;\n            if (this.radius2_ !== undefined) {\n                points *= 2;\n            }\n            var startAngle = this.angle_ - Math.PI / 2;\n            var step = (2 * Math.PI) / points;\n            for (var i = 0; i < points; i++) {\n                var angle0 = startAngle + i * step;\n                var radiusC = i % 2 === 0 ? radius : radius2;\n                context.lineTo(radiusC * Math.cos(angle0), radiusC * Math.sin(angle0));\n            }\n            context.closePath();\n        }\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     * @param {CanvasRenderingContext2D} context The context.\n     */\n    RegularShape.prototype.drawHitDetectionCanvas_ = function (renderOptions, context) {\n        // set origin to canvas center\n        context.translate(renderOptions.size / 2, renderOptions.size / 2);\n        this.createPath_(context);\n        context.fillStyle = defaultFillStyle;\n        context.fill();\n        if (this.stroke_) {\n            context.strokeStyle = renderOptions.strokeStyle;\n            context.lineWidth = renderOptions.strokeWidth;\n            if (renderOptions.lineDash) {\n                context.setLineDash(renderOptions.lineDash);\n                context.lineDashOffset = renderOptions.lineDashOffset;\n            }\n            context.lineJoin = renderOptions.lineJoin;\n            context.miterLimit = renderOptions.miterLimit;\n            context.stroke();\n        }\n    };\n    return RegularShape;\n}(ImageStyle));\nexport default RegularShape;\n//# sourceMappingURL=RegularShape.js.map","/**\n * @module ol/style/Circle\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport RegularShape from './RegularShape.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {Array<number>} [displacement=[0,0]] displacement\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale. A two dimensional scale will produce an ellipse.\n * Unless two dimensional scaling is required a better result may be obtained with an appropriate setting for `radius`.\n * @property {number} [rotation=0] Rotation in radians\n * (positive rotation clockwise, meaningful only when used in conjunction with a two dimensional scale).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view\n * (meaningful only when used in conjunction with a two dimensional scale).\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} [declutterMode] Declutter mode\n */\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\nvar CircleStyle = /** @class */ (function (_super) {\n    __extends(CircleStyle, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function CircleStyle(opt_options) {\n        var options = opt_options ? opt_options : {};\n        return _super.call(this, {\n            points: Infinity,\n            fill: options.fill,\n            radius: options.radius,\n            stroke: options.stroke,\n            scale: options.scale !== undefined ? options.scale : 1,\n            rotation: options.rotation !== undefined ? options.rotation : 0,\n            rotateWithView: options.rotateWithView !== undefined ? options.rotateWithView : false,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0],\n            declutterMode: options.declutterMode,\n        }) || this;\n    }\n    /**\n     * Clones the style.\n     * @return {CircleStyle} The cloned style.\n     * @api\n     */\n    CircleStyle.prototype.clone = function () {\n        var scale = this.getScale();\n        var style = new CircleStyle({\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            radius: this.getRadius(),\n            scale: Array.isArray(scale) ? scale.slice() : scale,\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            displacement: this.getDisplacement().slice(),\n            declutterMode: this.getDeclutterMode(),\n        });\n        style.setOpacity(this.getOpacity());\n        return style;\n    };\n    /**\n     * Set the circle radius.\n     *\n     * @param {number} radius Circle radius.\n     * @api\n     */\n    CircleStyle.prototype.setRadius = function (radius) {\n        this.radius_ = radius;\n        this.render();\n    };\n    return CircleStyle;\n}(RegularShape));\nexport default CircleStyle;\n//# sourceMappingURL=Circle.js.map","/**\n * @module ol/style/Stroke\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {CanvasLineCap} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `null` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nvar Stroke = /** @class */ (function () {\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Stroke(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n         */\n        this.color_ = options.color !== undefined ? options.color : null;\n        /**\n         * @private\n         * @type {CanvasLineCap|undefined}\n         */\n        this.lineCap_ = options.lineCap;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.lineDashOffset_ = options.lineDashOffset;\n        /**\n         * @private\n         * @type {CanvasLineJoin|undefined}\n         */\n        this.lineJoin_ = options.lineJoin;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.miterLimit_ = options.miterLimit;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.width_ = options.width;\n    }\n    /**\n     * Clones the style.\n     * @return {Stroke} The cloned style.\n     * @api\n     */\n    Stroke.prototype.clone = function () {\n        var color = this.getColor();\n        return new Stroke({\n            color: Array.isArray(color) ? color.slice() : color || undefined,\n            lineCap: this.getLineCap(),\n            lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n            lineDashOffset: this.getLineDashOffset(),\n            lineJoin: this.getLineJoin(),\n            miterLimit: this.getMiterLimit(),\n            width: this.getWidth(),\n        });\n    };\n    /**\n     * Get the stroke color.\n     * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n     * @api\n     */\n    Stroke.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Get the line cap type for the stroke.\n     * @return {CanvasLineCap|undefined} Line cap.\n     * @api\n     */\n    Stroke.prototype.getLineCap = function () {\n        return this.lineCap_;\n    };\n    /**\n     * Get the line dash style for the stroke.\n     * @return {Array<number>} Line dash.\n     * @api\n     */\n    Stroke.prototype.getLineDash = function () {\n        return this.lineDash_;\n    };\n    /**\n     * Get the line dash offset for the stroke.\n     * @return {number|undefined} Line dash offset.\n     * @api\n     */\n    Stroke.prototype.getLineDashOffset = function () {\n        return this.lineDashOffset_;\n    };\n    /**\n     * Get the line join type for the stroke.\n     * @return {CanvasLineJoin|undefined} Line join.\n     * @api\n     */\n    Stroke.prototype.getLineJoin = function () {\n        return this.lineJoin_;\n    };\n    /**\n     * Get the miter limit for the stroke.\n     * @return {number|undefined} Miter limit.\n     * @api\n     */\n    Stroke.prototype.getMiterLimit = function () {\n        return this.miterLimit_;\n    };\n    /**\n     * Get the stroke width.\n     * @return {number|undefined} Width.\n     * @api\n     */\n    Stroke.prototype.getWidth = function () {\n        return this.width_;\n    };\n    /**\n     * Set the color.\n     *\n     * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n     * @api\n     */\n    Stroke.prototype.setColor = function (color) {\n        this.color_ = color;\n    };\n    /**\n     * Set the line cap.\n     *\n     * @param {CanvasLineCap|undefined} lineCap Line cap.\n     * @api\n     */\n    Stroke.prototype.setLineCap = function (lineCap) {\n        this.lineCap_ = lineCap;\n    };\n    /**\n     * Set the line dash.\n     *\n     * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n     * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n     * property will have no visual effect in these browsers.\n     *\n     * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n     *\n     * @param {Array<number>} lineDash Line dash.\n     * @api\n     */\n    Stroke.prototype.setLineDash = function (lineDash) {\n        this.lineDash_ = lineDash;\n    };\n    /**\n     * Set the line dash offset.\n     *\n     * @param {number|undefined} lineDashOffset Line dash offset.\n     * @api\n     */\n    Stroke.prototype.setLineDashOffset = function (lineDashOffset) {\n        this.lineDashOffset_ = lineDashOffset;\n    };\n    /**\n     * Set the line join.\n     *\n     * @param {CanvasLineJoin|undefined} lineJoin Line join.\n     * @api\n     */\n    Stroke.prototype.setLineJoin = function (lineJoin) {\n        this.lineJoin_ = lineJoin;\n    };\n    /**\n     * Set the miter limit.\n     *\n     * @param {number|undefined} miterLimit Miter limit.\n     * @api\n     */\n    Stroke.prototype.setMiterLimit = function (miterLimit) {\n        this.miterLimit_ = miterLimit;\n    };\n    /**\n     * Set the width.\n     *\n     * @param {number|undefined} width Width.\n     * @api\n     */\n    Stroke.prototype.setWidth = function (width) {\n        this.width_ = width;\n    };\n    return Stroke;\n}());\nexport default Stroke;\n//# sourceMappingURL=Stroke.js.map","/**\n * @module ol/colorlike\n */\nimport { toString } from './color.js';\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n/**\n * @param {import(\"./color.js\").Color|ColorLike} color Color.\n * @return {ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n    if (Array.isArray(color)) {\n        return toString(color);\n    }\n    else {\n        return color;\n    }\n}\n//# sourceMappingURL=colorlike.js.map","/**\n * @module ol/loadingstrategy\n */\nimport { fromUserExtent, fromUserResolution, toUserExtent } from './proj.js';\n/**\n * Strategy function for loading all features with a single request.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function all(extent, resolution) {\n    return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function bbox(extent, resolution) {\n    return [extent];\n}\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {function(import(\"./extent.js\").Extent, number, import(\"./proj.js\").Projection): Array<import(\"./extent.js\").Extent>} Loading strategy.\n * @api\n */\nexport function tile(tileGrid) {\n    return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj.js\").Projection} projection Projection.\n     * @return {Array<import(\"./extent.js\").Extent>} Extents.\n     */\n    function (extent, resolution, projection) {\n        var z = tileGrid.getZForResolution(fromUserResolution(resolution, projection));\n        var tileRange = tileGrid.getTileRangeForExtentAndZ(fromUserExtent(extent, projection), z);\n        /** @type {Array<import(\"./extent.js\").Extent>} */\n        var extents = [];\n        /** @type {import(\"./tilecoord.js\").TileCoord} */\n        var tileCoord = [z, 0, 0];\n        for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n            for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n                extents.push(toUserExtent(tileGrid.getTileCoordExtent(tileCoord), projection));\n            }\n        }\n        return extents;\n    });\n}\n//# sourceMappingURL=loadingstrategy.js.map","/**\n * @module ol/featureloader\n */\nimport { VOID } from './functions.js';\n/**\n *\n * @type {boolean}\n * @private\n */\nvar withCredentials = false;\n/**\n * {@link module:ol/source/Vector~VectorSource} sources use a function of this type to\n * load features.\n *\n * This function takes up to 5 arguments. These are an {@link module:ol/extent~Extent} representing\n * the area to be loaded, a `{number}` representing the resolution (map units per pixel), an\n * {@link module:ol/proj/Projection~Projection} for the projection, an optional success callback that should get\n * the loaded features passed as an argument and an optional failure callback with no arguments. If\n * the callbacks are not used, the corresponding vector source will not fire `'featuresloadend'` and\n * `'featuresloaderror'` events. `this` within the function is bound to the\n * {@link module:ol/source/Vector~VectorSource} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n * @typedef {function(this:(import(\"./source/Vector\").default|import(\"./VectorTile.js\").default),\n *           import(\"./extent.js\").Extent,\n *           number,\n *           import(\"./proj/Projection.js\").default,\n *           function(Array<import(\"./Feature.js\").default>): void=,\n *           function(): void=): void} FeatureLoader\n * @api\n */\n/**\n * {@link module:ol/source/Vector~VectorSource} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection~Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(import(\"./extent.js\").Extent, number, import(\"./proj/Projection.js\").default): string} FeatureUrlFunction\n * @api\n */\n/**\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @param {function(Array<import(\"./Feature.js\").default>, import(\"./proj/Projection.js\").default): void} success Success\n *      Function called with the loaded features and optionally with the data projection.\n * @param {function(): void} failure Failure\n *      Function called when loading failed.\n */\nexport function loadFeaturesXhr(url, format, extent, resolution, projection, success, failure) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', typeof url === 'function' ? url(extent, resolution, projection) : url, true);\n    if (format.getType() == 'arraybuffer') {\n        xhr.responseType = 'arraybuffer';\n    }\n    xhr.withCredentials = withCredentials;\n    /**\n     * @param {Event} event Event.\n     * @private\n     */\n    xhr.onload = function (event) {\n        // status will be 0 for file:// urls\n        if (!xhr.status || (xhr.status >= 200 && xhr.status < 300)) {\n            var type = format.getType();\n            /** @type {Document|Node|Object|string|undefined} */\n            var source = void 0;\n            if (type == 'json' || type == 'text') {\n                source = xhr.responseText;\n            }\n            else if (type == 'xml') {\n                source = xhr.responseXML;\n                if (!source) {\n                    source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n                }\n            }\n            else if (type == 'arraybuffer') {\n                source = /** @type {ArrayBuffer} */ (xhr.response);\n            }\n            if (source) {\n                success(\n                /** @type {Array<import(\"./Feature.js\").default>} */\n                (format.readFeatures(source, {\n                    extent: extent,\n                    featureProjection: projection,\n                })), format.readProjection(source));\n            }\n            else {\n                failure();\n            }\n        }\n        else {\n            failure();\n        }\n    };\n    /**\n     * @private\n     */\n    xhr.onerror = failure;\n    xhr.send();\n}\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @return {FeatureLoader} The feature loader.\n * @api\n */\nexport function xhr(url, format) {\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @param {function(Array<import(\"./Feature.js\").default>): void} [success] Success\n     *      Function called when loading succeeded.\n     * @param {function(): void} [failure] Failure\n     *      Function called when loading failed.\n     * @this {import(\"./source/Vector\").default}\n     */\n    return function (extent, resolution, projection, success, failure) {\n        var source = /** @type {import(\"./source/Vector\").default} */ (this);\n        loadFeaturesXhr(url, format, extent, resolution, projection, \n        /**\n         * @param {Array<import(\"./Feature.js\").default>} features The loaded features.\n         * @param {import(\"./proj/Projection.js\").default} dataProjection Data\n         * projection.\n         */\n        function (features, dataProjection) {\n            source.addFeatures(features);\n            if (success !== undefined) {\n                success(features);\n            }\n        }, \n        /* FIXME handle error */ failure ? failure : VOID);\n    };\n}\n/**\n * Setter for the withCredentials configuration for the XHR.\n *\n * @param {boolean} xhrWithCredentials The value of withCredentials to set.\n * Compare https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/\n * @api\n */\nexport function setWithCredentials(xhrWithCredentials) {\n    withCredentials = xhrWithCredentials;\n}\n//# sourceMappingURL=featureloader.js.map","/**\n * @module ol/source/Vector\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport RBush from '../structs/RBush.js';\nimport Source from './Source.js';\nimport VectorEventType from './VectorEventType.js';\nimport { TRUE, VOID } from '../functions.js';\nimport { all as allStrategy } from '../loadingstrategy.js';\nimport { assert } from '../asserts.js';\nimport { containsExtent, equals, wrapAndSliceX } from '../extent.js';\nimport { extend } from '../array.js';\nimport { getUid } from '../util.js';\nimport { getValues, isEmpty } from '../obj.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport { xhr } from '../featureloader.js';\n/**\n * A function that takes an {@link module:ol/extent~Extent} and a resolution as arguments, and\n * returns an array of {@link module:ol/extent~Extent} with the extents to load. Usually this\n * is one of the standard {@link module:ol/loadingstrategy} strategies.\n *\n * @typedef {function(import(\"../extent.js\").Extent, number, import(\"../proj/Projection.js\").default): Array<import(\"../extent.js\").Extent>} LoadingStrategy\n * @api\n */\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Vector~VectorSource} instances are instances of this\n * type.\n * @template {import(\"../geom/Geometry.js\").default} [Geometry=import(\"../geom/Geometry.js\").default]\n */\nvar VectorSourceEvent = /** @class */ (function (_super) {\n    __extends(VectorSourceEvent, _super);\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../Feature.js\").default<Geometry>} [opt_feature] Feature.\n     * @param {Array<import(\"../Feature.js\").default<Geometry>>} [opt_features] Features.\n     */\n    function VectorSourceEvent(type, opt_feature, opt_features) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The added or removed feature for the `ADDFEATURE` and `REMOVEFEATURE` events, `undefined` otherwise.\n         * @type {import(\"../Feature.js\").default<Geometry>|undefined}\n         * @api\n         */\n        _this.feature = opt_feature;\n        /**\n         * The loaded features for the `FEATURESLOADED` event, `undefined` otherwise.\n         * @type {Array<import(\"../Feature.js\").default<Geometry>>|undefined}\n         * @api\n         */\n        _this.features = opt_features;\n        return _this;\n    }\n    return VectorSourceEvent;\n}(Event));\nexport { VectorSourceEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./VectorEventType\").VectorSourceEventTypes, VectorSourceEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     import(\"./VectorEventType\").VectorSourceEventTypes, Return>} VectorSourceOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {Array<import(\"../Feature.js\").default>|Collection<import(\"../Feature.js\").default>} [features]\n * Features. If provided as {@link module:ol/Collection~Collection}, the features in the source\n * and the collection will stay in sync.\n * @property {import(\"../format/Feature.js\").default} [format] The feature format used by the XHR\n * feature loader when `url` is set. Required if `url` is set, otherwise ignored.\n * @property {import(\"../featureloader.js\").FeatureLoader} [loader]\n * The loader function used to load features, from a remote source for example.\n * If this is not set and `url` is set, the source will create and use an XHR\n * feature loader. The `'featuresloadend'` and `'featuresloaderror'` events\n * will only fire if the `success` and `failure` callbacks are used.\n *\n * Example:\n *\n * ```js\n * import {Vector} from 'ol/source';\n * import {GeoJSON} from 'ol/format';\n * import {bbox} from 'ol/loadingstrategy';\n *\n * var vectorSource = new Vector({\n *   format: new GeoJSON(),\n *   loader: function(extent, resolution, projection, success, failure) {\n *      var proj = projection.getCode();\n *      var url = 'https://ahocevar.com/geoserver/wfs?service=WFS&' +\n *          'version=1.1.0&request=GetFeature&typename=osm:water_areas&' +\n *          'outputFormat=application/json&srsname=' + proj + '&' +\n *          'bbox=' + extent.join(',') + ',' + proj;\n *      var xhr = new XMLHttpRequest();\n *      xhr.open('GET', url);\n *      var onError = function() {\n *        vectorSource.removeLoadedExtent(extent);\n *        failure();\n *      }\n *      xhr.onerror = onError;\n *      xhr.onload = function() {\n *        if (xhr.status == 200) {\n *          var features = vectorSource.getFormat().readFeatures(xhr.responseText);\n *          vectorSource.addFeatures(features);\n *          success(features);\n *        } else {\n *          onError();\n *        }\n *      }\n *      xhr.send();\n *    },\n *    strategy: bbox\n *  });\n * ```\n * @property {boolean} [overlaps=true] This source may have overlapping geometries.\n * Setting this to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {LoadingStrategy} [strategy] The loading strategy to use.\n * By default an {@link module:ol/loadingstrategy.all}\n * strategy is used, a one-off strategy which loads all features at once.\n * @property {string|import(\"../featureloader.js\").FeatureUrlFunction} [url]\n * Setting this option instructs the source to load features using an XHR loader\n * (see {@link module:ol/featureloader.xhr}). Use a `string` and an\n * {@link module:ol/loadingstrategy.all} for a one-off download of all features from\n * the given URL. Use a {@link module:ol/featureloader~FeatureUrlFunction} to generate the url with\n * other loading strategies.\n * Requires `format` to be set as well.\n * When default XHR feature loader is provided, the features will\n * be transformed from the data projection to the view projection\n * during parsing. If your remote data source does not advertise its projection\n * properly, this transformation will be incorrect. For some formats, the\n * default projection (usually EPSG:4326) can be overridden by setting the\n * dataProjection constructor option on the format.\n * Note that if a source contains non-feature data, such as a GeoJSON geometry\n * or a KML NetworkLink, these will be ignored. Use a custom loader to load these.\n * @property {boolean} [useSpatialIndex=true]\n * By default, an RTree is used as spatial index. When features are removed and\n * added frequently, and the total number of features is low, setting this to\n * `false` may improve performance.\n *\n * Note that\n * {@link module:ol/source/Vector~VectorSource#getFeaturesInExtent},\n * {@link module:ol/source/Vector~VectorSource#getClosestFeatureToCoordinate} and\n * {@link module:ol/source/Vector~VectorSource#getExtent} cannot be used when `useSpatialIndex` is\n * set to `false`, and {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent} will loop\n * through all features.\n *\n * When set to `false`, the features will be maintained in an\n * {@link module:ol/Collection~Collection}, which can be retrieved through\n * {@link module:ol/source/Vector~VectorSource#getFeaturesCollection}.\n * @property {boolean} [wrapX=true] Wrap the world horizontally. For vector editing across the\n * -180 and 180 meridians to work properly, this should be set to `false`. The\n * resulting geometry coordinates will then exceed the world bounds.\n */\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link module:ol/source/VectorTile~VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @fires VectorSourceEvent\n * @api\n * @template {import(\"../geom/Geometry.js\").default} [Geometry=import(\"../geom/Geometry.js\").default]\n */\nvar VectorSource = /** @class */ (function (_super) {\n    __extends(VectorSource, _super);\n    /**\n     * @param {Options} [opt_options] Vector source options.\n     */\n    function VectorSource(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            interpolate: true,\n            projection: undefined,\n            state: 'ready',\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n        }) || this;\n        /***\n         * @type {VectorSourceOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {VectorSourceOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {VectorSourceOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {import(\"../featureloader.js\").FeatureLoader}\n         */\n        _this.loader_ = VOID;\n        /**\n         * @private\n         * @type {import(\"../format/Feature.js\").default|undefined}\n         */\n        _this.format_ = options.format;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.overlaps_ = options.overlaps === undefined ? true : options.overlaps;\n        /**\n         * @private\n         * @type {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined}\n         */\n        _this.url_ = options.url;\n        if (options.loader !== undefined) {\n            _this.loader_ = options.loader;\n        }\n        else if (_this.url_ !== undefined) {\n            assert(_this.format_, 7); // `format` must be set when `url` is set\n            // create a XHR feature loader for \"url\" and \"format\"\n            _this.loader_ = xhr(_this.url_, \n            /** @type {import(\"../format/Feature.js\").default} */ (_this.format_));\n        }\n        /**\n         * @private\n         * @type {LoadingStrategy}\n         */\n        _this.strategy_ =\n            options.strategy !== undefined ? options.strategy : allStrategy;\n        var useSpatialIndex = options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n        /**\n         * @private\n         * @type {RBush<import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.featuresRtree_ = useSpatialIndex ? new RBush() : null;\n        /**\n         * @private\n         * @type {RBush<{extent: import(\"../extent.js\").Extent}>}\n         */\n        _this.loadedExtentsRtree_ = new RBush();\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.loadingExtentsCount_ = 0;\n        /**\n         * @private\n         * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.nullGeometryFeatures_ = {};\n        /**\n         * A lookup of features by id (the return from feature.getId()).\n         * @private\n         * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.idIndex_ = {};\n        /**\n         * A lookup of features by uid (using getUid(feature)).\n         * @private\n         * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.uidIndex_ = {};\n        /**\n         * @private\n         * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n         */\n        _this.featureChangeKeys_ = {};\n        /**\n         * @private\n         * @type {Collection<import(\"../Feature.js\").default<Geometry>>|null}\n         */\n        _this.featuresCollection_ = null;\n        var collection, features;\n        if (Array.isArray(options.features)) {\n            features =\n                /** @type {Array<import(\"../Feature.js\").default<Geometry>>} */ (options.features);\n        }\n        else if (options.features) {\n            collection =\n                /** @type {Collection<import(\"../Feature.js\").default<Geometry>>} */ (options.features);\n            features = collection.getArray();\n        }\n        if (!useSpatialIndex && collection === undefined) {\n            collection = new Collection(features);\n        }\n        if (features !== undefined) {\n            _this.addFeaturesInternal(features);\n        }\n        if (collection !== undefined) {\n            _this.bindFeaturesCollection_(collection);\n        }\n        return _this;\n    }\n    /**\n     * Add a single feature to the source.  If you want to add a batch of features\n     * at once, call {@link module:ol/source/Vector~VectorSource#addFeatures #addFeatures()}\n     * instead. A feature will not be added to the source if feature with\n     * the same id is already there. The reason for this behavior is to avoid\n     * feature duplication when using bbox or tile loading strategies.\n     * Note: this also applies if an {@link module:ol/Collection~Collection} is used for features,\n     * meaning that if a feature with a duplicate id is added in the collection, it will\n     * be removed from it right away.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to add.\n     * @api\n     */\n    VectorSource.prototype.addFeature = function (feature) {\n        this.addFeatureInternal(feature);\n        this.changed();\n    };\n    /**\n     * Add a feature without firing a `change` event.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @protected\n     */\n    VectorSource.prototype.addFeatureInternal = function (feature) {\n        var featureKey = getUid(feature);\n        if (!this.addToIndex_(featureKey, feature)) {\n            if (this.featuresCollection_) {\n                this.featuresCollection_.remove(feature);\n            }\n            return;\n        }\n        this.setupChangeEvents_(featureKey, feature);\n        var geometry = feature.getGeometry();\n        if (geometry) {\n            var extent = geometry.getExtent();\n            if (this.featuresRtree_) {\n                this.featuresRtree_.insert(extent, feature);\n            }\n        }\n        else {\n            this.nullGeometryFeatures_[featureKey] = feature;\n        }\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, feature));\n    };\n    /**\n     * @param {string} featureKey Unique identifier for the feature.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n     * @private\n     */\n    VectorSource.prototype.setupChangeEvents_ = function (featureKey, feature) {\n        this.featureChangeKeys_[featureKey] = [\n            listen(feature, EventType.CHANGE, this.handleFeatureChange_, this),\n            listen(feature, ObjectEventType.PROPERTYCHANGE, this.handleFeatureChange_, this),\n        ];\n    };\n    /**\n     * @param {string} featureKey Unique identifier for the feature.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n     * @return {boolean} The feature is \"valid\", in the sense that it is also a\n     *     candidate for insertion into the Rtree.\n     * @private\n     */\n    VectorSource.prototype.addToIndex_ = function (featureKey, feature) {\n        var valid = true;\n        var id = feature.getId();\n        if (id !== undefined) {\n            if (!(id.toString() in this.idIndex_)) {\n                this.idIndex_[id.toString()] = feature;\n            }\n            else {\n                valid = false;\n            }\n        }\n        if (valid) {\n            assert(!(featureKey in this.uidIndex_), 30); // The passed `feature` was already added to the source\n            this.uidIndex_[featureKey] = feature;\n        }\n        return valid;\n    };\n    /**\n     * Add a batch of features to the source.\n     * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features to add.\n     * @api\n     */\n    VectorSource.prototype.addFeatures = function (features) {\n        this.addFeaturesInternal(features);\n        this.changed();\n    };\n    /**\n     * Add features without firing a `change` event.\n     * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features.\n     * @protected\n     */\n    VectorSource.prototype.addFeaturesInternal = function (features) {\n        var extents = [];\n        var newFeatures = [];\n        var geometryFeatures = [];\n        for (var i = 0, length_1 = features.length; i < length_1; i++) {\n            var feature = features[i];\n            var featureKey = getUid(feature);\n            if (this.addToIndex_(featureKey, feature)) {\n                newFeatures.push(feature);\n            }\n        }\n        for (var i = 0, length_2 = newFeatures.length; i < length_2; i++) {\n            var feature = newFeatures[i];\n            var featureKey = getUid(feature);\n            this.setupChangeEvents_(featureKey, feature);\n            var geometry = feature.getGeometry();\n            if (geometry) {\n                var extent = geometry.getExtent();\n                extents.push(extent);\n                geometryFeatures.push(feature);\n            }\n            else {\n                this.nullGeometryFeatures_[featureKey] = feature;\n            }\n        }\n        if (this.featuresRtree_) {\n            this.featuresRtree_.load(extents, geometryFeatures);\n        }\n        if (this.hasListener(VectorEventType.ADDFEATURE)) {\n            for (var i = 0, length_3 = newFeatures.length; i < length_3; i++) {\n                this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, newFeatures[i]));\n            }\n        }\n    };\n    /**\n     * @param {!Collection<import(\"../Feature.js\").default<Geometry>>} collection Collection.\n     * @private\n     */\n    VectorSource.prototype.bindFeaturesCollection_ = function (collection) {\n        var modifyingCollection = false;\n        this.addEventListener(VectorEventType.ADDFEATURE, \n        /**\n         * @param {VectorSourceEvent<Geometry>} evt The vector source event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                collection.push(evt.feature);\n                modifyingCollection = false;\n            }\n        });\n        this.addEventListener(VectorEventType.REMOVEFEATURE, \n        /**\n         * @param {VectorSourceEvent<Geometry>} evt The vector source event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                collection.remove(evt.feature);\n                modifyingCollection = false;\n            }\n        });\n        collection.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                this.addFeature(\n                /** @type {import(\"../Feature.js\").default<Geometry>} */ (evt.element));\n                modifyingCollection = false;\n            }\n        }.bind(this));\n        collection.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                this.removeFeature(\n                /** @type {import(\"../Feature.js\").default<Geometry>} */ (evt.element));\n                modifyingCollection = false;\n            }\n        }.bind(this));\n        this.featuresCollection_ = collection;\n    };\n    /**\n     * Remove all features from the source.\n     * @param {boolean} [opt_fast] Skip dispatching of {@link module:ol/source/Vector.VectorSourceEvent#event:removefeature removefeature} events.\n     * @api\n     */\n    VectorSource.prototype.clear = function (opt_fast) {\n        if (opt_fast) {\n            for (var featureId in this.featureChangeKeys_) {\n                var keys = this.featureChangeKeys_[featureId];\n                keys.forEach(unlistenByKey);\n            }\n            if (!this.featuresCollection_) {\n                this.featureChangeKeys_ = {};\n                this.idIndex_ = {};\n                this.uidIndex_ = {};\n            }\n        }\n        else {\n            if (this.featuresRtree_) {\n                var removeAndIgnoreReturn = function (feature) {\n                    this.removeFeatureInternal(feature);\n                }.bind(this);\n                this.featuresRtree_.forEach(removeAndIgnoreReturn);\n                for (var id in this.nullGeometryFeatures_) {\n                    this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n                }\n            }\n        }\n        if (this.featuresCollection_) {\n            this.featuresCollection_.clear();\n        }\n        if (this.featuresRtree_) {\n            this.featuresRtree_.clear();\n        }\n        this.nullGeometryFeatures_ = {};\n        var clearEvent = new VectorSourceEvent(VectorEventType.CLEAR);\n        this.dispatchEvent(clearEvent);\n        this.changed();\n    };\n    /**\n     * Iterate through all features on the source, calling the provided callback\n     * with each one.  If the callback returns any \"truthy\" value, iteration will\n     * stop and the function will return the same value.\n     * Note: this function only iterate through the feature that have a defined geometry.\n     *\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     on the source.  Return a truthy value to stop iteration.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     * @api\n     */\n    VectorSource.prototype.forEachFeature = function (callback) {\n        if (this.featuresRtree_) {\n            return this.featuresRtree_.forEach(callback);\n        }\n        else if (this.featuresCollection_) {\n            this.featuresCollection_.forEach(callback);\n        }\n    };\n    /**\n     * Iterate through all features whose geometries contain the provided\n     * coordinate, calling the callback with each feature.  If the callback returns\n     * a \"truthy\" value, iteration will stop and the function will return the same\n     * value.\n     *\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     whose goemetry contains the provided coordinate.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     */\n    VectorSource.prototype.forEachFeatureAtCoordinateDirect = function (coordinate, callback) {\n        var extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n        return this.forEachFeatureInExtent(extent, function (feature) {\n            var geometry = feature.getGeometry();\n            if (geometry.intersectsCoordinate(coordinate)) {\n                return callback(feature);\n            }\n            else {\n                return undefined;\n            }\n        });\n    };\n    /**\n     * Iterate through all features whose bounding box intersects the provided\n     * extent (note that the feature's geometry may not intersect the extent),\n     * calling the callback with each feature.  If the callback returns a \"truthy\"\n     * value, iteration will stop and the function will return the same value.\n     *\n     * If you are interested in features whose geometry intersects an extent, call\n     * the {@link module:ol/source/Vector~VectorSource#forEachFeatureIntersectingExtent #forEachFeatureIntersectingExtent()} method instead.\n     *\n     * When `useSpatialIndex` is set to false, this method will loop through all\n     * features, equivalent to {@link module:ol/source/Vector~VectorSource#forEachFeature #forEachFeature()}.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     whose bounding box intersects the provided extent.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     * @api\n     */\n    VectorSource.prototype.forEachFeatureInExtent = function (extent, callback) {\n        if (this.featuresRtree_) {\n            return this.featuresRtree_.forEachInExtent(extent, callback);\n        }\n        else if (this.featuresCollection_) {\n            this.featuresCollection_.forEach(callback);\n        }\n    };\n    /**\n     * Iterate through all features whose geometry intersects the provided extent,\n     * calling the callback with each feature.  If the callback returns a \"truthy\"\n     * value, iteration will stop and the function will return the same value.\n     *\n     * If you only want to test for bounding box intersection, call the\n     * {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent #forEachFeatureInExtent()} method instead.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     whose geometry intersects the provided extent.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     * @api\n     */\n    VectorSource.prototype.forEachFeatureIntersectingExtent = function (extent, callback) {\n        return this.forEachFeatureInExtent(extent, \n        /**\n         * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n         * @return {T|undefined} The return value from the last call to the callback.\n         */\n        function (feature) {\n            var geometry = feature.getGeometry();\n            if (geometry.intersectsExtent(extent)) {\n                var result = callback(feature);\n                if (result) {\n                    return result;\n                }\n            }\n        });\n    };\n    /**\n     * Get the features collection associated with this source. Will be `null`\n     * unless the source was configured with `useSpatialIndex` set to `false`, or\n     * with an {@link module:ol/Collection~Collection} as `features`.\n     * @return {Collection<import(\"../Feature.js\").default<Geometry>>|null} The collection of features.\n     * @api\n     */\n    VectorSource.prototype.getFeaturesCollection = function () {\n        return this.featuresCollection_;\n    };\n    /**\n     * Get a snapshot of the features currently on the source in random order. The returned array\n     * is a copy, the features are references to the features in the source.\n     * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n     * @api\n     */\n    VectorSource.prototype.getFeatures = function () {\n        var features;\n        if (this.featuresCollection_) {\n            features = this.featuresCollection_.getArray().slice(0);\n        }\n        else if (this.featuresRtree_) {\n            features = this.featuresRtree_.getAll();\n            if (!isEmpty(this.nullGeometryFeatures_)) {\n                extend(features, getValues(this.nullGeometryFeatures_));\n            }\n        }\n        return /** @type {Array<import(\"../Feature.js\").default<Geometry>>} */ (features);\n    };\n    /**\n     * Get all features whose geometry intersects the provided coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n     * @api\n     */\n    VectorSource.prototype.getFeaturesAtCoordinate = function (coordinate) {\n        var features = [];\n        this.forEachFeatureAtCoordinateDirect(coordinate, function (feature) {\n            features.push(feature);\n        });\n        return features;\n    };\n    /**\n     * Get all features whose bounding box intersects the provided extent.  Note that this returns an array of\n     * all features intersecting the given extent in random order (so it may include\n     * features whose geometries do not intersect the extent).\n     *\n     * When `useSpatialIndex` is set to false, this method will return all\n     * features.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {import(\"../proj/Projection.js\").default} [opt_projection] Include features\n     * where `extent` exceeds the x-axis bounds of `projection` and wraps around the world.\n     * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n     * @api\n     */\n    VectorSource.prototype.getFeaturesInExtent = function (extent, opt_projection) {\n        var _this = this;\n        if (this.featuresRtree_) {\n            var multiWorld = opt_projection && opt_projection.canWrapX() && this.getWrapX();\n            if (!multiWorld) {\n                return this.featuresRtree_.getInExtent(extent);\n            }\n            var extents = wrapAndSliceX(extent, opt_projection);\n            return [].concat.apply([], extents.map(function (anExtent) { return _this.featuresRtree_.getInExtent(anExtent); }));\n        }\n        else if (this.featuresCollection_) {\n            return this.featuresCollection_.getArray().slice(0);\n        }\n        else {\n            return [];\n        }\n    };\n    /**\n     * Get the closest feature to the provided coordinate.\n     *\n     * This method is not available when the source is configured with\n     * `useSpatialIndex` set to `false`.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {function(import(\"../Feature.js\").default<Geometry>):boolean} [opt_filter] Feature filter function.\n     *     The filter function will receive one argument, the {@link module:ol/Feature~Feature feature}\n     *     and it should return a boolean value. By default, no filtering is made.\n     * @return {import(\"../Feature.js\").default<Geometry>} Closest feature.\n     * @api\n     */\n    VectorSource.prototype.getClosestFeatureToCoordinate = function (coordinate, opt_filter) {\n        // Find the closest feature using branch and bound.  We start searching an\n        // infinite extent, and find the distance from the first feature found.  This\n        // becomes the closest feature.  We then compute a smaller extent which any\n        // closer feature must intersect.  We continue searching with this smaller\n        // extent, trying to find a closer feature.  Every time we find a closer\n        // feature, we update the extent being searched so that any even closer\n        // feature must intersect it.  We continue until we run out of features.\n        var x = coordinate[0];\n        var y = coordinate[1];\n        var closestFeature = null;\n        var closestPoint = [NaN, NaN];\n        var minSquaredDistance = Infinity;\n        var extent = [-Infinity, -Infinity, Infinity, Infinity];\n        var filter = opt_filter ? opt_filter : TRUE;\n        this.featuresRtree_.forEachInExtent(extent, \n        /**\n         * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n         */\n        function (feature) {\n            if (filter(feature)) {\n                var geometry = feature.getGeometry();\n                var previousMinSquaredDistance = minSquaredDistance;\n                minSquaredDistance = geometry.closestPointXY(x, y, closestPoint, minSquaredDistance);\n                if (minSquaredDistance < previousMinSquaredDistance) {\n                    closestFeature = feature;\n                    // This is sneaky.  Reduce the extent that it is currently being\n                    // searched while the R-Tree traversal using this same extent object\n                    // is still in progress.  This is safe because the new extent is\n                    // strictly contained by the old extent.\n                    var minDistance = Math.sqrt(minSquaredDistance);\n                    extent[0] = x - minDistance;\n                    extent[1] = y - minDistance;\n                    extent[2] = x + minDistance;\n                    extent[3] = y + minDistance;\n                }\n            }\n        });\n        return closestFeature;\n    };\n    /**\n     * Get the extent of the features currently in the source.\n     *\n     * This method is not available when the source is configured with\n     * `useSpatialIndex` set to `false`.\n     * @param {import(\"../extent.js\").Extent} [opt_extent] Destination extent. If provided, no new extent\n     *     will be created. Instead, that extent's coordinates will be overwritten.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    VectorSource.prototype.getExtent = function (opt_extent) {\n        return this.featuresRtree_.getExtent(opt_extent);\n    };\n    /**\n     * Get a feature by its identifier (the value returned by feature.getId()).\n     * Note that the index treats string and numeric identifiers as the same.  So\n     * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n     *\n     * @param {string|number} id Feature identifier.\n     * @return {import(\"../Feature.js\").default<Geometry>|null} The feature (or `null` if not found).\n     * @api\n     */\n    VectorSource.prototype.getFeatureById = function (id) {\n        var feature = this.idIndex_[id.toString()];\n        return feature !== undefined ? feature : null;\n    };\n    /**\n     * Get a feature by its internal unique identifier (using `getUid`).\n     *\n     * @param {string} uid Feature identifier.\n     * @return {import(\"../Feature.js\").default<Geometry>|null} The feature (or `null` if not found).\n     */\n    VectorSource.prototype.getFeatureByUid = function (uid) {\n        var feature = this.uidIndex_[uid];\n        return feature !== undefined ? feature : null;\n    };\n    /**\n     * Get the format associated with this source.\n     *\n     * @return {import(\"../format/Feature.js\").default|undefined} The feature format.\n     * @api\n     */\n    VectorSource.prototype.getFormat = function () {\n        return this.format_;\n    };\n    /**\n     * @return {boolean} The source can have overlapping geometries.\n     */\n    VectorSource.prototype.getOverlaps = function () {\n        return this.overlaps_;\n    };\n    /**\n     * Get the url associated with this source.\n     *\n     * @return {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined} The url.\n     * @api\n     */\n    VectorSource.prototype.getUrl = function () {\n        return this.url_;\n    };\n    /**\n     * @param {Event} event Event.\n     * @private\n     */\n    VectorSource.prototype.handleFeatureChange_ = function (event) {\n        var feature = /** @type {import(\"../Feature.js\").default<Geometry>} */ (event.target);\n        var featureKey = getUid(feature);\n        var geometry = feature.getGeometry();\n        if (!geometry) {\n            if (!(featureKey in this.nullGeometryFeatures_)) {\n                if (this.featuresRtree_) {\n                    this.featuresRtree_.remove(feature);\n                }\n                this.nullGeometryFeatures_[featureKey] = feature;\n            }\n        }\n        else {\n            var extent = geometry.getExtent();\n            if (featureKey in this.nullGeometryFeatures_) {\n                delete this.nullGeometryFeatures_[featureKey];\n                if (this.featuresRtree_) {\n                    this.featuresRtree_.insert(extent, feature);\n                }\n            }\n            else {\n                if (this.featuresRtree_) {\n                    this.featuresRtree_.update(extent, feature);\n                }\n            }\n        }\n        var id = feature.getId();\n        if (id !== undefined) {\n            var sid = id.toString();\n            if (this.idIndex_[sid] !== feature) {\n                this.removeFromIdIndex_(feature);\n                this.idIndex_[sid] = feature;\n            }\n        }\n        else {\n            this.removeFromIdIndex_(feature);\n            this.uidIndex_[featureKey] = feature;\n        }\n        this.changed();\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE, feature));\n    };\n    /**\n     * Returns true if the feature is contained within the source.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @return {boolean} Has feature.\n     * @api\n     */\n    VectorSource.prototype.hasFeature = function (feature) {\n        var id = feature.getId();\n        if (id !== undefined) {\n            return id in this.idIndex_;\n        }\n        else {\n            return getUid(feature) in this.uidIndex_;\n        }\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    VectorSource.prototype.isEmpty = function () {\n        if (this.featuresRtree_) {\n            return (this.featuresRtree_.isEmpty() && isEmpty(this.nullGeometryFeatures_));\n        }\n        if (this.featuresCollection_) {\n            return this.featuresCollection_.getLength() === 0;\n        }\n        return true;\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     */\n    VectorSource.prototype.loadFeatures = function (extent, resolution, projection) {\n        var loadedExtentsRtree = this.loadedExtentsRtree_;\n        var extentsToLoad = this.strategy_(extent, resolution, projection);\n        var _loop_1 = function (i, ii) {\n            var extentToLoad = extentsToLoad[i];\n            var alreadyLoaded = loadedExtentsRtree.forEachInExtent(extentToLoad, \n            /**\n             * @param {{extent: import(\"../extent.js\").Extent}} object Object.\n             * @return {boolean} Contains.\n             */\n            function (object) {\n                return containsExtent(object.extent, extentToLoad);\n            });\n            if (!alreadyLoaded) {\n                ++this_1.loadingExtentsCount_;\n                this_1.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART));\n                this_1.loader_.call(this_1, extentToLoad, resolution, projection, function (features) {\n                    --this.loadingExtentsCount_;\n                    this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND, undefined, features));\n                }.bind(this_1), function () {\n                    --this.loadingExtentsCount_;\n                    this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR));\n                }.bind(this_1));\n                loadedExtentsRtree.insert(extentToLoad, { extent: extentToLoad.slice() });\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n            _loop_1(i, ii);\n        }\n        this.loading =\n            this.loader_.length < 4 ? false : this.loadingExtentsCount_ > 0;\n    };\n    VectorSource.prototype.refresh = function () {\n        this.clear(true);\n        this.loadedExtentsRtree_.clear();\n        _super.prototype.refresh.call(this);\n    };\n    /**\n     * Remove an extent from the list of loaded extents.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @api\n     */\n    VectorSource.prototype.removeLoadedExtent = function (extent) {\n        var loadedExtentsRtree = this.loadedExtentsRtree_;\n        var obj;\n        loadedExtentsRtree.forEachInExtent(extent, function (object) {\n            if (equals(object.extent, extent)) {\n                obj = object;\n                return true;\n            }\n        });\n        if (obj) {\n            loadedExtentsRtree.remove(obj);\n        }\n    };\n    /**\n     * Remove a single feature from the source.  If you want to remove all features\n     * at once, use the {@link module:ol/source/Vector~VectorSource#clear #clear()} method\n     * instead.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to remove.\n     * @api\n     */\n    VectorSource.prototype.removeFeature = function (feature) {\n        if (!feature) {\n            return;\n        }\n        var featureKey = getUid(feature);\n        if (featureKey in this.nullGeometryFeatures_) {\n            delete this.nullGeometryFeatures_[featureKey];\n        }\n        else {\n            if (this.featuresRtree_) {\n                this.featuresRtree_.remove(feature);\n            }\n        }\n        var result = this.removeFeatureInternal(feature);\n        if (result) {\n            this.changed();\n        }\n    };\n    /**\n     * Remove feature without firing a `change` event.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @return {import(\"../Feature.js\").default<Geometry>|undefined} The removed feature\n     *     (or undefined if the feature was not found).\n     * @protected\n     */\n    VectorSource.prototype.removeFeatureInternal = function (feature) {\n        var featureKey = getUid(feature);\n        var featureChangeKeys = this.featureChangeKeys_[featureKey];\n        if (!featureChangeKeys) {\n            return;\n        }\n        featureChangeKeys.forEach(unlistenByKey);\n        delete this.featureChangeKeys_[featureKey];\n        var id = feature.getId();\n        if (id !== undefined) {\n            delete this.idIndex_[id.toString()];\n        }\n        delete this.uidIndex_[featureKey];\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE, feature));\n        return feature;\n    };\n    /**\n     * Remove a feature from the id index.  Called internally when the feature id\n     * may have changed.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n     * @return {boolean} Removed the feature from the index.\n     * @private\n     */\n    VectorSource.prototype.removeFromIdIndex_ = function (feature) {\n        var removed = false;\n        for (var id in this.idIndex_) {\n            if (this.idIndex_[id] === feature) {\n                delete this.idIndex_[id];\n                removed = true;\n                break;\n            }\n        }\n        return removed;\n    };\n    /**\n     * Set the new loader of the source. The next render cycle will use the\n     * new loader.\n     * @param {import(\"../featureloader.js\").FeatureLoader} loader The loader to set.\n     * @api\n     */\n    VectorSource.prototype.setLoader = function (loader) {\n        this.loader_ = loader;\n    };\n    /**\n     * Points the source to a new url. The next render cycle will use the new url.\n     * @param {string|import(\"../featureloader.js\").FeatureUrlFunction} url Url.\n     * @api\n     */\n    VectorSource.prototype.setUrl = function (url) {\n        assert(this.format_, 7); // `format` must be set when `url` is set\n        this.url_ = url;\n        this.setLoader(xhr(url, this.format_));\n    };\n    return VectorSource;\n}(Source));\nexport default VectorSource;\n//# sourceMappingURL=Vector.js.map","/**\n * @module ol/source/VectorEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a feature is added to the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#addfeature\n     * @api\n     */\n    ADDFEATURE: 'addfeature',\n    /**\n     * Triggered when a feature is updated.\n     * @event module:ol/source/Vector.VectorSourceEvent#changefeature\n     * @api\n     */\n    CHANGEFEATURE: 'changefeature',\n    /**\n     * Triggered when the clear method is called on the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#clear\n     * @api\n     */\n    CLEAR: 'clear',\n    /**\n     * Triggered when a feature is removed from the source.\n     * See {@link module:ol/source/Vector~VectorSource#clear source.clear()} for exceptions.\n     * @event module:ol/source/Vector.VectorSourceEvent#removefeature\n     * @api\n     */\n    REMOVEFEATURE: 'removefeature',\n    /**\n     * Triggered when features starts loading.\n     * @event module:ol/source/Vector.VectorSourceEvent#featuresloadstart\n     * @api\n     */\n    FEATURESLOADSTART: 'featuresloadstart',\n    /**\n     * Triggered when features finishes loading.\n     * @event module:ol/source/Vector.VectorSourceEvent#featuresloadend\n     * @api\n     */\n    FEATURESLOADEND: 'featuresloadend',\n    /**\n     * Triggered if feature loading results in an error.\n     * @event module:ol/source/Vector.VectorSourceEvent#featuresloaderror\n     * @api\n     */\n    FEATURESLOADERROR: 'featuresloaderror',\n};\n/**\n * @typedef {'addfeature'|'changefeature'|'clear'|'removefeature'|'featuresloadstart'|'featuresloadend'|'featuresloaderror'} VectorSourceEventTypes\n */\n//# sourceMappingURL=VectorEventType.js.map","/**\n * @module ol/structs/RBush\n */\nimport RBush_ from 'rbush';\nimport { createOrUpdate, equals } from '../extent.js';\nimport { getUid } from '../util.js';\nimport { isEmpty } from '../obj.js';\n/**\n * @typedef {Object} Entry\n * @property {number} minX MinX.\n * @property {number} minY MinY.\n * @property {number} maxX MaxX.\n * @property {number} maxY MaxY.\n * @property {Object} [value] Value.\n */\n/**\n * @classdesc\n * Wrapper around the RBush by Vladimir Agafonkin.\n * See https://github.com/mourner/rbush.\n *\n * @template T\n */\nvar RBush = /** @class */ (function () {\n    /**\n     * @param {number} [opt_maxEntries] Max entries.\n     */\n    function RBush(opt_maxEntries) {\n        /**\n         * @private\n         */\n        this.rbush_ = new RBush_(opt_maxEntries);\n        /**\n         * A mapping between the objects added to this rbush wrapper\n         * and the objects that are actually added to the internal rbush.\n         * @private\n         * @type {Object<string, Entry>}\n         */\n        this.items_ = {};\n    }\n    /**\n     * Insert a value into the RBush.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {T} value Value.\n     */\n    RBush.prototype.insert = function (extent, value) {\n        /** @type {Entry} */\n        var item = {\n            minX: extent[0],\n            minY: extent[1],\n            maxX: extent[2],\n            maxY: extent[3],\n            value: value,\n        };\n        this.rbush_.insert(item);\n        this.items_[getUid(value)] = item;\n    };\n    /**\n     * Bulk-insert values into the RBush.\n     * @param {Array<import(\"../extent.js\").Extent>} extents Extents.\n     * @param {Array<T>} values Values.\n     */\n    RBush.prototype.load = function (extents, values) {\n        var items = new Array(values.length);\n        for (var i = 0, l = values.length; i < l; i++) {\n            var extent = extents[i];\n            var value = values[i];\n            /** @type {Entry} */\n            var item = {\n                minX: extent[0],\n                minY: extent[1],\n                maxX: extent[2],\n                maxY: extent[3],\n                value: value,\n            };\n            items[i] = item;\n            this.items_[getUid(value)] = item;\n        }\n        this.rbush_.load(items);\n    };\n    /**\n     * Remove a value from the RBush.\n     * @param {T} value Value.\n     * @return {boolean} Removed.\n     */\n    RBush.prototype.remove = function (value) {\n        var uid = getUid(value);\n        // get the object in which the value was wrapped when adding to the\n        // internal rbush. then use that object to do the removal.\n        var item = this.items_[uid];\n        delete this.items_[uid];\n        return this.rbush_.remove(item) !== null;\n    };\n    /**\n     * Update the extent of a value in the RBush.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {T} value Value.\n     */\n    RBush.prototype.update = function (extent, value) {\n        var item = this.items_[getUid(value)];\n        var bbox = [item.minX, item.minY, item.maxX, item.maxY];\n        if (!equals(bbox, extent)) {\n            this.remove(value);\n            this.insert(extent, value);\n        }\n    };\n    /**\n     * Return all values in the RBush.\n     * @return {Array<T>} All.\n     */\n    RBush.prototype.getAll = function () {\n        var items = this.rbush_.all();\n        return items.map(function (item) {\n            return item.value;\n        });\n    };\n    /**\n     * Return all values in the given extent.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {Array<T>} All in extent.\n     */\n    RBush.prototype.getInExtent = function (extent) {\n        /** @type {Entry} */\n        var bbox = {\n            minX: extent[0],\n            minY: extent[1],\n            maxX: extent[2],\n            maxY: extent[3],\n        };\n        var items = this.rbush_.search(bbox);\n        return items.map(function (item) {\n            return item.value;\n        });\n    };\n    /**\n     * Calls a callback function with each value in the tree.\n     * If the callback returns a truthy value, this value is returned without\n     * checking the rest of the tree.\n     * @param {function(T): *} callback Callback.\n     * @return {*} Callback return value.\n     */\n    RBush.prototype.forEach = function (callback) {\n        return this.forEach_(this.getAll(), callback);\n    };\n    /**\n     * Calls a callback function with each value in the provided extent.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {function(T): *} callback Callback.\n     * @return {*} Callback return value.\n     */\n    RBush.prototype.forEachInExtent = function (extent, callback) {\n        return this.forEach_(this.getInExtent(extent), callback);\n    };\n    /**\n     * @param {Array<T>} values Values.\n     * @param {function(T): *} callback Callback.\n     * @private\n     * @return {*} Callback return value.\n     */\n    RBush.prototype.forEach_ = function (values, callback) {\n        var result;\n        for (var i = 0, l = values.length; i < l; i++) {\n            result = callback(values[i]);\n            if (result) {\n                return result;\n            }\n        }\n        return result;\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    RBush.prototype.isEmpty = function () {\n        return isEmpty(this.items_);\n    };\n    /**\n     * Remove all values from the RBush.\n     */\n    RBush.prototype.clear = function () {\n        this.rbush_.clear();\n        this.items_ = {};\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} [opt_extent] Extent.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     */\n    RBush.prototype.getExtent = function (opt_extent) {\n        var data = this.rbush_.toJSON();\n        return createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, opt_extent);\n    };\n    /**\n     * @param {RBush} rbush R-Tree.\n     */\n    RBush.prototype.concat = function (rbush) {\n        this.rbush_.load(rbush.rbush_.all());\n        for (var i in rbush.items_) {\n            this.items_[i] = rbush.items_[i];\n        }\n    };\n    return RBush;\n}());\nexport default RBush;\n//# sourceMappingURL=RBush.js.map"],"sourceRoot":""}