{"version":3,"sources":["webpack:///./src/hooks/updateMapSize.js","webpack:///./src/views/others/multi-view-linkage/index.vue?7d4a","webpack:///./src/views/others/multi-view-linkage/index.vue","webpack:///./src/views/others/multi-view-linkage/index.vue?de33"],"names":["map","targetNode","document","querySelector","observer","MutationObserver","mutationsList","mutation","type","attributeName","i","length","updateSize","observe","attributes","childList","subtree","onBeforeUnmount","disconnect","onMounted","initMap","canvasMap","Map","layers","TileLayer","title","source","XYZ","attributions","ATTRIBUTIONS","url","wrapX","target","view","View","center","minZoom","zoom","controls","defaults","extend","FullScreen","webglMap","WebGLTile","crossOrigin","getView","updateMapSize","__exports__"],"mappings":"4GAAA,gBAMe,QAAIA,KAEjB,MAAMC,EAAaC,SAASC,cAC1B,uCAuBIC,EAAW,IAAIC,kBAlBJ,SAAUC,GAEzB,IAAK,IAAIC,KAAYD,EACnB,GAAsB,cAAlBC,EAASC,WAEN,GACa,eAAlBD,EAASC,MACkB,UAA3BD,EAASE,cAET,IAAK,IAAIC,EAAI,EAAGA,EAAIV,EAAIW,OAAQD,IAC9BV,EAAIU,GAAGE,YAMf,IAKAR,EAASS,QAAQZ,EAvBF,CAAEa,YAAY,EAAMC,WAAW,EAAMC,SAAS,IA0B7DC,2BAAgB,KACdb,EAASc,YAAY,GAExB,C,sCCzCD,S,8mBCqFEC,qBAAU,KAhEMC,MAEd,MAAMC,EAAY,IAAIC,IAAI,CACxBC,OAAQ,CACN,IAAIC,IAAU,CACZC,MAAO,UACPC,OAAQ,IAAIC,IAAI,CACdC,aAAcC,IACdC,IAAK,kGACLC,OAAO,MAGX,IAAIP,IAAU,CACZC,MAAO,YACPC,OAAQ,IAAIC,IAAI,CACdC,aAAcC,IACdC,IAAK,kGACLC,OAAO,OAIbC,OAAQ,YACRC,KAAM,IAAIC,IAAK,CACbC,OAAQ,CAAC,SAAU,SACnBC,QAAS,EACTC,KAAM,IAGRC,SAAUC,cAAWC,OAAO,CAC1B,IAAIC,QAIFC,EAAW,IAAIpB,IAAI,CACvBC,OAAQ,CACN,IAAIoB,IAAU,CACZlB,MAAO,UACPC,OAAQ,IAAIC,IAAI,CACdC,aAAcC,IACdC,IAAK,kGACLc,YAAa,YACbb,OAAO,MAGX,IAAIY,IAAU,CACZlB,MAAO,YACPC,OAAQ,IAAIC,IAAI,CACdC,aAAcC,IACdC,IAAK,kGACLc,YAAa,YACbb,OAAO,IAGTO,SAAUC,cAAWC,OAAO,CAC1B,IAAIC,SAIVT,OAAQ,WACRC,KAAMZ,EAAUwB,YAGlBC,YAAczB,EAAWqB,EAAS,EAGlCtB,EAAS,I,iGChFb,MAAM2B,E,MAA2B,GAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD,W","file":"js/chunk-08229f12.320d51ea.js","sourcesContent":["import { onBeforeUnmount } from \"vue\";\n\n/**\n * 监听侧边栏，侧边栏发生变化更新地图\n * @param {ol.Map} map 地图实例\n */\nexport default (...map) => {\n  // 选择需要观察变动的节点\n  const targetNode = document.querySelector(\n    \".el-aside .menu .el-scrollbar__view\"\n  );\n  // 观察器的配置（需要观察什么变动）\n  const config = { attributes: true, childList: true, subtree: true };\n  // 当观察到变动时执行的回调函数\n  const callback = function (mutationsList) {\n    // Use traditional 'for loops' for IE 11\n    for (let mutation of mutationsList) {\n      if (mutation.type === \"childList\") {\n        // console.log(\"已添加或删除子节点。\");\n      } else if (\n        mutation.type === \"attributes\" &&\n        mutation.attributeName === \"style\"\n      ) {\n        for (let i = 0; i < map.length; i++) {\n          map[i].updateSize();\n        }\n\n        // console.log(\"这个 \" + mutation.attributeName + \" 属性被修改。\");\n      }\n    }\n  };\n  // 创建一个观察器实例并传入回调函数\n  const observer = new MutationObserver(callback);\n\n  // 以上述配置开始观察目标节点\n  observer.observe(targetNode, config);\n\n  //卸载前\n  onBeforeUnmount(() => {\n    observer.disconnect();\n  });\n};\n","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=79869ddf&scoped=true&lang=css\"","<template>\n  <div class=\"mapBox\">\n    <div class=\"map\" id=\"canvasMap\">\n      <div class=\"title\">Canvas</div>\n    </div>\n    <div class=\"map\" id=\"webglMap\">\n      <div class=\"title\">WebGL</div>\n    </div>\n  </div>\n</template>\n\n<script setup>\n  import \"ol/ol.css\";\n  import { onMounted } from \"vue\";\n  import { Map, View } from \"ol\";\n  import { Tile as TileLayer, WebGLTile } from \"ol/layer\";\n  import { defaults, FullScreen } from \"ol/control\";\n  import { XYZ } from \"ol/source\";\n  import { ATTRIBUTIONS } from \"@/constants\";\n  import updateMapSize from \"@/hooks/updateMapSize\";\n\n  const initMap = () => {\n    //加载canvas渲染模式的地图做为主图,默认是canvas渲染模式\n    const canvasMap = new Map({\n      layers: [\n        new TileLayer({\n          title: \"天地图矢量图层\",\n          source: new XYZ({\n            attributions: ATTRIBUTIONS,\n            url: \"http://t0.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f\",\n            wrapX: false,\n          }),\n        }),\n        new TileLayer({\n          title: \"天地图矢量图层注记\",\n          source: new XYZ({\n            attributions: ATTRIBUTIONS,\n            url: \"http://t0.tianditu.com/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f\",\n            wrapX: false,\n          }),\n        }),\n      ],\n      target: \"canvasMap\", //地图容器div的ID\n      view: new View({\n        center: [12723048, 3575638], //地图初始中心点\n        minZoom: 2,\n        zoom: 6,\n      }),\n      //加载控件到地图容器中\n      controls: defaults().extend([\n        new FullScreen(), //加载全屏显示控件（目前支持非IE内核浏览器）\n      ]),\n    });\n\n    const webglMap = new Map({\n      layers: [\n        new WebGLTile({\n          title: \"天地图矢量图层\",\n          source: new XYZ({\n            attributions: ATTRIBUTIONS,\n            url: \"http://t0.tianditu.com/DataServer?T=img_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f\",\n            crossOrigin: \"anonymous\",\n            wrapX: false,\n          }),\n        }),\n        new WebGLTile({\n          title: \"天地图矢量图层注记\",\n          source: new XYZ({\n            attributions: ATTRIBUTIONS,\n            url: \"http://t0.tianditu.com/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f\",\n            crossOrigin: \"anonymous\",\n            wrapX: false,\n          }),\n          //加载控件到地图容器中\n          controls: defaults().extend([\n            new FullScreen(), //加载全屏显示控件（目前支持非IE内核浏览器）\n          ]),\n        }),\n      ],\n      target: \"webglMap\", //地图容器div的ID\n      view: canvasMap.getView(), //设置为主图的视图对象\n    });\n    // 侧边栏变化更新地图\n    updateMapSize(canvasMap, webglMap);\n  };\n  onMounted(() => {\n    initMap();\n  });\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  .mapBox {\n    position: relative;\n    height: 100%;\n    display: flex;\n    justify-content: space-around;\n    padding: 20px;\n    box-sizing: border-box;\n  }\n  .map {\n    position: relative;\n    width: 48%;\n    height: 100%;\n    border: 2px dashed red;\n    box-shadow: 0 0 10px #000;\n  }\n  .title {\n    width: 200px;\n    position: absolute;\n    bottom: 10px;\n    left: 50%;\n    transform: translateX(-50%);\n    z-index: 1;\n    color: red;\n  }\n  .mobile .mapBox {\n    flex-direction: column;\n  }\n  .mobile .map {\n    width: 100%;\n    height: 48%;\n  }\n</style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=79869ddf&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/openlayers/openlayers/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-79869ddf\"]])\n\nexport default __exports__"],"sourceRoot":""}