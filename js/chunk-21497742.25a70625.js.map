{"version":3,"sources":["webpack:///./src/hooks/updateMapSize.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/format/KML.js","webpack:///./node_modules/.pnpm/buffer@4.9.2/node_modules/buffer/index.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/MultiPoint.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/format/XMLFeature.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/renderer/webgl/PointsLayer.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/webgl/RenderTarget.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/layer/Heatmap.js","webpack:///./src/views/others/heatmap/index.vue","webpack:///./src/views/others/heatmap/index.vue?6671","webpack:///./src/views/others/heatmap/index.vue?ed8d","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/GeometryCollection.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/format/xsd.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/interpolate.js","webpack:///./node_modules/.pnpm/base64-js@1.5.1/node_modules/base64-js/index.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/worker/webgl.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/MultiPolygon.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/center.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/MultiLineString.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/Text.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/format/Feature.js","webpack:///./node_modules/.pnpm/isarray@1.0.0/node_modules/isarray/index.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/xml.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/LineString.js","webpack:///./node_modules/.pnpm/ieee754@1.2.1/node_modules/ieee754/index.js"],"names":["map","targetNode","document","querySelector","observer","MutationObserver","mutationsList","mutation","type","attributeName","i","length","updateSize","observe","attributes","childList","subtree","onBeforeUnmount","disconnect","extendStatics","DEFAULT_COLOR","DEFAULT_IMAGE_STYLE_ANCHOR","DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS","DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS","DEFAULT_IMAGE_STYLE_SIZE","DEFAULT_IMAGE_STYLE_SRC","__extends","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","GX_NAMESPACE_URIS","NAMESPACE_URIS","ICON_ANCHOR_UNITS_MAP","FRACTION","PIXELS","PLACEMARK_PARSERS","extendedDataParser","regionParser","readMultiGeometry","readLineString","readLinearRing","readPoint","readPolygon","readStyle","node","objectStack","styleMapValue","readStyleMapValue","placemarkObject","isArray","readStyleURL","lineStrings","GX_MULTITRACK_GEOMETRY_PARSERS","readGxTrack","NETWORK_LINK_PARSERS","LINK_PARSERS","readURI","REGION_PARSERS","object","LAT_LON_ALT_BOX_PARSERS","regionObject","extent","parseFloat","LOD_PARSERS","lodObject","KML_SEQUENCE","KML_SERIALIZERS","features","context","DOCUMENT_SERIALIZERS","DOCUMENT_NODE_FACTORY","undefined","writePlacemark","DEFAULT_FILL_STYLE","DEFAULT_NO_IMAGE_STYLE","DEFAULT_IMAGE_STYLE","DEFAULT_TEXT_STROKE_STYLE","DEFAULT_STROKE_STYLE","DEFAULT_TEXT_STYLE","DEFAULT_STYLE","TEXTAREA","DEFAULT_STYLE_ARRAY","scaleForSize","size","Math","min","defaultIconUrlFunction","href","KML","_super","opt_options","_this","options","color","anchor","anchorOrigin","BOTTOM_LEFT","anchorXUnits","anchorYUnits","crossOrigin","rotation","scale","src","width","font","fill","stroke","image","text","zIndex","dataProjection","defaultStyle_","defaultStyle","extractStyles_","extractStyles","writeStyles_","writeStyles","sharedStyles_","showPointNames_","showPointNames","crossOrigin_","iconUrlFunction_","iconUrlFunction","supportedMediaTypes","readDocumentOrFolder_","parsersNS","readPlacemark_","readSharedStyle_","bind","readSharedStyleMap_","feature","id","getAttribute","setId","geometry","setGeometry","styleFunction","style","styleUrl","sharedStyles","resolution","drawName","name","multiGeometryPoints","getGeometry","getGeometriesArrayRecursive","filter","getType","get","search","createElement","innerHTML","value","featureStyle","findStyle","nameStyle","foundStyle","textOffset","textAlign","imageStyle","getImage","imageSize","getSize","imageScale","getScaleArray","getAnchor","textStyle","getText","clone","setFont","getFont","setScale","getScale","setFill","getFill","setStroke","getStroke","setText","setOffsetX","setOffsetY","setTextAlign","createNameStyleFunction","concat","slice","createFeatureStyleFunction","setStyle","setProperties","styleUri","baseURI","window","location","URL","readFeatureFromNode","namespaceURI","getReadOptions","readFeaturesFromNode","localName","n","firstElementChild","nextElementSibling","fs","readName","source","doc","readNameFromDocument","readNameFromNode","nextSibling","nodeType","Node","ELEMENT_NODE","name_1","name_2","readNetworkLinks","networkLinks","readNetworkLinksFromDocument","readNetworkLinksFromNode","obj","push","readRegion","regions","readRegionFromDocument","readRegionFromNode","writeFeaturesNode","adaptOptions","kml","xmlnsUri","setAttributeNS","properties","orderedKeys","values","styleValue","readColor","s","m","exec","hexColor","parseInt","substr","readFlatCoordinates","flatCoordinates","replace","re","x","y","z","trim","readScale","STYLE_MAP_PARSERS","pairObject","PAIR_PARSERS","key","ICON_STYLE_PARSERS","iconObject","ICON_PARSERS","origin","xunits","yunits","TOP_LEFT","BOTTOM_RIGHT","TOP_RIGHT","LABEL_STYLE_PARSERS","LINE_STYLE_PARSERS","POLY_STYLE_PARSERS","FLAT_LINEAR_RING_PARSERS","readFlatLinearRing","GX_TRACK_PARSERS","whens","when","Date","parse","isNaN","coordinates","gxTrackObject","ii","XYZM","GEOMETRY_FLAT_COORDINATES_PARSERS","readFlatCoordinatesFromNode","EXTRUDE_AND_ALTITUDE_MODE_PARSERS","lineString","XYZ","polygon","MULTI_GEOMETRY_PARSERS","multiGeometry","geometries","homogeneous","layout","point","getLayout","getFlatCoordinates","setCommonGeometryProperties","FLAT_LINEAR_RINGS_PARSERS","innerBoundaryFlatLinearRings","INNER_BOUNDARY_IS_PARSERS","flatLinearRings","apply","flatLinearRing","OUTER_BOUNDARY_IS_PARSERS","ends","STYLE_PARSERS","styleObject","IconObject","drawIcon","keys","offset","hotSpot","test","w","h","heading","imageStyle_1","offsetOrigin","imageScale_1","imageState","getImageState","IDLE","LOADING","listener_1","imageSize_1","resizeScale","unlistenImageChange","listenImageChange","load","strokeStyle","fillStyle","outline","collection","hasExtrude","hasTessellate","hasAltitudeMode","extrudes","tessellates","altitudeModes","set","DATA_PARSERS","EXTENDED_DATA_PARSERS","featureObject","displayName","toString","SCHEMA_DATA_PARSERS","data","writeColorTextNode","rgba","abgr","hex","floor","join","EXTENDEDDATA_NODE_SERIALIZERS","pair","setAttribute","opt_nodeName","parentNode","DATA_NODE_FACTORY","ICON_SEQUENCE","ICON_SERIALIZERS","GX_NODE_FACTORY","ICON_STYLE_SEQUENCE","ICON_STYLE_SERIALIZERS","icon","vec2","writeScaleTextNode","LABEL_STYLE_SEQUENCE","LABEL_STYLE_SERIALIZERS","LINE_STYLE_SEQUENCE","LINE_STYLE_SERIALIZERS","GEOMETRY_TYPE_TO_NODENAME","GEOMETRY_NODE_FACTORY","POINT_NODE_FACTORY","LINE_STRING_NODE_FACTORY","LINEAR_RING_NODE_FACTORY","POLYGON_NODE_FACTORY","MULTI_GEOMETRY_SERIALIZERS","writePrimitiveGeometry","writePolygon","writeMultiGeometry","factory","forEach","getPoints","getLineStrings","getPolygons","BOUNDARY_IS_SERIALIZERS","writeBoundaryIs","linearRing","PLACEMARK_SERIALIZERS","namesAndValues","names","styles","pointStyles","lineStyles","polyStyles","STYLE_SEQUENCE","STYLE_SERIALIZERS","PLACEMARK_SEQUENCE","EXTENDEDDATA_NODE_FACTORY","getId","getProperties","getGeometryName","sort","v","getStyleFunction","styleArray","getGeometryFunction","PRIMITIVE_GEOMETRY_SEQUENCE","PRIMITIVE_GEOMETRY_SERIALIZERS","dimension","stride","XY","XYM","getStride","POLY_STYLE_SEQUENCE","POLYGON_SERIALIZERS","INNER_BOUNDARY_NODE_FACTORY","OUTER_BOUNDARY_NODE_FACTORY","linearRings","getLinearRings","outerRing","shift","POLY_STYLE_SERIALIZERS","round","getSrc","iconImageSize","getImageSize","iconProperties","origin_1","getOrigin","getRotation","getColor","Number","getWidth","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","arg","encodingOrOffset","Error","allocUnsafe","from","ArrayBuffer","array","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","fromString","isBuffer","len","checked","copy","buffer","val","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","start","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","indexOf","lastIndexOf","arr","indexSize","arrLength","valLength","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","str","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","fromByteArray","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","exports","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","e","typedArraySupport","poolSize","_augment","Symbol","species","defineProperty","configurable","allocUnsafeSlow","_isBuffer","compare","a","list","pos","swap16","swap32","swap64","arguments","equals","inspect","max","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","code","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","dst","MultiPoint","opt_layout","setFlatCoordinates","setCoordinates","appendPoint","changed","multiPoint","applyProperties","closestPointXY","closestPoint","minSquaredDistance","getExtent","squaredDistance","getCoordinates","getPoint","index","points","intersectsExtent","setLayout","XMLFeature","xmlSerializer_","readFeature","readFeatureFromDocument","readFeaturesFromDocument","readFeatures","firstChild","readGeometry","readGeometryFromDocument","readGeometryFromNode","readProjection","readProjectionFromDocument","readProjectionFromNode","writeFeature","writeFeatureNode","serializeToString","writeFeatures","writeGeometry","writeGeometryNode","tmpArray4","WebGLRenderTarget","helper","opt_size","helper_","gl","getGL","texture_","createTexture","framebuffer_","createFramebuffer","size_","data_","dataCacheDirty_","updateSize_","setSize","clearCachedData","readAll","bindFramebuffer","FRAMEBUFFER","readPixels","RGBA","UNSIGNED_BYTE","readPixel","getTexture","getFramebuffer","viewport","framebufferTexture2D","COLOR_ATTACHMENT0","TEXTURE_2D","WebGLPointsLayerRenderer","layer","uniforms","projectionMatrixTransform","PROJECTION_MATRIX","postProcesses","ready","sourceRevision_","verticesBuffer_","hitVerticesBuffer_","indicesBuffer_","vertexShader_","vertexShader","fragmentShader_","fragmentShader","program_","hitDetectionEnabled_","hitFragmentShader","hitVertexShader","hitVertexShader_","hitFragmentShader_","hitProgram_","customAttributes","attribute","FLOAT","hitDetectionAttributes","previousExtent_","currentTransform_","renderTransform_","invertRenderTransform_","renderInstructions_","Float32Array","hitRenderInstructions_","hitRenderTarget_","generateBuffersRun_","worker_","addEventListener","event","received","GENERATE_BUFFERS","projectionTransform","hitDetection","vertexBuffer","flushBufferData","indexBuffer","renderInstructions","generateBuffersRun","getLayer","featureCache_","featureCount_","getSource","sourceListenKeys_","VectorEventType","ADDFEATURE","handleSourceFeatureAdded_","CHANGEFEATURE","handleSourceFeatureChanged_","REMOVEFEATURE","handleSourceFeatureDelete_","CLEAR","handleSourceFeatureClear_","forEachFeature","afterHelperCreated","getProgram","renderFrame","frameState","preRender","projection","viewState","multiWorld","getWrapX","canWrapX","projectionExtent","worldWidth","endWorld","ceil","startWorld","world","renderCount","makeProjectionTransform","applyUniforms","drawElements","finalizeDraw","dispatchPreComposeEvent","dispatchPostComposeEvent","canvas","getCanvas","renderHitDetection","postRender","prepareFrameInternal","vectorSource","viewNotMoving","viewHints","ViewHint","ANIMATING","INTERACTING","extentChanged","sourceChanged","getRevision","renderBuffer","BaseVector","getRenderBuffer","loadFeatures","rebuildBuffers_","useProgram","prepareDraw","bindBuffer","enableAttributes","featureCache","totalInstructionsCount","totalHitInstructionsCount","hitColor","tmpCoords","tmpColor","renderIndex","hitIndex","featureUid","callback","message","customAttributesCount","postMessage","hitMessage","forEachFeatureAtCoordinate","coordinate","hitTolerance","matches","pixel","coordinateToPixelTransform","opacity","uid","getFeatureByUid","prepareDrawToRenderTarget","disposeInternal","terminate","layer_","Property","DEFAULT_GRADIENT","Heatmap","baseOptions","gradient","radius","blur","weight","gradient_","addChangeListener","handleGradientChanged_","setGradient","setBlur","setRadius","weightFunction_","setRenderOrder","getBlur","getGradient","getRadius","colors","height","createLinearGradient","step","addColorStop","fillRect","createGradient","createRenderer","className","getClassName","u_size","u_blurSlope","u_gradientTexture","u_opacity","getOpacity","renderDeclutter","state","reactive","radiusSize","blurSize","vector","VectorSource","url","format","wrapX","on","magnitude","raster","TileLayer","attributions","ATTRIBUTIONS","MAPURL","maxZoom","handleRadiusChange","handleBlurChange","onMounted","initMap","Map","layers","view","View","center","minZoom","zoom","controls","defaults","extend","FullScreen","updateMapSize","__exports__","GeometryCollection","opt_geometries","geometries_","changeEventsKeys_","listenGeometriesChange_","unlistenGeometriesChange_","CHANGE","geometryCollection","setGeometries","containsXY","computeExtent","getGeometries","cloneGeometries","getGeometriesArray","geometriesArray","getSimplifiedGeometry","squaredTolerance","simplifiedGeometryRevision","simplifiedGeometryMaxMinSquaredTolerance","simplifiedGeometries","simplified","simplifiedGeometry","simplifiedGeometryCollection","setGeometriesArray","isEmpty","rotate","angle","sx","opt_sy","opt_anchor","applyTransform","transformFn","translate","deltaX","deltaY","clonedGeometries","readBoolean","readDateTime","dateTime","readDecimal","readPositiveInteger","readString","writeBooleanTextNode","bool","writeStringTextNode","writeCDATASection","appendChild","createCDATASection","writeDateTimeTextNode","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","createTextNode","writeDecimalTextNode","decimal","toPrecision","writeNonNegativeIntegerTextNode","nonNegativeInteger","interpolatePoint","fraction","opt_dest","opt_dimension","o","t","x1","y1","length_1","cumulativeLengths","x2","y2","sqrt","dest","NaN","lineStringCoordinateAtM","extrapolate","mid","m0","lineStringsCoordinateAtM","interpolate","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","maxChunkLength","len2","encodeChunk","lookup","num","output","Worker","Blob","createObjectURL","MultiPolygon","opt_endss","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","maxDelta_","maxDeltaRevision_","orientedRevision_","orientedFlatCoordinates_","polygons","endss","getEnds","jj","appendPolygon","newEndss","multiPolygon","getOrientedFlatCoordinates","getArea","opt_right","orient","inflate","getEndss","getFlatInteriorPoints","flatCenters","linearRingss","getInteriorPoints","GeometryLayout","getSimplifiedGeometryInternal","simplifiedFlatCoordinates","simplifiedEndss","getPolygon","prevEnds","Polygon","deflate","lastEnds","SimpleGeometry","MultiLineString","opt_ends","ends_","appendLineString","multiLineString","getCoordinateAtM","opt_extrapolate","opt_interpolate","getLineString","getFlatMidpoints","midpoints","midpoint","simplifiedEnds","Text","font_","rotation_","rotateWithView_","rotateWithView","scale_","scaleArray_","text_","textAlign_","justify_","justify","textBaseline_","textBaseline","fill_","maxAngle_","maxAngle","PI","placement_","placement","POINT","overflow_","overflow","stroke_","offsetX_","offsetX","offsetY_","offsetY","backgroundFill_","backgroundFill","backgroundStroke_","backgroundStroke","padding_","padding","getPlacement","getMaxAngle","getOverflow","getRotateWithView","getTextAlign","getJustify","getTextBaseline","getOffsetX","getOffsetY","getBackgroundFill","getBackgroundStroke","getPadding","setOverflow","setMaxAngle","setPlacement","setRotateWithView","setRotation","setJustify","setTextBaseline","setBackgroundFill","setBackgroundStroke","setPadding","FeatureFormat","defaultFeatureProjection","getUnits","TILE_PIXELS","setWorldExtent","featureProjection","transformGeometryWithOptions","transformed","transform","decimals","power_1","module","XML_SCHEMA_INSTANCE_URI","createElementNS","qualifiedName","getDocument","getAllTextContent","normalizeWhitespace","getAllTextContent_","accumulator","CDATA_SECTION_NODE","TEXT_NODE","nodeValue","isDocument","xml","DOMParser","parseFromString","makeArrayExtender","valueReader","opt_this","makeArrayPusher","makeReplacer","makeObjectPropertySetter","opt_property","makeChildAppender","nodeWriter","makeArraySerializer","serializersNS","nodeFactory","serializers","makeSimpleNodeFactory","serialize","opt_namespaceURI","fixedNodeName","nodeName","OBJECT_PROPERTY_NODE_FACTORY","makeSequence","sequence","makeStructureNS","namespaceURIs","structure","opt_structureNS","structureNS","parseNode","parsers","parser","pushParseAndPop","pop","opt_keys","pushSerializeAndPop","getXMLSerializer","XMLSerializer","document_","implementation","createDocument","LineString","flatMidpoint_","flatMidpointRevision_","appendCoordinate","forEachSegment","getCoordinateAt","getLength","getFlatMidpoint","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","rt","abs","log","LN2"],"mappings":"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","file":"js/chunk-21497742.25a70625.js","sourcesContent":["import { onBeforeUnmount } from \"vue\";\n\n/**\n * 监听侧边栏，侧边栏发生变化更新地图\n * @param {ol.Map} map 地图实例\n */\nexport default (...map) => {\n  // 选择需要观察变动的节点\n  const targetNode = document.querySelector(\n    \".el-aside .menu .el-scrollbar__view\"\n  );\n  // 观察器的配置（需要观察什么变动）\n  const config = { attributes: true, childList: true, subtree: true };\n  // 当观察到变动时执行的回调函数\n  const callback = function (mutationsList) {\n    // Use traditional 'for loops' for IE 11\n    for (let mutation of mutationsList) {\n      if (mutation.type === \"childList\") {\n        // console.log(\"已添加或删除子节点。\");\n      } else if (\n        mutation.type === \"attributes\" &&\n        mutation.attributeName === \"style\"\n      ) {\n        for (let i = 0; i < map.length; i++) {\n          map[i].updateSize();\n        }\n\n        // console.log(\"这个 \" + mutation.attributeName + \" 属性被修改。\");\n      }\n    }\n  };\n  // 创建一个观察器实例并传入回调函数\n  const observer = new MutationObserver(callback);\n\n  // 以上述配置开始观察目标节点\n  observer.observe(targetNode, config);\n\n  //卸载前\n  onBeforeUnmount(() => {\n    observer.disconnect();\n  });\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/format/KML\n */\nimport Feature from '../Feature.js';\nimport Fill from '../style/Fill.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport Icon from '../style/Icon.js';\nimport IconAnchorUnits from '../style/IconAnchorUnits.js';\nimport IconOrigin from '../style/IconOrigin.js';\nimport ImageState from '../ImageState.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport Stroke from '../style/Stroke.js';\nimport Style from '../style/Style.js';\nimport Text from '../style/Text.js';\nimport XMLFeature from './XMLFeature.js';\nimport { OBJECT_PROPERTY_NODE_FACTORY, XML_SCHEMA_INSTANCE_URI, createElementNS, getAllTextContent, isDocument, makeArrayExtender, makeArrayPusher, makeChildAppender, makeObjectPropertySetter, makeReplacer, makeSequence, makeSimpleNodeFactory, makeStructureNS, parse, parseNode, pushParseAndPop, pushSerializeAndPop, } from '../xml.js';\nimport { asArray } from '../color.js';\nimport { assert } from '../asserts.js';\nimport { extend, includes } from '../array.js';\nimport { get as getProjection } from '../proj.js';\nimport { readBoolean, readDecimal, readString, writeBooleanTextNode, writeCDATASection, writeDecimalTextNode, writeStringTextNode, } from './xsd.js';\nimport { toRadians } from '../math.js';\nimport { transformGeometryWithOptions } from './Feature.js';\n/**\n * @typedef {Object} Vec2\n * @property {number} x X coordinate.\n * @property {import(\"../style/IconAnchorUnits\").default} xunits Units of x.\n * @property {number} y Y coordinate.\n * @property {import(\"../style/IconAnchorUnits\").default} yunits Units of Y.\n * @property {import(\"../style/IconOrigin.js\").default} [origin] Origin.\n */\n/**\n * @typedef {Object} GxTrackObject\n * @property {Array<Array<number>>} coordinates Coordinates.\n * @property {Array<number>} whens Whens.\n */\n/**\n * @const\n * @type {Array<string>}\n */\nvar GX_NAMESPACE_URIS = ['http://www.google.com/kml/ext/2.2'];\n/**\n * @const\n * @type {Array<null|string>}\n */\nvar NAMESPACE_URIS = [\n    null,\n    'http://earth.google.com/kml/2.0',\n    'http://earth.google.com/kml/2.1',\n    'http://earth.google.com/kml/2.2',\n    'http://www.opengis.net/kml/2.2',\n];\n/**\n * @const\n * @type {string}\n */\nvar SCHEMA_LOCATION = 'http://www.opengis.net/kml/2.2 ' +\n    'https://developers.google.com/kml/schema/kml22gx.xsd';\n/**\n * @type {Object<string, import(\"../style/IconAnchorUnits\").default>}\n */\nvar ICON_ANCHOR_UNITS_MAP = {\n    'fraction': IconAnchorUnits.FRACTION,\n    'pixels': IconAnchorUnits.PIXELS,\n    'insetPixels': IconAnchorUnits.PIXELS,\n};\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar PLACEMARK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'MultiGeometry': makeObjectPropertySetter(readMultiGeometry, 'geometry'),\n    'LineString': makeObjectPropertySetter(readLineString, 'geometry'),\n    'LinearRing': makeObjectPropertySetter(readLinearRing, 'geometry'),\n    'Point': makeObjectPropertySetter(readPoint, 'geometry'),\n    'Polygon': makeObjectPropertySetter(readPolygon, 'geometry'),\n    'Style': makeObjectPropertySetter(readStyle),\n    'StyleMap': placemarkStyleMapParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readStyleURL),\n    'visibility': makeObjectPropertySetter(readBoolean),\n}, makeStructureNS(GX_NAMESPACE_URIS, {\n    'MultiTrack': makeObjectPropertySetter(readGxMultiTrack, 'geometry'),\n    'Track': makeObjectPropertySetter(readGxTrack, 'geometry'),\n}));\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar NETWORK_LINK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'Link': linkParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'visibility': makeObjectPropertySetter(readBoolean),\n});\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar LINK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI),\n});\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar REGION_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'LatLonAltBox': latLonAltBoxParser,\n    'Lod': lodParser,\n});\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar KML_SEQUENCE = makeStructureNS(NAMESPACE_URIS, ['Document', 'Placemark']);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar KML_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'Document': makeChildAppender(writeDocument),\n    'Placemark': makeChildAppender(writePlacemark),\n});\n/**\n * @type {import(\"../color.js\").Color}\n */\nvar DEFAULT_COLOR;\n/**\n * @type {Fill|null}\n */\nvar DEFAULT_FILL_STYLE = null;\n/**\n * Get the default fill style (or null if not yet set).\n * @return {Fill|null} The default fill style.\n */\nexport function getDefaultFillStyle() {\n    return DEFAULT_FILL_STYLE;\n}\n/**\n * @type {import(\"../size.js\").Size}\n */\nvar DEFAULT_IMAGE_STYLE_ANCHOR;\n/**\n * @type {import(\"../style/IconAnchorUnits\").default}\n */\nvar DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n/**\n * @type {import(\"../style/IconAnchorUnits\").default}\n */\nvar DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n/**\n * @type {import(\"../size.js\").Size}\n */\nvar DEFAULT_IMAGE_STYLE_SIZE;\n/**\n * @type {string}\n */\nvar DEFAULT_IMAGE_STYLE_SRC;\n/**\n * @type {import(\"../style/Image.js\").default|null}\n */\nvar DEFAULT_IMAGE_STYLE = null;\n/**\n * Get the default image style (or null if not yet set).\n * @return {import(\"../style/Image.js\").default|null} The default image style.\n */\nexport function getDefaultImageStyle() {\n    return DEFAULT_IMAGE_STYLE;\n}\n/**\n * @type {string}\n */\nvar DEFAULT_NO_IMAGE_STYLE;\n/**\n * @type {Stroke|null}\n */\nvar DEFAULT_STROKE_STYLE = null;\n/**\n * Get the default stroke style (or null if not yet set).\n * @return {Stroke|null} The default stroke style.\n */\nexport function getDefaultStrokeStyle() {\n    return DEFAULT_STROKE_STYLE;\n}\n/**\n * @type {Stroke}\n */\nvar DEFAULT_TEXT_STROKE_STYLE;\n/**\n * @type {Text|null}\n */\nvar DEFAULT_TEXT_STYLE = null;\n/**\n * Get the default text style (or null if not yet set).\n * @return {Text|null} The default text style.\n */\nexport function getDefaultTextStyle() {\n    return DEFAULT_TEXT_STYLE;\n}\n/**\n * @type {Style|null}\n */\nvar DEFAULT_STYLE = null;\n/**\n * Get the default style (or null if not yet set).\n * @return {Style|null} The default style.\n */\nexport function getDefaultStyle() {\n    return DEFAULT_STYLE;\n}\n/**\n * @type {Array<Style>|null}\n */\nvar DEFAULT_STYLE_ARRAY = null;\n/**\n * Get the default style array (or null if not yet set).\n * @return {Array<Style>|null} The default style.\n */\nexport function getDefaultStyleArray() {\n    return DEFAULT_STYLE_ARRAY;\n}\n/**\n * Function that returns the scale needed to normalize an icon image to 32 pixels.\n * @param {import(\"../size.js\").Size} size Image size.\n * @return {number} Scale.\n */\nfunction scaleForSize(size) {\n    return 32 / Math.min(size[0], size[1]);\n}\nfunction createStyleDefaults() {\n    DEFAULT_COLOR = [255, 255, 255, 1];\n    DEFAULT_FILL_STYLE = new Fill({\n        color: DEFAULT_COLOR,\n    });\n    DEFAULT_IMAGE_STYLE_ANCHOR = [20, 2];\n    DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS = IconAnchorUnits.PIXELS;\n    DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS = IconAnchorUnits.PIXELS;\n    DEFAULT_IMAGE_STYLE_SIZE = [64, 64];\n    DEFAULT_IMAGE_STYLE_SRC =\n        'https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png';\n    DEFAULT_IMAGE_STYLE = new Icon({\n        anchor: DEFAULT_IMAGE_STYLE_ANCHOR,\n        anchorOrigin: IconOrigin.BOTTOM_LEFT,\n        anchorXUnits: DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,\n        anchorYUnits: DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,\n        crossOrigin: 'anonymous',\n        rotation: 0,\n        scale: scaleForSize(DEFAULT_IMAGE_STYLE_SIZE),\n        size: DEFAULT_IMAGE_STYLE_SIZE,\n        src: DEFAULT_IMAGE_STYLE_SRC,\n    });\n    DEFAULT_NO_IMAGE_STYLE = 'NO_IMAGE';\n    DEFAULT_STROKE_STYLE = new Stroke({\n        color: DEFAULT_COLOR,\n        width: 1,\n    });\n    DEFAULT_TEXT_STROKE_STYLE = new Stroke({\n        color: [51, 51, 51, 1],\n        width: 2,\n    });\n    DEFAULT_TEXT_STYLE = new Text({\n        font: 'bold 16px Helvetica',\n        fill: DEFAULT_FILL_STYLE,\n        stroke: DEFAULT_TEXT_STROKE_STYLE,\n        scale: 0.8,\n    });\n    DEFAULT_STYLE = new Style({\n        fill: DEFAULT_FILL_STYLE,\n        image: DEFAULT_IMAGE_STYLE,\n        text: DEFAULT_TEXT_STYLE,\n        stroke: DEFAULT_STROKE_STYLE,\n        zIndex: 0,\n    });\n    DEFAULT_STYLE_ARRAY = [DEFAULT_STYLE];\n}\n/**\n * @type {HTMLTextAreaElement}\n */\nvar TEXTAREA;\n/**\n * A function that takes a url `{string}` and returns a url `{string}`.\n * Might be used to change an icon path or to substitute a\n * data url obtained from a KMZ array buffer.\n *\n * @typedef {function(string):string} IconUrlFunction\n * @api\n */\n/**\n * Function that returns a url unchanged.\n * @param {string} href Input url.\n * @return {string} Output url.\n */\nfunction defaultIconUrlFunction(href) {\n    return href;\n}\n/**\n * @typedef {Object} Options\n * @property {boolean} [extractStyles=true] Extract styles from the KML.\n * @property {boolean} [showPointNames=true] Show names as labels for placemarks which contain points.\n * @property {Array<Style>} [defaultStyle] Default style. The\n * default default style is the same as Google Earth.\n * @property {boolean} [writeStyles=true] Write styles into KML.\n * @property {null|string} [crossOrigin='anonymous'] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * @property {IconUrlFunction} [iconUrlFunction] Function that takes a url string and returns a url string.\n * Might be used to change an icon path or to substitute a data url obtained from a KMZ array buffer.\n */\n/**\n * @classdesc\n * Feature format for reading and writing data in the KML format.\n *\n * {@link module:ol/format/KML~KML#readFeature} will read the first feature from\n * a KML source.\n *\n * MultiGeometries are converted into GeometryCollections if they are a mix of\n * geometry types, and into MultiPoint/MultiLineString/MultiPolygon if they are\n * all of the same type.\n *\n * Note that the KML format uses the URL() constructor. Older browsers such as IE\n * which do not support this will need a URL polyfill to be loaded before use.\n *\n * @api\n */\nvar KML = /** @class */ (function (_super) {\n    __extends(KML, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function KML(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        if (!DEFAULT_STYLE_ARRAY) {\n            createStyleDefaults();\n        }\n        /**\n         * @type {import(\"../proj/Projection.js\").default}\n         */\n        _this.dataProjection = getProjection('EPSG:4326');\n        /**\n         * @private\n         * @type {Array<Style>}\n         */\n        _this.defaultStyle_ = options.defaultStyle\n            ? options.defaultStyle\n            : DEFAULT_STYLE_ARRAY;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.extractStyles_ =\n            options.extractStyles !== undefined ? options.extractStyles : true;\n        /**\n         * @type {boolean}\n         */\n        _this.writeStyles_ =\n            options.writeStyles !== undefined ? options.writeStyles : true;\n        /**\n         * @private\n         * @type {!Object<string, (Array<Style>|string)>}\n         */\n        _this.sharedStyles_ = {};\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.showPointNames_ =\n            options.showPointNames !== undefined ? options.showPointNames : true;\n        /**\n         * @type {null|string}\n         */\n        _this.crossOrigin_ =\n            options.crossOrigin !== undefined ? options.crossOrigin : 'anonymous';\n        /**\n         * @type {IconUrlFunction}\n         */\n        _this.iconUrlFunction_ = options.iconUrlFunction\n            ? options.iconUrlFunction\n            : defaultIconUrlFunction;\n        _this.supportedMediaTypes = ['application/vnd.google-earth.kml+xml'];\n        return _this;\n    }\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @private\n     * @return {Array<Feature>|undefined} Features.\n     */\n    KML.prototype.readDocumentOrFolder_ = function (node, objectStack) {\n        // FIXME use scope somehow\n        var parsersNS = makeStructureNS(NAMESPACE_URIS, {\n            'Document': makeArrayExtender(this.readDocumentOrFolder_, this),\n            'Folder': makeArrayExtender(this.readDocumentOrFolder_, this),\n            'Placemark': makeArrayPusher(this.readPlacemark_, this),\n            'Style': this.readSharedStyle_.bind(this),\n            'StyleMap': this.readSharedStyleMap_.bind(this),\n        });\n        /** @type {Array<Feature>} */\n        // @ts-ignore\n        var features = pushParseAndPop([], parsersNS, node, objectStack, this);\n        if (features) {\n            return features;\n        }\n        else {\n            return undefined;\n        }\n    };\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @private\n     * @return {Feature|undefined} Feature.\n     */\n    KML.prototype.readPlacemark_ = function (node, objectStack) {\n        var object = pushParseAndPop({ 'geometry': null }, PLACEMARK_PARSERS, node, objectStack, this);\n        if (!object) {\n            return undefined;\n        }\n        var feature = new Feature();\n        var id = node.getAttribute('id');\n        if (id !== null) {\n            feature.setId(id);\n        }\n        var options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n        var geometry = object['geometry'];\n        if (geometry) {\n            transformGeometryWithOptions(geometry, false, options);\n        }\n        feature.setGeometry(geometry);\n        delete object['geometry'];\n        if (this.extractStyles_) {\n            var style = object['Style'];\n            var styleUrl = object['styleUrl'];\n            var styleFunction = createFeatureStyleFunction(style, styleUrl, this.defaultStyle_, this.sharedStyles_, this.showPointNames_);\n            feature.setStyle(styleFunction);\n        }\n        delete object['Style'];\n        // we do not remove the styleUrl property from the object, so it\n        // gets stored on feature when setProperties is called\n        feature.setProperties(object, true);\n        return feature;\n    };\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @private\n     */\n    KML.prototype.readSharedStyle_ = function (node, objectStack) {\n        var id = node.getAttribute('id');\n        if (id !== null) {\n            var style = readStyle.call(this, node, objectStack);\n            if (style) {\n                var styleUri = void 0;\n                var baseURI = node.baseURI;\n                if (!baseURI || baseURI == 'about:blank') {\n                    baseURI = window.location.href;\n                }\n                if (baseURI) {\n                    var url = new URL('#' + id, baseURI);\n                    styleUri = url.href;\n                }\n                else {\n                    styleUri = '#' + id;\n                }\n                this.sharedStyles_[styleUri] = style;\n            }\n        }\n    };\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @private\n     */\n    KML.prototype.readSharedStyleMap_ = function (node, objectStack) {\n        var id = node.getAttribute('id');\n        if (id === null) {\n            return;\n        }\n        var styleMapValue = readStyleMapValue.call(this, node, objectStack);\n        if (!styleMapValue) {\n            return;\n        }\n        var styleUri;\n        var baseURI = node.baseURI;\n        if (!baseURI || baseURI == 'about:blank') {\n            baseURI = window.location.href;\n        }\n        if (baseURI) {\n            var url = new URL('#' + id, baseURI);\n            styleUri = url.href;\n        }\n        else {\n            styleUri = '#' + id;\n        }\n        this.sharedStyles_[styleUri] = styleMapValue;\n    };\n    /**\n     * @param {Element} node Node.\n     * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Options.\n     * @return {import(\"../Feature.js\").default} Feature.\n     */\n    KML.prototype.readFeatureFromNode = function (node, opt_options) {\n        if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n            return null;\n        }\n        var feature = this.readPlacemark_(node, [\n            this.getReadOptions(node, opt_options),\n        ]);\n        if (feature) {\n            return feature;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @protected\n     * @param {Element} node Node.\n     * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Options.\n     * @return {Array<import(\"../Feature.js\").default>} Features.\n     */\n    KML.prototype.readFeaturesFromNode = function (node, opt_options) {\n        if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n            return [];\n        }\n        var features;\n        var localName = node.localName;\n        if (localName == 'Document' || localName == 'Folder') {\n            features = this.readDocumentOrFolder_(node, [\n                this.getReadOptions(node, opt_options),\n            ]);\n            if (features) {\n                return features;\n            }\n            else {\n                return [];\n            }\n        }\n        else if (localName == 'Placemark') {\n            var feature = this.readPlacemark_(node, [\n                this.getReadOptions(node, opt_options),\n            ]);\n            if (feature) {\n                return [feature];\n            }\n            else {\n                return [];\n            }\n        }\n        else if (localName == 'kml') {\n            features = [];\n            for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n                var fs = this.readFeaturesFromNode(n, opt_options);\n                if (fs) {\n                    extend(features, fs);\n                }\n            }\n            return features;\n        }\n        else {\n            return [];\n        }\n    };\n    /**\n     * Read the name of the KML.\n     *\n     * @param {Document|Element|string} source Source.\n     * @return {string|undefined} Name.\n     * @api\n     */\n    KML.prototype.readName = function (source) {\n        if (!source) {\n            return undefined;\n        }\n        else if (typeof source === 'string') {\n            var doc = parse(source);\n            return this.readNameFromDocument(doc);\n        }\n        else if (isDocument(source)) {\n            return this.readNameFromDocument(/** @type {Document} */ (source));\n        }\n        else {\n            return this.readNameFromNode(/** @type {Element} */ (source));\n        }\n    };\n    /**\n     * @param {Document} doc Document.\n     * @return {string|undefined} Name.\n     */\n    KML.prototype.readNameFromDocument = function (doc) {\n        for (var n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n            if (n.nodeType == Node.ELEMENT_NODE) {\n                var name_1 = this.readNameFromNode(/** @type {Element} */ (n));\n                if (name_1) {\n                    return name_1;\n                }\n            }\n        }\n        return undefined;\n    };\n    /**\n     * @param {Element} node Node.\n     * @return {string|undefined} Name.\n     */\n    KML.prototype.readNameFromNode = function (node) {\n        for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n            if (includes(NAMESPACE_URIS, n.namespaceURI) && n.localName == 'name') {\n                return readString(n);\n            }\n        }\n        for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n            var localName = n.localName;\n            if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n                (localName == 'Document' ||\n                    localName == 'Folder' ||\n                    localName == 'Placemark' ||\n                    localName == 'kml')) {\n                var name_2 = this.readNameFromNode(n);\n                if (name_2) {\n                    return name_2;\n                }\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Read the network links of the KML.\n     *\n     * @param {Document|Element|string} source Source.\n     * @return {Array<Object>} Network links.\n     * @api\n     */\n    KML.prototype.readNetworkLinks = function (source) {\n        var networkLinks = [];\n        if (typeof source === 'string') {\n            var doc = parse(source);\n            extend(networkLinks, this.readNetworkLinksFromDocument(doc));\n        }\n        else if (isDocument(source)) {\n            extend(networkLinks, this.readNetworkLinksFromDocument(/** @type {Document} */ (source)));\n        }\n        else {\n            extend(networkLinks, this.readNetworkLinksFromNode(/** @type {Element} */ (source)));\n        }\n        return networkLinks;\n    };\n    /**\n     * @param {Document} doc Document.\n     * @return {Array<Object>} Network links.\n     */\n    KML.prototype.readNetworkLinksFromDocument = function (doc) {\n        var networkLinks = [];\n        for (var n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n            if (n.nodeType == Node.ELEMENT_NODE) {\n                extend(networkLinks, this.readNetworkLinksFromNode(/** @type {Element} */ (n)));\n            }\n        }\n        return networkLinks;\n    };\n    /**\n     * @param {Element} node Node.\n     * @return {Array<Object>} Network links.\n     */\n    KML.prototype.readNetworkLinksFromNode = function (node) {\n        var networkLinks = [];\n        for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n            if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n                n.localName == 'NetworkLink') {\n                var obj = pushParseAndPop({}, NETWORK_LINK_PARSERS, n, []);\n                networkLinks.push(obj);\n            }\n        }\n        for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n            var localName = n.localName;\n            if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n                (localName == 'Document' || localName == 'Folder' || localName == 'kml')) {\n                extend(networkLinks, this.readNetworkLinksFromNode(n));\n            }\n        }\n        return networkLinks;\n    };\n    /**\n     * Read the regions of the KML.\n     *\n     * @param {Document|Element|string} source Source.\n     * @return {Array<Object>} Regions.\n     * @api\n     */\n    KML.prototype.readRegion = function (source) {\n        var regions = [];\n        if (typeof source === 'string') {\n            var doc = parse(source);\n            extend(regions, this.readRegionFromDocument(doc));\n        }\n        else if (isDocument(source)) {\n            extend(regions, this.readRegionFromDocument(/** @type {Document} */ (source)));\n        }\n        else {\n            extend(regions, this.readRegionFromNode(/** @type {Element} */ (source)));\n        }\n        return regions;\n    };\n    /**\n     * @param {Document} doc Document.\n     * @return {Array<Object>} Region.\n     */\n    KML.prototype.readRegionFromDocument = function (doc) {\n        var regions = [];\n        for (var n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n            if (n.nodeType == Node.ELEMENT_NODE) {\n                extend(regions, this.readRegionFromNode(/** @type {Element} */ (n)));\n            }\n        }\n        return regions;\n    };\n    /**\n     * @param {Element} node Node.\n     * @return {Array<Object>} Region.\n     * @api\n     */\n    KML.prototype.readRegionFromNode = function (node) {\n        var regions = [];\n        for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n            if (includes(NAMESPACE_URIS, n.namespaceURI) && n.localName == 'Region') {\n                var obj = pushParseAndPop({}, REGION_PARSERS, n, []);\n                regions.push(obj);\n            }\n        }\n        for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n            var localName = n.localName;\n            if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n                (localName == 'Document' || localName == 'Folder' || localName == 'kml')) {\n                extend(regions, this.readRegionFromNode(n));\n            }\n        }\n        return regions;\n    };\n    /**\n     * Encode an array of features in the KML format as an XML node. GeometryCollections,\n     * MultiPoints, MultiLineStrings, and MultiPolygons are output as MultiGeometries.\n     *\n     * @param {Array<Feature>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Options.\n     * @return {Node} Node.\n     * @api\n     */\n    KML.prototype.writeFeaturesNode = function (features, opt_options) {\n        opt_options = this.adaptOptions(opt_options);\n        var kml = createElementNS(NAMESPACE_URIS[4], 'kml');\n        var xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n        kml.setAttributeNS(xmlnsUri, 'xmlns:gx', GX_NAMESPACE_URIS[0]);\n        kml.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n        kml.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n        var /** @type {import(\"../xml.js\").NodeStackItem} */ context = {\n            node: kml,\n        };\n        /** @type {!Object<string, (Array<Feature>|Feature|undefined)>} */\n        var properties = {};\n        if (features.length > 1) {\n            properties['Document'] = features;\n        }\n        else if (features.length == 1) {\n            properties['Placemark'] = features[0];\n        }\n        var orderedKeys = KML_SEQUENCE[kml.namespaceURI];\n        var values = makeSequence(properties, orderedKeys);\n        pushSerializeAndPop(context, KML_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, [opt_options], orderedKeys, this);\n        return kml;\n    };\n    return KML;\n}(XMLFeature));\n/**\n * @param {Style|undefined} foundStyle Style.\n * @param {string} name Name.\n * @return {Style} style Style.\n */\nfunction createNameStyleFunction(foundStyle, name) {\n    var textOffset = [0, 0];\n    var textAlign = 'start';\n    var imageStyle = foundStyle.getImage();\n    if (imageStyle) {\n        var imageSize = imageStyle.getSize();\n        if (imageSize && imageSize.length == 2) {\n            var imageScale = imageStyle.getScaleArray();\n            var anchor = imageStyle.getAnchor();\n            // Offset the label to be centered to the right of the icon,\n            // if there is one.\n            textOffset[0] = imageScale[0] * (imageSize[0] - anchor[0]);\n            textOffset[1] = imageScale[1] * (imageSize[1] / 2 - anchor[1]);\n            textAlign = 'left';\n        }\n    }\n    var textStyle = foundStyle.getText();\n    if (textStyle) {\n        // clone the text style, customizing it with name, alignments and offset.\n        // Note that kml does not support many text options that OpenLayers does (rotation, textBaseline).\n        textStyle = textStyle.clone();\n        textStyle.setFont(textStyle.getFont() || DEFAULT_TEXT_STYLE.getFont());\n        textStyle.setScale(textStyle.getScale() || DEFAULT_TEXT_STYLE.getScale());\n        textStyle.setFill(textStyle.getFill() || DEFAULT_TEXT_STYLE.getFill());\n        textStyle.setStroke(textStyle.getStroke() || DEFAULT_TEXT_STROKE_STYLE);\n    }\n    else {\n        textStyle = DEFAULT_TEXT_STYLE.clone();\n    }\n    textStyle.setText(name);\n    textStyle.setOffsetX(textOffset[0]);\n    textStyle.setOffsetY(textOffset[1]);\n    textStyle.setTextAlign(textAlign);\n    var nameStyle = new Style({\n        image: imageStyle,\n        text: textStyle,\n    });\n    return nameStyle;\n}\n/**\n * @param {Array<Style>|undefined} style Style.\n * @param {string} styleUrl Style URL.\n * @param {Array<Style>} defaultStyle Default style.\n * @param {!Object<string, (Array<Style>|string)>} sharedStyles Shared styles.\n * @param {boolean|undefined} showPointNames true to show names for point placemarks.\n * @return {import(\"../style/Style.js\").StyleFunction} Feature style function.\n */\nfunction createFeatureStyleFunction(style, styleUrl, defaultStyle, sharedStyles, showPointNames) {\n    return (\n    /**\n     * @param {Feature} feature feature.\n     * @param {number} resolution Resolution.\n     * @return {Array<Style>|Style} Style.\n     */\n    function (feature, resolution) {\n        var drawName = showPointNames;\n        var name = '';\n        var multiGeometryPoints = [];\n        if (drawName) {\n            var geometry = feature.getGeometry();\n            if (geometry) {\n                if (geometry instanceof GeometryCollection) {\n                    multiGeometryPoints = geometry\n                        .getGeometriesArrayRecursive()\n                        .filter(function (geometry) {\n                        var type = geometry.getType();\n                        return type === 'Point' || type === 'MultiPoint';\n                    });\n                    drawName = multiGeometryPoints.length > 0;\n                }\n                else {\n                    var type = geometry.getType();\n                    drawName = type === 'Point' || type === 'MultiPoint';\n                }\n            }\n        }\n        if (drawName) {\n            name = /** @type {string} */ (feature.get('name'));\n            drawName = drawName && !!name;\n            // convert any html character codes\n            if (drawName && name.search(/&[^&]+;/) > -1) {\n                if (!TEXTAREA) {\n                    TEXTAREA = document.createElement('textarea');\n                }\n                TEXTAREA.innerHTML = name;\n                name = TEXTAREA.value;\n            }\n        }\n        var featureStyle = defaultStyle;\n        if (style) {\n            featureStyle = style;\n        }\n        else if (styleUrl) {\n            featureStyle = findStyle(styleUrl, defaultStyle, sharedStyles);\n        }\n        if (drawName) {\n            var nameStyle = createNameStyleFunction(featureStyle[0], name);\n            if (multiGeometryPoints.length > 0) {\n                // in multigeometries restrict the name style to points and create a\n                // style without image or text for geometries requiring fill or stroke\n                // including any polygon specific style if there is one\n                nameStyle.setGeometry(new GeometryCollection(multiGeometryPoints));\n                var baseStyle = new Style({\n                    geometry: featureStyle[0].getGeometry(),\n                    image: null,\n                    fill: featureStyle[0].getFill(),\n                    stroke: featureStyle[0].getStroke(),\n                    text: null,\n                });\n                return [nameStyle, baseStyle].concat(featureStyle.slice(1));\n            }\n            return nameStyle;\n        }\n        return featureStyle;\n    });\n}\n/**\n * @param {Array<Style>|string|undefined} styleValue Style value.\n * @param {Array<Style>} defaultStyle Default style.\n * @param {!Object<string, (Array<Style>|string)>} sharedStyles\n * Shared styles.\n * @return {Array<Style>} Style.\n */\nfunction findStyle(styleValue, defaultStyle, sharedStyles) {\n    if (Array.isArray(styleValue)) {\n        return styleValue;\n    }\n    else if (typeof styleValue === 'string') {\n        return findStyle(sharedStyles[styleValue], defaultStyle, sharedStyles);\n    }\n    else {\n        return defaultStyle;\n    }\n}\n/**\n * @param {Node} node Node.\n * @return {import(\"../color.js\").Color|undefined} Color.\n */\nfunction readColor(node) {\n    var s = getAllTextContent(node, false);\n    // The KML specification states that colors should not include a leading `#`\n    // but we tolerate them.\n    var m = /^\\s*#?\\s*([0-9A-Fa-f]{8})\\s*$/.exec(s);\n    if (m) {\n        var hexColor = m[1];\n        return [\n            parseInt(hexColor.substr(6, 2), 16),\n            parseInt(hexColor.substr(4, 2), 16),\n            parseInt(hexColor.substr(2, 2), 16),\n            parseInt(hexColor.substr(0, 2), 16) / 255,\n        ];\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {Node} node Node.\n * @return {Array<number>|undefined} Flat coordinates.\n */\nexport function readFlatCoordinates(node) {\n    var s = getAllTextContent(node, false);\n    var flatCoordinates = [];\n    // The KML specification states that coordinate tuples should not include\n    // spaces, but we tolerate them.\n    s = s.replace(/\\s*,\\s*/g, ',');\n    var re = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?),([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)(?:\\s+|,|$)(?:([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)(?:\\s+|$))?\\s*/i;\n    var m;\n    while ((m = re.exec(s))) {\n        var x = parseFloat(m[1]);\n        var y = parseFloat(m[2]);\n        var z = m[3] ? parseFloat(m[3]) : 0;\n        flatCoordinates.push(x, y, z);\n        s = s.substr(m[0].length);\n    }\n    if (s !== '') {\n        return undefined;\n    }\n    return flatCoordinates;\n}\n/**\n * @param {Node} node Node.\n * @return {string} URI.\n */\nfunction readURI(node) {\n    var s = getAllTextContent(node, false).trim();\n    var baseURI = node.baseURI;\n    if (!baseURI || baseURI == 'about:blank') {\n        baseURI = window.location.href;\n    }\n    if (baseURI) {\n        var url = new URL(s, baseURI);\n        return url.href;\n    }\n    else {\n        return s;\n    }\n}\n/**\n * @param {Node} node Node.\n * @return {string} URI.\n */\nfunction readStyleURL(node) {\n    // KML files in the wild occasionally forget the leading\n    // `#` on styleUrlsdefined in the same document.\n    var s = getAllTextContent(node, false)\n        .trim()\n        .replace(/^(?!.*#)/, '#');\n    var baseURI = node.baseURI;\n    if (!baseURI || baseURI == 'about:blank') {\n        baseURI = window.location.href;\n    }\n    if (baseURI) {\n        var url = new URL(s, baseURI);\n        return url.href;\n    }\n    else {\n        return s;\n    }\n}\n/**\n * @param {Element} node Node.\n * @return {Vec2} Vec2.\n */\nfunction readVec2(node) {\n    var xunits = node.getAttribute('xunits');\n    var yunits = node.getAttribute('yunits');\n    var origin;\n    if (xunits !== 'insetPixels') {\n        if (yunits !== 'insetPixels') {\n            origin = IconOrigin.BOTTOM_LEFT;\n        }\n        else {\n            origin = IconOrigin.TOP_LEFT;\n        }\n    }\n    else {\n        if (yunits !== 'insetPixels') {\n            origin = IconOrigin.BOTTOM_RIGHT;\n        }\n        else {\n            origin = IconOrigin.TOP_RIGHT;\n        }\n    }\n    return {\n        x: parseFloat(node.getAttribute('x')),\n        xunits: ICON_ANCHOR_UNITS_MAP[xunits],\n        y: parseFloat(node.getAttribute('y')),\n        yunits: ICON_ANCHOR_UNITS_MAP[yunits],\n        origin: origin,\n    };\n}\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Scale.\n */\nfunction readScale(node) {\n    return readDecimal(node);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar STYLE_MAP_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'Pair': pairDataParser,\n});\n/**\n * @this {KML}\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<Style>|string|undefined} StyleMap.\n */\nfunction readStyleMapValue(node, objectStack) {\n    return pushParseAndPop(undefined, STYLE_MAP_PARSERS, node, objectStack, this);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar ICON_STYLE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'Icon': makeObjectPropertySetter(readIcon),\n    'color': makeObjectPropertySetter(readColor),\n    'heading': makeObjectPropertySetter(readDecimal),\n    'hotSpot': makeObjectPropertySetter(readVec2),\n    'scale': makeObjectPropertySetter(readScale),\n});\n/**\n * @this {KML}\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction iconStyleParser(node, objectStack) {\n    // FIXME refreshMode\n    // FIXME refreshInterval\n    // FIXME viewRefreshTime\n    // FIXME viewBoundScale\n    // FIXME viewFormat\n    // FIXME httpQuery\n    var object = pushParseAndPop({}, ICON_STYLE_PARSERS, node, objectStack);\n    if (!object) {\n        return;\n    }\n    var styleObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    var IconObject = 'Icon' in object ? object['Icon'] : {};\n    var drawIcon = !('Icon' in object) || Object.keys(IconObject).length > 0;\n    var src;\n    var href = /** @type {string|undefined} */ (IconObject['href']);\n    if (href) {\n        src = href;\n    }\n    else if (drawIcon) {\n        src = DEFAULT_IMAGE_STYLE_SRC;\n    }\n    var anchor, anchorXUnits, anchorYUnits;\n    var anchorOrigin = IconOrigin.BOTTOM_LEFT;\n    var hotSpot = /** @type {Vec2|undefined} */ (object['hotSpot']);\n    if (hotSpot) {\n        anchor = [hotSpot.x, hotSpot.y];\n        anchorXUnits = hotSpot.xunits;\n        anchorYUnits = hotSpot.yunits;\n        anchorOrigin = hotSpot.origin;\n    }\n    else if (/^http:\\/\\/maps\\.(?:google|gstatic)\\.com\\//.test(src)) {\n        // Google hotspots from https://kml4earth.appspot.com/icons.html#notes\n        if (/pushpin/.test(src)) {\n            anchor = DEFAULT_IMAGE_STYLE_ANCHOR;\n            anchorXUnits = DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n            anchorYUnits = DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n        }\n        else if (/arrow-reverse/.test(src)) {\n            anchor = [54, 42];\n            anchorXUnits = DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n            anchorYUnits = DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n        }\n        else if (/paddle/.test(src)) {\n            anchor = [32, 1];\n            anchorXUnits = DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n            anchorYUnits = DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n        }\n    }\n    var offset;\n    var x = /** @type {number|undefined} */ (IconObject['x']);\n    var y = /** @type {number|undefined} */ (IconObject['y']);\n    if (x !== undefined && y !== undefined) {\n        offset = [x, y];\n    }\n    var size;\n    var w = /** @type {number|undefined} */ (IconObject['w']);\n    var h = /** @type {number|undefined} */ (IconObject['h']);\n    if (w !== undefined && h !== undefined) {\n        size = [w, h];\n    }\n    var rotation;\n    var heading = /** @type {number} */ (object['heading']);\n    if (heading !== undefined) {\n        rotation = toRadians(heading);\n    }\n    var scale = /** @type {number|undefined} */ (object['scale']);\n    var color = /** @type {Array<number>|undefined} */ (object['color']);\n    if (drawIcon) {\n        if (src == DEFAULT_IMAGE_STYLE_SRC) {\n            size = DEFAULT_IMAGE_STYLE_SIZE;\n        }\n        var imageStyle_1 = new Icon({\n            anchor: anchor,\n            anchorOrigin: anchorOrigin,\n            anchorXUnits: anchorXUnits,\n            anchorYUnits: anchorYUnits,\n            crossOrigin: this.crossOrigin_,\n            offset: offset,\n            offsetOrigin: IconOrigin.BOTTOM_LEFT,\n            rotation: rotation,\n            scale: scale,\n            size: size,\n            src: this.iconUrlFunction_(src),\n            color: color,\n        });\n        var imageScale_1 = imageStyle_1.getScaleArray()[0];\n        var imageSize = imageStyle_1.getSize();\n        if (imageSize === null) {\n            var imageState = imageStyle_1.getImageState();\n            if (imageState === ImageState.IDLE || imageState === ImageState.LOADING) {\n                var listener_1 = function () {\n                    var imageState = imageStyle_1.getImageState();\n                    if (!(imageState === ImageState.IDLE ||\n                        imageState === ImageState.LOADING)) {\n                        var imageSize_1 = imageStyle_1.getSize();\n                        if (imageSize_1 && imageSize_1.length == 2) {\n                            var resizeScale = scaleForSize(imageSize_1);\n                            imageStyle_1.setScale(imageScale_1 * resizeScale);\n                        }\n                        imageStyle_1.unlistenImageChange(listener_1);\n                    }\n                };\n                imageStyle_1.listenImageChange(listener_1);\n                if (imageState === ImageState.IDLE) {\n                    imageStyle_1.load();\n                }\n            }\n        }\n        else if (imageSize.length == 2) {\n            var resizeScale = scaleForSize(imageSize);\n            imageStyle_1.setScale(imageScale_1 * resizeScale);\n        }\n        styleObject['imageStyle'] = imageStyle_1;\n    }\n    else {\n        // handle the case when we explicitly want to draw no icon.\n        styleObject['imageStyle'] = DEFAULT_NO_IMAGE_STYLE;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar LABEL_STYLE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'scale': makeObjectPropertySetter(readScale),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction labelStyleParser(node, objectStack) {\n    // FIXME colorMode\n    var object = pushParseAndPop({}, LABEL_STYLE_PARSERS, node, objectStack);\n    if (!object) {\n        return;\n    }\n    var styleObject = objectStack[objectStack.length - 1];\n    var textStyle = new Text({\n        fill: new Fill({\n            color: \n            /** @type {import(\"../color.js\").Color} */\n            ('color' in object ? object['color'] : DEFAULT_COLOR),\n        }),\n        scale: /** @type {number|undefined} */ (object['scale']),\n    });\n    styleObject['textStyle'] = textStyle;\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar LINE_STYLE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'width': makeObjectPropertySetter(readDecimal),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction lineStyleParser(node, objectStack) {\n    // FIXME colorMode\n    // FIXME gx:outerColor\n    // FIXME gx:outerWidth\n    // FIXME gx:physicalWidth\n    // FIXME gx:labelVisibility\n    var object = pushParseAndPop({}, LINE_STYLE_PARSERS, node, objectStack);\n    if (!object) {\n        return;\n    }\n    var styleObject = objectStack[objectStack.length - 1];\n    var strokeStyle = new Stroke({\n        color: \n        /** @type {import(\"../color.js\").Color} */\n        ('color' in object ? object['color'] : DEFAULT_COLOR),\n        width: /** @type {number} */ ('width' in object ? object['width'] : 1),\n    });\n    styleObject['strokeStyle'] = strokeStyle;\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar POLY_STYLE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'fill': makeObjectPropertySetter(readBoolean),\n    'outline': makeObjectPropertySetter(readBoolean),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction polyStyleParser(node, objectStack) {\n    // FIXME colorMode\n    var object = pushParseAndPop({}, POLY_STYLE_PARSERS, node, objectStack);\n    if (!object) {\n        return;\n    }\n    var styleObject = objectStack[objectStack.length - 1];\n    var fillStyle = new Fill({\n        color: \n        /** @type {import(\"../color.js\").Color} */\n        ('color' in object ? object['color'] : DEFAULT_COLOR),\n    });\n    styleObject['fillStyle'] = fillStyle;\n    var fill = /** @type {boolean|undefined} */ (object['fill']);\n    if (fill !== undefined) {\n        styleObject['fill'] = fill;\n    }\n    var outline = /** @type {boolean|undefined} */ (object['outline']);\n    if (outline !== undefined) {\n        styleObject['outline'] = outline;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar FLAT_LINEAR_RING_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<number>} LinearRing flat coordinates.\n */\nfunction readFlatLinearRing(node, objectStack) {\n    return pushParseAndPop(null, FLAT_LINEAR_RING_PARSERS, node, objectStack);\n}\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction gxCoordParser(node, objectStack) {\n    var gxTrackObject = \n    /** @type {GxTrackObject} */\n    (objectStack[objectStack.length - 1]);\n    var coordinates = gxTrackObject.coordinates;\n    var s = getAllTextContent(node, false);\n    var re = /^\\s*([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s*$/i;\n    var m = re.exec(s);\n    if (m) {\n        var x = parseFloat(m[1]);\n        var y = parseFloat(m[2]);\n        var z = parseFloat(m[3]);\n        coordinates.push([x, y, z]);\n    }\n    else {\n        coordinates.push([]);\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar GX_MULTITRACK_GEOMETRY_PARSERS = makeStructureNS(GX_NAMESPACE_URIS, {\n    'Track': makeArrayPusher(readGxTrack),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {MultiLineString|undefined} MultiLineString.\n */\nfunction readGxMultiTrack(node, objectStack) {\n    var lineStrings = pushParseAndPop([], GX_MULTITRACK_GEOMETRY_PARSERS, node, objectStack);\n    if (!lineStrings) {\n        return undefined;\n    }\n    return new MultiLineString(lineStrings);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar GX_TRACK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'when': whenParser,\n}, makeStructureNS(GX_NAMESPACE_URIS, {\n    'coord': gxCoordParser,\n}));\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {LineString|undefined} LineString.\n */\nfunction readGxTrack(node, objectStack) {\n    var gxTrackObject = pushParseAndPop(\n    /** @type {GxTrackObject} */ ({\n        coordinates: [],\n        whens: [],\n    }), GX_TRACK_PARSERS, node, objectStack);\n    if (!gxTrackObject) {\n        return undefined;\n    }\n    var flatCoordinates = [];\n    var coordinates = gxTrackObject.coordinates;\n    var whens = gxTrackObject.whens;\n    for (var i = 0, ii = Math.min(coordinates.length, whens.length); i < ii; ++i) {\n        if (coordinates[i].length == 3) {\n            flatCoordinates.push(coordinates[i][0], coordinates[i][1], coordinates[i][2], whens[i]);\n        }\n    }\n    return new LineString(flatCoordinates, GeometryLayout.XYZM);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar ICON_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI),\n}, makeStructureNS(GX_NAMESPACE_URIS, {\n    'x': makeObjectPropertySetter(readDecimal),\n    'y': makeObjectPropertySetter(readDecimal),\n    'w': makeObjectPropertySetter(readDecimal),\n    'h': makeObjectPropertySetter(readDecimal),\n}));\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object} Icon object.\n */\nfunction readIcon(node, objectStack) {\n    var iconObject = pushParseAndPop({}, ICON_PARSERS, node, objectStack);\n    if (iconObject) {\n        return iconObject;\n    }\n    else {\n        return null;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar GEOMETRY_FLAT_COORDINATES_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<number>} Flat coordinates.\n */\nfunction readFlatCoordinatesFromNode(node, objectStack) {\n    return pushParseAndPop(null, GEOMETRY_FLAT_COORDINATES_PARSERS, node, objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar EXTRUDE_AND_ALTITUDE_MODE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'extrude': makeObjectPropertySetter(readBoolean),\n    'tessellate': makeObjectPropertySetter(readBoolean),\n    'altitudeMode': makeObjectPropertySetter(readString),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {LineString|undefined} LineString.\n */\nfunction readLineString(node, objectStack) {\n    var properties = pushParseAndPop({}, EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node, objectStack);\n    var flatCoordinates = readFlatCoordinatesFromNode(node, objectStack);\n    if (flatCoordinates) {\n        var lineString = new LineString(flatCoordinates, GeometryLayout.XYZ);\n        lineString.setProperties(properties, true);\n        return lineString;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Polygon|undefined} Polygon.\n */\nfunction readLinearRing(node, objectStack) {\n    var properties = pushParseAndPop({}, EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node, objectStack);\n    var flatCoordinates = readFlatCoordinatesFromNode(node, objectStack);\n    if (flatCoordinates) {\n        var polygon = new Polygon(flatCoordinates, GeometryLayout.XYZ, [\n            flatCoordinates.length,\n        ]);\n        polygon.setProperties(properties, true);\n        return polygon;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar MULTI_GEOMETRY_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'LineString': makeArrayPusher(readLineString),\n    'LinearRing': makeArrayPusher(readLinearRing),\n    'MultiGeometry': makeArrayPusher(readMultiGeometry),\n    'Point': makeArrayPusher(readPoint),\n    'Polygon': makeArrayPusher(readPolygon),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\nfunction readMultiGeometry(node, objectStack) {\n    var geometries = pushParseAndPop([], MULTI_GEOMETRY_PARSERS, node, objectStack);\n    if (!geometries) {\n        return null;\n    }\n    if (geometries.length === 0) {\n        return new GeometryCollection(geometries);\n    }\n    var multiGeometry;\n    var homogeneous = true;\n    var type = geometries[0].getType();\n    var geometry;\n    for (var i = 1, ii = geometries.length; i < ii; ++i) {\n        geometry = geometries[i];\n        if (geometry.getType() != type) {\n            homogeneous = false;\n            break;\n        }\n    }\n    if (homogeneous) {\n        var layout = void 0;\n        var flatCoordinates = void 0;\n        if (type == 'Point') {\n            var point = geometries[0];\n            layout = point.getLayout();\n            flatCoordinates = point.getFlatCoordinates();\n            for (var i = 1, ii = geometries.length; i < ii; ++i) {\n                geometry = geometries[i];\n                extend(flatCoordinates, geometry.getFlatCoordinates());\n            }\n            multiGeometry = new MultiPoint(flatCoordinates, layout);\n            setCommonGeometryProperties(multiGeometry, geometries);\n        }\n        else if (type == 'LineString') {\n            multiGeometry = new MultiLineString(geometries);\n            setCommonGeometryProperties(multiGeometry, geometries);\n        }\n        else if (type == 'Polygon') {\n            multiGeometry = new MultiPolygon(geometries);\n            setCommonGeometryProperties(multiGeometry, geometries);\n        }\n        else if (type == 'GeometryCollection') {\n            multiGeometry = new GeometryCollection(geometries);\n        }\n        else {\n            assert(false, 37); // Unknown geometry type found\n        }\n    }\n    else {\n        multiGeometry = new GeometryCollection(geometries);\n    }\n    return /** @type {import(\"../geom/Geometry.js\").default} */ (multiGeometry);\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Point|undefined} Point.\n */\nfunction readPoint(node, objectStack) {\n    var properties = pushParseAndPop({}, EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node, objectStack);\n    var flatCoordinates = readFlatCoordinatesFromNode(node, objectStack);\n    if (flatCoordinates) {\n        var point = new Point(flatCoordinates, GeometryLayout.XYZ);\n        point.setProperties(properties, true);\n        return point;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar FLAT_LINEAR_RINGS_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'innerBoundaryIs': innerBoundaryIsParser,\n    'outerBoundaryIs': outerBoundaryIsParser,\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Polygon|undefined} Polygon.\n */\nfunction readPolygon(node, objectStack) {\n    var properties = pushParseAndPop(\n    /** @type {Object<string,*>} */ ({}), EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node, objectStack);\n    var flatLinearRings = pushParseAndPop([null], FLAT_LINEAR_RINGS_PARSERS, node, objectStack);\n    if (flatLinearRings && flatLinearRings[0]) {\n        var flatCoordinates = flatLinearRings[0];\n        var ends = [flatCoordinates.length];\n        for (var i = 1, ii = flatLinearRings.length; i < ii; ++i) {\n            extend(flatCoordinates, flatLinearRings[i]);\n            ends.push(flatCoordinates.length);\n        }\n        var polygon = new Polygon(flatCoordinates, GeometryLayout.XYZ, ends);\n        polygon.setProperties(properties, true);\n        return polygon;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar STYLE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'IconStyle': iconStyleParser,\n    'LabelStyle': labelStyleParser,\n    'LineStyle': lineStyleParser,\n    'PolyStyle': polyStyleParser,\n});\n/**\n * @this {KML}\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<Style>} Style.\n */\nfunction readStyle(node, objectStack) {\n    var styleObject = pushParseAndPop({}, STYLE_PARSERS, node, objectStack, this);\n    if (!styleObject) {\n        return null;\n    }\n    var fillStyle = \n    /** @type {Fill} */\n    ('fillStyle' in styleObject ? styleObject['fillStyle'] : DEFAULT_FILL_STYLE);\n    var fill = /** @type {boolean|undefined} */ (styleObject['fill']);\n    if (fill !== undefined && !fill) {\n        fillStyle = null;\n    }\n    var imageStyle;\n    if ('imageStyle' in styleObject) {\n        if (styleObject['imageStyle'] != DEFAULT_NO_IMAGE_STYLE) {\n            imageStyle = styleObject['imageStyle'];\n        }\n    }\n    else {\n        imageStyle = DEFAULT_IMAGE_STYLE;\n    }\n    var textStyle = \n    /** @type {Text} */\n    ('textStyle' in styleObject ? styleObject['textStyle'] : DEFAULT_TEXT_STYLE);\n    var strokeStyle = \n    /** @type {Stroke} */\n    ('strokeStyle' in styleObject\n        ? styleObject['strokeStyle']\n        : DEFAULT_STROKE_STYLE);\n    var outline = /** @type {boolean|undefined} */ (styleObject['outline']);\n    if (outline !== undefined && !outline) {\n        // if the polystyle specifies no outline two styles are needed,\n        // one for non-polygon geometries where linestrings require a stroke\n        // and one for polygons where there should be no stroke\n        return [\n            new Style({\n                geometry: function (feature) {\n                    var geometry = feature.getGeometry();\n                    var type = geometry.getType();\n                    if (type === 'GeometryCollection') {\n                        var collection = \n                        /** @type {import(\"../geom/GeometryCollection\").default} */ (geometry);\n                        return new GeometryCollection(collection\n                            .getGeometriesArrayRecursive()\n                            .filter(function (geometry) {\n                            var type = geometry.getType();\n                            return type !== 'Polygon' && type !== 'MultiPolygon';\n                        }));\n                    }\n                    else if (type !== 'Polygon' && type !== 'MultiPolygon') {\n                        return geometry;\n                    }\n                },\n                fill: fillStyle,\n                image: imageStyle,\n                stroke: strokeStyle,\n                text: textStyle,\n                zIndex: undefined, // FIXME\n            }),\n            new Style({\n                geometry: function (feature) {\n                    var geometry = feature.getGeometry();\n                    var type = geometry.getType();\n                    if (type === 'GeometryCollection') {\n                        var collection = \n                        /** @type {import(\"../geom/GeometryCollection\").default} */ (geometry);\n                        return new GeometryCollection(collection\n                            .getGeometriesArrayRecursive()\n                            .filter(function (geometry) {\n                            var type = geometry.getType();\n                            return type === 'Polygon' || type === 'MultiPolygon';\n                        }));\n                    }\n                    else if (type === 'Polygon' || type === 'MultiPolygon') {\n                        return geometry;\n                    }\n                },\n                fill: fillStyle,\n                stroke: null,\n                zIndex: undefined, // FIXME\n            }),\n        ];\n    }\n    return [\n        new Style({\n            fill: fillStyle,\n            image: imageStyle,\n            stroke: strokeStyle,\n            text: textStyle,\n            zIndex: undefined, // FIXME\n        }),\n    ];\n}\n/**\n * Reads an array of geometries and creates arrays for common geometry\n * properties. Then sets them to the multi geometry.\n * @param {MultiPoint|MultiLineString|MultiPolygon} multiGeometry A multi-geometry.\n * @param {Array<import(\"../geom/Geometry.js\").default>} geometries List of geometries.\n */\nfunction setCommonGeometryProperties(multiGeometry, geometries) {\n    var ii = geometries.length;\n    var extrudes = new Array(geometries.length);\n    var tessellates = new Array(geometries.length);\n    var altitudeModes = new Array(geometries.length);\n    var hasExtrude, hasTessellate, hasAltitudeMode;\n    hasExtrude = false;\n    hasTessellate = false;\n    hasAltitudeMode = false;\n    for (var i = 0; i < ii; ++i) {\n        var geometry = geometries[i];\n        extrudes[i] = geometry.get('extrude');\n        tessellates[i] = geometry.get('tessellate');\n        altitudeModes[i] = geometry.get('altitudeMode');\n        hasExtrude = hasExtrude || extrudes[i] !== undefined;\n        hasTessellate = hasTessellate || tessellates[i] !== undefined;\n        hasAltitudeMode = hasAltitudeMode || altitudeModes[i];\n    }\n    if (hasExtrude) {\n        multiGeometry.set('extrude', extrudes);\n    }\n    if (hasTessellate) {\n        multiGeometry.set('tessellate', tessellates);\n    }\n    if (hasAltitudeMode) {\n        multiGeometry.set('altitudeMode', altitudeModes);\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar DATA_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'displayName': makeObjectPropertySetter(readString),\n    'value': makeObjectPropertySetter(readString),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction dataParser(node, objectStack) {\n    var name = node.getAttribute('name');\n    parseNode(DATA_PARSERS, node, objectStack);\n    var featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    if (name && featureObject.displayName) {\n        featureObject[name] = {\n            value: featureObject.value,\n            displayName: featureObject.displayName,\n            toString: function () {\n                return featureObject.value;\n            },\n        };\n    }\n    else if (name !== null) {\n        featureObject[name] = featureObject.value;\n    }\n    else if (featureObject.displayName !== null) {\n        featureObject[featureObject.displayName] = featureObject.value;\n    }\n    delete featureObject['value'];\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar EXTENDED_DATA_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'Data': dataParser,\n    'SchemaData': schemaDataParser,\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction extendedDataParser(node, objectStack) {\n    parseNode(EXTENDED_DATA_PARSERS, node, objectStack);\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction regionParser(node, objectStack) {\n    parseNode(REGION_PARSERS, node, objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar PAIR_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'Style': makeObjectPropertySetter(readStyle),\n    'key': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readStyleURL),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction pairDataParser(node, objectStack) {\n    var pairObject = pushParseAndPop({}, PAIR_PARSERS, node, objectStack, this);\n    if (!pairObject) {\n        return;\n    }\n    var key = /** @type {string|undefined} */ (pairObject['key']);\n    if (key && key == 'normal') {\n        var styleUrl = /** @type {string|undefined} */ (pairObject['styleUrl']);\n        if (styleUrl) {\n            objectStack[objectStack.length - 1] = styleUrl;\n        }\n        var style = /** @type {Style} */ (pairObject['Style']);\n        if (style) {\n            objectStack[objectStack.length - 1] = style;\n        }\n    }\n}\n/**\n * @this {KML}\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction placemarkStyleMapParser(node, objectStack) {\n    var styleMapValue = readStyleMapValue.call(this, node, objectStack);\n    if (!styleMapValue) {\n        return;\n    }\n    var placemarkObject = objectStack[objectStack.length - 1];\n    if (Array.isArray(styleMapValue)) {\n        placemarkObject['Style'] = styleMapValue;\n    }\n    else if (typeof styleMapValue === 'string') {\n        placemarkObject['styleUrl'] = styleMapValue;\n    }\n    else {\n        assert(false, 38); // `styleMapValue` has an unknown type\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar SCHEMA_DATA_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'SimpleData': simpleDataParser,\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction schemaDataParser(node, objectStack) {\n    parseNode(SCHEMA_DATA_PARSERS, node, objectStack);\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction simpleDataParser(node, objectStack) {\n    var name = node.getAttribute('name');\n    if (name !== null) {\n        var data = readString(node);\n        var featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n        featureObject[name] = data;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar LAT_LON_ALT_BOX_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'altitudeMode': makeObjectPropertySetter(readString),\n    'minAltitude': makeObjectPropertySetter(readDecimal),\n    'maxAltitude': makeObjectPropertySetter(readDecimal),\n    'north': makeObjectPropertySetter(readDecimal),\n    'south': makeObjectPropertySetter(readDecimal),\n    'east': makeObjectPropertySetter(readDecimal),\n    'west': makeObjectPropertySetter(readDecimal),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction latLonAltBoxParser(node, objectStack) {\n    var object = pushParseAndPop({}, LAT_LON_ALT_BOX_PARSERS, node, objectStack);\n    if (!object) {\n        return;\n    }\n    var regionObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    var extent = [\n        parseFloat(object['west']),\n        parseFloat(object['south']),\n        parseFloat(object['east']),\n        parseFloat(object['north']),\n    ];\n    regionObject['extent'] = extent;\n    regionObject['altitudeMode'] = object['altitudeMode'];\n    regionObject['minAltitude'] = parseFloat(object['minAltitude']);\n    regionObject['maxAltitude'] = parseFloat(object['maxAltitude']);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar LOD_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'minLodPixels': makeObjectPropertySetter(readDecimal),\n    'maxLodPixels': makeObjectPropertySetter(readDecimal),\n    'minFadeExtent': makeObjectPropertySetter(readDecimal),\n    'maxFadeExtent': makeObjectPropertySetter(readDecimal),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction lodParser(node, objectStack) {\n    var object = pushParseAndPop({}, LOD_PARSERS, node, objectStack);\n    if (!object) {\n        return;\n    }\n    var lodObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    lodObject['minLodPixels'] = parseFloat(object['minLodPixels']);\n    lodObject['maxLodPixels'] = parseFloat(object['maxLodPixels']);\n    lodObject['minFadeExtent'] = parseFloat(object['minFadeExtent']);\n    lodObject['maxFadeExtent'] = parseFloat(object['maxFadeExtent']);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar INNER_BOUNDARY_IS_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    // KML spec only allows one LinearRing  per innerBoundaryIs, but Google Earth\n    // allows multiple, so we parse multiple here too.\n    'LinearRing': makeArrayPusher(readFlatLinearRing),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction innerBoundaryIsParser(node, objectStack) {\n    var innerBoundaryFlatLinearRings = pushParseAndPop(\n    /** @type {Array<Array<number>>} */ ([]), INNER_BOUNDARY_IS_PARSERS, node, objectStack);\n    if (innerBoundaryFlatLinearRings.length > 0) {\n        var flatLinearRings = \n        /** @type {Array<Array<number>>} */\n        (objectStack[objectStack.length - 1]);\n        flatLinearRings.push.apply(flatLinearRings, innerBoundaryFlatLinearRings);\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar OUTER_BOUNDARY_IS_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing),\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction outerBoundaryIsParser(node, objectStack) {\n    /** @type {Array<number>|undefined} */\n    var flatLinearRing = pushParseAndPop(undefined, OUTER_BOUNDARY_IS_PARSERS, node, objectStack);\n    if (flatLinearRing) {\n        var flatLinearRings = \n        /** @type {Array<Array<number>>} */\n        (objectStack[objectStack.length - 1]);\n        flatLinearRings[0] = flatLinearRing;\n    }\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction linkParser(node, objectStack) {\n    parseNode(LINK_PARSERS, node, objectStack);\n}\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction whenParser(node, objectStack) {\n    var gxTrackObject = \n    /** @type {GxTrackObject} */\n    (objectStack[objectStack.length - 1]);\n    var whens = gxTrackObject.whens;\n    var s = getAllTextContent(node, false);\n    var when = Date.parse(s);\n    whens.push(isNaN(when) ? 0 : when);\n}\n/**\n * @param {Node} node Node to append a TextNode with the color to.\n * @param {import(\"../color.js\").Color|string} color Color.\n */\nfunction writeColorTextNode(node, color) {\n    var rgba = asArray(color);\n    var opacity = rgba.length == 4 ? rgba[3] : 1;\n    /** @type {Array<string|number>} */\n    var abgr = [opacity * 255, rgba[2], rgba[1], rgba[0]];\n    for (var i = 0; i < 4; ++i) {\n        var hex = Math.floor(/** @type {number} */ (abgr[i])).toString(16);\n        abgr[i] = hex.length == 1 ? '0' + hex : hex;\n    }\n    writeStringTextNode(node, abgr.join(''));\n}\n/**\n * @param {Node} node Node to append a TextNode with the coordinates to.\n * @param {Array<number>} coordinates Coordinates.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeCoordinatesTextNode(node, coordinates, objectStack) {\n    var context = objectStack[objectStack.length - 1];\n    var layout = context['layout'];\n    var stride = context['stride'];\n    var dimension;\n    if (layout == GeometryLayout.XY || layout == GeometryLayout.XYM) {\n        dimension = 2;\n    }\n    else if (layout == GeometryLayout.XYZ || layout == GeometryLayout.XYZM) {\n        dimension = 3;\n    }\n    else {\n        assert(false, 34); // Invalid geometry layout\n    }\n    var ii = coordinates.length;\n    var text = '';\n    if (ii > 0) {\n        text += coordinates[0];\n        for (var d = 1; d < dimension; ++d) {\n            text += ',' + coordinates[d];\n        }\n        for (var i = stride; i < ii; i += stride) {\n            text += ' ' + coordinates[i];\n            for (var d = 1; d < dimension; ++d) {\n                text += ',' + coordinates[i + d];\n            }\n        }\n    }\n    writeStringTextNode(node, text);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar EXTENDEDDATA_NODE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'Data': makeChildAppender(writeDataNode),\n    'value': makeChildAppender(writeDataNodeValue),\n    'displayName': makeChildAppender(writeDataNodeName),\n});\n/**\n * @param {Element} node Node.\n * @param {{name: *, value: *}} pair Name value pair.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeDataNode(node, pair, objectStack) {\n    node.setAttribute('name', pair.name);\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var value = pair.value;\n    if (typeof value == 'object') {\n        if (value !== null && value.displayName) {\n            pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, [value.displayName], objectStack, ['displayName']);\n        }\n        if (value !== null && value.value) {\n            pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, [value.value], objectStack, ['value']);\n        }\n    }\n    else {\n        pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, [value], objectStack, ['value']);\n    }\n}\n/**\n * @param {Node} node Node to append a TextNode with the name to.\n * @param {string} name DisplayName.\n */\nfunction writeDataNodeName(node, name) {\n    writeCDATASection(node, name);\n}\n/**\n * @param {Node} node Node to append a CDATA Section with the value to.\n * @param {string} value Value.\n */\nfunction writeDataNodeValue(node, value) {\n    writeStringTextNode(node, value);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar DOCUMENT_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'Placemark': makeChildAppender(writePlacemark),\n});\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string} [opt_nodeName] Node name.\n * @return {Node|undefined} Node.\n */\nvar DOCUMENT_NODE_FACTORY = function (value, objectStack, opt_nodeName) {\n    var parentNode = objectStack[objectStack.length - 1].node;\n    return createElementNS(parentNode.namespaceURI, 'Placemark');\n};\n/**\n * @param {Element} node Node.\n * @param {Array<Feature>} features Features.\n * @param {Array<*>} objectStack Object stack.\n * @this {KML}\n */\nfunction writeDocument(node, features, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    pushSerializeAndPop(context, DOCUMENT_SERIALIZERS, DOCUMENT_NODE_FACTORY, features, objectStack, undefined, this);\n}\n/**\n * A factory for creating Data nodes.\n * @const\n * @type {function(*, Array<*>): (Node|undefined)}\n */\nvar DATA_NODE_FACTORY = makeSimpleNodeFactory('Data');\n/**\n * @param {Element} node Node.\n * @param {{names: Array<string>, values: (Array<*>)}} namesAndValues Names and values.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeExtendedData(node, namesAndValues, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var names = namesAndValues.names;\n    var values = namesAndValues.values;\n    var length = names.length;\n    for (var i = 0; i < length; i++) {\n        pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS, DATA_NODE_FACTORY, [{ name: names[i], value: values[i] }], objectStack);\n    }\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar ICON_SEQUENCE = makeStructureNS(NAMESPACE_URIS, ['href'], makeStructureNS(GX_NAMESPACE_URIS, ['x', 'y', 'w', 'h']));\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar ICON_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'href': makeChildAppender(writeStringTextNode),\n}, makeStructureNS(GX_NAMESPACE_URIS, {\n    'x': makeChildAppender(writeDecimalTextNode),\n    'y': makeChildAppender(writeDecimalTextNode),\n    'w': makeChildAppender(writeDecimalTextNode),\n    'h': makeChildAppender(writeDecimalTextNode),\n}));\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string} [opt_nodeName] Node name.\n * @return {Node|undefined} Node.\n */\nvar GX_NODE_FACTORY = function (value, objectStack, opt_nodeName) {\n    return createElementNS(GX_NAMESPACE_URIS[0], 'gx:' + opt_nodeName);\n};\n/**\n * @param {Element} node Node.\n * @param {Object} icon Icon object.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeIcon(node, icon, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = ICON_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(icon, orderedKeys);\n    pushSerializeAndPop(context, ICON_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n    orderedKeys = ICON_SEQUENCE[GX_NAMESPACE_URIS[0]];\n    values = makeSequence(icon, orderedKeys);\n    pushSerializeAndPop(context, ICON_SERIALIZERS, GX_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar ICON_STYLE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'scale',\n    'heading',\n    'Icon',\n    'color',\n    'hotSpot',\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar ICON_STYLE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'Icon': makeChildAppender(writeIcon),\n    'color': makeChildAppender(writeColorTextNode),\n    'heading': makeChildAppender(writeDecimalTextNode),\n    'hotSpot': makeChildAppender(writeVec2),\n    'scale': makeChildAppender(writeScaleTextNode),\n});\n/**\n * @param {Element} node Node.\n * @param {import(\"../style/Icon.js\").default} style Icon style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeIconStyle(node, style, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var /** @type {Object<string, any>} */ properties = {};\n    var src = style.getSrc();\n    var size = style.getSize();\n    var iconImageSize = style.getImageSize();\n    var iconProperties = {\n        'href': src,\n    };\n    if (size) {\n        iconProperties['w'] = size[0];\n        iconProperties['h'] = size[1];\n        var anchor = style.getAnchor(); // top-left\n        var origin_1 = style.getOrigin(); // top-left\n        if (origin_1 && iconImageSize && origin_1[0] !== 0 && origin_1[1] !== size[1]) {\n            iconProperties['x'] = origin_1[0];\n            iconProperties['y'] = iconImageSize[1] - (origin_1[1] + size[1]);\n        }\n        if (anchor && (anchor[0] !== size[0] / 2 || anchor[1] !== size[1] / 2)) {\n            var /** @type {Vec2} */ hotSpot = {\n                x: anchor[0],\n                xunits: IconAnchorUnits.PIXELS,\n                y: size[1] - anchor[1],\n                yunits: IconAnchorUnits.PIXELS,\n            };\n            properties['hotSpot'] = hotSpot;\n        }\n    }\n    properties['Icon'] = iconProperties;\n    var scale = style.getScaleArray()[0];\n    var imageSize = size;\n    if (imageSize === null) {\n        imageSize = DEFAULT_IMAGE_STYLE_SIZE;\n    }\n    if (imageSize.length == 2) {\n        var resizeScale = scaleForSize(imageSize);\n        scale = scale / resizeScale;\n    }\n    if (scale !== 1) {\n        properties['scale'] = scale;\n    }\n    var rotation = style.getRotation();\n    if (rotation !== 0) {\n        properties['heading'] = rotation; // 0-360\n    }\n    var color = style.getColor();\n    if (color) {\n        properties['color'] = color;\n    }\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = ICON_STYLE_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, ICON_STYLE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar LABEL_STYLE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'color',\n    'scale',\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar LABEL_STYLE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'scale': makeChildAppender(writeScaleTextNode),\n});\n/**\n * @param {Element} node Node.\n * @param {Text} style style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeLabelStyle(node, style, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var properties = {};\n    var fill = style.getFill();\n    if (fill) {\n        properties['color'] = fill.getColor();\n    }\n    var scale = style.getScale();\n    if (scale && scale !== 1) {\n        properties['scale'] = scale;\n    }\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = LABEL_STYLE_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, LABEL_STYLE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar LINE_STYLE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, ['color', 'width']);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar LINE_STYLE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'width': makeChildAppender(writeDecimalTextNode),\n});\n/**\n * @param {Element} node Node.\n * @param {Stroke} style style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeLineStyle(node, style, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var properties = {\n        'color': style.getColor(),\n        'width': Number(style.getWidth()) || 1,\n    };\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = LINE_STYLE_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, LINE_STYLE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @const\n * @type {Object<string, string>}\n */\nvar GEOMETRY_TYPE_TO_NODENAME = {\n    'Point': 'Point',\n    'LineString': 'LineString',\n    'LinearRing': 'LinearRing',\n    'Polygon': 'Polygon',\n    'MultiPoint': 'MultiGeometry',\n    'MultiLineString': 'MultiGeometry',\n    'MultiPolygon': 'MultiGeometry',\n    'GeometryCollection': 'MultiGeometry',\n};\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string} [opt_nodeName] Node name.\n * @return {Node|undefined} Node.\n */\nvar GEOMETRY_NODE_FACTORY = function (value, objectStack, opt_nodeName) {\n    if (value) {\n        var parentNode = objectStack[objectStack.length - 1].node;\n        return createElementNS(parentNode.namespaceURI, GEOMETRY_TYPE_TO_NODENAME[\n        /** @type {import(\"../geom/Geometry.js\").default} */ (value).getType()]);\n    }\n};\n/**\n * A factory for creating Point nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar POINT_NODE_FACTORY = makeSimpleNodeFactory('Point');\n/**\n * A factory for creating LineString nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar LINE_STRING_NODE_FACTORY = makeSimpleNodeFactory('LineString');\n/**\n * A factory for creating LinearRing nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar LINEAR_RING_NODE_FACTORY = makeSimpleNodeFactory('LinearRing');\n/**\n * A factory for creating Polygon nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar POLYGON_NODE_FACTORY = makeSimpleNodeFactory('Polygon');\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar MULTI_GEOMETRY_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'LineString': makeChildAppender(writePrimitiveGeometry),\n    'Point': makeChildAppender(writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'GeometryCollection': makeChildAppender(writeMultiGeometry),\n});\n/**\n * @param {Element} node Node.\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeMultiGeometry(node, geometry, objectStack) {\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    var context = { node: node };\n    var type = geometry.getType();\n    /** @type {Array<import(\"../geom/Geometry.js\").default>} */\n    var geometries = [];\n    /** @type {function(*, Array<*>, string=): (Node|undefined)} */\n    var factory;\n    if (type === 'GeometryCollection') {\n        /** @type {GeometryCollection} */ (geometry)\n            .getGeometriesArrayRecursive()\n            .forEach(function (geometry) {\n            var type = geometry.getType();\n            if (type === 'MultiPoint') {\n                geometries = geometries.concat(\n                /** @type {MultiPoint} */ (geometry).getPoints());\n            }\n            else if (type === 'MultiLineString') {\n                geometries = geometries.concat(\n                /** @type {MultiLineString} */ (geometry).getLineStrings());\n            }\n            else if (type === 'MultiPolygon') {\n                geometries = geometries.concat(\n                /** @type {MultiPolygon} */ (geometry).getPolygons());\n            }\n            else if (type === 'Point' ||\n                type === 'LineString' ||\n                type === 'Polygon') {\n                geometries.push(geometry);\n            }\n            else {\n                assert(false, 39); // Unknown geometry type\n            }\n        });\n        factory = GEOMETRY_NODE_FACTORY;\n    }\n    else if (type === 'MultiPoint') {\n        geometries = /** @type {MultiPoint} */ (geometry).getPoints();\n        factory = POINT_NODE_FACTORY;\n    }\n    else if (type === 'MultiLineString') {\n        geometries = /** @type {MultiLineString} */ (geometry).getLineStrings();\n        factory = LINE_STRING_NODE_FACTORY;\n    }\n    else if (type === 'MultiPolygon') {\n        geometries = /** @type {MultiPolygon} */ (geometry).getPolygons();\n        factory = POLYGON_NODE_FACTORY;\n    }\n    else {\n        assert(false, 39); // Unknown geometry type\n    }\n    pushSerializeAndPop(context, MULTI_GEOMETRY_SERIALIZERS, factory, geometries, objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar BOUNDARY_IS_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'LinearRing': makeChildAppender(writePrimitiveGeometry),\n});\n/**\n * @param {Element} node Node.\n * @param {import(\"../geom/LinearRing.js\").default} linearRing Linear ring.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeBoundaryIs(node, linearRing, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    pushSerializeAndPop(context, BOUNDARY_IS_SERIALIZERS, LINEAR_RING_NODE_FACTORY, [linearRing], objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar PLACEMARK_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'ExtendedData': makeChildAppender(writeExtendedData),\n    'MultiGeometry': makeChildAppender(writeMultiGeometry),\n    'LineString': makeChildAppender(writePrimitiveGeometry),\n    'LinearRing': makeChildAppender(writePrimitiveGeometry),\n    'Point': makeChildAppender(writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'Style': makeChildAppender(writeStyle),\n    'address': makeChildAppender(writeStringTextNode),\n    'description': makeChildAppender(writeStringTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'open': makeChildAppender(writeBooleanTextNode),\n    'phoneNumber': makeChildAppender(writeStringTextNode),\n    'styleUrl': makeChildAppender(writeStringTextNode),\n    'visibility': makeChildAppender(writeBooleanTextNode),\n});\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar PLACEMARK_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'name',\n    'open',\n    'visibility',\n    'address',\n    'phoneNumber',\n    'description',\n    'styleUrl',\n    'Style',\n]);\n/**\n * A factory for creating ExtendedData nodes.\n * @const\n * @type {function(*, Array<*>): (Node|undefined)}\n */\nvar EXTENDEDDATA_NODE_FACTORY = makeSimpleNodeFactory('ExtendedData');\n/**\n * FIXME currently we do serialize arbitrary/custom feature properties\n * (ExtendedData).\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n * @this {KML}\n */\nfunction writePlacemark(node, feature, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    // set id\n    if (feature.getId()) {\n        node.setAttribute('id', /** @type {string} */ (feature.getId()));\n    }\n    // serialize properties (properties unknown to KML are not serialized)\n    var properties = feature.getProperties();\n    // don't export these to ExtendedData\n    var filter = {\n        'address': 1,\n        'description': 1,\n        'name': 1,\n        'open': 1,\n        'phoneNumber': 1,\n        'styleUrl': 1,\n        'visibility': 1,\n    };\n    filter[feature.getGeometryName()] = 1;\n    var keys = Object.keys(properties || {})\n        .sort()\n        .filter(function (v) {\n        return !filter[v];\n    });\n    var styleFunction = feature.getStyleFunction();\n    if (styleFunction) {\n        // FIXME the styles returned by the style function are supposed to be\n        // resolution-independent here\n        var styles = styleFunction(feature, 0);\n        if (styles) {\n            var styleArray = Array.isArray(styles) ? styles : [styles];\n            var pointStyles = styleArray;\n            if (feature.getGeometry()) {\n                pointStyles = styleArray.filter(function (style) {\n                    var geometry = style.getGeometryFunction()(feature);\n                    if (geometry) {\n                        var type = geometry.getType();\n                        if (type === 'GeometryCollection') {\n                            return /** @type {GeometryCollection} */ (geometry)\n                                .getGeometriesArrayRecursive()\n                                .filter(function (geometry) {\n                                var type = geometry.getType();\n                                return type === 'Point' || type === 'MultiPoint';\n                            }).length;\n                        }\n                        return type === 'Point' || type === 'MultiPoint';\n                    }\n                });\n                ('Point');\n            }\n            if (this.writeStyles_) {\n                var lineStyles = styleArray;\n                var polyStyles = styleArray;\n                if (feature.getGeometry()) {\n                    lineStyles = styleArray.filter(function (style) {\n                        var geometry = style.getGeometryFunction()(feature);\n                        if (geometry) {\n                            var type = geometry.getType();\n                            if (type === 'GeometryCollection') {\n                                return /** @type {GeometryCollection} */ (geometry)\n                                    .getGeometriesArrayRecursive()\n                                    .filter(function (geometry) {\n                                    var type = geometry.getType();\n                                    return type === 'LineString' || type === 'MultiLineString';\n                                }).length;\n                            }\n                            return type === 'LineString' || type === 'MultiLineString';\n                        }\n                    });\n                    polyStyles = styleArray.filter(function (style) {\n                        var geometry = style.getGeometryFunction()(feature);\n                        if (geometry) {\n                            var type = geometry.getType();\n                            if (type === 'GeometryCollection') {\n                                return /** @type {GeometryCollection} */ (geometry)\n                                    .getGeometriesArrayRecursive()\n                                    .filter(function (geometry) {\n                                    var type = geometry.getType();\n                                    return type === 'Polygon' || type === 'MultiPolygon';\n                                }).length;\n                            }\n                            return type === 'Polygon' || type === 'MultiPolygon';\n                        }\n                    });\n                }\n                properties['Style'] = {\n                    pointStyles: pointStyles,\n                    lineStyles: lineStyles,\n                    polyStyles: polyStyles,\n                };\n            }\n            if (pointStyles.length && properties['name'] === undefined) {\n                var textStyle = pointStyles[0].getText();\n                if (textStyle) {\n                    properties['name'] = textStyle.getText();\n                }\n            }\n        }\n    }\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = PLACEMARK_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, PLACEMARK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n    if (keys.length > 0) {\n        var sequence = makeSequence(properties, keys);\n        var namesAndValues = { names: keys, values: sequence };\n        pushSerializeAndPop(context, PLACEMARK_SERIALIZERS, EXTENDEDDATA_NODE_FACTORY, [namesAndValues], objectStack);\n    }\n    // serialize geometry\n    var options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n    var geometry = feature.getGeometry();\n    if (geometry) {\n        geometry = transformGeometryWithOptions(geometry, true, options);\n    }\n    pushSerializeAndPop(context, PLACEMARK_SERIALIZERS, GEOMETRY_NODE_FACTORY, [geometry], objectStack);\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar PRIMITIVE_GEOMETRY_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'extrude',\n    'tessellate',\n    'altitudeMode',\n    'coordinates',\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar PRIMITIVE_GEOMETRY_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'extrude': makeChildAppender(writeBooleanTextNode),\n    'tessellate': makeChildAppender(writeBooleanTextNode),\n    'altitudeMode': makeChildAppender(writeStringTextNode),\n    'coordinates': makeChildAppender(writeCoordinatesTextNode),\n});\n/**\n * @param {Element} node Node.\n * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePrimitiveGeometry(node, geometry, objectStack) {\n    var flatCoordinates = geometry.getFlatCoordinates();\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    context['layout'] = geometry.getLayout();\n    context['stride'] = geometry.getStride();\n    // serialize properties (properties unknown to KML are not serialized)\n    var properties = geometry.getProperties();\n    properties.coordinates = flatCoordinates;\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = PRIMITIVE_GEOMETRY_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, PRIMITIVE_GEOMETRY_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar POLY_STYLE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'color',\n    'fill',\n    'outline',\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar POLYGON_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'outerBoundaryIs': makeChildAppender(writeBoundaryIs),\n    'innerBoundaryIs': makeChildAppender(writeBoundaryIs),\n});\n/**\n * A factory for creating innerBoundaryIs nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar INNER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('innerBoundaryIs');\n/**\n * A factory for creating outerBoundaryIs nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar OUTER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('outerBoundaryIs');\n/**\n * @param {Element} node Node.\n * @param {Polygon} polygon Polygon.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePolygon(node, polygon, objectStack) {\n    var linearRings = polygon.getLinearRings();\n    var outerRing = linearRings.shift();\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    // inner rings\n    pushSerializeAndPop(context, POLYGON_SERIALIZERS, INNER_BOUNDARY_NODE_FACTORY, linearRings, objectStack);\n    // outer ring\n    pushSerializeAndPop(context, POLYGON_SERIALIZERS, OUTER_BOUNDARY_NODE_FACTORY, [outerRing], objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar POLY_STYLE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'fill': makeChildAppender(writeBooleanTextNode),\n    'outline': makeChildAppender(writeBooleanTextNode),\n});\n/**\n * @param {Element} node Node.\n * @param {Style} style Style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePolyStyle(node, style, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var fill = style.getFill();\n    var stroke = style.getStroke();\n    var properties = {\n        'color': fill ? fill.getColor() : undefined,\n        'fill': fill ? undefined : false,\n        'outline': stroke ? undefined : false,\n    };\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = POLY_STYLE_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, POLY_STYLE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @param {Node} node Node to append a TextNode with the scale to.\n * @param {number|undefined} scale Scale.\n */\nfunction writeScaleTextNode(node, scale) {\n    // the Math is to remove any excess decimals created by float arithmetic\n    writeDecimalTextNode(node, Math.round(scale * 1e6) / 1e6);\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar STYLE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'IconStyle',\n    'LabelStyle',\n    'LineStyle',\n    'PolyStyle',\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar STYLE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'IconStyle': makeChildAppender(writeIconStyle),\n    'LabelStyle': makeChildAppender(writeLabelStyle),\n    'LineStyle': makeChildAppender(writeLineStyle),\n    'PolyStyle': makeChildAppender(writePolyStyle),\n});\n/**\n * @param {Element} node Node.\n * @param {Object<string, Array<Style>>} styles Styles.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeStyle(node, styles, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var properties = {};\n    if (styles.pointStyles.length) {\n        var textStyle = styles.pointStyles[0].getText();\n        if (textStyle) {\n            properties['LabelStyle'] = textStyle;\n        }\n        var imageStyle = styles.pointStyles[0].getImage();\n        if (imageStyle &&\n            typeof ( /** @type {?} */(imageStyle).getSrc) === 'function') {\n            properties['IconStyle'] = imageStyle;\n        }\n    }\n    if (styles.lineStyles.length) {\n        var strokeStyle = styles.lineStyles[0].getStroke();\n        if (strokeStyle) {\n            properties['LineStyle'] = strokeStyle;\n        }\n    }\n    if (styles.polyStyles.length) {\n        var strokeStyle = styles.polyStyles[0].getStroke();\n        if (strokeStyle && !properties['LineStyle']) {\n            properties['LineStyle'] = strokeStyle;\n        }\n        properties['PolyStyle'] = styles.polyStyles[0];\n    }\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = STYLE_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, STYLE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @param {Element} node Node to append a TextNode with the Vec2 to.\n * @param {Vec2} vec2 Vec2.\n */\nfunction writeVec2(node, vec2) {\n    node.setAttribute('x', String(vec2.x));\n    node.setAttribute('y', String(vec2.y));\n    node.setAttribute('xunits', vec2.xunits);\n    node.setAttribute('yunits', vec2.yunits);\n}\nexport default KML;\n//# sourceMappingURL=KML.js.map","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/MultiPoint\n */\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { closestSquaredDistanceXY, containsXY } from '../extent.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { extend } from '../array.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { squaredDistance as squaredDx } from '../math.js';\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @api\n */\nvar MultiPoint = /** @class */ (function (_super) {\n    __extends(MultiPoint, _super);\n    /**\n     * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     */\n    function MultiPoint(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        if (opt_layout && !Array.isArray(coordinates[0])) {\n            _this.setFlatCoordinates(opt_layout, \n            /** @type {Array<number>} */ (coordinates));\n        }\n        else {\n            _this.setCoordinates(\n            /** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed point to this multipoint.\n     * @param {Point} point Point.\n     * @api\n     */\n    MultiPoint.prototype.appendPoint = function (point) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = point.getFlatCoordinates().slice();\n        }\n        else {\n            extend(this.flatCoordinates, point.getFlatCoordinates());\n        }\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!MultiPoint} Clone.\n     * @api\n     */\n    MultiPoint.prototype.clone = function () {\n        var multiPoint = new MultiPoint(this.flatCoordinates.slice(), this.layout);\n        multiPoint.applyProperties(this);\n        return multiPoint;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    MultiPoint.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        var flatCoordinates = this.flatCoordinates;\n        var stride = this.stride;\n        for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n            var squaredDistance = squaredDx(x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n            if (squaredDistance < minSquaredDistance) {\n                minSquaredDistance = squaredDistance;\n                for (var j = 0; j < stride; ++j) {\n                    closestPoint[j] = flatCoordinates[i + j];\n                }\n                closestPoint.length = stride;\n            }\n        }\n        return minSquaredDistance;\n    };\n    /**\n     * Return the coordinates of the multipoint.\n     * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n     * @api\n     */\n    MultiPoint.prototype.getCoordinates = function () {\n        return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * Return the point at the specified index.\n     * @param {number} index Index.\n     * @return {Point} Point.\n     * @api\n     */\n    MultiPoint.prototype.getPoint = function (index) {\n        var n = !this.flatCoordinates\n            ? 0\n            : this.flatCoordinates.length / this.stride;\n        if (index < 0 || n <= index) {\n            return null;\n        }\n        return new Point(this.flatCoordinates.slice(index * this.stride, (index + 1) * this.stride), this.layout);\n    };\n    /**\n     * Return the points of this multipoint.\n     * @return {Array<Point>} Points.\n     * @api\n     */\n    MultiPoint.prototype.getPoints = function () {\n        var flatCoordinates = this.flatCoordinates;\n        var layout = this.layout;\n        var stride = this.stride;\n        /** @type {Array<Point>} */\n        var points = [];\n        for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n            var point = new Point(flatCoordinates.slice(i, i + stride), layout);\n            points.push(point);\n        }\n        return points;\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./Geometry.js\").Type} Geometry type.\n     * @api\n     */\n    MultiPoint.prototype.getType = function () {\n        return 'MultiPoint';\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    MultiPoint.prototype.intersectsExtent = function (extent) {\n        var flatCoordinates = this.flatCoordinates;\n        var stride = this.stride;\n        for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n            var x = flatCoordinates[i];\n            var y = flatCoordinates[i + 1];\n            if (containsXY(extent, x, y)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * Set the coordinates of the multipoint.\n     * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @api\n     */\n    MultiPoint.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 1);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return MultiPoint;\n}(SimpleGeometry));\nexport default MultiPoint;\n//# sourceMappingURL=MultiPoint.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/format/XMLFeature\n */\nimport FeatureFormat from '../format/Feature.js';\nimport { abstract } from '../util.js';\nimport { extend } from '../array.js';\nimport { getXMLSerializer, isDocument, parse } from '../xml.js';\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for XML feature formats.\n *\n * @abstract\n */\nvar XMLFeature = /** @class */ (function (_super) {\n    __extends(XMLFeature, _super);\n    function XMLFeature() {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {XMLSerializer}\n         * @private\n         */\n        _this.xmlSerializer_ = getXMLSerializer();\n        return _this;\n    }\n    /**\n     * @return {import(\"./Feature.js\").Type} Format.\n     */\n    XMLFeature.prototype.getType = function () {\n        return 'xml';\n    };\n    /**\n     * Read a single feature.\n     *\n     * @param {Document|Element|Object|string} source Source.\n     * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n     * @return {import(\"../Feature.js\").default} Feature.\n     * @api\n     */\n    XMLFeature.prototype.readFeature = function (source, opt_options) {\n        if (!source) {\n            return null;\n        }\n        else if (typeof source === 'string') {\n            var doc = parse(source);\n            return this.readFeatureFromDocument(doc, opt_options);\n        }\n        else if (isDocument(source)) {\n            return this.readFeatureFromDocument(\n            /** @type {Document} */ (source), opt_options);\n        }\n        else {\n            return this.readFeatureFromNode(\n            /** @type {Element} */ (source), opt_options);\n        }\n    };\n    /**\n     * @param {Document} doc Document.\n     * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Options.\n     * @return {import(\"../Feature.js\").default} Feature.\n     */\n    XMLFeature.prototype.readFeatureFromDocument = function (doc, opt_options) {\n        var features = this.readFeaturesFromDocument(doc, opt_options);\n        if (features.length > 0) {\n            return features[0];\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @param {Element} node Node.\n     * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Options.\n     * @return {import(\"../Feature.js\").default} Feature.\n     */\n    XMLFeature.prototype.readFeatureFromNode = function (node, opt_options) {\n        return null; // not implemented\n    };\n    /**\n     * Read all features from a feature collection.\n     *\n     * @param {Document|Element|Object|string} source Source.\n     * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Options.\n     * @return {Array<import(\"../Feature.js\").default>} Features.\n     * @api\n     */\n    XMLFeature.prototype.readFeatures = function (source, opt_options) {\n        if (!source) {\n            return [];\n        }\n        else if (typeof source === 'string') {\n            var doc = parse(source);\n            return this.readFeaturesFromDocument(doc, opt_options);\n        }\n        else if (isDocument(source)) {\n            return this.readFeaturesFromDocument(\n            /** @type {Document} */ (source), opt_options);\n        }\n        else {\n            return this.readFeaturesFromNode(\n            /** @type {Element} */ (source), opt_options);\n        }\n    };\n    /**\n     * @param {Document} doc Document.\n     * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Options.\n     * @protected\n     * @return {Array<import(\"../Feature.js\").default>} Features.\n     */\n    XMLFeature.prototype.readFeaturesFromDocument = function (doc, opt_options) {\n        /** @type {Array<import(\"../Feature.js\").default>} */\n        var features = [];\n        for (var n = doc.firstChild; n; n = n.nextSibling) {\n            if (n.nodeType == Node.ELEMENT_NODE) {\n                extend(features, this.readFeaturesFromNode(/** @type {Element} */ (n), opt_options));\n            }\n        }\n        return features;\n    };\n    /**\n     * @abstract\n     * @param {Element} node Node.\n     * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Options.\n     * @protected\n     * @return {Array<import(\"../Feature.js\").default>} Features.\n     */\n    XMLFeature.prototype.readFeaturesFromNode = function (node, opt_options) {\n        return abstract();\n    };\n    /**\n     * Read a single geometry from a source.\n     *\n     * @param {Document|Element|Object|string} source Source.\n     * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n     * @return {import(\"../geom/Geometry.js\").default} Geometry.\n     */\n    XMLFeature.prototype.readGeometry = function (source, opt_options) {\n        if (!source) {\n            return null;\n        }\n        else if (typeof source === 'string') {\n            var doc = parse(source);\n            return this.readGeometryFromDocument(doc, opt_options);\n        }\n        else if (isDocument(source)) {\n            return this.readGeometryFromDocument(\n            /** @type {Document} */ (source), opt_options);\n        }\n        else {\n            return this.readGeometryFromNode(\n            /** @type {Element} */ (source), opt_options);\n        }\n    };\n    /**\n     * @param {Document} doc Document.\n     * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Options.\n     * @protected\n     * @return {import(\"../geom/Geometry.js\").default} Geometry.\n     */\n    XMLFeature.prototype.readGeometryFromDocument = function (doc, opt_options) {\n        return null; // not implemented\n    };\n    /**\n     * @param {Element} node Node.\n     * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Options.\n     * @protected\n     * @return {import(\"../geom/Geometry.js\").default} Geometry.\n     */\n    XMLFeature.prototype.readGeometryFromNode = function (node, opt_options) {\n        return null; // not implemented\n    };\n    /**\n     * Read the projection from the source.\n     *\n     * @param {Document|Element|Object|string} source Source.\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     * @api\n     */\n    XMLFeature.prototype.readProjection = function (source) {\n        if (!source) {\n            return null;\n        }\n        else if (typeof source === 'string') {\n            var doc = parse(source);\n            return this.readProjectionFromDocument(doc);\n        }\n        else if (isDocument(source)) {\n            return this.readProjectionFromDocument(/** @type {Document} */ (source));\n        }\n        else {\n            return this.readProjectionFromNode(/** @type {Element} */ (source));\n        }\n    };\n    /**\n     * @param {Document} doc Document.\n     * @protected\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     */\n    XMLFeature.prototype.readProjectionFromDocument = function (doc) {\n        return this.dataProjection;\n    };\n    /**\n     * @param {Element} node Node.\n     * @protected\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     */\n    XMLFeature.prototype.readProjectionFromNode = function (node) {\n        return this.dataProjection;\n    };\n    /**\n     * Encode a feature as string.\n     *\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n     * @return {string} Encoded feature.\n     */\n    XMLFeature.prototype.writeFeature = function (feature, opt_options) {\n        var node = this.writeFeatureNode(feature, opt_options);\n        return this.xmlSerializer_.serializeToString(node);\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Options.\n     * @protected\n     * @return {Node} Node.\n     */\n    XMLFeature.prototype.writeFeatureNode = function (feature, opt_options) {\n        return null; // not implemented\n    };\n    /**\n     * Encode an array of features as string.\n     *\n     * @param {Array<import(\"../Feature.js\").default>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n     * @return {string} Result.\n     * @api\n     */\n    XMLFeature.prototype.writeFeatures = function (features, opt_options) {\n        var node = this.writeFeaturesNode(features, opt_options);\n        return this.xmlSerializer_.serializeToString(node);\n    };\n    /**\n     * @param {Array<import(\"../Feature.js\").default>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Options.\n     * @return {Node} Node.\n     */\n    XMLFeature.prototype.writeFeaturesNode = function (features, opt_options) {\n        return null; // not implemented\n    };\n    /**\n     * Encode a geometry as string.\n     *\n     * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n     * @return {string} Encoded geometry.\n     */\n    XMLFeature.prototype.writeGeometry = function (geometry, opt_options) {\n        var node = this.writeGeometryNode(geometry, opt_options);\n        return this.xmlSerializer_.serializeToString(node);\n    };\n    /**\n     * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Options.\n     * @return {Node} Node.\n     */\n    XMLFeature.prototype.writeGeometryNode = function (geometry, opt_options) {\n        return null; // not implemented\n    };\n    return XMLFeature;\n}(FeatureFormat));\nexport default XMLFeature;\n//# sourceMappingURL=XMLFeature.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/webgl/PointsLayer\n */\nimport BaseVector from '../../layer/BaseVector.js';\nimport VectorEventType from '../../source/VectorEventType.js';\nimport ViewHint from '../../ViewHint.js';\nimport WebGLArrayBuffer from '../../webgl/Buffer.js';\nimport WebGLLayerRenderer, { WebGLWorkerMessageType, colorDecodeId, colorEncodeId, } from './Layer.js';\nimport WebGLRenderTarget from '../../webgl/RenderTarget.js';\nimport { ARRAY_BUFFER, DYNAMIC_DRAW, ELEMENT_ARRAY_BUFFER } from '../../webgl.js';\nimport { AttributeType, DefaultUniform } from '../../webgl/Helper.js';\nimport { apply as applyTransform, create as createTransform, makeInverse as makeInverseTransform, multiply as multiplyTransform, translate as translateTransform, } from '../../transform.js';\nimport { assert } from '../../asserts.js';\nimport { buffer, createEmpty, equals, getWidth } from '../../extent.js';\nimport { create as createWebGLWorker } from '../../worker/webgl.js';\nimport { getUid } from '../../util.js';\nimport { listen, unlistenByKey } from '../../events.js';\n/**\n * @typedef {Object} CustomAttribute A description of a custom attribute to be passed on to the GPU, with a value different\n * for each feature.\n * @property {string} name Attribute name.\n * @property {function(import(\"../../Feature\").default, Object<string, *>):number} callback This callback computes the numerical value of the\n * attribute for a given feature (properties are available as 2nd arg for quicker access).\n */\n/**\n * @typedef {Object} FeatureCacheItem Object that holds a reference to a feature, its geometry and properties. Used to optimize\n * rebuildBuffers by accessing these objects quicker.\n * @property {import(\"../../Feature\").default} feature Feature\n * @property {Object<string, *>} properties Feature properties\n * @property {import(\"../../geom\").Geometry} geometry Feature geometry\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the canvas element.\n * @property {Array<CustomAttribute>} [attributes] These attributes will be read from the features in the source and then\n * passed to the GPU. The `name` property of each attribute will serve as its identifier:\n *  * In the vertex shader as an `attribute` by prefixing it with `a_`\n *  * In the fragment shader as a `varying` by prefixing it with `v_`\n * Please note that these can only be numerical values.\n * @property {string} vertexShader Vertex shader source, mandatory.\n * @property {string} fragmentShader Fragment shader source, mandatory.\n * @property {string} [hitVertexShader] Vertex shader source for hit detection rendering.\n * @property {string} [hitFragmentShader] Fragment shader source for hit detection rendering.\n * @property {Object<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process steps\n * Please note that `u_texture` is reserved for the main texture slot and `u_opacity` is reserved for the layer opacity.\n * @property {Array<import(\"./Layer\").PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n/**\n * @classdesc\n * WebGL vector renderer optimized for points.\n * All features will be rendered as quads (two triangles forming a square). New data will be flushed to the GPU\n * every time the vector source changes.\n *\n * You need to provide vertex and fragment shaders for rendering. This can be done using\n * {@link module:ol/webgl/ShaderBuilder~ShaderBuilder} utilities. These shaders shall expect a `a_position` attribute\n * containing the screen-space projected center of the quad, as well as a `a_index` attribute\n * whose value (0, 1, 2 or 3) indicates which quad vertex is currently getting processed (see structure below).\n *\n * To include variable attributes in the shaders, you need to declare them using the `attributes` property of\n * the options object like so:\n * ```js\n * new WebGLPointsLayerRenderer(layer, {\n *   attributes: [\n *     {\n *       name: 'size',\n *       callback: function(feature) {\n *         // compute something with the feature\n *       }\n *     },\n *     {\n *       name: 'weight',\n *       callback: function(feature) {\n *         // compute something with the feature\n *       }\n *     },\n *   ],\n *   vertexShader:\n *     // shader using attribute a_weight and a_size\n *   fragmentShader:\n *     // shader using varying v_weight and v_size\n * ```\n *\n * To enable hit detection, you must as well provide dedicated shaders using the `hitVertexShader`\n * and `hitFragmentShader` properties. These shall expect the `a_hitColor` attribute to contain\n * the final color that will have to be output for hit detection to work.\n *\n * The following uniform is used for the main texture: `u_texture`.\n * The following uniform is used for the layer opacity: `u_opacity`.\n *\n * Please note that the main shader output should have premultiplied alpha, otherwise visual anomalies may occur.\n *\n * Points are rendered as quads with the following structure:\n *\n * ```\n *   (u0, v1)      (u1, v1)\n *  [3]----------[2]\n *   |`           |\n *   |  `         |\n *   |    `       |\n *   |      `     |\n *   |        `   |\n *   |          ` |\n *  [0]----------[1]\n *   (u0, v0)      (u1, v0)\n *  ```\n *\n * This uses {@link module:ol/webgl/Helper~WebGLHelper} internally.\n *\n * @api\n */\nvar WebGLPointsLayerRenderer = /** @class */ (function (_super) {\n    __extends(WebGLPointsLayerRenderer, _super);\n    /**\n     * @param {import(\"../../layer/Layer.js\").default} layer Layer.\n     * @param {Options} options Options.\n     */\n    function WebGLPointsLayerRenderer(layer, options) {\n        var _this = this;\n        var uniforms = options.uniforms || {};\n        var projectionMatrixTransform = createTransform();\n        uniforms[DefaultUniform.PROJECTION_MATRIX] = projectionMatrixTransform;\n        _this = _super.call(this, layer, {\n            uniforms: uniforms,\n            postProcesses: options.postProcesses,\n        }) || this;\n        _this.ready = false;\n        _this.sourceRevision_ = -1;\n        _this.verticesBuffer_ = new WebGLArrayBuffer(ARRAY_BUFFER, DYNAMIC_DRAW);\n        _this.hitVerticesBuffer_ = new WebGLArrayBuffer(ARRAY_BUFFER, DYNAMIC_DRAW);\n        _this.indicesBuffer_ = new WebGLArrayBuffer(ELEMENT_ARRAY_BUFFER, DYNAMIC_DRAW);\n        /**\n         * @private\n         */\n        _this.vertexShader_ = options.vertexShader;\n        /**\n         * @private\n         */\n        _this.fragmentShader_ = options.fragmentShader;\n        /**\n         * @type {WebGLProgram}\n         * @private\n         */\n        _this.program_;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.hitDetectionEnabled_ =\n            options.hitFragmentShader && options.hitVertexShader ? true : false;\n        /**\n         * @private\n         */\n        _this.hitVertexShader_ = options.hitVertexShader;\n        /**\n         * @private\n         */\n        _this.hitFragmentShader_ = options.hitFragmentShader;\n        /**\n         * @type {WebGLProgram}\n         * @private\n         */\n        _this.hitProgram_;\n        var customAttributes = options.attributes\n            ? options.attributes.map(function (attribute) {\n                return {\n                    name: 'a_' + attribute.name,\n                    size: 1,\n                    type: AttributeType.FLOAT,\n                };\n            })\n            : [];\n        /**\n         * A list of attributes used by the renderer. By default only the position and\n         * index of the vertex (0 to 3) are required.\n         * @type {Array<import('../../webgl/Helper.js').AttributeDescription>}\n         */\n        _this.attributes = [\n            {\n                name: 'a_position',\n                size: 2,\n                type: AttributeType.FLOAT,\n            },\n            {\n                name: 'a_index',\n                size: 1,\n                type: AttributeType.FLOAT,\n            },\n        ].concat(customAttributes);\n        /**\n         * A list of attributes used for hit detection.\n         * @type {Array<import('../../webgl/Helper.js').AttributeDescription>}\n         */\n        _this.hitDetectionAttributes = [\n            {\n                name: 'a_position',\n                size: 2,\n                type: AttributeType.FLOAT,\n            },\n            {\n                name: 'a_index',\n                size: 1,\n                type: AttributeType.FLOAT,\n            },\n            {\n                name: 'a_hitColor',\n                size: 4,\n                type: AttributeType.FLOAT,\n            },\n            {\n                name: 'a_featureUid',\n                size: 1,\n                type: AttributeType.FLOAT,\n            },\n        ].concat(customAttributes);\n        _this.customAttributes = options.attributes ? options.attributes : [];\n        _this.previousExtent_ = createEmpty();\n        /**\n         * This transform is updated on every frame and is the composition of:\n         * - invert of the world->screen transform that was used when rebuilding buffers (see `this.renderTransform_`)\n         * - current world->screen transform\n         * @type {import(\"../../transform.js\").Transform}\n         * @private\n         */\n        _this.currentTransform_ = projectionMatrixTransform;\n        /**\n         * This transform is updated when buffers are rebuilt and converts world space coordinates to screen space\n         * @type {import(\"../../transform.js\").Transform}\n         * @private\n         */\n        _this.renderTransform_ = createTransform();\n        /**\n         * @type {import(\"../../transform.js\").Transform}\n         * @private\n         */\n        _this.invertRenderTransform_ = createTransform();\n        /**\n         * @type {Float32Array}\n         * @private\n         */\n        _this.renderInstructions_ = new Float32Array(0);\n        /**\n         * These instructions are used for hit detection\n         * @type {Float32Array}\n         * @private\n         */\n        _this.hitRenderInstructions_ = new Float32Array(0);\n        /**\n         * @type {WebGLRenderTarget}\n         * @private\n         */\n        _this.hitRenderTarget_;\n        /**\n         * Keep track of latest message sent to worker\n         * @type {number}\n         * @private\n         */\n        _this.generateBuffersRun_ = 0;\n        _this.worker_ = createWebGLWorker();\n        _this.worker_.addEventListener('message', \n        /**\n         * @param {*} event Event.\n         * @this {WebGLPointsLayerRenderer}\n         */\n        function (event) {\n            var received = event.data;\n            if (received.type === WebGLWorkerMessageType.GENERATE_BUFFERS) {\n                var projectionTransform = received.projectionTransform;\n                if (received.hitDetection) {\n                    this.hitVerticesBuffer_.fromArrayBuffer(received.vertexBuffer);\n                    this.helper.flushBufferData(this.hitVerticesBuffer_);\n                }\n                else {\n                    this.verticesBuffer_.fromArrayBuffer(received.vertexBuffer);\n                    this.helper.flushBufferData(this.verticesBuffer_);\n                }\n                this.indicesBuffer_.fromArrayBuffer(received.indexBuffer);\n                this.helper.flushBufferData(this.indicesBuffer_);\n                this.renderTransform_ = projectionTransform;\n                makeInverseTransform(this.invertRenderTransform_, this.renderTransform_);\n                if (received.hitDetection) {\n                    this.hitRenderInstructions_ = new Float32Array(event.data.renderInstructions);\n                }\n                else {\n                    this.renderInstructions_ = new Float32Array(event.data.renderInstructions);\n                    if (received.generateBuffersRun === this.generateBuffersRun_) {\n                        this.ready = true;\n                    }\n                }\n                this.getLayer().changed();\n            }\n        }.bind(_this));\n        /**\n         * This object will be updated when the source changes. Key is uid.\n         * @type {Object<string, FeatureCacheItem>}\n         * @private\n         */\n        _this.featureCache_ = {};\n        /**\n         * Amount of features in the cache.\n         * @type {number}\n         * @private\n         */\n        _this.featureCount_ = 0;\n        var source = _this.getLayer().getSource();\n        _this.sourceListenKeys_ = [\n            listen(source, VectorEventType.ADDFEATURE, _this.handleSourceFeatureAdded_, _this),\n            listen(source, VectorEventType.CHANGEFEATURE, _this.handleSourceFeatureChanged_, _this),\n            listen(source, VectorEventType.REMOVEFEATURE, _this.handleSourceFeatureDelete_, _this),\n            listen(source, VectorEventType.CLEAR, _this.handleSourceFeatureClear_, _this),\n        ];\n        source.forEachFeature(function (feature) {\n            this.featureCache_[getUid(feature)] = {\n                feature: feature,\n                properties: feature.getProperties(),\n                geometry: feature.getGeometry(),\n            };\n            this.featureCount_++;\n        }.bind(_this));\n        return _this;\n    }\n    WebGLPointsLayerRenderer.prototype.afterHelperCreated = function () {\n        this.program_ = this.helper.getProgram(this.fragmentShader_, this.vertexShader_);\n        if (this.hitDetectionEnabled_) {\n            this.hitProgram_ = this.helper.getProgram(this.hitFragmentShader_, this.hitVertexShader_);\n            this.hitRenderTarget_ = new WebGLRenderTarget(this.helper);\n        }\n    };\n    /**\n     * @param {import(\"../../source/Vector.js\").VectorSourceEvent} event Event.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureAdded_ = function (event) {\n        var feature = event.feature;\n        this.featureCache_[getUid(feature)] = {\n            feature: feature,\n            properties: feature.getProperties(),\n            geometry: feature.getGeometry(),\n        };\n        this.featureCount_++;\n    };\n    /**\n     * @param {import(\"../../source/Vector.js\").VectorSourceEvent} event Event.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureChanged_ = function (event) {\n        var feature = event.feature;\n        this.featureCache_[getUid(feature)] = {\n            feature: feature,\n            properties: feature.getProperties(),\n            geometry: feature.getGeometry(),\n        };\n    };\n    /**\n     * @param {import(\"../../source/Vector.js\").VectorSourceEvent} event Event.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureDelete_ = function (event) {\n        var feature = event.feature;\n        delete this.featureCache_[getUid(feature)];\n        this.featureCount_--;\n    };\n    /**\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureClear_ = function () {\n        this.featureCache_ = {};\n        this.featureCount_ = 0;\n    };\n    /**\n     * Render the layer.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {HTMLElement} The rendered element.\n     */\n    WebGLPointsLayerRenderer.prototype.renderFrame = function (frameState) {\n        var gl = this.helper.getGL();\n        this.preRender(gl, frameState);\n        var projection = frameState.viewState.projection;\n        var layer = this.getLayer();\n        var vectorSource = layer.getSource();\n        // FIXME fix hit detection isn't reliable when rendering multiple worlds\n        var multiWorld = vectorSource.getWrapX() && projection.canWrapX();\n        var projectionExtent = projection.getExtent();\n        var extent = frameState.extent;\n        var worldWidth = multiWorld ? getWidth(projectionExtent) : null;\n        var endWorld = multiWorld\n            ? Math.ceil((extent[2] - projectionExtent[2]) / worldWidth) + 1\n            : 1;\n        var startWorld = multiWorld\n            ? Math.floor((extent[0] - projectionExtent[0]) / worldWidth)\n            : 0;\n        var world = startWorld;\n        var renderCount = this.indicesBuffer_.getSize();\n        do {\n            // apply the current projection transform with the invert of the one used to fill buffers\n            this.helper.makeProjectionTransform(frameState, this.currentTransform_);\n            translateTransform(this.currentTransform_, world * worldWidth, 0);\n            multiplyTransform(this.currentTransform_, this.invertRenderTransform_);\n            this.helper.applyUniforms(frameState);\n            this.helper.drawElements(0, renderCount);\n        } while (++world < endWorld);\n        this.helper.finalizeDraw(frameState, this.dispatchPreComposeEvent, this.dispatchPostComposeEvent);\n        var canvas = this.helper.getCanvas();\n        if (this.hitDetectionEnabled_) {\n            this.renderHitDetection(frameState, startWorld, endWorld, worldWidth);\n            this.hitRenderTarget_.clearCachedData();\n        }\n        this.postRender(gl, frameState);\n        return canvas;\n    };\n    /**\n     * Determine whether renderFrame should be called.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} Layer is ready to be rendered.\n     */\n    WebGLPointsLayerRenderer.prototype.prepareFrameInternal = function (frameState) {\n        var layer = this.getLayer();\n        var vectorSource = layer.getSource();\n        var viewState = frameState.viewState;\n        var viewNotMoving = !frameState.viewHints[ViewHint.ANIMATING] &&\n            !frameState.viewHints[ViewHint.INTERACTING];\n        var extentChanged = !equals(this.previousExtent_, frameState.extent);\n        var sourceChanged = this.sourceRevision_ < vectorSource.getRevision();\n        if (sourceChanged) {\n            this.sourceRevision_ = vectorSource.getRevision();\n        }\n        if (viewNotMoving && (extentChanged || sourceChanged)) {\n            var projection = viewState.projection;\n            var resolution = viewState.resolution;\n            var renderBuffer = layer instanceof BaseVector ? layer.getRenderBuffer() : 0;\n            var extent = buffer(frameState.extent, renderBuffer * resolution);\n            vectorSource.loadFeatures(extent, resolution, projection);\n            this.rebuildBuffers_(frameState);\n            this.previousExtent_ = frameState.extent.slice();\n        }\n        this.helper.useProgram(this.program_);\n        this.helper.prepareDraw(frameState);\n        // write new data\n        this.helper.bindBuffer(this.verticesBuffer_);\n        this.helper.bindBuffer(this.indicesBuffer_);\n        this.helper.enableAttributes(this.attributes);\n        return true;\n    };\n    /**\n     * Rebuild internal webgl buffers based on current view extent; costly, should not be called too much\n     * @param {import(\"../../PluggableMap\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.rebuildBuffers_ = function (frameState) {\n        // saves the projection transform for the current frame state\n        var projectionTransform = createTransform();\n        this.helper.makeProjectionTransform(frameState, projectionTransform);\n        // here we anticipate the amount of render instructions that we well generate\n        // this can be done since we know that for normal render we only have x, y as base instructions,\n        // and x, y, r, g, b, a and featureUid for hit render instructions\n        // and we also know the amount of custom attributes to append to these\n        var totalInstructionsCount = (2 + this.customAttributes.length) * this.featureCount_;\n        if (!this.renderInstructions_ ||\n            this.renderInstructions_.length !== totalInstructionsCount) {\n            this.renderInstructions_ = new Float32Array(totalInstructionsCount);\n        }\n        if (this.hitDetectionEnabled_) {\n            var totalHitInstructionsCount = (7 + this.customAttributes.length) * this.featureCount_;\n            if (!this.hitRenderInstructions_ ||\n                this.hitRenderInstructions_.length !== totalHitInstructionsCount) {\n                this.hitRenderInstructions_ = new Float32Array(totalHitInstructionsCount);\n            }\n        }\n        // loop on features to fill the buffer\n        var featureCache, geometry;\n        var tmpCoords = [];\n        var tmpColor = [];\n        var renderIndex = 0;\n        var hitIndex = 0;\n        var hitColor;\n        for (var featureUid in this.featureCache_) {\n            featureCache = this.featureCache_[featureUid];\n            geometry = /** @type {import(\"../../geom\").Point} */ (featureCache.geometry);\n            if (!geometry || geometry.getType() !== 'Point') {\n                continue;\n            }\n            tmpCoords[0] = geometry.getFlatCoordinates()[0];\n            tmpCoords[1] = geometry.getFlatCoordinates()[1];\n            applyTransform(projectionTransform, tmpCoords);\n            hitColor = colorEncodeId(hitIndex + 6, tmpColor);\n            this.renderInstructions_[renderIndex++] = tmpCoords[0];\n            this.renderInstructions_[renderIndex++] = tmpCoords[1];\n            // for hit detection, the feature uid is saved in the opacity value\n            // and the index of the opacity value is encoded in the color values\n            if (this.hitDetectionEnabled_) {\n                this.hitRenderInstructions_[hitIndex++] = tmpCoords[0];\n                this.hitRenderInstructions_[hitIndex++] = tmpCoords[1];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[0];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[1];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[2];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[3];\n                this.hitRenderInstructions_[hitIndex++] = Number(featureUid);\n            }\n            // pushing custom attributes\n            var value = void 0;\n            for (var j = 0; j < this.customAttributes.length; j++) {\n                value = this.customAttributes[j].callback(featureCache.feature, featureCache.properties);\n                this.renderInstructions_[renderIndex++] = value;\n                if (this.hitDetectionEnabled_) {\n                    this.hitRenderInstructions_[hitIndex++] = value;\n                }\n            }\n        }\n        /** @type {import('./Layer').WebGLWorkerGenerateBuffersMessage} */\n        var message = {\n            type: WebGLWorkerMessageType.GENERATE_BUFFERS,\n            renderInstructions: this.renderInstructions_.buffer,\n            customAttributesCount: this.customAttributes.length,\n        };\n        // additional properties will be sent back as-is by the worker\n        message['projectionTransform'] = projectionTransform;\n        message['generateBuffersRun'] = ++this.generateBuffersRun_;\n        this.ready = false;\n        this.worker_.postMessage(message, [this.renderInstructions_.buffer]);\n        this.renderInstructions_ = null;\n        /** @type {import('./Layer').WebGLWorkerGenerateBuffersMessage} */\n        if (this.hitDetectionEnabled_) {\n            var hitMessage = {\n                type: WebGLWorkerMessageType.GENERATE_BUFFERS,\n                renderInstructions: this.hitRenderInstructions_.buffer,\n                customAttributesCount: 5 + this.customAttributes.length,\n            };\n            hitMessage['projectionTransform'] = projectionTransform;\n            hitMessage['hitDetection'] = true;\n            this.worker_.postMessage(hitMessage, [\n                this.hitRenderInstructions_.buffer,\n            ]);\n            this.hitRenderInstructions_ = null;\n        }\n    };\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {import(\"../vector.js\").FeatureCallback<T>} callback Feature callback.\n     * @param {Array<import(\"../Map.js\").HitMatch<T>>} matches The hit detected matches with tolerance.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    WebGLPointsLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, matches) {\n        assert(this.hitDetectionEnabled_, 66);\n        if (!this.hitRenderInstructions_) {\n            return undefined;\n        }\n        var pixel = applyTransform(frameState.coordinateToPixelTransform, coordinate.slice());\n        var data = this.hitRenderTarget_.readPixel(pixel[0] / 2, pixel[1] / 2);\n        var color = [data[0] / 255, data[1] / 255, data[2] / 255, data[3] / 255];\n        var index = colorDecodeId(color);\n        var opacity = this.hitRenderInstructions_[index];\n        var uid = Math.floor(opacity).toString();\n        var source = this.getLayer().getSource();\n        var feature = source.getFeatureByUid(uid);\n        if (feature) {\n            return callback(feature, this.getLayer(), null);\n        }\n        return undefined;\n    };\n    /**\n     * Render the hit detection data to the corresponding render target\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState current frame state\n     * @param {number} startWorld the world to render in the first iteration\n     * @param {number} endWorld the last world to render\n     * @param {number} worldWidth the width of the worlds being rendered\n     */\n    WebGLPointsLayerRenderer.prototype.renderHitDetection = function (frameState, startWorld, endWorld, worldWidth) {\n        // skip render entirely if vertex buffers not ready/generated yet\n        if (!this.hitVerticesBuffer_.getSize()) {\n            return;\n        }\n        var world = startWorld;\n        this.hitRenderTarget_.setSize([\n            Math.floor(frameState.size[0] / 2),\n            Math.floor(frameState.size[1] / 2),\n        ]);\n        this.helper.useProgram(this.hitProgram_);\n        this.helper.prepareDrawToRenderTarget(frameState, this.hitRenderTarget_, true);\n        this.helper.bindBuffer(this.hitVerticesBuffer_);\n        this.helper.bindBuffer(this.indicesBuffer_);\n        this.helper.enableAttributes(this.hitDetectionAttributes);\n        do {\n            this.helper.makeProjectionTransform(frameState, this.currentTransform_);\n            translateTransform(this.currentTransform_, world * worldWidth, 0);\n            multiplyTransform(this.currentTransform_, this.invertRenderTransform_);\n            this.helper.applyUniforms(frameState);\n            var renderCount = this.indicesBuffer_.getSize();\n            this.helper.drawElements(0, renderCount);\n        } while (++world < endWorld);\n    };\n    /**\n     * Clean up.\n     */\n    WebGLPointsLayerRenderer.prototype.disposeInternal = function () {\n        this.worker_.terminate();\n        this.layer_ = null;\n        this.sourceListenKeys_.forEach(function (key) {\n            unlistenByKey(key);\n        });\n        this.sourceListenKeys_ = null;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return WebGLPointsLayerRenderer;\n}(WebGLLayerRenderer));\nexport default WebGLPointsLayerRenderer;\n//# sourceMappingURL=PointsLayer.js.map","/**\n * A wrapper class to simplify rendering to a texture instead of the final canvas\n * @module ol/webgl/RenderTarget\n */\nimport { equals } from '../array.js';\n// for pixel color reading\nvar tmpArray4 = new Uint8Array(4);\n/**\n * @classdesc\n * This class is a wrapper around the association of both a `WebGLTexture` and a `WebGLFramebuffer` instances,\n * simplifying initialization and binding for rendering.\n * @api\n */\nvar WebGLRenderTarget = /** @class */ (function () {\n    /**\n     * @param {import(\"./Helper.js\").default} helper WebGL helper; mandatory.\n     * @param {Array<number>} [opt_size] Expected size of the render target texture; note: this can be changed later on.\n     */\n    function WebGLRenderTarget(helper, opt_size) {\n        /**\n         * @private\n         * @type {import(\"./Helper.js\").default}\n         */\n        this.helper_ = helper;\n        var gl = helper.getGL();\n        /**\n         * @private\n         * @type {WebGLTexture}\n         */\n        this.texture_ = gl.createTexture();\n        /**\n         * @private\n         * @type {WebGLFramebuffer}\n         */\n        this.framebuffer_ = gl.createFramebuffer();\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        this.size_ = opt_size || [1, 1];\n        /**\n         * @type {Uint8Array}\n         * @private\n         */\n        this.data_ = new Uint8Array(0);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.dataCacheDirty_ = true;\n        this.updateSize_();\n    }\n    /**\n     * Changes the size of the render target texture. Note: will do nothing if the size\n     * is already the same.\n     * @param {Array<number>} size Expected size of the render target texture\n     * @api\n     */\n    WebGLRenderTarget.prototype.setSize = function (size) {\n        if (equals(size, this.size_)) {\n            return;\n        }\n        this.size_[0] = size[0];\n        this.size_[1] = size[1];\n        this.updateSize_();\n    };\n    /**\n     * Returns the size of the render target texture\n     * @return {Array<number>} Size of the render target texture\n     * @api\n     */\n    WebGLRenderTarget.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * This will cause following calls to `#readAll` or `#readPixel` to download the content of the\n     * render target into memory, which is an expensive operation.\n     * This content will be kept in cache but should be cleared after each new render.\n     * @api\n     */\n    WebGLRenderTarget.prototype.clearCachedData = function () {\n        this.dataCacheDirty_ = true;\n    };\n    /**\n     * Returns the full content of the frame buffer as a series of r, g, b, a components\n     * in the 0-255 range (unsigned byte).\n     * @return {Uint8Array} Integer array of color values\n     * @api\n     */\n    WebGLRenderTarget.prototype.readAll = function () {\n        if (this.dataCacheDirty_) {\n            var size = this.size_;\n            var gl = this.helper_.getGL();\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer_);\n            gl.readPixels(0, 0, size[0], size[1], gl.RGBA, gl.UNSIGNED_BYTE, this.data_);\n            this.dataCacheDirty_ = false;\n        }\n        return this.data_;\n    };\n    /**\n     * Reads one pixel of the frame buffer as an array of r, g, b, a components\n     * in the 0-255 range (unsigned byte).\n     * If x and/or y are outside of existing data, an array filled with 0 is returned.\n     * @param {number} x Pixel coordinate\n     * @param {number} y Pixel coordinate\n     * @return {Uint8Array} Integer array with one color value (4 components)\n     * @api\n     */\n    WebGLRenderTarget.prototype.readPixel = function (x, y) {\n        if (x < 0 || y < 0 || x > this.size_[0] || y >= this.size_[1]) {\n            tmpArray4[0] = 0;\n            tmpArray4[1] = 0;\n            tmpArray4[2] = 0;\n            tmpArray4[3] = 0;\n            return tmpArray4;\n        }\n        this.readAll();\n        var index = Math.floor(x) + (this.size_[1] - Math.floor(y) - 1) * this.size_[0];\n        tmpArray4[0] = this.data_[index * 4];\n        tmpArray4[1] = this.data_[index * 4 + 1];\n        tmpArray4[2] = this.data_[index * 4 + 2];\n        tmpArray4[3] = this.data_[index * 4 + 3];\n        return tmpArray4;\n    };\n    /**\n     * @return {WebGLTexture} Texture to render to\n     */\n    WebGLRenderTarget.prototype.getTexture = function () {\n        return this.texture_;\n    };\n    /**\n     * @return {WebGLFramebuffer} Frame buffer of the render target\n     */\n    WebGLRenderTarget.prototype.getFramebuffer = function () {\n        return this.framebuffer_;\n    };\n    /**\n     * @private\n     */\n    WebGLRenderTarget.prototype.updateSize_ = function () {\n        var size = this.size_;\n        var gl = this.helper_.getGL();\n        this.texture_ = this.helper_.createTexture(size, null, this.texture_);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer_);\n        gl.viewport(0, 0, size[0], size[1]);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture_, 0);\n        this.data_ = new Uint8Array(size[0] * size[1] * 4);\n    };\n    return WebGLRenderTarget;\n}());\nexport default WebGLRenderTarget;\n//# sourceMappingURL=RenderTarget.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Heatmap\n */\nimport BaseVector from './BaseVector.js';\nimport WebGLPointsLayerRenderer from '../renderer/webgl/PointsLayer.js';\nimport { assign } from '../obj.js';\nimport { clamp } from '../math.js';\nimport { createCanvasContext2D } from '../dom.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {Array<string>} [gradient=['#00f', '#0ff', '#0f0', '#ff0', '#f00']] The color gradient\n * of the heatmap, specified as an array of CSS color strings.\n * @property {number} [radius=8] Radius size in pixels.\n * @property {number} [blur=15] Blur size in pixels.\n * @property {string|function(import(\"../Feature.js\").default):number} [weight='weight'] The feature\n * attribute to use for the weight or a function that returns a weight from a feature. Weight values\n * should range from 0 to 1 (and values outside will be clamped to that range).\n * @property {import(\"../source/Vector.js\").default<import(\"../geom/Point.js\").default>} [source] Point source.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    BLUR: 'blur',\n    GRADIENT: 'gradient',\n    RADIUS: 'radius',\n};\n/**\n * @const\n * @type {Array<string>}\n */\nvar DEFAULT_GRADIENT = ['#00f', '#0ff', '#0f0', '#ff0', '#f00'];\n/**\n * @classdesc\n * Layer for rendering vector data as a heatmap.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n * @extends {BaseVector<import(\"../source/Vector.js\").default, WebGLPointsLayerRenderer>}\n * @api\n */\nvar Heatmap = /** @class */ (function (_super) {\n    __extends(Heatmap, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Heatmap(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.gradient;\n        delete baseOptions.radius;\n        delete baseOptions.blur;\n        delete baseOptions.weight;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.gradient_ = null;\n        _this.addChangeListener(Property.GRADIENT, _this.handleGradientChanged_);\n        _this.setGradient(options.gradient ? options.gradient : DEFAULT_GRADIENT);\n        _this.setBlur(options.blur !== undefined ? options.blur : 15);\n        _this.setRadius(options.radius !== undefined ? options.radius : 8);\n        var weight = options.weight ? options.weight : 'weight';\n        if (typeof weight === 'string') {\n            _this.weightFunction_ = function (feature) {\n                return feature.get(weight);\n            };\n        }\n        else {\n            _this.weightFunction_ = weight;\n        }\n        // For performance reasons, don't sort the features before rendering.\n        // The render order is not relevant for a heatmap representation.\n        _this.setRenderOrder(null);\n        return _this;\n    }\n    /**\n     * Return the blur size in pixels.\n     * @return {number} Blur size in pixels.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.getBlur = function () {\n        return /** @type {number} */ (this.get(Property.BLUR));\n    };\n    /**\n     * Return the gradient colors as array of strings.\n     * @return {Array<string>} Colors.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.getGradient = function () {\n        return /** @type {Array<string>} */ (this.get(Property.GRADIENT));\n    };\n    /**\n     * Return the size of the radius in pixels.\n     * @return {number} Radius size in pixel.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.getRadius = function () {\n        return /** @type {number} */ (this.get(Property.RADIUS));\n    };\n    /**\n     * @private\n     */\n    Heatmap.prototype.handleGradientChanged_ = function () {\n        this.gradient_ = createGradient(this.getGradient());\n    };\n    /**\n     * Set the blur size in pixels.\n     * @param {number} blur Blur size in pixels.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.setBlur = function (blur) {\n        this.set(Property.BLUR, blur);\n    };\n    /**\n     * Set the gradient colors as array of strings.\n     * @param {Array<string>} colors Gradient.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.setGradient = function (colors) {\n        this.set(Property.GRADIENT, colors);\n    };\n    /**\n     * Set the size of the radius in pixels.\n     * @param {number} radius Radius size in pixel.\n     * @api\n     * @observable\n     */\n    Heatmap.prototype.setRadius = function (radius) {\n        this.set(Property.RADIUS, radius);\n    };\n    Heatmap.prototype.createRenderer = function () {\n        return new WebGLPointsLayerRenderer(this, {\n            className: this.getClassName(),\n            attributes: [\n                {\n                    name: 'weight',\n                    callback: function (feature) {\n                        var weight = this.weightFunction_(feature);\n                        return weight !== undefined ? clamp(weight, 0, 1) : 1;\n                    }.bind(this),\n                },\n            ],\n            vertexShader: \"\\n        precision mediump float;\\n        uniform mat4 u_projectionMatrix;\\n        uniform mat4 u_offsetScaleMatrix;\\n        uniform float u_size;\\n        attribute vec2 a_position;\\n        attribute float a_index;\\n        attribute float a_weight;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n\\n        void main(void) {\\n          mat4 offsetMatrix = u_offsetScaleMatrix;\\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\\n          v_texCoord = vec2(u, v);\\n          v_weight = a_weight;\\n        }\",\n            fragmentShader: \"\\n        precision mediump float;\\n        uniform float u_blurSlope;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n\\n        void main(void) {\\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\\n        }\",\n            hitVertexShader: \"\\n        precision mediump float;\\n        uniform mat4 u_projectionMatrix;\\n        uniform mat4 u_offsetScaleMatrix;\\n        uniform float u_size;\\n        attribute vec2 a_position;\\n        attribute float a_index;\\n        attribute float a_weight;\\n        attribute vec4 a_hitColor;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n        varying vec4 v_hitColor;\\n\\n        void main(void) {\\n          mat4 offsetMatrix = u_offsetScaleMatrix;\\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\\n          v_texCoord = vec2(u, v);\\n          v_hitColor = a_hitColor;\\n          v_weight = a_weight;\\n        }\",\n            hitFragmentShader: \"\\n        precision mediump float;\\n        uniform float u_blurSlope;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n        varying vec4 v_hitColor;\\n\\n        void main(void) {\\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\\n          if (alpha < 0.05) {\\n            discard;\\n          }\\n\\n          gl_FragColor = v_hitColor;\\n        }\",\n            uniforms: {\n                u_size: function () {\n                    return (this.get(Property.RADIUS) + this.get(Property.BLUR)) * 2;\n                }.bind(this),\n                u_blurSlope: function () {\n                    return (this.get(Property.RADIUS) / Math.max(1, this.get(Property.BLUR)));\n                }.bind(this),\n            },\n            postProcesses: [\n                {\n                    fragmentShader: \"\\n            precision mediump float;\\n\\n            uniform sampler2D u_image;\\n            uniform sampler2D u_gradientTexture;\\n            uniform float u_opacity;\\n\\n            varying vec2 v_texCoord;\\n\\n            void main() {\\n              vec4 color = texture2D(u_image, v_texCoord);\\n              gl_FragColor.a = color.a * u_opacity;\\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\\n              gl_FragColor.rgb *= gl_FragColor.a;\\n            }\",\n                    uniforms: {\n                        u_gradientTexture: function () {\n                            return this.gradient_;\n                        }.bind(this),\n                        u_opacity: function () {\n                            return this.getOpacity();\n                        }.bind(this),\n                    },\n                },\n            ],\n        });\n    };\n    Heatmap.prototype.renderDeclutter = function () { };\n    return Heatmap;\n}(BaseVector));\n/**\n * @param {Array<string>} colors A list of colored.\n * @return {HTMLCanvasElement} canvas with gradient texture.\n */\nfunction createGradient(colors) {\n    var width = 1;\n    var height = 256;\n    var context = createCanvasContext2D(width, height);\n    var gradient = context.createLinearGradient(0, 0, width, height);\n    var step = 1 / (colors.length - 1);\n    for (var i = 0, ii = colors.length; i < ii; ++i) {\n        gradient.addColorStop(i * step, colors[i]);\n    }\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, width, height);\n    return context.canvas;\n}\nexport default Heatmap;\n//# sourceMappingURL=Heatmap.js.map","<template>\n  <div id=\"map\">\n    <div class=\"setting\">\n      <div class=\"slider\">\n        <span>热点半径（radius size）：</span>\n        <el-slider v-model=\"state.radiusSize\" @input=\"handleRadiusChange\" />\n      </div>\n      <div class=\"slider\">\n        <span>模糊尺寸（blur size）：</span>\n        <el-slider v-model=\"state.blurSize\" @input=\"handleBlurChange\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\n  import \"ol/ol.css\";\n  import { onMounted, reactive } from \"vue\";\n  import { Map, View } from \"ol\";\n  import { Tile as TileLayer, Heatmap } from \"ol/layer\";\n  import { defaults, FullScreen } from \"ol/control\";\n  import { XYZ, Vector as VectorSource } from \"ol/source\";\n  import { KML } from \"ol/format\";\n  import { MAPURL, ATTRIBUTIONS } from \"@/constants\";\n  import updateMapSize from \"@/hooks/updateMapSize\";\n  const state = reactive({\n    radiusSize: 10,\n    blurSize: 15,\n  });\n  //创建一个Heatmap图层\n  const vector = new Heatmap({\n    //矢量数据源（读取本地的KML数据）\n    source: new VectorSource({\n      url: \"data/kml/2012_Earthquakes_Mag5.kml\",\n      format: new KML({\n        extractStyles: false,\n      }),\n      wrapX: false,\n    }),\n    //热点半径\n    radius: parseInt(state.radiusSize, 10),\n    //模糊尺寸\n    blur: parseInt(state.blurSize, 10),\n  });\n  //为矢量数据源添加addfeature事件监听\n  vector.getSource().on(\"addfeature\", (event) => {\n    // 示例数据2012_Earthquakes_Mag5.kml，可从其地标名称提取地震信息\n    //要素的名称属性\n    const name = event.feature.get(\"name\");\n    //得到要素的地震震级属性（magnitude）\n    const magnitude = parseFloat(name.substr(2));\n    //设置要素的weight属性\n    event.feature.set(\"weight\", magnitude - 5);\n  });\n  const raster = new TileLayer({\n    source: new XYZ({\n      attributions: ATTRIBUTIONS,\n      url: MAPURL,\n      maxZoom: 20,\n    }),\n  });\n  const initMap = () => {\n    const map = new Map({\n      //初始化map\n      target: \"map\",\n      //地图容器中加载的图层\n      layers: [\n        //加载瓦片图层数据\n        raster,\n        vector,\n      ],\n      view: new View({\n        projection: \"EPSG:4326\", // 坐标系，有EPSG:4326和EPSG:3 857\n        center: [0, 0],\n        //地图初始显示级别\n        minZoom: 2,\n        zoom: 2,\n      }),\n      //加载控件到地图容器中\n      controls: defaults().extend([\n        new FullScreen(), //加载全屏显示控件（目前支持非IE内核浏览器）\n      ]),\n    });\n    // 侧边栏变化更新地图\n    updateMapSize(map);\n  };\n  // 设置热点半径\n  const handleRadiusChange = () => {\n    //设置热点图层的热点半径\n    vector.setRadius(parseInt(state.radiusSize, 10));\n  };\n  // 设置模糊尺寸\n  const handleBlurChange = () => {\n    //设置热点图层的模糊尺寸\n    vector.setBlur(parseInt(state.blurSize, 10));\n  };\n  onMounted(() => {\n    initMap();\n  });\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  #map {\n    position: relative;\n    height: 100%;\n  }\n  .setting {\n    position: absolute;\n    top: 50px;\n    right: 20px;\n    width: 400px;\n    height: 200px;\n    z-index: 1;\n    color: #fff;\n    font-weight: bold;\n  }\n  .mobile .setting {\n    top: 100px;\n    left: 10px;\n    width: 200px;\n    height: 100px;\n  }\n</style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=e2961952&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/openlayers/openlayers/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e2961952\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=e2961952&scoped=true&lang=css\"","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/GeometryCollection\n */\nimport EventType from '../events/EventType.js';\nimport Geometry from './Geometry.js';\nimport { closestSquaredDistanceXY, createOrUpdateEmpty, extend, getCenter, } from '../extent.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @classdesc\n * An array of {@link module:ol/geom/Geometry~Geometry} objects.\n *\n * @api\n */\nvar GeometryCollection = /** @class */ (function (_super) {\n    __extends(GeometryCollection, _super);\n    /**\n     * @param {Array<Geometry>} [opt_geometries] Geometries.\n     */\n    function GeometryCollection(opt_geometries) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {Array<Geometry>}\n         */\n        _this.geometries_ = opt_geometries ? opt_geometries : null;\n        /**\n         * @type {Array<import(\"../events.js\").EventsKey>}\n         */\n        _this.changeEventsKeys_ = [];\n        _this.listenGeometriesChange_();\n        return _this;\n    }\n    /**\n     * @private\n     */\n    GeometryCollection.prototype.unlistenGeometriesChange_ = function () {\n        this.changeEventsKeys_.forEach(unlistenByKey);\n        this.changeEventsKeys_.length = 0;\n    };\n    /**\n     * @private\n     */\n    GeometryCollection.prototype.listenGeometriesChange_ = function () {\n        if (!this.geometries_) {\n            return;\n        }\n        for (var i = 0, ii = this.geometries_.length; i < ii; ++i) {\n            this.changeEventsKeys_.push(listen(this.geometries_[i], EventType.CHANGE, this.changed, this));\n        }\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!GeometryCollection} Clone.\n     * @api\n     */\n    GeometryCollection.prototype.clone = function () {\n        var geometryCollection = new GeometryCollection(null);\n        geometryCollection.setGeometries(this.geometries_);\n        geometryCollection.applyProperties(this);\n        return geometryCollection;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    GeometryCollection.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            minSquaredDistance = geometries[i].closestPointXY(x, y, closestPoint, minSquaredDistance);\n        }\n        return minSquaredDistance;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @return {boolean} Contains (x, y).\n     */\n    GeometryCollection.prototype.containsXY = function (x, y) {\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            if (geometries[i].containsXY(x, y)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @protected\n     * @return {import(\"../extent.js\").Extent} extent Extent.\n     */\n    GeometryCollection.prototype.computeExtent = function (extent) {\n        createOrUpdateEmpty(extent);\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            extend(extent, geometries[i].getExtent());\n        }\n        return extent;\n    };\n    /**\n     * Return the geometries that make up this geometry collection.\n     * @return {Array<Geometry>} Geometries.\n     * @api\n     */\n    GeometryCollection.prototype.getGeometries = function () {\n        return cloneGeometries(this.geometries_);\n    };\n    /**\n     * @return {Array<Geometry>} Geometries.\n     */\n    GeometryCollection.prototype.getGeometriesArray = function () {\n        return this.geometries_;\n    };\n    /**\n     * @return {Array<Geometry>} Geometries.\n     */\n    GeometryCollection.prototype.getGeometriesArrayRecursive = function () {\n        /** @type {Array<Geometry>} */\n        var geometriesArray = [];\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            if (geometries[i].getType() === this.getType()) {\n                geometriesArray = geometriesArray.concat(\n                /** @type {GeometryCollection} */ (geometries[i]).getGeometriesArrayRecursive());\n            }\n            else {\n                geometriesArray.push(geometries[i]);\n            }\n        }\n        return geometriesArray;\n    };\n    /**\n     * Create a simplified version of this geometry using the Douglas Peucker algorithm.\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {GeometryCollection} Simplified GeometryCollection.\n     */\n    GeometryCollection.prototype.getSimplifiedGeometry = function (squaredTolerance) {\n        if (this.simplifiedGeometryRevision !== this.getRevision()) {\n            this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n            this.simplifiedGeometryRevision = this.getRevision();\n        }\n        if (squaredTolerance < 0 ||\n            (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n                squaredTolerance < this.simplifiedGeometryMaxMinSquaredTolerance)) {\n            return this;\n        }\n        var simplifiedGeometries = [];\n        var geometries = this.geometries_;\n        var simplified = false;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            var geometry = geometries[i];\n            var simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n            simplifiedGeometries.push(simplifiedGeometry);\n            if (simplifiedGeometry !== geometry) {\n                simplified = true;\n            }\n        }\n        if (simplified) {\n            var simplifiedGeometryCollection = new GeometryCollection(null);\n            simplifiedGeometryCollection.setGeometriesArray(simplifiedGeometries);\n            return simplifiedGeometryCollection;\n        }\n        else {\n            this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n            return this;\n        }\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./Geometry.js\").Type} Geometry type.\n     * @api\n     */\n    GeometryCollection.prototype.getType = function () {\n        return 'GeometryCollection';\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    GeometryCollection.prototype.intersectsExtent = function (extent) {\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            if (geometries[i].intersectsExtent(extent)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    GeometryCollection.prototype.isEmpty = function () {\n        return this.geometries_.length === 0;\n    };\n    /**\n     * Rotate the geometry around a given coordinate. This modifies the geometry\n     * coordinates in place.\n     * @param {number} angle Rotation angle in radians.\n     * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n     * @api\n     */\n    GeometryCollection.prototype.rotate = function (angle, anchor) {\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            geometries[i].rotate(angle, anchor);\n        }\n        this.changed();\n    };\n    /**\n     * Scale the geometry (with an optional origin).  This modifies the geometry\n     * coordinates in place.\n     * @abstract\n     * @param {number} sx The scaling factor in the x-direction.\n     * @param {number} [opt_sy] The scaling factor in the y-direction (defaults to sx).\n     * @param {import(\"../coordinate.js\").Coordinate} [opt_anchor] The scale origin (defaults to the center\n     *     of the geometry extent).\n     * @api\n     */\n    GeometryCollection.prototype.scale = function (sx, opt_sy, opt_anchor) {\n        var anchor = opt_anchor;\n        if (!anchor) {\n            anchor = getCenter(this.getExtent());\n        }\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            geometries[i].scale(sx, opt_sy, anchor);\n        }\n        this.changed();\n    };\n    /**\n     * Set the geometries that make up this geometry collection.\n     * @param {Array<Geometry>} geometries Geometries.\n     * @api\n     */\n    GeometryCollection.prototype.setGeometries = function (geometries) {\n        this.setGeometriesArray(cloneGeometries(geometries));\n    };\n    /**\n     * @param {Array<Geometry>} geometries Geometries.\n     */\n    GeometryCollection.prototype.setGeometriesArray = function (geometries) {\n        this.unlistenGeometriesChange_();\n        this.geometries_ = geometries;\n        this.listenGeometriesChange_();\n        this.changed();\n    };\n    /**\n     * Apply a transform function to the coordinates of the geometry.\n     * The geometry is modified in place.\n     * If you do not want the geometry modified in place, first `clone()` it and\n     * then use this function on the clone.\n     * @param {import(\"../proj.js\").TransformFunction} transformFn Transform function.\n     * Called with a flat array of geometry coordinates.\n     * @api\n     */\n    GeometryCollection.prototype.applyTransform = function (transformFn) {\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            geometries[i].applyTransform(transformFn);\n        }\n        this.changed();\n    };\n    /**\n     * Translate the geometry.  This modifies the geometry coordinates in place.  If\n     * instead you want a new geometry, first `clone()` this geometry.\n     * @param {number} deltaX Delta X.\n     * @param {number} deltaY Delta Y.\n     * @api\n     */\n    GeometryCollection.prototype.translate = function (deltaX, deltaY) {\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            geometries[i].translate(deltaX, deltaY);\n        }\n        this.changed();\n    };\n    /**\n     * Clean up.\n     */\n    GeometryCollection.prototype.disposeInternal = function () {\n        this.unlistenGeometriesChange_();\n        _super.prototype.disposeInternal.call(this);\n    };\n    return GeometryCollection;\n}(Geometry));\n/**\n * @param {Array<Geometry>} geometries Geometries.\n * @return {Array<Geometry>} Cloned geometries.\n */\nfunction cloneGeometries(geometries) {\n    var clonedGeometries = [];\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n        clonedGeometries.push(geometries[i].clone());\n    }\n    return clonedGeometries;\n}\nexport default GeometryCollection;\n//# sourceMappingURL=GeometryCollection.js.map","/**\n * @module ol/format/xsd\n */\nimport { getAllTextContent, getDocument } from '../xml.js';\nimport { padNumber } from '../string.js';\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBoolean(node) {\n    var s = getAllTextContent(node, false);\n    return readBooleanString(s);\n}\n/**\n * @param {string} string String.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBooleanString(string) {\n    var m = /^\\s*(true|1)|(false|0)\\s*$/.exec(string);\n    if (m) {\n        return m[1] !== undefined || false;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {Node} node Node.\n * @return {number|undefined} DateTime in seconds.\n */\nexport function readDateTime(node) {\n    var s = getAllTextContent(node, false);\n    var dateTime = Date.parse(s);\n    return isNaN(dateTime) ? undefined : dateTime / 1000;\n}\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimal(node) {\n    var s = getAllTextContent(node, false);\n    return readDecimalString(s);\n}\n/**\n * @param {string} string String.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimalString(string) {\n    // FIXME check spec\n    var m = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*$/i.exec(string);\n    if (m) {\n        return parseFloat(m[1]);\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Non negative integer.\n */\nexport function readPositiveInteger(node) {\n    var s = getAllTextContent(node, false);\n    return readNonNegativeIntegerString(s);\n}\n/**\n * @param {string} string String.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeIntegerString(string) {\n    var m = /^\\s*(\\d+)\\s*$/.exec(string);\n    if (m) {\n        return parseInt(m[1], 10);\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {Node} node Node.\n * @return {string|undefined} String.\n */\nexport function readString(node) {\n    return getAllTextContent(node, false).trim();\n}\n/**\n * @param {Node} node Node to append a TextNode with the boolean to.\n * @param {boolean} bool Boolean.\n */\nexport function writeBooleanTextNode(node, bool) {\n    writeStringTextNode(node, bool ? '1' : '0');\n}\n/**\n * @param {Node} node Node to append a CDATA Section with the string to.\n * @param {string} string String.\n */\nexport function writeCDATASection(node, string) {\n    node.appendChild(getDocument().createCDATASection(string));\n}\n/**\n * @param {Node} node Node to append a TextNode with the dateTime to.\n * @param {number} dateTime DateTime in seconds.\n */\nexport function writeDateTimeTextNode(node, dateTime) {\n    var date = new Date(dateTime * 1000);\n    var string = date.getUTCFullYear() +\n        '-' +\n        padNumber(date.getUTCMonth() + 1, 2) +\n        '-' +\n        padNumber(date.getUTCDate(), 2) +\n        'T' +\n        padNumber(date.getUTCHours(), 2) +\n        ':' +\n        padNumber(date.getUTCMinutes(), 2) +\n        ':' +\n        padNumber(date.getUTCSeconds(), 2) +\n        'Z';\n    node.appendChild(getDocument().createTextNode(string));\n}\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} decimal Decimal.\n */\nexport function writeDecimalTextNode(node, decimal) {\n    var string = decimal.toPrecision();\n    node.appendChild(getDocument().createTextNode(string));\n}\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} nonNegativeInteger Non negative integer.\n */\nexport function writeNonNegativeIntegerTextNode(node, nonNegativeInteger) {\n    var string = nonNegativeInteger.toString();\n    node.appendChild(getDocument().createTextNode(string));\n}\n/**\n * @param {Node} node Node to append a TextNode with the string to.\n * @param {string} string String.\n */\nexport function writeStringTextNode(node, string) {\n    node.appendChild(getDocument().createTextNode(string));\n}\n//# sourceMappingURL=xsd.js.map","/**\n * @module ol/geom/flat/interpolate\n */\nimport { binarySearch } from '../../array.js';\nimport { lerp } from '../../math.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array<number>} [opt_dest] Destination.\n * @param {number} [opt_dimension] Destination dimension (default is `2`)\n * @return {Array<number>} Destination.\n */\nexport function interpolatePoint(flatCoordinates, offset, end, stride, fraction, opt_dest, opt_dimension) {\n    var o, t;\n    var n = (end - offset) / stride;\n    if (n === 1) {\n        o = offset;\n    }\n    else if (n === 2) {\n        o = offset;\n        t = fraction;\n    }\n    else if (n !== 0) {\n        var x1 = flatCoordinates[offset];\n        var y1 = flatCoordinates[offset + 1];\n        var length_1 = 0;\n        var cumulativeLengths = [0];\n        for (var i = offset + stride; i < end; i += stride) {\n            var x2 = flatCoordinates[i];\n            var y2 = flatCoordinates[i + 1];\n            length_1 += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n            cumulativeLengths.push(length_1);\n            x1 = x2;\n            y1 = y2;\n        }\n        var target = fraction * length_1;\n        var index = binarySearch(cumulativeLengths, target);\n        if (index < 0) {\n            t =\n                (target - cumulativeLengths[-index - 2]) /\n                    (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n            o = offset + (-index - 2) * stride;\n        }\n        else {\n            o = offset + index * stride;\n        }\n    }\n    var dimension = opt_dimension > 1 ? opt_dimension : 2;\n    var dest = opt_dest ? opt_dest : new Array(dimension);\n    for (var i = 0; i < dimension; ++i) {\n        dest[i] =\n            o === undefined\n                ? NaN\n                : t === undefined\n                    ? flatCoordinates[o + i]\n                    : lerp(flatCoordinates[o + i], flatCoordinates[o + stride + i], t);\n    }\n    return dest;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {import(\"../../coordinate.js\").Coordinate|null} Coordinate.\n */\nexport function lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, extrapolate) {\n    if (end == offset) {\n        return null;\n    }\n    var coordinate;\n    if (m < flatCoordinates[offset + stride - 1]) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(offset, offset + stride);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    else if (flatCoordinates[end - 1] < m) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(end - stride, end);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    // FIXME use O(1) search\n    if (m == flatCoordinates[offset + stride - 1]) {\n        return flatCoordinates.slice(offset, offset + stride);\n    }\n    var lo = offset / stride;\n    var hi = end / stride;\n    while (lo < hi) {\n        var mid = (lo + hi) >> 1;\n        if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n            hi = mid;\n        }\n        else {\n            lo = mid + 1;\n        }\n    }\n    var m0 = flatCoordinates[lo * stride - 1];\n    if (m == m0) {\n        return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n    }\n    var m1 = flatCoordinates[(lo + 1) * stride - 1];\n    var t = (m - m0) / (m1 - m0);\n    coordinate = [];\n    for (var i = 0; i < stride - 1; ++i) {\n        coordinate.push(lerp(flatCoordinates[(lo - 1) * stride + i], flatCoordinates[lo * stride + i], t));\n    }\n    coordinate.push(m);\n    return coordinate;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {import(\"../../coordinate.js\").Coordinate|null} Coordinate.\n */\nexport function lineStringsCoordinateAtM(flatCoordinates, offset, ends, stride, m, extrapolate, interpolate) {\n    if (interpolate) {\n        return lineStringCoordinateAtM(flatCoordinates, offset, ends[ends.length - 1], stride, m, extrapolate);\n    }\n    var coordinate;\n    if (m < flatCoordinates[stride - 1]) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(0, stride);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    if (flatCoordinates[flatCoordinates.length - 1] < m) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        if (offset == end) {\n            continue;\n        }\n        if (m < flatCoordinates[offset + stride - 1]) {\n            return null;\n        }\n        else if (m <= flatCoordinates[end - 1]) {\n            return lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, false);\n        }\n        offset = end;\n    }\n    return null;\n}\n//# sourceMappingURL=interpolate.js.map","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","export function create() {\n    var source = \"const e=\\\"function\\\"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError(\\\"Cannot convert undefined or null to object\\\");const t=Object(e);for(let e=1,n=arguments.length;e<n;++e){const n=arguments[e];if(null!=n)for(const e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}return t},n=\\\"undefined\\\"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():\\\"\\\";n.indexOf(\\\"firefox\\\");-1!==n.indexOf(\\\"safari\\\")&&-1==n.indexOf(\\\"chrom\\\")&&(n.indexOf(\\\"version/15.4\\\")>=0||n.match(/cpu (os|iphone os) 15_4 like mac os x/)),-1!==n.indexOf(\\\"webkit\\\")&&n.indexOf(\\\"edge\\\"),n.indexOf(\\\"macintosh\\\"),\\\"undefined\\\"!=typeof WorkerGlobalScope&&\\\"undefined\\\"!=typeof OffscreenCanvas&&(self,WorkerGlobalScope),function(){let e=!1;try{const n=Object.defineProperty({},\\\"passive\\\",{get:function(){e=!0}});window.addEventListener(\\\"_\\\",null,n),window.removeEventListener(\\\"_\\\",null,n)}catch(e){}}(),new Array(6);const t=\\\"GENERATE_BUFFERS\\\",o=[],r={vertexPosition:0,indexPosition:0};function i(e,n,t,o,r){e[n+0]=t,e[n+1]=o,e[n+2]=r}function s(e,n,t,s,f,c){const l=3+f,a=e[n+0],u=e[n+1],d=o;d.length=f;for(let t=0;t<d.length;t++)d[t]=e[n+2+t];let g=c?c.vertexPosition:0,x=c?c.indexPosition:0;const h=g/l;return i(t,g,a,u,0),d.length&&t.set(d,g+3),g+=l,i(t,g,a,u,1),d.length&&t.set(d,g+3),g+=l,i(t,g,a,u,2),d.length&&t.set(d,g+3),g+=l,i(t,g,a,u,3),d.length&&t.set(d,g+3),g+=l,s[x++]=h,s[x++]=h+1,s[x++]=h+3,s[x++]=h+1,s[x++]=h+2,s[x++]=h+3,r.vertexPosition=g,r.indexPosition=x,r}const f=self;f.onmessage=n=>{const o=n.data;if(o.type===t){const n=3,t=2,r=o.customAttributesCount,i=t+r,c=new Float32Array(o.renderInstructions),l=c.length/i,a=4*l*(r+n),u=new Uint32Array(6*l),d=new Float32Array(a);let g;for(let e=0;e<c.length;e+=i)g=s(c,e,d,u,r,g);const x=e({vertexBuffer:d.buffer,indexBuffer:u.buffer,renderInstructions:c.buffer},o);f.postMessage(x,[d.buffer,u.buffer,c.buffer])}};\";\n    return new Worker(typeof Blob === 'undefined'\n        ? 'data:application/javascript;base64,' + Buffer.from(source, 'binary').toString('base64')\n        : URL.createObjectURL(new Blob([source], { type: 'application/javascript' })));\n}\n//# sourceMappingURL=webgl.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/MultiPolygon\n */\nimport GeometryLayout from './GeometryLayout.js';\nimport MultiPoint from './MultiPoint.js';\nimport Polygon from './Polygon.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestMultiArrayPoint, multiArrayMaxSquaredDelta, } from './flat/closest.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport { deflateMultiCoordinatesArray } from './flat/deflate.js';\nimport { extend } from '../array.js';\nimport { getInteriorPointsOfMultiArray } from './flat/interiorpoint.js';\nimport { inflateMultiCoordinatesArray } from './flat/inflate.js';\nimport { intersectsLinearRingMultiArray } from './flat/intersectsextent.js';\nimport { linearRingssAreOriented, orientLinearRingsArray, } from './flat/orient.js';\nimport { linearRingss as linearRingssArea } from './flat/area.js';\nimport { linearRingss as linearRingssCenter } from './flat/center.js';\nimport { linearRingssContainsXY } from './flat/contains.js';\nimport { quantizeMultiArray } from './flat/simplify.js';\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @api\n */\nvar MultiPolygon = /** @class */ (function (_super) {\n    __extends(MultiPolygon, _super);\n    /**\n     * @param {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>|Polygon>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` and `opt_endss` are also accepted.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @param {Array<Array<number>>} [opt_endss] Array of ends for internal use with flat coordinates.\n     */\n    function MultiPolygon(coordinates, opt_layout, opt_endss) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {Array<Array<number>>}\n         * @private\n         */\n        _this.endss_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.flatInteriorPointsRevision_ = -1;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.flatInteriorPoints_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.orientedRevision_ = -1;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.orientedFlatCoordinates_ = null;\n        if (!opt_endss && !Array.isArray(coordinates[0])) {\n            var layout = _this.getLayout();\n            var polygons = /** @type {Array<Polygon>} */ (coordinates);\n            var flatCoordinates = [];\n            var endss = [];\n            for (var i = 0, ii = polygons.length; i < ii; ++i) {\n                var polygon = polygons[i];\n                if (i === 0) {\n                    layout = polygon.getLayout();\n                }\n                var offset = flatCoordinates.length;\n                var ends = polygon.getEnds();\n                for (var j = 0, jj = ends.length; j < jj; ++j) {\n                    ends[j] += offset;\n                }\n                extend(flatCoordinates, polygon.getFlatCoordinates());\n                endss.push(ends);\n            }\n            opt_layout = layout;\n            coordinates = flatCoordinates;\n            opt_endss = endss;\n        }\n        if (opt_layout !== undefined && opt_endss) {\n            _this.setFlatCoordinates(opt_layout, \n            /** @type {Array<number>} */ (coordinates));\n            _this.endss_ = opt_endss;\n        }\n        else {\n            _this.setCoordinates(\n            /** @type {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed polygon to this multipolygon.\n     * @param {Polygon} polygon Polygon.\n     * @api\n     */\n    MultiPolygon.prototype.appendPolygon = function (polygon) {\n        /** @type {Array<number>} */\n        var ends;\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = polygon.getFlatCoordinates().slice();\n            ends = polygon.getEnds().slice();\n            this.endss_.push();\n        }\n        else {\n            var offset = this.flatCoordinates.length;\n            extend(this.flatCoordinates, polygon.getFlatCoordinates());\n            ends = polygon.getEnds().slice();\n            for (var i = 0, ii = ends.length; i < ii; ++i) {\n                ends[i] += offset;\n            }\n        }\n        this.endss_.push(ends);\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!MultiPolygon} Clone.\n     * @api\n     */\n    MultiPolygon.prototype.clone = function () {\n        var len = this.endss_.length;\n        var newEndss = new Array(len);\n        for (var i = 0; i < len; ++i) {\n            newEndss[i] = this.endss_[i].slice();\n        }\n        var multiPolygon = new MultiPolygon(this.flatCoordinates.slice(), this.layout, newEndss);\n        multiPolygon.applyProperties(this);\n        return multiPolygon;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    MultiPolygon.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates, 0, this.endss_, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @return {boolean} Contains (x, y).\n     */\n    MultiPolygon.prototype.containsXY = function (x, y) {\n        return linearRingssContainsXY(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n    };\n    /**\n     * Return the area of the multipolygon on projected plane.\n     * @return {number} Area (on projected plane).\n     * @api\n     */\n    MultiPolygon.prototype.getArea = function () {\n        return linearRingssArea(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n    };\n    /**\n     * Get the coordinate array for this geometry.  This array has the structure\n     * of a GeoJSON coordinate array for multi-polygons.\n     *\n     * @param {boolean} [opt_right] Orient coordinates according to the right-hand\n     *     rule (counter-clockwise for exterior and clockwise for interior rings).\n     *     If `false`, coordinates will be oriented according to the left-hand rule\n     *     (clockwise for exterior and counter-clockwise for interior rings).\n     *     By default, coordinate orientation will depend on how the geometry was\n     *     constructed.\n     * @return {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} Coordinates.\n     * @api\n     */\n    MultiPolygon.prototype.getCoordinates = function (opt_right) {\n        var flatCoordinates;\n        if (opt_right !== undefined) {\n            flatCoordinates = this.getOrientedFlatCoordinates().slice();\n            orientLinearRingsArray(flatCoordinates, 0, this.endss_, this.stride, opt_right);\n        }\n        else {\n            flatCoordinates = this.flatCoordinates;\n        }\n        return inflateMultiCoordinatesArray(flatCoordinates, 0, this.endss_, this.stride);\n    };\n    /**\n     * @return {Array<Array<number>>} Endss.\n     */\n    MultiPolygon.prototype.getEndss = function () {\n        return this.endss_;\n    };\n    /**\n     * @return {Array<number>} Flat interior points.\n     */\n    MultiPolygon.prototype.getFlatInteriorPoints = function () {\n        if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n            var flatCenters = linearRingssCenter(this.flatCoordinates, 0, this.endss_, this.stride);\n            this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, flatCenters);\n            this.flatInteriorPointsRevision_ = this.getRevision();\n        }\n        return this.flatInteriorPoints_;\n    };\n    /**\n     * Return the interior points as {@link module:ol/geom/MultiPoint~MultiPoint multipoint}.\n     * @return {MultiPoint} Interior points as XYM coordinates, where M is\n     * the length of the horizontal intersection that the point belongs to.\n     * @api\n     */\n    MultiPolygon.prototype.getInteriorPoints = function () {\n        return new MultiPoint(this.getFlatInteriorPoints().slice(), GeometryLayout.XYM);\n    };\n    /**\n     * @return {Array<number>} Oriented flat coordinates.\n     */\n    MultiPolygon.prototype.getOrientedFlatCoordinates = function () {\n        if (this.orientedRevision_ != this.getRevision()) {\n            var flatCoordinates = this.flatCoordinates;\n            if (linearRingssAreOriented(flatCoordinates, 0, this.endss_, this.stride)) {\n                this.orientedFlatCoordinates_ = flatCoordinates;\n            }\n            else {\n                this.orientedFlatCoordinates_ = flatCoordinates.slice();\n                this.orientedFlatCoordinates_.length = orientLinearRingsArray(this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n            }\n            this.orientedRevision_ = this.getRevision();\n        }\n        return this.orientedFlatCoordinates_;\n    };\n    /**\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {MultiPolygon} Simplified MultiPolygon.\n     * @protected\n     */\n    MultiPolygon.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        var simplifiedEndss = [];\n        simplifiedFlatCoordinates.length = quantizeMultiArray(this.flatCoordinates, 0, this.endss_, this.stride, Math.sqrt(squaredTolerance), simplifiedFlatCoordinates, 0, simplifiedEndss);\n        return new MultiPolygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEndss);\n    };\n    /**\n     * Return the polygon at the specified index.\n     * @param {number} index Index.\n     * @return {Polygon} Polygon.\n     * @api\n     */\n    MultiPolygon.prototype.getPolygon = function (index) {\n        if (index < 0 || this.endss_.length <= index) {\n            return null;\n        }\n        var offset;\n        if (index === 0) {\n            offset = 0;\n        }\n        else {\n            var prevEnds = this.endss_[index - 1];\n            offset = prevEnds[prevEnds.length - 1];\n        }\n        var ends = this.endss_[index].slice();\n        var end = ends[ends.length - 1];\n        if (offset !== 0) {\n            for (var i = 0, ii = ends.length; i < ii; ++i) {\n                ends[i] -= offset;\n            }\n        }\n        return new Polygon(this.flatCoordinates.slice(offset, end), this.layout, ends);\n    };\n    /**\n     * Return the polygons of this multipolygon.\n     * @return {Array<Polygon>} Polygons.\n     * @api\n     */\n    MultiPolygon.prototype.getPolygons = function () {\n        var layout = this.layout;\n        var flatCoordinates = this.flatCoordinates;\n        var endss = this.endss_;\n        var polygons = [];\n        var offset = 0;\n        for (var i = 0, ii = endss.length; i < ii; ++i) {\n            var ends = endss[i].slice();\n            var end = ends[ends.length - 1];\n            if (offset !== 0) {\n                for (var j = 0, jj = ends.length; j < jj; ++j) {\n                    ends[j] -= offset;\n                }\n            }\n            var polygon = new Polygon(flatCoordinates.slice(offset, end), layout, ends);\n            polygons.push(polygon);\n            offset = end;\n        }\n        return polygons;\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./Geometry.js\").Type} Geometry type.\n     * @api\n     */\n    MultiPolygon.prototype.getType = function () {\n        return 'MultiPolygon';\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    MultiPolygon.prototype.intersectsExtent = function (extent) {\n        return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the multipolygon.\n     * @param {!Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @api\n     */\n    MultiPolygon.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 3);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        var endss = deflateMultiCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n        if (endss.length === 0) {\n            this.flatCoordinates.length = 0;\n        }\n        else {\n            var lastEnds = endss[endss.length - 1];\n            this.flatCoordinates.length =\n                lastEnds.length === 0 ? 0 : lastEnds[lastEnds.length - 1];\n        }\n        this.changed();\n    };\n    return MultiPolygon;\n}(SimpleGeometry));\nexport default MultiPolygon;\n//# sourceMappingURL=MultiPolygon.js.map","/**\n * @module ol/geom/flat/center\n */\nimport { createEmpty, createOrUpdateFromFlatCoordinates } from '../../extent.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {Array<number>} Flat centers.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n    var flatCenters = [];\n    var extent = createEmpty();\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        extent = createOrUpdateFromFlatCoordinates(flatCoordinates, offset, ends[0], stride);\n        flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n        offset = ends[ends.length - 1];\n    }\n    return flatCenters;\n}\n//# sourceMappingURL=center.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/MultiLineString\n */\nimport GeometryLayout from './GeometryLayout.js';\nimport LineString from './LineString.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { arrayMaxSquaredDelta, assignClosestArrayPoint } from './flat/closest.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport { deflateCoordinatesArray } from './flat/deflate.js';\nimport { douglasPeuckerArray } from './flat/simplify.js';\nimport { extend } from '../array.js';\nimport { inflateCoordinatesArray } from './flat/inflate.js';\nimport { interpolatePoint, lineStringsCoordinateAtM, } from './flat/interpolate.js';\nimport { intersectsLineStringArray } from './flat/intersectsextent.js';\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @api\n */\nvar MultiLineString = /** @class */ (function (_super) {\n    __extends(MultiLineString, _super);\n    /**\n     * @param {Array<Array<import(\"../coordinate.js\").Coordinate>|LineString>|Array<number>} coordinates\n     *     Coordinates or LineString geometries. (For internal use, flat coordinates in\n     *     combination with `opt_layout` and `opt_ends` are also accepted.)\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @param {Array<number>} [opt_ends] Flat coordinate ends for internal use.\n     */\n    function MultiLineString(coordinates, opt_layout, opt_ends) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        _this.ends_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        if (Array.isArray(coordinates[0])) {\n            _this.setCoordinates(\n            /** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (coordinates), opt_layout);\n        }\n        else if (opt_layout !== undefined && opt_ends) {\n            _this.setFlatCoordinates(opt_layout, \n            /** @type {Array<number>} */ (coordinates));\n            _this.ends_ = opt_ends;\n        }\n        else {\n            var layout = _this.getLayout();\n            var lineStrings = /** @type {Array<LineString>} */ (coordinates);\n            var flatCoordinates = [];\n            var ends = [];\n            for (var i = 0, ii = lineStrings.length; i < ii; ++i) {\n                var lineString = lineStrings[i];\n                if (i === 0) {\n                    layout = lineString.getLayout();\n                }\n                extend(flatCoordinates, lineString.getFlatCoordinates());\n                ends.push(flatCoordinates.length);\n            }\n            _this.setFlatCoordinates(layout, flatCoordinates);\n            _this.ends_ = ends;\n        }\n        return _this;\n    }\n    /**\n     * Append the passed linestring to the multilinestring.\n     * @param {LineString} lineString LineString.\n     * @api\n     */\n    MultiLineString.prototype.appendLineString = function (lineString) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = lineString.getFlatCoordinates().slice();\n        }\n        else {\n            extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n        }\n        this.ends_.push(this.flatCoordinates.length);\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!MultiLineString} Clone.\n     * @api\n     */\n    MultiLineString.prototype.clone = function () {\n        var multiLineString = new MultiLineString(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n        multiLineString.applyProperties(this);\n        return multiLineString;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    MultiLineString.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates, 0, this.ends_, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestArrayPoint(this.flatCoordinates, 0, this.ends_, this.stride, this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * Returns the coordinate at `m` using linear interpolation, or `null` if no\n     * such coordinate exists.\n     *\n     * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n     * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n     * M will return the first coordinate and Ms greater than the last M will\n     * return the last coordinate.\n     *\n     * `opt_interpolate` controls interpolation between consecutive LineStrings\n     * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n     * will be linearly interpolated between the last coordinate of one LineString\n     * and the first coordinate of the next LineString.  If `opt_interpolate` is\n     * `false` then the function will return `null` for Ms falling between\n     * LineStrings.\n     *\n     * @param {number} m M.\n     * @param {boolean} [opt_extrapolate] Extrapolate. Default is `false`.\n     * @param {boolean} [opt_interpolate] Interpolate. Default is `false`.\n     * @return {import(\"../coordinate.js\").Coordinate|null} Coordinate.\n     * @api\n     */\n    MultiLineString.prototype.getCoordinateAtM = function (m, opt_extrapolate, opt_interpolate) {\n        if ((this.layout != GeometryLayout.XYM &&\n            this.layout != GeometryLayout.XYZM) ||\n            this.flatCoordinates.length === 0) {\n            return null;\n        }\n        var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n        var interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n        return lineStringsCoordinateAtM(this.flatCoordinates, 0, this.ends_, this.stride, m, extrapolate, interpolate);\n    };\n    /**\n     * Return the coordinates of the multilinestring.\n     * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n     * @api\n     */\n    MultiLineString.prototype.getCoordinates = function () {\n        return inflateCoordinatesArray(this.flatCoordinates, 0, this.ends_, this.stride);\n    };\n    /**\n     * @return {Array<number>} Ends.\n     */\n    MultiLineString.prototype.getEnds = function () {\n        return this.ends_;\n    };\n    /**\n     * Return the linestring at the specified index.\n     * @param {number} index Index.\n     * @return {LineString} LineString.\n     * @api\n     */\n    MultiLineString.prototype.getLineString = function (index) {\n        if (index < 0 || this.ends_.length <= index) {\n            return null;\n        }\n        return new LineString(this.flatCoordinates.slice(index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n    };\n    /**\n     * Return the linestrings of this multilinestring.\n     * @return {Array<LineString>} LineStrings.\n     * @api\n     */\n    MultiLineString.prototype.getLineStrings = function () {\n        var flatCoordinates = this.flatCoordinates;\n        var ends = this.ends_;\n        var layout = this.layout;\n        /** @type {Array<LineString>} */\n        var lineStrings = [];\n        var offset = 0;\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            var end = ends[i];\n            var lineString = new LineString(flatCoordinates.slice(offset, end), layout);\n            lineStrings.push(lineString);\n            offset = end;\n        }\n        return lineStrings;\n    };\n    /**\n     * @return {Array<number>} Flat midpoints.\n     */\n    MultiLineString.prototype.getFlatMidpoints = function () {\n        var midpoints = [];\n        var flatCoordinates = this.flatCoordinates;\n        var offset = 0;\n        var ends = this.ends_;\n        var stride = this.stride;\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            var end = ends[i];\n            var midpoint = interpolatePoint(flatCoordinates, offset, end, stride, 0.5);\n            extend(midpoints, midpoint);\n            offset = end;\n        }\n        return midpoints;\n    };\n    /**\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {MultiLineString} Simplified MultiLineString.\n     * @protected\n     */\n    MultiLineString.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        var simplifiedEnds = [];\n        simplifiedFlatCoordinates.length = douglasPeuckerArray(this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0, simplifiedEnds);\n        return new MultiLineString(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./Geometry.js\").Type} Geometry type.\n     * @api\n     */\n    MultiLineString.prototype.getType = function () {\n        return 'MultiLineString';\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    MultiLineString.prototype.intersectsExtent = function (extent) {\n        return intersectsLineStringArray(this.flatCoordinates, 0, this.ends_, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the multilinestring.\n     * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n     * @param {GeometryLayout} [opt_layout] Layout.\n     * @api\n     */\n    MultiLineString.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 2);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        var ends = deflateCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n        this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n        this.changed();\n    };\n    return MultiLineString;\n}(SimpleGeometry));\nexport default MultiLineString;\n//# sourceMappingURL=MultiLineString.js.map","/**\n * @module ol/style/Text\n */\nimport Fill from './Fill.js';\nimport TextPlacement from './TextPlacement.js';\nimport { toSize } from '../size.js';\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nvar DEFAULT_FILL_COLOR = '#333';\n/**\n * @typedef {Object} Options\n * @property {string} [font] Font style as CSS 'font' value, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font. Default is '10px sans-serif'\n * @property {number} [maxAngle=Math.PI/4] When `placement` is set to `'line'`, allow a maximum angle between adjacent characters.\n * The expected value is in radians, and the default is 45° (`Math.PI / 4`).\n * @property {number} [offsetX=0] Horizontal text offset in pixels. A positive will shift the text right.\n * @property {number} [offsetY=0] Vertical text offset in pixels. A positive will shift the text down.\n * @property {boolean} [overflow=false] For polygon labels or when `placement` is set to `'line'`, allow text to exceed\n * the width of the polygon at the label position or the length of the path that it follows.\n * @property {import(\"./TextPlacement.js\").default|string} [placement='point'] Text placement.\n * @property {number|import(\"../size.js\").Size} [scale] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the text with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {string|Array<string>} [text] Text content or rich text content. For plain text provide a string, which can\n * contain line breaks (`\\n`). For rich text provide an array of text/font tuples. A tuple consists of the text to\n * render and the font to use (or `''` to use the text style's font). A line break has to be a separate tuple (i.e. `'\\n', ''`).\n * **Example:** `['foo', 'bold 10px sans-serif', ' bar', 'italic 10px sans-serif', ' baz', '']` will yield \"**foo** *bar* baz\".\n * **Note:** Rich text is not supported for the immediate rendering API.\n * @property {string} [textAlign] Text alignment. Possible values: 'left', 'right', 'center', 'end' or 'start'.\n * Default is 'center' for `placement: 'point'`. For `placement: 'line'`, the default is to let the renderer choose a\n * placement where `maxAngle` is not exceeded.\n * @property {string} [justify] Text justification within the text box.\n * If not set, text is justified towards the `textAlign` anchor.\n * Otherwise, use options `'left'`, `'center'`, or `'right'` to justify the text within the text box.\n * **Note:** `justify` is ignored for immediate rendering and also for `placement: 'line'`.\n * @property {string} [textBaseline='middle'] Text base line. Possible values: 'bottom', 'top', 'middle', 'alphabetic',\n * 'hanging', 'ideographic'.\n * @property {import(\"./Fill.js\").default} [fill] Fill style. If none is provided, we'll use a dark fill-style (#333).\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Fill.js\").default} [backgroundFill] Fill style for the text background when `placement` is\n * `'point'`. Default is no fill.\n * @property {import(\"./Stroke.js\").default} [backgroundStroke] Stroke style for the text background  when `placement`\n * is `'point'`. Default is no stroke.\n * @property {Array<number>} [padding=[0, 0, 0, 0]] Padding in pixels around the text for decluttering and background. The order of\n * values in the array is `[top, right, bottom, left]`.\n */\n/**\n * @classdesc\n * Set text style for vector features.\n * @api\n */\nvar Text = /** @class */ (function () {\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Text(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.font_ = options.font;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.rotation_ = options.rotation;\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        this.rotateWithView_ = options.rotateWithView;\n        /**\n         * @private\n         * @type {number|import(\"../size.js\").Size|undefined}\n         */\n        this.scale_ = options.scale;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        this.scaleArray_ = toSize(options.scale !== undefined ? options.scale : 1);\n        /**\n         * @private\n         * @type {string|Array<string>|undefined}\n         */\n        this.text_ = options.text;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.textAlign_ = options.textAlign;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.justify_ = options.justify;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.textBaseline_ = options.textBaseline;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.fill_ =\n            options.fill !== undefined\n                ? options.fill\n                : new Fill({ color: DEFAULT_FILL_COLOR });\n        /**\n         * @private\n         * @type {number}\n         */\n        this.maxAngle_ =\n            options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n        /**\n         * @private\n         * @type {import(\"./TextPlacement.js\").default|string}\n         */\n        this.placement_ =\n            options.placement !== undefined ? options.placement : TextPlacement.POINT;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.overflow_ = !!options.overflow;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.backgroundFill_ = options.backgroundFill\n            ? options.backgroundFill\n            : null;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.backgroundStroke_ = options.backgroundStroke\n            ? options.backgroundStroke\n            : null;\n        /**\n         * @private\n         * @type {Array<number>|null}\n         */\n        this.padding_ = options.padding === undefined ? null : options.padding;\n    }\n    /**\n     * Clones the style.\n     * @return {Text} The cloned style.\n     * @api\n     */\n    Text.prototype.clone = function () {\n        var scale = this.getScale();\n        return new Text({\n            font: this.getFont(),\n            placement: this.getPlacement(),\n            maxAngle: this.getMaxAngle(),\n            overflow: this.getOverflow(),\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            scale: Array.isArray(scale) ? scale.slice() : scale,\n            text: this.getText(),\n            textAlign: this.getTextAlign(),\n            justify: this.getJustify(),\n            textBaseline: this.getTextBaseline(),\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            offsetX: this.getOffsetX(),\n            offsetY: this.getOffsetY(),\n            backgroundFill: this.getBackgroundFill()\n                ? this.getBackgroundFill().clone()\n                : undefined,\n            backgroundStroke: this.getBackgroundStroke()\n                ? this.getBackgroundStroke().clone()\n                : undefined,\n            padding: this.getPadding() || undefined,\n        });\n    };\n    /**\n     * Get the `overflow` configuration.\n     * @return {boolean} Let text overflow the length of the path they follow.\n     * @api\n     */\n    Text.prototype.getOverflow = function () {\n        return this.overflow_;\n    };\n    /**\n     * Get the font name.\n     * @return {string|undefined} Font.\n     * @api\n     */\n    Text.prototype.getFont = function () {\n        return this.font_;\n    };\n    /**\n     * Get the maximum angle between adjacent characters.\n     * @return {number} Angle in radians.\n     * @api\n     */\n    Text.prototype.getMaxAngle = function () {\n        return this.maxAngle_;\n    };\n    /**\n     * Get the label placement.\n     * @return {import(\"./TextPlacement.js\").default|string} Text placement.\n     * @api\n     */\n    Text.prototype.getPlacement = function () {\n        return this.placement_;\n    };\n    /**\n     * Get the x-offset for the text.\n     * @return {number} Horizontal text offset.\n     * @api\n     */\n    Text.prototype.getOffsetX = function () {\n        return this.offsetX_;\n    };\n    /**\n     * Get the y-offset for the text.\n     * @return {number} Vertical text offset.\n     * @api\n     */\n    Text.prototype.getOffsetY = function () {\n        return this.offsetY_;\n    };\n    /**\n     * Get the fill style for the text.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Text.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * Determine whether the text rotates with the map.\n     * @return {boolean|undefined} Rotate with map.\n     * @api\n     */\n    Text.prototype.getRotateWithView = function () {\n        return this.rotateWithView_;\n    };\n    /**\n     * Get the text rotation.\n     * @return {number|undefined} Rotation.\n     * @api\n     */\n    Text.prototype.getRotation = function () {\n        return this.rotation_;\n    };\n    /**\n     * Get the text scale.\n     * @return {number|import(\"../size.js\").Size|undefined} Scale.\n     * @api\n     */\n    Text.prototype.getScale = function () {\n        return this.scale_;\n    };\n    /**\n     * Get the symbolizer scale array.\n     * @return {import(\"../size.js\").Size} Scale array.\n     */\n    Text.prototype.getScaleArray = function () {\n        return this.scaleArray_;\n    };\n    /**\n     * Get the stroke style for the text.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Text.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * Get the text to be rendered.\n     * @return {string|Array<string>|undefined} Text.\n     * @api\n     */\n    Text.prototype.getText = function () {\n        return this.text_;\n    };\n    /**\n     * Get the text alignment.\n     * @return {string|undefined} Text align.\n     * @api\n     */\n    Text.prototype.getTextAlign = function () {\n        return this.textAlign_;\n    };\n    /**\n     * Get the justification.\n     * @return {string|undefined} Justification.\n     * @api\n     */\n    Text.prototype.getJustify = function () {\n        return this.justify_;\n    };\n    /**\n     * Get the text baseline.\n     * @return {string|undefined} Text baseline.\n     * @api\n     */\n    Text.prototype.getTextBaseline = function () {\n        return this.textBaseline_;\n    };\n    /**\n     * Get the background fill style for the text.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Text.prototype.getBackgroundFill = function () {\n        return this.backgroundFill_;\n    };\n    /**\n     * Get the background stroke style for the text.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Text.prototype.getBackgroundStroke = function () {\n        return this.backgroundStroke_;\n    };\n    /**\n     * Get the padding for the text.\n     * @return {Array<number>|null} Padding.\n     * @api\n     */\n    Text.prototype.getPadding = function () {\n        return this.padding_;\n    };\n    /**\n     * Set the `overflow` property.\n     *\n     * @param {boolean} overflow Let text overflow the path that it follows.\n     * @api\n     */\n    Text.prototype.setOverflow = function (overflow) {\n        this.overflow_ = overflow;\n    };\n    /**\n     * Set the font.\n     *\n     * @param {string|undefined} font Font.\n     * @api\n     */\n    Text.prototype.setFont = function (font) {\n        this.font_ = font;\n    };\n    /**\n     * Set the maximum angle between adjacent characters.\n     *\n     * @param {number} maxAngle Angle in radians.\n     * @api\n     */\n    Text.prototype.setMaxAngle = function (maxAngle) {\n        this.maxAngle_ = maxAngle;\n    };\n    /**\n     * Set the x offset.\n     *\n     * @param {number} offsetX Horizontal text offset.\n     * @api\n     */\n    Text.prototype.setOffsetX = function (offsetX) {\n        this.offsetX_ = offsetX;\n    };\n    /**\n     * Set the y offset.\n     *\n     * @param {number} offsetY Vertical text offset.\n     * @api\n     */\n    Text.prototype.setOffsetY = function (offsetY) {\n        this.offsetY_ = offsetY;\n    };\n    /**\n     * Set the text placement.\n     *\n     * @param {import(\"./TextPlacement.js\").default|string} placement Placement.\n     * @api\n     */\n    Text.prototype.setPlacement = function (placement) {\n        this.placement_ = placement;\n    };\n    /**\n     * Set whether to rotate the text with the view.\n     *\n     * @param {boolean} rotateWithView Rotate with map.\n     * @api\n     */\n    Text.prototype.setRotateWithView = function (rotateWithView) {\n        this.rotateWithView_ = rotateWithView;\n    };\n    /**\n     * Set the fill.\n     *\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Text.prototype.setFill = function (fill) {\n        this.fill_ = fill;\n    };\n    /**\n     * Set the rotation.\n     *\n     * @param {number|undefined} rotation Rotation.\n     * @api\n     */\n    Text.prototype.setRotation = function (rotation) {\n        this.rotation_ = rotation;\n    };\n    /**\n     * Set the scale.\n     *\n     * @param {number|import(\"../size.js\").Size|undefined} scale Scale.\n     * @api\n     */\n    Text.prototype.setScale = function (scale) {\n        this.scale_ = scale;\n        this.scaleArray_ = toSize(scale !== undefined ? scale : 1);\n    };\n    /**\n     * Set the stroke.\n     *\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Text.prototype.setStroke = function (stroke) {\n        this.stroke_ = stroke;\n    };\n    /**\n     * Set the text.\n     *\n     * @param {string|Array<string>|undefined} text Text.\n     * @api\n     */\n    Text.prototype.setText = function (text) {\n        this.text_ = text;\n    };\n    /**\n     * Set the text alignment.\n     *\n     * @param {string|undefined} textAlign Text align.\n     * @api\n     */\n    Text.prototype.setTextAlign = function (textAlign) {\n        this.textAlign_ = textAlign;\n    };\n    /**\n     * Set the justification.\n     *\n     * @param {string|undefined} justify Justification.\n     * @api\n     */\n    Text.prototype.setJustify = function (justify) {\n        this.justify_ = justify;\n    };\n    /**\n     * Set the text baseline.\n     *\n     * @param {string|undefined} textBaseline Text baseline.\n     * @api\n     */\n    Text.prototype.setTextBaseline = function (textBaseline) {\n        this.textBaseline_ = textBaseline;\n    };\n    /**\n     * Set the background fill.\n     *\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Text.prototype.setBackgroundFill = function (fill) {\n        this.backgroundFill_ = fill;\n    };\n    /**\n     * Set the background stroke.\n     *\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Text.prototype.setBackgroundStroke = function (stroke) {\n        this.backgroundStroke_ = stroke;\n    };\n    /**\n     * Set the padding (`[top, right, bottom, left]`).\n     *\n     * @param {Array<number>|null} padding Padding.\n     * @api\n     */\n    Text.prototype.setPadding = function (padding) {\n        this.padding_ = padding;\n    };\n    return Text;\n}());\nexport default Text;\n//# sourceMappingURL=Text.js.map","/**\n * @module ol/format/Feature\n */\nimport Units from '../proj/Units.js';\nimport { abstract } from '../util.js';\nimport { assign } from '../obj.js';\nimport { equivalent as equivalentProjection, get as getProjection, transformExtent, } from '../proj.js';\n/**\n * @typedef {Object} ReadOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are reading.\n * If not provided, the projection will be derived from the data (where possible) or\n * the `dataProjection` of the format is assigned (where set). If the projection\n * can not be derived from the data and if no `dataProjection` is set for a format,\n * the features will not be reprojected.\n * @property {import(\"../extent.js\").Extent} [extent] Tile extent in map units of the tile being read.\n * This is only required when reading data with tile pixels as geometry units. When configured,\n * a `dataProjection` with `TILE_PIXELS` as `units` and the tile's pixel extent as `extent` needs to be\n * provided.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * created by the format reader. If not provided, features will be returned in the\n * `dataProjection`.\n */\n/**\n * @typedef {Object} WriteOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are writing.\n * If not provided, the `dataProjection` of the format is assigned (where set).\n * If no `dataProjection` is set for a format, the features will be returned\n * in the `featureProjection`.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * that will be serialized by the format writer. If not provided, geometries are assumed\n * to be in the `dataProjection` if that is set; in other words, they are not transformed.\n * @property {boolean} [rightHanded] When writing geometries, follow the right-hand\n * rule for linear ring orientation.  This means that polygons will have counter-clockwise\n * exterior rings and clockwise interior rings.  By default, coordinates are serialized\n * as they are provided at construction.  If `true`, the right-hand rule will\n * be applied.  If `false`, the left-hand rule will be applied (clockwise for\n * exterior and counter-clockwise for interior rings).  Note that not all\n * formats support this.  The GeoJSON format does use this property when writing\n * geometries.\n * @property {number} [decimals] Maximum number of decimal places for coordinates.\n * Coordinates are stored internally as floats, but floating-point arithmetic can create\n * coordinates with a large number of decimal places, not generally wanted on output.\n * Set a number here to round coordinates. Can also be used to ensure that\n * coordinates read in can be written back out with the same number of decimals.\n * Default is no rounding.\n */\n/**\n * @typedef {'arraybuffer' | 'json' | 'text' | 'xml'} Type\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for feature formats.\n * {@link module:ol/format/Feature~FeatureFormat} subclasses provide the ability to decode and encode\n * {@link module:ol/Feature~Feature} objects from a variety of commonly used geospatial\n * file formats.  See the documentation for each format for more details.\n *\n * @abstract\n * @api\n */\nvar FeatureFormat = /** @class */ (function () {\n    function FeatureFormat() {\n        /**\n         * @protected\n         * @type {import(\"../proj/Projection.js\").default|undefined}\n         */\n        this.dataProjection = undefined;\n        /**\n         * @protected\n         * @type {import(\"../proj/Projection.js\").default|undefined}\n         */\n        this.defaultFeatureProjection = undefined;\n        /**\n         * A list media types supported by the format in descending order of preference.\n         * @type {Array<string>}\n         */\n        this.supportedMediaTypes = null;\n    }\n    /**\n     * Adds the data projection to the read options.\n     * @param {Document|Element|Object|string} source Source.\n     * @param {ReadOptions} [opt_options] Options.\n     * @return {ReadOptions|undefined} Options.\n     * @protected\n     */\n    FeatureFormat.prototype.getReadOptions = function (source, opt_options) {\n        var options;\n        if (opt_options) {\n            var dataProjection = opt_options.dataProjection\n                ? getProjection(opt_options.dataProjection)\n                : this.readProjection(source);\n            if (opt_options.extent &&\n                dataProjection &&\n                dataProjection.getUnits() === Units.TILE_PIXELS) {\n                dataProjection = getProjection(dataProjection);\n                dataProjection.setWorldExtent(opt_options.extent);\n            }\n            options = {\n                dataProjection: dataProjection,\n                featureProjection: opt_options.featureProjection,\n            };\n        }\n        return this.adaptOptions(options);\n    };\n    /**\n     * Sets the `dataProjection` on the options, if no `dataProjection`\n     * is set.\n     * @param {WriteOptions|ReadOptions|undefined} options\n     *     Options.\n     * @protected\n     * @return {WriteOptions|ReadOptions|undefined}\n     *     Updated options.\n     */\n    FeatureFormat.prototype.adaptOptions = function (options) {\n        return assign({\n            dataProjection: this.dataProjection,\n            featureProjection: this.defaultFeatureProjection,\n        }, options);\n    };\n    /**\n     * @abstract\n     * @return {Type} The format type.\n     */\n    FeatureFormat.prototype.getType = function () {\n        return abstract();\n    };\n    /**\n     * Read a single feature from a source.\n     *\n     * @abstract\n     * @param {Document|Element|Object|string} source Source.\n     * @param {ReadOptions} [opt_options] Read options.\n     * @return {import(\"../Feature.js\").FeatureLike} Feature.\n     */\n    FeatureFormat.prototype.readFeature = function (source, opt_options) {\n        return abstract();\n    };\n    /**\n     * Read all features from a source.\n     *\n     * @abstract\n     * @param {Document|Element|ArrayBuffer|Object|string} source Source.\n     * @param {ReadOptions} [opt_options] Read options.\n     * @return {Array<import(\"../Feature.js\").FeatureLike>} Features.\n     */\n    FeatureFormat.prototype.readFeatures = function (source, opt_options) {\n        return abstract();\n    };\n    /**\n     * Read a single geometry from a source.\n     *\n     * @abstract\n     * @param {Document|Element|Object|string} source Source.\n     * @param {ReadOptions} [opt_options] Read options.\n     * @return {import(\"../geom/Geometry.js\").default} Geometry.\n     */\n    FeatureFormat.prototype.readGeometry = function (source, opt_options) {\n        return abstract();\n    };\n    /**\n     * Read the projection from a source.\n     *\n     * @abstract\n     * @param {Document|Element|Object|string} source Source.\n     * @return {import(\"../proj/Projection.js\").default|undefined} Projection.\n     */\n    FeatureFormat.prototype.readProjection = function (source) {\n        return abstract();\n    };\n    /**\n     * Encode a feature in this format.\n     *\n     * @abstract\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @param {WriteOptions} [opt_options] Write options.\n     * @return {string|ArrayBuffer} Result.\n     */\n    FeatureFormat.prototype.writeFeature = function (feature, opt_options) {\n        return abstract();\n    };\n    /**\n     * Encode an array of features in this format.\n     *\n     * @abstract\n     * @param {Array<import(\"../Feature.js\").default>} features Features.\n     * @param {WriteOptions} [opt_options] Write options.\n     * @return {string|ArrayBuffer} Result.\n     */\n    FeatureFormat.prototype.writeFeatures = function (features, opt_options) {\n        return abstract();\n    };\n    /**\n     * Write a single geometry in this format.\n     *\n     * @abstract\n     * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     * @param {WriteOptions} [opt_options] Write options.\n     * @return {string|ArrayBuffer} Result.\n     */\n    FeatureFormat.prototype.writeGeometry = function (geometry, opt_options) {\n        return abstract();\n    };\n    return FeatureFormat;\n}());\nexport default FeatureFormat;\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {boolean} write Set to true for writing, false for reading.\n * @param {WriteOptions|ReadOptions} [opt_options] Options.\n * @return {import(\"../geom/Geometry.js\").default} Transformed geometry.\n */\nexport function transformGeometryWithOptions(geometry, write, opt_options) {\n    var featureProjection = opt_options\n        ? getProjection(opt_options.featureProjection)\n        : null;\n    var dataProjection = opt_options\n        ? getProjection(opt_options.dataProjection)\n        : null;\n    var transformed;\n    if (featureProjection &&\n        dataProjection &&\n        !equivalentProjection(featureProjection, dataProjection)) {\n        transformed = (write ? geometry.clone() : geometry).transform(write ? featureProjection : dataProjection, write ? dataProjection : featureProjection);\n    }\n    else {\n        transformed = geometry;\n    }\n    if (write &&\n        opt_options &&\n        /** @type {WriteOptions} */ (opt_options).decimals !== undefined) {\n        var power_1 = Math.pow(10, \n        /** @type {WriteOptions} */ (opt_options).decimals);\n        // if decimals option on write, round each coordinate appropriately\n        /**\n         * @param {Array<number>} coordinates Coordinates.\n         * @return {Array<number>} Transformed coordinates.\n         */\n        var transform = function (coordinates) {\n            for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n                coordinates[i] = Math.round(coordinates[i] * power_1) / power_1;\n            }\n            return coordinates;\n        };\n        if (transformed === geometry) {\n            transformed = geometry.clone();\n        }\n        transformed.applyTransform(transform);\n    }\n    return transformed;\n}\n/**\n * @param {import(\"../extent.js\").Extent} extent Extent.\n * @param {ReadOptions} [opt_options] Read options.\n * @return {import(\"../extent.js\").Extent} Transformed extent.\n */\nexport function transformExtentWithOptions(extent, opt_options) {\n    var featureProjection = opt_options\n        ? getProjection(opt_options.featureProjection)\n        : null;\n    var dataProjection = opt_options\n        ? getProjection(opt_options.dataProjection)\n        : null;\n    if (featureProjection &&\n        dataProjection &&\n        !equivalentProjection(featureProjection, dataProjection)) {\n        return transformExtent(extent, dataProjection, featureProjection);\n    }\n    else {\n        return extent;\n    }\n}\n//# sourceMappingURL=Feature.js.map","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * @module ol/xml\n */\nimport { extend } from './array.js';\n/**\n * When using {@link module:ol/xml.makeChildAppender} or\n * {@link module:ol/xml.makeSimpleNodeFactory}, the top `objectStack` item needs\n * to have this structure.\n * @typedef {Object} NodeStackItem\n * @property {Element} node Node.\n */\n/**\n * @typedef {function(Element, Array<*>): void} Parser\n */\n/**\n * @typedef {function(Element, *, Array<*>): void} Serializer\n */\n/**\n * @type {string}\n */\nexport var XML_SCHEMA_INSTANCE_URI = 'http://www.w3.org/2001/XMLSchema-instance';\n/**\n * @param {string} namespaceURI Namespace URI.\n * @param {string} qualifiedName Qualified name.\n * @return {Element} Node.\n */\nexport function createElementNS(namespaceURI, qualifiedName) {\n    return getDocument().createElementNS(namespaceURI, qualifiedName);\n}\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @return {string} All text content.\n * @api\n */\nexport function getAllTextContent(node, normalizeWhitespace) {\n    return getAllTextContent_(node, normalizeWhitespace, []).join('');\n}\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @param {Array<string>} accumulator Accumulator.\n * @private\n * @return {Array<string>} Accumulator.\n */\nexport function getAllTextContent_(node, normalizeWhitespace, accumulator) {\n    if (node.nodeType == Node.CDATA_SECTION_NODE ||\n        node.nodeType == Node.TEXT_NODE) {\n        if (normalizeWhitespace) {\n            accumulator.push(String(node.nodeValue).replace(/(\\r\\n|\\r|\\n)/g, ''));\n        }\n        else {\n            accumulator.push(node.nodeValue);\n        }\n    }\n    else {\n        var n = void 0;\n        for (n = node.firstChild; n; n = n.nextSibling) {\n            getAllTextContent_(n, normalizeWhitespace, accumulator);\n        }\n    }\n    return accumulator;\n}\n/**\n * @param {Object} object Object.\n * @return {boolean} Is a document.\n */\nexport function isDocument(object) {\n    return 'documentElement' in object;\n}\n/**\n * @param {Element} node Node.\n * @param {?string} namespaceURI Namespace URI.\n * @param {string} name Attribute name.\n * @return {string} Value\n */\nexport function getAttributeNS(node, namespaceURI, name) {\n    return node.getAttributeNS(namespaceURI, name) || '';\n}\n/**\n * Parse an XML string to an XML Document.\n * @param {string} xml XML.\n * @return {Document} Document.\n * @api\n */\nexport function parse(xml) {\n    return new DOMParser().parseFromString(xml, 'application/xml');\n}\n/**\n * Make an array extender function for extending the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array<*>): (Array<*>|undefined)} valueReader Value reader.\n * @param {T} [opt_this] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayExtender(valueReader, opt_this) {\n    return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n        var value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n        if (value !== undefined) {\n            var array = /** @type {Array<*>} */ (objectStack[objectStack.length - 1]);\n            extend(array, value);\n        }\n    });\n}\n/**\n * Make an array pusher function for pushing to the array at the top of the\n * object stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {T} [opt_this] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayPusher(valueReader, opt_this) {\n    return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n        var value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n        if (value !== undefined) {\n            var array = /** @type {Array<*>} */ (objectStack[objectStack.length - 1]);\n            array.push(value);\n        }\n    });\n}\n/**\n * Make an object stack replacer function for replacing the object at the\n * top of the stack.\n * @param {function(this: T, Node, Array<*>): *} valueReader Value reader.\n * @param {T} [opt_this] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeReplacer(valueReader, opt_this) {\n    return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n        var value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n        if (value !== undefined) {\n            objectStack[objectStack.length - 1] = value;\n        }\n    });\n}\n/**\n * Make an object property pusher function for adding a property to the\n * object at the top of the stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string} [opt_property] Property.\n * @param {T} [opt_this] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertyPusher(valueReader, opt_property, opt_this) {\n    return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n        var value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n        if (value !== undefined) {\n            var object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n            var property = opt_property !== undefined ? opt_property : node.localName;\n            var array = void 0;\n            if (property in object) {\n                array = object[property];\n            }\n            else {\n                array = [];\n                object[property] = array;\n            }\n            array.push(value);\n        }\n    });\n}\n/**\n * Make an object property setter function.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string} [opt_property] Property.\n * @param {T} [opt_this] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertySetter(valueReader, opt_property, opt_this) {\n    return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n        var value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n        if (value !== undefined) {\n            var object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n            var property = opt_property !== undefined ? opt_property : node.localName;\n            object[property] = value;\n        }\n    });\n}\n/**\n * Create a serializer that appends nodes written by its `nodeWriter` to its\n * designated parent. The parent is the `node` of the\n * {@link module:ol/xml~NodeStackItem} at the top of the `objectStack`.\n * @param {function(this: T, Node, V, Array<*>): void} nodeWriter Node writer.\n * @param {T} [opt_this] The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeChildAppender(nodeWriter, opt_this) {\n    return function (node, value, objectStack) {\n        nodeWriter.call(opt_this !== undefined ? opt_this : this, node, value, objectStack);\n        var parent = /** @type {NodeStackItem} */ (objectStack[objectStack.length - 1]);\n        var parentNode = parent.node;\n        parentNode.appendChild(node);\n    };\n}\n/**\n * Create a serializer that calls the provided `nodeWriter` from\n * {@link module:ol/xml.serialize}. This can be used by the parent writer to have the\n * `nodeWriter` called with an array of values when the `nodeWriter` was\n * designed to serialize a single item. An example would be a LineString\n * geometry writer, which could be reused for writing MultiLineString\n * geometries.\n * @param {function(this: T, Element, V, Array<*>): void} nodeWriter Node writer.\n * @param {T} [opt_this] The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeArraySerializer(nodeWriter, opt_this) {\n    var serializersNS, nodeFactory;\n    return function (node, value, objectStack) {\n        if (serializersNS === undefined) {\n            serializersNS = {};\n            var serializers = {};\n            serializers[node.localName] = nodeWriter;\n            serializersNS[node.namespaceURI] = serializers;\n            nodeFactory = makeSimpleNodeFactory(node.localName);\n        }\n        serialize(serializersNS, nodeFactory, value, objectStack);\n    };\n}\n/**\n * Create a node factory which can use the `opt_keys` passed to\n * {@link module:ol/xml.serialize} or {@link module:ol/xml.pushSerializeAndPop} as node names,\n * or a fixed node name. The namespace of the created nodes can either be fixed,\n * or the parent namespace will be used.\n * @param {string} [opt_nodeName] Fixed node name which will be used for all\n *     created nodes. If not provided, the 3rd argument to the resulting node\n *     factory needs to be provided and will be the nodeName.\n * @param {string} [opt_namespaceURI] Fixed namespace URI which will be used for\n *     all created nodes. If not provided, the namespace of the parent node will\n *     be used.\n * @return {function(*, Array<*>, string=): (Node|undefined)} Node factory.\n */\nexport function makeSimpleNodeFactory(opt_nodeName, opt_namespaceURI) {\n    var fixedNodeName = opt_nodeName;\n    return (\n    /**\n     * @param {*} value Value.\n     * @param {Array<*>} objectStack Object stack.\n     * @param {string} [opt_nodeName] Node name.\n     * @return {Node} Node.\n     */\n    function (value, objectStack, opt_nodeName) {\n        var context = /** @type {NodeStackItem} */ (objectStack[objectStack.length - 1]);\n        var node = context.node;\n        var nodeName = fixedNodeName;\n        if (nodeName === undefined) {\n            nodeName = opt_nodeName;\n        }\n        var namespaceURI = opt_namespaceURI !== undefined ? opt_namespaceURI : node.namespaceURI;\n        return createElementNS(namespaceURI, /** @type {string} */ (nodeName));\n    });\n}\n/**\n * A node factory that creates a node using the parent's `namespaceURI` and the\n * `nodeName` passed by {@link module:ol/xml.serialize} or\n * {@link module:ol/xml.pushSerializeAndPop} to the node factory.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nexport var OBJECT_PROPERTY_NODE_FACTORY = makeSimpleNodeFactory();\n/**\n * Create an array of `values` to be used with {@link module:ol/xml.serialize} or\n * {@link module:ol/xml.pushSerializeAndPop}, where `orderedKeys` has to be provided as\n * `opt_key` argument.\n * @param {Object<string, *>} object Key-value pairs for the sequence. Keys can\n *     be a subset of the `orderedKeys`.\n * @param {Array<string>} orderedKeys Keys in the order of the sequence.\n * @return {Array<*>} Values in the order of the sequence. The resulting array\n *     has the same length as the `orderedKeys` array. Values that are not\n *     present in `object` will be `undefined` in the resulting array.\n */\nexport function makeSequence(object, orderedKeys) {\n    var length = orderedKeys.length;\n    var sequence = new Array(length);\n    for (var i = 0; i < length; ++i) {\n        sequence[i] = object[orderedKeys[i]];\n    }\n    return sequence;\n}\n/**\n * Create a namespaced structure, using the same values for each namespace.\n * This can be used as a starting point for versioned parsers, when only a few\n * values are version specific.\n * @param {Array<string>} namespaceURIs Namespace URIs.\n * @param {T} structure Structure.\n * @param {Object<string, T>} [opt_structureNS] Namespaced structure to add to.\n * @return {Object<string, T>} Namespaced structure.\n * @template T\n */\nexport function makeStructureNS(namespaceURIs, structure, opt_structureNS) {\n    /**\n     * @type {Object<string, T>}\n     */\n    var structureNS = opt_structureNS !== undefined ? opt_structureNS : {};\n    var i, ii;\n    for (i = 0, ii = namespaceURIs.length; i < ii; ++i) {\n        structureNS[namespaceURIs[i]] = structure;\n    }\n    return structureNS;\n}\n/**\n * Parse a node using the parsers and object stack.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*} [opt_this] The object to use as `this`.\n */\nexport function parseNode(parsersNS, node, objectStack, opt_this) {\n    var n;\n    for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n        var parsers = parsersNS[n.namespaceURI];\n        if (parsers !== undefined) {\n            var parser = parsers[n.localName];\n            if (parser !== undefined) {\n                parser.call(opt_this, n, objectStack);\n            }\n        }\n    }\n}\n/**\n * Push an object on top of the stack, parse and return the popped object.\n * @param {T} object Object.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*} [opt_this] The object to use as `this`.\n * @return {T} Object.\n * @template T\n */\nexport function pushParseAndPop(object, parsersNS, node, objectStack, opt_this) {\n    objectStack.push(object);\n    parseNode(parsersNS, node, objectStack, opt_this);\n    return /** @type {T} */ (objectStack.pop());\n}\n/**\n * Walk through an array of `values` and call a serializer for each value.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>} [opt_keys] Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T} [opt_this] The object to use as `this` for the node factory and\n *     serializers.\n * @template T\n */\nexport function serialize(serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n    var length = (opt_keys !== undefined ? opt_keys : values).length;\n    var value, node;\n    for (var i = 0; i < length; ++i) {\n        value = values[i];\n        if (value !== undefined) {\n            node = nodeFactory.call(opt_this !== undefined ? opt_this : this, value, objectStack, opt_keys !== undefined ? opt_keys[i] : undefined);\n            if (node !== undefined) {\n                serializersNS[node.namespaceURI][node.localName].call(opt_this, node, value, objectStack);\n            }\n        }\n    }\n}\n/**\n * @param {O} object Object.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>} [opt_keys] Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T} [opt_this] The object to use as `this` for the node factory and\n *     serializers.\n * @return {O|undefined} Object.\n * @template O, T\n */\nexport function pushSerializeAndPop(object, serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n    objectStack.push(object);\n    serialize(serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this);\n    return /** @type {O|undefined} */ (objectStack.pop());\n}\nvar xmlSerializer_ = undefined;\n/**\n * Register a XMLSerializer. Can be used  to inject a XMLSerializer\n * where there is no globally available implementation.\n *\n * @param {XMLSerializer} xmlSerializer A XMLSerializer.\n * @api\n */\nexport function registerXMLSerializer(xmlSerializer) {\n    xmlSerializer_ = xmlSerializer;\n}\n/**\n * @return {XMLSerializer} The XMLSerializer.\n */\nexport function getXMLSerializer() {\n    if (xmlSerializer_ === undefined && typeof XMLSerializer !== 'undefined') {\n        xmlSerializer_ = new XMLSerializer();\n    }\n    return xmlSerializer_;\n}\nvar document_ = undefined;\n/**\n * Register a Document to use when creating nodes for XML serializations. Can be used\n * to inject a Document where there is no globally available implementation.\n *\n * @param {Document} document A Document.\n * @api\n */\nexport function registerDocument(document) {\n    document_ = document;\n}\n/**\n * Get a document that should be used when creating nodes for XML serializations.\n * @return {Document} The document.\n */\nexport function getDocument() {\n    if (document_ === undefined && typeof document !== 'undefined') {\n        document_ = document.implementation.createDocument('', '', null);\n    }\n    return document_;\n}\n//# sourceMappingURL=xml.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/LineString\n */\nimport GeometryLayout from './GeometryLayout.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestPoint, maxSquaredDelta } from './flat/closest.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { douglasPeucker } from './flat/simplify.js';\nimport { extend } from '../array.js';\nimport { forEach as forEachSegment } from './flat/segments.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { interpolatePoint, lineStringCoordinateAtM } from './flat/interpolate.js';\nimport { intersectsLineString } from './flat/intersectsextent.js';\nimport { lineStringLength } from './flat/length.js';\n/**\n * @classdesc\n * Linestring geometry.\n *\n * @api\n */\nvar LineString = /** @class */ (function (_super) {\n    __extends(LineString, _super);\n    /**\n     * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     */\n    function LineString(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.flatMidpoint_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.flatMidpointRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n            _this.setFlatCoordinates(opt_layout, \n            /** @type {Array<number>} */ (coordinates));\n        }\n        else {\n            _this.setCoordinates(\n            /** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed coordinate to the coordinates of the linestring.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @api\n     */\n    LineString.prototype.appendCoordinate = function (coordinate) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = coordinate.slice();\n        }\n        else {\n            extend(this.flatCoordinates, coordinate);\n        }\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!LineString} Clone.\n     * @api\n     */\n    LineString.prototype.clone = function () {\n        var lineString = new LineString(this.flatCoordinates.slice(), this.layout);\n        lineString.applyProperties(this);\n        return lineString;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    LineString.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(maxSquaredDelta(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestPoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * Iterate over each segment, calling the provided callback.\n     * If the callback returns a truthy value the function returns that\n     * value immediately. Otherwise the function returns `false`.\n     *\n     * @param {function(this: S, import(\"../coordinate.js\").Coordinate, import(\"../coordinate.js\").Coordinate): T} callback Function\n     *     called for each segment. The function will receive two arguments, the start and end coordinates of the segment.\n     * @return {T|boolean} Value.\n     * @template T,S\n     * @api\n     */\n    LineString.prototype.forEachSegment = function (callback) {\n        return forEachSegment(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, callback);\n    };\n    /**\n     * Returns the coordinate at `m` using linear interpolation, or `null` if no\n     * such coordinate exists.\n     *\n     * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n     * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n     * M will return the first coordinate and Ms greater than the last M will\n     * return the last coordinate.\n     *\n     * @param {number} m M.\n     * @param {boolean} [opt_extrapolate] Extrapolate. Default is `false`.\n     * @return {import(\"../coordinate.js\").Coordinate|null} Coordinate.\n     * @api\n     */\n    LineString.prototype.getCoordinateAtM = function (m, opt_extrapolate) {\n        if (this.layout != GeometryLayout.XYM &&\n            this.layout != GeometryLayout.XYZM) {\n            return null;\n        }\n        var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n        return lineStringCoordinateAtM(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, m, extrapolate);\n    };\n    /**\n     * Return the coordinates of the linestring.\n     * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n     * @api\n     */\n    LineString.prototype.getCoordinates = function () {\n        return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * Return the coordinate at the provided fraction along the linestring.\n     * The `fraction` is a number between 0 and 1, where 0 is the start of the\n     * linestring and 1 is the end.\n     * @param {number} fraction Fraction.\n     * @param {import(\"../coordinate.js\").Coordinate} [opt_dest] Optional coordinate whose values will\n     *     be modified. If not provided, a new coordinate will be returned.\n     * @return {import(\"../coordinate.js\").Coordinate} Coordinate of the interpolated point.\n     * @api\n     */\n    LineString.prototype.getCoordinateAt = function (fraction, opt_dest) {\n        return interpolatePoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, fraction, opt_dest, this.stride);\n    };\n    /**\n     * Return the length of the linestring on projected plane.\n     * @return {number} Length (on projected plane).\n     * @api\n     */\n    LineString.prototype.getLength = function () {\n        return lineStringLength(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * @return {Array<number>} Flat midpoint.\n     */\n    LineString.prototype.getFlatMidpoint = function () {\n        if (this.flatMidpointRevision_ != this.getRevision()) {\n            this.flatMidpoint_ = this.getCoordinateAt(0.5, this.flatMidpoint_);\n            this.flatMidpointRevision_ = this.getRevision();\n        }\n        return this.flatMidpoint_;\n    };\n    /**\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {LineString} Simplified LineString.\n     * @protected\n     */\n    LineString.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        simplifiedFlatCoordinates.length = douglasPeucker(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n        return new LineString(simplifiedFlatCoordinates, GeometryLayout.XY);\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./Geometry.js\").Type} Geometry type.\n     * @api\n     */\n    LineString.prototype.getType = function () {\n        return 'LineString';\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    LineString.prototype.intersectsExtent = function (extent) {\n        return intersectsLineString(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the linestring.\n     * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @api\n     */\n    LineString.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 1);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return LineString;\n}(SimpleGeometry));\nexport default LineString;\n//# sourceMappingURL=LineString.js.map","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n"],"sourceRoot":""}