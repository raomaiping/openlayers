{"version":3,"sources":["webpack:///./src/hooks/updateMapSize.js","webpack:///./src/assets/yellow_duck.webp","webpack:///./src/views/map-controls/set-background/index.vue?972d","webpack:///./src/views/map-controls/set-background/index.vue","webpack:///./src/views/map-controls/set-background/index.vue?e11b","webpack:///./src/assets/world6.jpg"],"names":["map","targetNode","document","querySelector","observer","MutationObserver","mutationsList","mutation","type","attributeName","i","length","updateSize","observe","attributes","childList","subtree","onBeforeUnmount","disconnect","module","exports","ref","setBackgroundImage","value","style","backgroundImage","duck","onMounted","initMap","extent","projection","Projection","code","imageLayer","Image","source","ImageStatic","attributions","ATTRIBUTIONS","url","world6","imageExtent","Map","target","layers","view","View","center","getCenter","zoom","updateMapSize","__exports__"],"mappings":"4GAAA,gBAMe,QAAIA,KAEjB,MAAMC,EAAaC,SAASC,cAC1B,uCAuBIC,EAAW,IAAIC,kBAlBJ,SAAUC,GAEzB,IAAK,IAAIC,KAAYD,EACnB,GAAsB,cAAlBC,EAASC,WAEN,GACa,eAAlBD,EAASC,MACkB,UAA3BD,EAASE,cAET,IAAK,IAAIC,EAAI,EAAGA,EAAIV,EAAIW,OAAQD,IAC9BV,EAAIU,GAAGE,YAMf,IAKAR,EAASS,QAAQZ,EAvBF,CAAEa,YAAY,EAAMC,WAAW,EAAMC,SAAS,IA0B7DC,2BAAgB,KACdb,EAASc,YAAY,GAExB,C,yBCzCDC,EAAOC,QAAU,IAA0B,+B,oCCA3C,S,8OCoBA,MAAMpB,EAAMqB,cAAI,MA4BVC,EAAqBA,KACzBtB,EAAIuB,MAAMC,MAAMC,gBAAmB,OAAMC,MACnB,E,OAExBC,qBAAU,KA/BMC,MACd,MAAMC,EAAS,CAAC,EAAG,EAAG,KAAM,KACtBC,EAAa,IAAIC,IAAW,CAChCC,KAAM,YACNH,WAEF,IAAII,EAAa,IAAIC,IAAM,CACzBC,OAAQ,IAAIC,IAAY,CACtBC,aAAcC,IACdC,IAAKC,IACLV,aACAW,YAAaZ,MAGjB,MAAM7B,EAAM,IAAI0C,IAAI,CAElBC,OAAQ,MACRC,OAAQ,CAACX,GACTY,KAAM,IAAIC,IAAK,CACbhB,aACAiB,OAAQC,YAAUnB,GAClBoB,KAAM,MAIVC,YAAclD,EAAI,EAOlB4B,EAAS,I,0XC/CX,MAAMuB,E,MAA2B,GAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD,W,8CCRfhC,EAAOC,QAAU,IAA0B,yB","file":"js/chunk-6791cc50.669c762c.js","sourcesContent":["import { onBeforeUnmount } from \"vue\";\n\n/**\n * 监听侧边栏，侧边栏发生变化更新地图\n * @param {ol.Map} map 地图实例\n */\nexport default (...map) => {\n  // 选择需要观察变动的节点\n  const targetNode = document.querySelector(\n    \".el-aside .menu .el-scrollbar__view\"\n  );\n  // 观察器的配置（需要观察什么变动）\n  const config = { attributes: true, childList: true, subtree: true };\n  // 当观察到变动时执行的回调函数\n  const callback = function (mutationsList) {\n    // Use traditional 'for loops' for IE 11\n    for (let mutation of mutationsList) {\n      if (mutation.type === \"childList\") {\n        // console.log(\"已添加或删除子节点。\");\n      } else if (\n        mutation.type === \"attributes\" &&\n        mutation.attributeName === \"style\"\n      ) {\n        for (let i = 0; i < map.length; i++) {\n          map[i].updateSize();\n        }\n\n        // console.log(\"这个 \" + mutation.attributeName + \" 属性被修改。\");\n      }\n    }\n  };\n  // 创建一个观察器实例并传入回调函数\n  const observer = new MutationObserver(callback);\n\n  // 以上述配置开始观察目标节点\n  observer.observe(targetNode, config);\n\n  //卸载前\n  onBeforeUnmount(() => {\n    observer.disconnect();\n  });\n};\n","module.exports = __webpack_public_path__ + \"img/yellow_duck.bad9fcd4.webp\";","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=19d36382&scoped=true&lang=css\"","<template>\n  <div id=\"map\" ref=\"map\"></div>\n  <el-button type=\"primary\" class=\"btn\" @click=\"setBackgroundImage\"\n    >设置背景</el-button\n  >\n</template>\n\n<script setup>\nimport 'ol/ol.css'\nimport { onMounted, ref } from 'vue'\nimport { Map, View } from 'ol'\nimport { Projection } from 'ol/proj'\nimport { Image } from 'ol/layer'\nimport { ImageStatic } from 'ol/source'\nimport { getCenter } from 'ol/extent'\nimport duck from '@/assets/yellow_duck.webp'\nimport { ATTRIBUTIONS } from '@/constants'\nimport updateMapSize from '@/hooks/updateMapSize'\nimport world6 from '@/assets/world6.jpg'\n// 单张图片的矢量图层\nconst map = ref(null)\nconst initMap = () => {\n  const extent = [0, 0, 1024, 968] //表示图片的尺寸\n  const projection = new Projection({\n    code: 'EPSG:3857',\n    extent,\n  })\n  var imageLayer = new Image({\n    source: new ImageStatic({\n      attributions: ATTRIBUTIONS,\n      url: world6,\n      projection,\n      imageExtent: extent,\n    }),\n  })\n  const map = new Map({\n    //初始化map\n    target: 'map',\n    layers: [imageLayer],\n    view: new View({\n      projection,\n      center: getCenter(extent),\n      zoom: 2,\n    }),\n  })\n  // 侧边栏变化更新地图\n  updateMapSize(map)\n}\nconst setBackgroundImage = () => {\n  map.value.style.backgroundImage = `url(${duck})`\n  console.log(map, duck)\n}\nonMounted(() => {\n  initMap()\n})\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n#map {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.btn {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n}\n</style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=19d36382&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/openlayers/openlayers/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-19d36382\"]])\n\nexport default __exports__","module.exports = __webpack_public_path__ + \"img/world6.59d3bab5.jpg\";"],"sourceRoot":""}