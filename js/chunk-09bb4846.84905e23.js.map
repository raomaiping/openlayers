{"version":3,"sources":["webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/tilegrid/common.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/renderer/Layer.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/simplify.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/events/EventType.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/array.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/ImageState.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/events/condition.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/TileState.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/Pointer.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/Image.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/LinearRing.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/Polygon.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/intersectsextent.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/reproj/Triangulation.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/MapBrowserEventType.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/CollectionEventType.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/inflate.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/extent/Relationship.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/reverse.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/orient.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/obj.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/asserts.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/layer/Property.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/GeometryLayout.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/dom.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/ObjectEventType.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/string.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/render/canvas.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/render/Event.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/renderer/canvas/common.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/extent.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/source/Source.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/control/Control.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/Geometry.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/MapEvent.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/proj/Units.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/has.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/closest.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/contains.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/Disposable.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/MapBrowserEvent.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/segments.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/Object.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/transform.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/proj/epsg3857.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/proj/epsg4326.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/proj/projections.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/proj.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/color.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/layer/Base.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/centerconstraint.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/resolutionconstraint.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/View.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/events.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/MapEventType.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/ImageBase.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/rotationconstraint.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/renderer/Map.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/renderer/Composite.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/DoubleClickZoom.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/DragPan.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/DragRotate.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/render/Box.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/DragBox.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/DragZoom.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/events/KeyCode.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/KeyboardPan.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/KeyboardZoom.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/Kinetic.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/MouseWheelZoom.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/PinchRotate.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/PinchZoom.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/math.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/Collection.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/size.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/ViewProperty.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/Interaction.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/pointer/EventType.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/AssertionError.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/deflate.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/SimpleGeometry.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/functions.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/area.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/events/Event.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/proj/transforms.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/style/IconImageCache.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/coordinate.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/proj/Projection.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/layer/Layer.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/css.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/transform.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/easing.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/sphere.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/reproj/common.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/Map.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/flat/interiorpoint.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/render/EventType.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/renderer/canvas/Layer.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/reproj.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/geom/Point.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/layer/Group.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/MapBrowserEventHandler.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/structs/PriorityQueue.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/TileQueue.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/PluggableMap.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/Observable.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/MapProperty.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/util.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/control/Attribution.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/control/Rotate.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/control/Zoom.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/control.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/interaction/Property.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/ViewHint.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/events/Target.js"],"names":["DEFAULT_MAX_ZOOM","DEFAULT_TILE_SIZE","extendStatics","__extends","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","LayerRenderer","_super","layer","_this","ready","boundHandleImageChange_","handleImageChange_","bind","layer_","declutterExecutorGroup","getFeatures","pixel","getData","prepareFrame","frameState","renderFrame","target","loadedTileCallback","tiles","zoom","tile","tileCoord","toString","createLoadedTileFinder","source","projection","tileRange","callback","forEachLoadedTile","forEachFeatureAtCoordinate","coordinate","hitTolerance","matches","getDataAtPixel","getLayer","handleFontsChanged","event","getState","LOADED","renderIfReadyAndVisible","loadImage","image","imageState","ERROR","addEventListener","CHANGE","IDLE","load","getVisible","getSourceState","changed","disposeInternal","douglasPeucker","flatCoordinates","offset","end","stride","squaredTolerance","simplifiedFlatCoordinates","simplifiedOffset","n","markers","stack","index","length","last","pop","first","maxSquaredDistance","x1","y1","x2","y2","i","x","y","squaredDistance_1","push","douglasPeuckerArray","ends","simplifiedEnds","ii","snap","value","tolerance","Math","round","quantize","x3","y3","dx1","dy1","dx2","dy2","quantizeArray","quantizeMultiArray","endss","simplifiedEndss","BLUR","CLEAR","CONTEXTMENU","CLICK","DBLCLICK","DRAGENTER","DRAGOVER","DROP","FOCUS","KEYDOWN","KEYPRESS","LOAD","RESIZE","TOUCHMOVE","WHEEL","binarySearch","haystack","needle","opt_comparator","mid","cmp","comparator","numberSafeCompareFunction","low","high","found","a","includes","arr","obj","indexOf","linearFindNearest","direction","reverseSubArray","begin","tmp","extend","data","extension","isArray","equals","arr1","arr2","len1","isSorted","opt_func","opt_strict","compare","every","currentVal","res","LOADING","EMPTY","all","var_args","conditions","arguments","pass","altKeyOnly","mapBrowserEvent","originalEvent","altKey","metaKey","ctrlKey","shiftKey","altShiftKeysOnly","focusWithTabindex","map","getTargetElement","hasAttribute","targetElement","activeElement","getOwnerDocument","contains","focus","always","mouseActionButton","button","never","singleClick","type","SINGLECLICK","noModifierKeys","shiftKeyOnly","targetNotEditable","tagName","isContentEditable","mouseOnly","pointerEvent","undefined","pointerType","primaryAction","isPrimary","PointerInteraction","opt_options","options","handleDownEvent","handleDragEvent","handleMoveEvent","handleUpEvent","stopDown","handlingDownUpSequence","targetPointers","getPointerCount","handleEvent","stopEvent","updateTrackedPointers_","POINTERDRAG","preventDefault","POINTERUP","handledUp","POINTERDOWN","handled","POINTERMOVE","activePointers","centroid","pointerEvents","clientX","clientY","ImageWrapper","extent","resolution","pixelRatio","src","crossOrigin","imageLoadFunction","src_","image_","Image","unlisten_","state","imageLoadFunction_","getImage","handleImageError_","unlistenImage_","handleImageLoad_","height","listenImage","setImage","loadHandler","errorHandler","img","listening","decoding","loaded","listenerKeys","decode","then","catch","error","forEach","LinearRing","coordinates","opt_layout","maxDelta_","maxDeltaRevision_","setCoordinates","setFlatCoordinates","clone","slice","layout","closestPointXY","closestPoint","minSquaredDistance","getExtent","getRevision","sqrt","getArea","getCoordinates","inflate","getSimplifiedGeometryInternal","GeometryLayout","XY","getType","intersectsExtent","setLayout","deflate","SimpleGeometry","Polygon","opt_ends","ends_","flatInteriorPointRevision_","flatInteriorPoint_","orientedRevision_","orientedFlatCoordinates_","appendLinearRing","linearRing","getFlatCoordinates","polygon","applyProperties","containsXY","getOrientedFlatCoordinates","opt_right","orient","getEnds","getFlatInteriorPoint","flatCenter","getInteriorPoint","Point","XYM","getLinearRingCount","getLinearRing","getLinearRings","linearRings","fromExtent","minX","minY","maxX","maxY","fromCircle","circle","opt_sides","opt_angle","sides","getStride","getLayout","center","getCenter","arrayLength","j","makeRegular","getRadius","radius","startAngle","angle","PI","cos","sin","intersectsLineString","coordinatesExtent","point1","point2","intersectsLineStringArray","intersectsLinearRing","intersectsLinearRingArray","intersectsLinearRingMultiArray","Triangulation","sourceProj","targetProj","targetExtent","maxSourceExtent","errorThreshold","opt_destinationResolution","sourceProj_","targetProj_","transformInvCache","transformInv","transformInv_","c","key","maxSourceExtent_","errorThresholdSquared_","triangles_","wrapsXInSource_","canWrapXInSource_","canWrapX","sourceWorldWidth_","targetWorldWidth_","destinationTopLeft","destinationTopRight","destinationBottomRight","destinationBottomLeft","sourceTopLeft","sourceTopRight","sourceBottomRight","sourceBottomLeft","maxSubdivision","max","ceil","addQuad_","leftBound_1","Infinity","triangle","min","newTriangle","addTriangle_","aSrc","bSrc","cSrc","dSrc","sourceQuadExtent","sourceCoverageX","sourceWorldWidth","wrapsX","needsSubdivision","isGlobal","targetQuadExtent","isFinite","isNotFinite","centerSrc","dx","dy","abs","bc","bcSrc","da","daSrc","ab","abSrc","cd","cdSrc","calculateSourceExtent","getTriangles","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","ADD","REMOVE","inflateCoordinates","opt_coordinates","inflateCoordinatesArray","opt_coordinatess","coordinatess","jj","inflateMultiCoordinatesArray","opt_coordinatesss","coordinatesss","UNKNOWN","INTERSECTING","ABOVE","RIGHT","BELOW","LEFT","linearRingIsClockwise","edge","linearRingsAreOriented","right","isClockwise","linearRingssAreOriented","orientLinearRings","orientLinearRingsArray","assign","var_sources","output","clear","object","property","getValues","values","isEmpty","assert","assertion","errorCode","OPACITY","VISIBLE","EXTENT","Z_INDEX","MAX_RESOLUTION","MIN_RESOLUTION","MAX_ZOOM","MIN_ZOOM","SOURCE","MAP","XYZ","XYZM","createCanvasContext2D","opt_width","opt_height","opt_canvasPool","opt_Context2DSettings","canvas","shift","OffscreenCanvas","document","createElement","width","getContext","releaseCanvas","context","clearRect","outerWidth","element","offsetWidth","style","getComputedStyle","parseInt","marginLeft","marginRight","outerHeight","offsetHeight","marginTop","marginBottom","replaceNode","newNode","oldNode","parent","parentNode","replaceChild","removeNode","node","removeChild","removeChildren","lastChild","replaceChildren","children","oldChildren","childNodes","oldChild","newChild","insertBefore","appendChild","PROPERTYCHANGE","padNumber","number","opt_precision","numberString","toFixed","decimal","join","defaultFont","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultMiterLimit","defaultStrokeStyle","defaultTextAlign","defaultTextBaseline","defaultPadding","defaultLineWidth","checkedFonts","setSize","measureFont","measureElement","measureContext","textHeights","registerFont","interval","referenceWidth","size","referenceFonts","len","text","isAvailable","fontStyle","fontWeight","fontFamily","available","referenceFont","measureTextWidth","check","done","fonts","getKeys","font","get","apply","split","set","clearInterval","fontSpec","families","family","weight","setInterval","measureTextHeight","metrics","measureText","isNaN","Number","lineHeight","actualBoundingBoxAscent","actualBoundingBoxDescent","innerHTML","minHeight","maxHeight","padding","border","position","display","left","body","measureAndCacheTextWidth","cache","reduce","prev","curr","getTextDimensions","baseStyle","chunks","widths","heights","lineWidths","lineWidth","currentWidth","currentHeight","drawImageOrLabel","transform","opacity","labelOrImage","originX","originY","w","h","scale","save","globalAlpha","setTransform","contextInstructions","translate","label","executeLabelInstructions","drawImage","restore","RenderEvent","opt_inversePixelTransform","opt_frameState","opt_context","inversePixelTransform","IMAGE_SMOOTHING_DISABLED","imageSmoothingEnabled","msImageSmoothingEnabled","IMAGE_SMOOTHING_ENABLED","boundingExtent","createEmpty","extendCoordinate","buffer","opt_extent","closestSquaredDistanceXY","containsCoordinate","containsExtent","extent1","extent2","coordinateRelationship","relationship","createOrUpdate","createOrUpdateEmpty","createOrUpdateFromCoordinate","createOrUpdateFromFlatCoordinates","extendFlatCoordinates","approximatelyEquals","extendXY","forEachCorner","val","getBottomLeft","getBottomRight","getTopRight","getTopLeft","area","getWidth","getHeight","getCorner","corner","getForViewAndSize","rotation","_a","getRotatedViewport","x0","y0","cosRotation","sinRotation","xCos","xSin","yCos","ySin","getIntersection","intersection","intersects","returnOrUpdate","scaleFromCenter","deltaX","deltaY","intersectsSegment","start","startRel","endRel","startX","startY","endX","endY","slope","applyTransform","transformFn","opt_stops","xs","ys","l","_boundingExtentXYs","wrapX","projectionExtent","worldWidth","floor","wrapAndSliceX","Source","attributions_","adaptAttributions","attributions","attributionsCollapsible_","attributionsCollapsible","loading","state_","wrapX_","interpolate_","interpolate","viewResolver","viewRejector","self","viewPromise_","Promise","resolve","reject","getAttributions","getAttributionsCollapsible","getProjection","getResolutions","getView","getWrapX","getInterpolate","refresh","setAttributions","setState","attributionLike","Control","target_","map_","render","setTarget","getMap","setMap","getOverlayContainerStopEvent","POSTRENDER","mapEvent","getElementById","tmpTransform","Geometry","extent_","extentRevision_","simplifiedGeometryMaxMinSquaredTolerance","simplifiedGeometryRevision","simplifyTransformedInternal","revision","opt_transform","getSimplifiedGeometry","simplifyTransformed","coord","getClosestPoint","point","opt_closestPoint","NaN","intersectsCoordinate","computeExtent","rotate","anchor","sx","opt_sy","opt_anchor","simplify","destination","getUnits","TILE_PIXELS","inCoordinates","outCoordinates","pixelExtent","projectedExtent","getWorldExtent","MapEvent","Units","RADIANS","DEGREES","FEET","METERS","PIXELS","USFEET","METERS_PER_UNIT","ua","navigator","userAgent","toLowerCase","FIREFOX","SAFARI_BUG_237906","match","WEBKIT","MAC","DEVICE_PIXEL_RATIO","devicePixelRatio","WORKER_OFFSCREEN_CANVAS","WorkerGlobalScope","IMAGE_DECODE","PASSIVE_EVENT_LISTENERS","passive","defineProperty","window","removeEventListener","assignClosest","offset1","offset2","t","maxSquaredDelta","squaredDelta","arrayMaxSquaredDelta","multiArrayMaxSquaredDelta","assignClosestPoint","maxDelta","isRing","opt_tmpPoint","squaredDistance","tmpPoint","assignClosestArrayPoint","assignClosestMultiArrayPoint","linearRingContainsExtent","linearRingContainsXY","wn","linearRingsContainsXY","linearRingssContainsXY","Disposable","disposed","dispose","MapBrowserEvent","opt_dragging","opt_activePointers","pixel_","coordinate_","dragging","getEventPixel","enumerable","configurable","getCoordinateFromPixel","stopPropagation","ret","ObjectEvent","oldValue","BaseObject","opt_values","on","once","un","values_","setProperties","keys","getProperties","hasProperties","notify","eventType","concat","hasListener","dispatchEvent","addChangeListener","listener","removeChangeListener","opt_silent","unset","transform2D","opt_dest","dest","anchorX","anchorY","k","sy","RADIUS","HALF_SIZE","WORLD_EXTENT","MAX_SAFE_Y","log","tan","EPSG3857Projection","code","units","global","worldExtent","getPointResolution","Projection","PROJECTIONS","fromEPSG4326","input","opt_output","opt_dimension","dimension","toEPSG4326","atan","exp","EPSG4326Projection","opt_axisOrientation","axisOrientation","metersPerUnit","showCoordinateWarning","disableCoordinateWarning","opt_disable","cloneTransform","identityTransform","addProjection","add","getCode","projectionLike","replace","opt_units","pointResolution","getter","getPointResolutionFunc","getMetersPerUnit","toEPSG4326_1","getTransformFromProjections","vertices","addEquivalentProjections","projections","addProjections","createProjection","defaultCode","createTransformFromCoordinateTransform","coordTransform","pointLength","addCoordinateTransforms","forward","inverse","destProj","fromLonLat","opt_projection","equivalent","projection1","projection2","equalUnits","sourceProjection","destinationProjection","sourceCode","destinationCode","transformFunc","getTransform","transformExtent","projections2","forwardTransform","inverseTransform","userProjection","getUserProjection","toUserCoordinate","fromUserCoordinate","destProjection","toUserExtent","fromUserExtent","toUserResolution","sourceUnits","userUnits","fromUserResolution","createSafeCoordinateTransform","transformed","worldsAway","sourceExtent","sourceExtentWidth","HEX_COLOR_RE_","NAMED_COLOR_RE_","asString","color","fromNamed","el","rgb","cacheSize","fromString","s","r","g","exec","hasAlpha","substr","normalize","fromStringInternal_","asArray","isStringColor","test","BaseLayer","background_","background","properties","visible","zIndex","maxResolution","minResolution","minZoom","maxZoom","className_","className","getBackground","getClassName","getLayerState","opt_managed","managed","getZIndex","getOpacity","getMaxResolution","getMinResolution","getMinZoom","getMaxZoom","getLayersArray","opt_array","getLayerStatesArray","opt_states","setBackground","opt_background","setExtent","setMaxResolution","setMinResolution","setMaxZoom","setMinZoom","setOpacity","setVisible","setZIndex","zindex","createExtent","onlyCenter","smooth","opt_isMoving","opt_centerShift","viewWidth","viewHeight","shiftX","shiftY","ratio","none","getViewportClampedResolution","maxExtent","viewportSize","showFullExtent","xResolution","yResolution","getSmoothClampedResolution","result","createMinMaxResolution","opt_smooth","opt_maxExtent","opt_showFullExtent","cappedMaxRes","View","hints_","animations_","updateAnimationKey_","projection_","viewportSize_","targetCenter_","targetResolution_","targetRotation_","nextCenter_","nextResolution_","nextRotation_","cancelAnchor_","applyOptions_","ViewProperty","resolutionConstraintInfo","resolutionConstraint","defaultMaxZoom","defaultZoomFactor","zoomFactor","multiWorld","smoothResolutionConstraint","projExtent","constrainOnlyCenter","resolutions","constrainResolution","capped","z","createSnapToResolutions","defaultMaxResolution","pow","defaultMinResolution","power","opt_minResolution","minZoomLevel","cappedZoomLevel","zoomLevel","newResolution","createSnapToPower","constraint","createResolutionConstraint","maxResolution_","minResolution_","zoomFactor_","resolutions_","padding_","minZoom_","centerConstraint","smoothExtentConstraint","createCenterConstraint","rotationConstraint","enableRotation","constrainRotation","createRotationConstraint","constraints_","setRotation","setCenterInternal","setResolution","setZoom","oldPadding","newPadding","getResolution","offsetX","offsetY","getUpdatedOptions_","newOptions","getZoom","getCenterInternal","getRotation","animate","isDef","getAnimating","resolveConstraints","args","animateInternal","animationCount","Date","now","series","animation","complete","duration","easing","sourceCenter","targetCenter","sourceResolution","targetResolution","getResolutionForZoom","sourceRotation","delta","targetRotation","isNoopAnimation","setHint","ViewHint","ANIMATING","updateAnimations_","animationCallback","getInteracting","INTERACTING","cancelAnimations","cancelAnimationFrame","more","seriesComplete","elapsed","fraction","progress","getViewportSize_","constrainedResolution","calculateCenterZoom","applyTargetState_","constrainedRotation","calculateCenterRotate","filter","Boolean","requestAnimationFrame","currentCenter","currentResolution","opt_rotation","setViewportSize","opt_size","CENTER","getConstraints","getConstrainResolution","getHints","opt_hints","calculateExtent","calculateExtentInternal","getViewportSizeMinusPadding_","getZoomForResolution","setConstrainResolution","enabled","RESOLUTION","getResolutionForExtent","getResolutionForExtentInternal","getResolutionForValueFunction","opt_power","getConstrainedResolution","ROTATION","getValueForResolutionFunction","logPower","reducedSize","calculateCenterOn","nextCenter","nextResolution","nextRotation","nearest","baseLevel","fit","geometryOrExtent","geometry","fitInternal","rotatedExtentForGeometry","cosAngle","sinAngle","coords","minRotX","minRotY","maxRotX","maxRotY","rotX","rotY","rotatedExtent","centerRot","centerX","centerY","getConstrainedCenter","centerOn","centerOnInternal","calculateCenterShift","centerShift","shiftedCenter","adjustCenter","deltaCoordinates","setCenter","adjustCenterInternal","adjustResolution","adjustResolutionInternal","isMoving","adjustZoom","adjustRotation","adjustRotationInternal","newRotation","hint","opt_doNotCancelAnims","opt_forceMoving","newCenter","opt_duration","opt_resolutionDirection","beginInteraction","endInteraction","endInteractionInternal","opt_targetResolution","getConstrainedZoom","targetZoom","opt_direction","targetRes","returnValue","setTimeout","listen","opt_this","opt_once","originalListener_1","eventsKey","listenOnce","unlistenByKey","MOVESTART","MOVEEND","LOADSTART","LOADEND","ImageBase","pixelRatio_","getPixelRatio","disable","createSnapToN","theta","createSnapToZero","opt_tolerance","expireIconCache","expire","Map","MapRenderer","dispatchRenderEvent","calculateMatrices2D","viewState","coordinateToPixelTransform","pixelToCoordinateTransform","checkWrapped","thisArg","layerFilter","thisArg2","feature","translatedCoordinate","offsets","layerStates","layerStatesArray","numLayers","tmpCoord","layerState","hasRenderer","layerRenderer","getRenderer","getSource","callback_1","order","m","distanceSq","sort","some","forEachLayerAtPixel","hasFeatureAtCoordinate","scheduleExpireIconCache","canExpireCache","postRenderFunctions","CompositeMapRenderer","fontChangeListenerKey_","ObjectEventType","redrawText","element_","container","getViewport","firstChild","children_","renderedVisible_","event_1","PRECOMPOSE","declutterLayers","previousElement","layerIndex","sourceState","unrender","renderDeclutter","POSTCOMPOSE","DoubleClickZoom","delta_","duration_","MapBrowserEventType","browserEvent","view","Interaction","DragPan","kinetic_","kinetic","lastCentroid","lastPointersCount_","panning_","condition","condition_","onFocusOnly","noKinetic_","update","distance","getDistance","getAngle","centerpx","getPixelFromCoordinateInternal","getCoordinateFromPixelInternal","Pointer","DragRotate","lastAngle_","getSize","atan2","RenderBox","geometry_","startPixel_","endPixel_","render_","startPixel","endPixel","px","top","getOverlayContainer","setPixels","createOrUpdateGeometry","getGeometry","DragBoxEventType","DragBoxEvent","Event","DragBox","box_","minArea_","minArea","onBoxEnd","boxEndCondition_","boxEndCondition","defaultBoxEndCondition","completeBox","DragZoom","out_","out","factor","KeyboardPan","defaultCondition_","pixelDelta_","pixelDelta","EventType","keyEvent","keyCode","KeyCode","mapUnitsDelta","KeyboardZoom","charCode","charCodeAt","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","lastIndex","firstIndex","Mode","MouseWheelZoom","totalDelta_","lastDelta_","timeout_","timeout","useAnchor_","useAnchor","constrainResolution_","lastAnchor_","startTime_","timeoutId_","mode_","trackpadEventGap_","trackpadTimeoutId_","deltaPerZoom_","endInteraction_","wheelEvent","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","clearTimeout","timeLeft","handleWheelZoom_","setMouseAnchor","PinchRotate","pointerOptions","anchor_","rotating_","rotationDelta_","threshold_","threshold","rotationDelta","touch0","touch1","viewportPosition","getBoundingClientRect","PinchZoom","lastDistance_","lastScaleDelta_","scaleDelta","defaults","interactions","Collection","altShiftDragRotate","doubleClickZoom","zoomDelta","zoomDuration","dragPan","pinchRotate","pinchZoom","keyboard","mouseWheelZoom","shiftDragZoom","clamp","cosh","log2","LOG2E","squaredSegmentDistance","solveLinearSystem","mat","maxRow","maxEl","absValue","coef","toDegrees","angleInRadians","toRadians","angleInDegrees","modulo","lerp","decimals","Property","CollectionEvent","opt_element","opt_index","unique_","unique","array_","assertUnique_","updateLength_","getLength","f","array","getArray","item","insertAt","elem","splice","removeAt","remove","setAt","opt_except","hasArea","toSize","setActive","getActive","ACTIVE","active","pan","zoomByDelta","currentZoom","newZoom","AssertionError","message","name","Error","deflateCoordinate","deflateCoordinates","deflateCoordinatesArray","deflateMultiCoordinatesArray","opt_endss","getFirstCoordinate","getLastCoordinate","simplifiedGeometry","getStrideForLayout","nesting","getLayoutForStride","transformGeom2D","simpleGeometry","TRUE","FALSE","VOID","memoizeOne","fn","lastResult","lastArgs","lastThis","called","nextArgs","twiceArea","linearRingss","BaseEvent","propagationStopped","defaultPrevented","transforms","IconImageCache","cache_","cacheSize_","maxCacheSize_","iconImage","getKey","maxCacheSize","shared","closestOnSegment","segment","along","createStringXY","opt_fractionDigits","template","format","toStringXY","degreesToStringHDMS","hemispheres","degrees","normalizedDegrees","dflPrecision","precision","deg","sec","charAt","coordinate1","coordinate2","coord1","coord2","squaredDistanceToSegment","getWorldsAway","opt_sourceExtentWidth","code_","units_","worldExtent_","axisOrientation_","global_","canWrapX_","getPointResolutionFunc_","defaultTileGrid_","metersPerUnit_","getAxisOrientation","setGlobal","getDefaultTileGrid","setDefaultTileGrid","tileGrid","setWorldExtent","setGetPointResolution","func","Layer","baseOptions","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","renderer_","rendered","handleSourcePropertyChange_","setSource","states","getRenderSource","handleSourceChange_","setMapInternal","getMapInternal","evt","arrayLayerState","createRenderer","inView","CLASS_HIDDEN","CLASS_SELECTABLE","CLASS_UNSELECTABLE","CLASS_UNSUPPORTED","CLASS_CONTROL","CLASS_COLLAPSED","fontRegEx","RegExp","fontRegExMatchIndex","getFontParameters","variant","transformStringDiv","tmp_","reset","multiply","transform1","transform2","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","e","setFromArray","makeScale","compose","makeInverse","det","transformString","easeIn","easeOut","inAndOut","linear","DEFAULT_RADIUS","opt_radius","lat1","lat2","deltaLatBy2","deltaLonBy2","getLengthInternal","geometries","getGeometries","getAreaInternal","bearing","lon1","dByR","lat","asin","lon","ERROR_THRESHOLD","ENABLE_RASTER_REPROJECTION","controls","getInteriorPointOfArray","flatCenters","flatCentersOffset","intersections","rr","pointX","maxSegmentLength","segmentLength","getInteriorPointsOfMultiArray","interiorPoints","PRERENDER","RENDERCOMPLETE","canvasPool","pixelContext","CanvasLayerRenderer","renderedResolution","tempTransform","pixelTransform","containerReused","pixelContext_","getImageData","col","row","err","useContainer","opt_backgroundColor","layerClassName","backgroundColor","firstElementChild","HTMLCanvasElement","transformOrigin","clipUnrotated","topLeft","topRight","bottomRight","bottomLeft","inverted","beginPath","moveTo","lineTo","clip","dispatchRenderEvent_","preRender","postRender","getRenderTransform","renderPixel","layerExtent","renderCoordinate","pixelCanvas","Uint8Array","brokenDiagonalRendering_","drawTestTriangle","ctx","u1","v1","u2","v2","closePath","fillRect","verifyBrokenDiagonalRendering","calculateSourceResolution","targetMetersPerUnit","sourceMetersPerUnit","compensationFactor","calculateSourceExtentResolution","triangulation","sources","gutter","opt_renderEdges","opt_interpolate","pixelRound","globalCompositeOperation","sourceDataExtent","canvasWidthInUnits","canvasHeightInUnits","stitchContext","stitchScale","xPos","yPos","srcWidth","srcHeight","targetTopLeft","u0","v0","sourceNumericalShiftX","sourceNumericalShiftY","augmentedMatrix","affineCoefs","fillStyle","isBrokenDiagonalRendering","ud","vd","step","steps","strokeStyle","stroke","GroupEvent","LayerGroup","layers","layersListenerKeys_","listenerKeys_","handleLayersChanged_","setLayers","handleLayerChange_","getLayers","id","CollectionEventType","handleLayersAdd_","handleLayersRemove_","layersArray","registerLayerListeners_","handleLayerGroupAdd_","handleLayerGroupRemove_","collectionEvent","collection","currentLayers","pos","ownLayerState","defaultZIndex","Base","MapBrowserEventHandler","moveTolerance","clickTimeoutId_","emulateClicks_","dragging_","dragListenerKeys_","moveTolerance_","down_","activePointers_","trackedTouches_","pointerdownListenerKey_","handlePointerDown_","originalPointerMoveEvent_","relayedListenerKey_","relayMoveEvent_","boundHandleTouchMove_","handleTouchMove_","emulateClick_","newEvent","updateActivePointers_","pointerId","handlePointerUp_","isMouseActionButton_","doc","handlePointerMove_","getRootNode","isMoving_","cancelable","Target","PriorityQueue","priorityFunction","keyFunction","priorityFunction_","keyFunction_","elements_","priorities_","queuedElements_","dequeue","elements","priorities","siftUp_","elementKey","enqueue","priority","siftDown_","getCount","getLeftChildIndex_","getRightChildIndex_","getParentIndex_","heapify_","isKeyQueued","isQueued","count","startIndex","lIndex","rIndex","smallerChildIndex","parentIndex","reprioritize","TileQueue","tilePriorityFunction","tileChangeCallback","boundHandleTileChange_","handleTileChange","tileChangeCallback_","tilesLoading_","tilesLoadingKeys_","added","getTilesLoading","TileState","tileKey","loadMoreTiles","maxTotalLoading","maxNewLoads","newLoads","removeLayerMapProperty","setLayerMapProperty","PluggableMap","optionsInternal","keyboardEventTarget","overlays","layerGroup","MapProperty","LAYERGROUP","TARGET","VIEW","createOptionsInternal","renderComplete_","loaded_","boundHandleBrowserEvent_","handleBrowserEvent","maxTilesLoading_","maxTilesLoading","postRenderTimeoutHandle_","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","pixelToCoordinateTransform_","frameIndex_","frameState_","previousExtent_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","overflow","overlayContainer_","overlayContainerStopEvent_","mapBrowserEventHandler_","keyboardEventTarget_","targetChangeHandlerKeys_","overlays_","overlayIdIndex_","postRenderFunctions_","tileQueue_","getTilePriority","handleTileChange_","handleLayerGroupChanged_","handleViewChanged_","SIZE","handleSizeChanged_","handleTargetChanged_","viewOptions","setView","addOverlayInternal_","getId","control","interaction","addControl","getControls","addInteraction","getInteractions","addLayer","getLayerGroup","handleLayerAdd_","addOverlay","overlay","getOverlays","forEachFeatureAtPixel","getFeaturesAtPixel","features","getAllLayers","addLayersFrom","hasFeatureAtPixel","getEventCoordinate","getEventCoordinateInternal","eventPosition","changedTouches","getTarget","getOverlayById","group","getLoadingOrNotReady","renderer","getPixelFromCoordinate","viewCoordinate","ownerDocument","tileSourceKey","tileCenter","tileResolution","wantedTiles","opt_type","handleMapBrowserEvent","rootNode","documentElement","interactionsArray","handlePostRender","tileQueue","hints","viewHints","lowOnFrameBudget","time","MapEventType","defaultView","updateSize","handleViewPropertyChanged_","updateViewportSize_","handleLayerRemove_","isRendered","renderSync","removeControl","removeInteraction","removeLayer","removeOverlay","previousFrameState","declutterTree","usedTiles","mapId","renderTargets","nextExtent","setLayerGroup","oldLayerGroup","computedStyle","parseFloat","getClientRects","Observable","revision_","onInternal","onceInternal","ol_key","unInternal","unByKey","abstract","uidCounter_","getUid","ol_uid","VERSION","Attribution","ulElement_","collapsed_","collapsed","userCollapsed_","overrideCollapsible_","collapsible","collapsible_","tipLabel","expandClassName","collapseLabel","collapseClassName","collapseLabel_","textContent","label_","activeLabel","toggleButton_","setAttribute","title","handleClick_","cssClasses","renderedAttributions_","collectSourceAttributions_","lookup","visibleAttributions","attributionGetter","setCollapsible","updateElement_","handleToggle_","classList","toggle","getCollapsible","setCollapsed","getCollapsed","Rotate","compassClassName","callResetNorth_","resetNorth","autoHide_","autoHide","rotation_","resetNorth_","Zoom","zoomInClassName","zoomOutClassName","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","createTextNode","outElement","zoomByDelta_","zoomOptions","rotateOptions","attribution","attributionOptions","opt_target","eventTarget_","pendingRemovals_","dispatching_","listeners_","listeners","listenersForType","isString","propagate","dispatching","pendingRemovals","pr","getListeners"],"mappings":"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","file":"js/chunk-09bb4846.84905e23.js","sourcesContent":["/**\n * @module ol/tilegrid/common\n */\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport var DEFAULT_MAX_ZOOM = 42;\n/**\n * Default tile size.\n * @type {number}\n */\nexport var DEFAULT_TILE_SIZE = 256;\n//# sourceMappingURL=common.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/Layer\n */\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport Observable from '../Observable.js';\nimport { abstract } from '../util.js';\n/**\n * @template {import(\"../layer/Layer.js\").default} LayerType\n */\nvar LayerRenderer = /** @class */ (function (_super) {\n    __extends(LayerRenderer, _super);\n    /**\n     * @param {LayerType} layer Layer.\n     */\n    function LayerRenderer(layer) {\n        var _this = _super.call(this) || this;\n        /**\n         * The renderer is initialized and ready to render.\n         * @type {boolean}\n         */\n        _this.ready = true;\n        /** @private */\n        _this.boundHandleImageChange_ = _this.handleImageChange_.bind(_this);\n        /**\n         * @protected\n         * @type {LayerType}\n         */\n        _this.layer_ = layer;\n        /**\n         * @type {import(\"../render/canvas/ExecutorGroup\").default}\n         */\n        _this.declutterExecutorGroup = null;\n        return _this;\n    }\n    /**\n     * Asynchronous layer level hit detection.\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with\n     * an array of features.\n     */\n    LayerRenderer.prototype.getFeatures = function (pixel) {\n        return abstract();\n    };\n    /**\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {Uint8ClampedArray|Uint8Array|Float32Array|DataView|null} Pixel data.\n     */\n    LayerRenderer.prototype.getData = function (pixel) {\n        return null;\n    };\n    /**\n     * Determine whether render should be called.\n     * @abstract\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} Layer is ready to be rendered.\n     */\n    LayerRenderer.prototype.prepareFrame = function (frameState) {\n        return abstract();\n    };\n    /**\n     * Render the layer.\n     * @abstract\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target that may be used to render content to.\n     * @return {HTMLElement} The rendered element.\n     */\n    LayerRenderer.prototype.renderFrame = function (frameState, target) {\n        return abstract();\n    };\n    /**\n     * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n     * @param {number} zoom Zoom level.\n     * @param {import(\"../Tile.js\").default} tile Tile.\n     * @return {boolean|void} If `false`, the tile will not be considered loaded.\n     */\n    LayerRenderer.prototype.loadedTileCallback = function (tiles, zoom, tile) {\n        if (!tiles[zoom]) {\n            tiles[zoom] = {};\n        }\n        tiles[zoom][tile.tileCoord.toString()] = tile;\n        return undefined;\n    };\n    /**\n     * Create a function that adds loaded tiles to the tile lookup.\n     * @param {import(\"../source/Tile.js\").default} source Tile source.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection of the tiles.\n     * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n     * @return {function(number, import(\"../TileRange.js\").default):boolean} A function that can be\n     *     called with a zoom level and a tile range to add loaded tiles to the lookup.\n     * @protected\n     */\n    LayerRenderer.prototype.createLoadedTileFinder = function (source, projection, tiles) {\n        return (\n        /**\n         * @param {number} zoom Zoom level.\n         * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n         * @return {boolean} The tile range is fully loaded.\n         * @this {LayerRenderer}\n         */\n        function (zoom, tileRange) {\n            var callback = this.loadedTileCallback.bind(this, tiles, zoom);\n            return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n        }.bind(this));\n    };\n    /**\n     * @abstract\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {import(\"./vector.js\").FeatureCallback<T>} callback Feature callback.\n     * @param {Array<import(\"./Map.js\").HitMatch<T>>} matches The hit detected matches with tolerance.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    LayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, matches) {\n        return undefined;\n    };\n    /**\n     * @abstract\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @return {Uint8ClampedArray|Uint8Array} The result.  If there is no data at the pixel\n     *    location, null will be returned.  If there is data, but pixel values cannot be\n     *    returned, and empty array will be returned.\n     */\n    LayerRenderer.prototype.getDataAtPixel = function (pixel, frameState, hitTolerance) {\n        return null;\n    };\n    /**\n     * @return {LayerType} Layer.\n     */\n    LayerRenderer.prototype.getLayer = function () {\n        return this.layer_;\n    };\n    /**\n     * Perform action necessary to get the layer rendered after new fonts have loaded\n     * @abstract\n     */\n    LayerRenderer.prototype.handleFontsChanged = function () { };\n    /**\n     * Handle changes in image state.\n     * @param {import(\"../events/Event.js\").default} event Image change event.\n     * @private\n     */\n    LayerRenderer.prototype.handleImageChange_ = function (event) {\n        var image = /** @type {import(\"../Image.js\").default} */ (event.target);\n        if (image.getState() === ImageState.LOADED) {\n            this.renderIfReadyAndVisible();\n        }\n    };\n    /**\n     * Load the image if not already loaded, and register the image change\n     * listener if needed.\n     * @param {import(\"../ImageBase.js\").default} image Image.\n     * @return {boolean} `true` if the image is already loaded, `false` otherwise.\n     * @protected\n     */\n    LayerRenderer.prototype.loadImage = function (image) {\n        var imageState = image.getState();\n        if (imageState != ImageState.LOADED && imageState != ImageState.ERROR) {\n            image.addEventListener(EventType.CHANGE, this.boundHandleImageChange_);\n        }\n        if (imageState == ImageState.IDLE) {\n            image.load();\n            imageState = image.getState();\n        }\n        return imageState == ImageState.LOADED;\n    };\n    /**\n     * @protected\n     */\n    LayerRenderer.prototype.renderIfReadyAndVisible = function () {\n        var layer = this.getLayer();\n        if (layer && layer.getVisible() && layer.getSourceState() === 'ready') {\n            layer.changed();\n        }\n    };\n    /**\n     * Clean up.\n     */\n    LayerRenderer.prototype.disposeInternal = function () {\n        delete this.layer_;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return LayerRenderer;\n}(Observable));\nexport default LayerRenderer;\n//# sourceMappingURL=Layer.js.map","/**\n * @module ol/geom/flat/simplify\n */\n// Based on simplify-js https://github.com/mourner/simplify-js\n// Copyright (c) 2012, Vladimir Agafonkin\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//    1. Redistributions of source code must retain the above copyright notice,\n//       this list of conditions and the following disclaimer.\n//\n//    2. Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\nimport { squaredDistance, squaredSegmentDistance } from '../../math.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {boolean} highQuality Highest quality.\n * @param {Array<number>} [opt_simplifiedFlatCoordinates] Simplified flat\n *     coordinates.\n * @return {Array<number>} Simplified line string.\n */\nexport function simplifyLineString(flatCoordinates, offset, end, stride, squaredTolerance, highQuality, opt_simplifiedFlatCoordinates) {\n    var simplifiedFlatCoordinates = opt_simplifiedFlatCoordinates !== undefined\n        ? opt_simplifiedFlatCoordinates\n        : [];\n    if (!highQuality) {\n        end = radialDistance(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n        flatCoordinates = simplifiedFlatCoordinates;\n        offset = 0;\n        stride = 2;\n    }\n    simplifiedFlatCoordinates.length = douglasPeucker(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n    return simplifiedFlatCoordinates;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function douglasPeucker(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n    var n = (end - offset) / stride;\n    if (n < 3) {\n        for (; offset < end; offset += stride) {\n            simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset + 1];\n        }\n        return simplifiedOffset;\n    }\n    /** @type {Array<number>} */\n    var markers = new Array(n);\n    markers[0] = 1;\n    markers[n - 1] = 1;\n    /** @type {Array<number>} */\n    var stack = [offset, end - stride];\n    var index = 0;\n    while (stack.length > 0) {\n        var last = stack.pop();\n        var first = stack.pop();\n        var maxSquaredDistance = 0;\n        var x1 = flatCoordinates[first];\n        var y1 = flatCoordinates[first + 1];\n        var x2 = flatCoordinates[last];\n        var y2 = flatCoordinates[last + 1];\n        for (var i = first + stride; i < last; i += stride) {\n            var x = flatCoordinates[i];\n            var y = flatCoordinates[i + 1];\n            var squaredDistance_1 = squaredSegmentDistance(x, y, x1, y1, x2, y2);\n            if (squaredDistance_1 > maxSquaredDistance) {\n                index = i;\n                maxSquaredDistance = squaredDistance_1;\n            }\n        }\n        if (maxSquaredDistance > squaredTolerance) {\n            markers[(index - offset) / stride] = 1;\n            if (first + stride < index) {\n                stack.push(first, index);\n            }\n            if (index + stride < last) {\n                stack.push(index, last);\n            }\n        }\n    }\n    for (var i = 0; i < n; ++i) {\n        if (markers[i]) {\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset + i * stride];\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset + i * stride + 1];\n        }\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerArray(flatCoordinates, offset, ends, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        simplifiedOffset = douglasPeucker(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset);\n        simplifiedEnds.push(simplifiedOffset);\n        offset = end;\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerMultiArray(flatCoordinates, offset, endss, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        var simplifiedEnds = [];\n        simplifiedOffset = douglasPeuckerArray(flatCoordinates, offset, ends, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n        simplifiedEndss.push(simplifiedEnds);\n        offset = ends[ends.length - 1];\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function radialDistance(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n    if (end <= offset + stride) {\n        // zero or one point, no simplification possible, so copy and return\n        for (; offset < end; offset += stride) {\n            simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset + 1];\n        }\n        return simplifiedOffset;\n    }\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    // copy first point\n    simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n    var x2 = x1;\n    var y2 = y1;\n    for (offset += stride; offset < end; offset += stride) {\n        x2 = flatCoordinates[offset];\n        y2 = flatCoordinates[offset + 1];\n        if (squaredDistance(x1, y1, x2, y2) > squaredTolerance) {\n            // copy point at offset\n            simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n            simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n            x1 = x2;\n            y1 = y2;\n        }\n    }\n    if (x2 != x1 || y2 != y1) {\n        // copy last point\n        simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n        simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {number} value Value.\n * @param {number} tolerance Tolerance.\n * @return {number} Rounded value.\n */\nexport function snap(value, tolerance) {\n    return tolerance * Math.round(value / tolerance);\n}\n/**\n * Simplifies a line string using an algorithm designed by Tim Schaub.\n * Coordinates are snapped to the nearest value in a virtual grid and\n * consecutive duplicate coordinates are discarded.  This effectively preserves\n * topology as the simplification of any subsection of a line string is\n * independent of the rest of the line string.  This means that, for examples,\n * the common edge between two polygons will be simplified to the same line\n * string independently in both polygons.  This implementation uses a single\n * pass over the coordinates and eliminates intermediate collinear points.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function quantize(flatCoordinates, offset, end, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n    // do nothing if the line is empty\n    if (offset == end) {\n        return simplifiedOffset;\n    }\n    // snap the first coordinate (P1)\n    var x1 = snap(flatCoordinates[offset], tolerance);\n    var y1 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    // add the first coordinate to the output\n    simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n    // find the next coordinate that does not snap to the same value as the first\n    // coordinate (P2)\n    var x2, y2;\n    do {\n        x2 = snap(flatCoordinates[offset], tolerance);\n        y2 = snap(flatCoordinates[offset + 1], tolerance);\n        offset += stride;\n        if (offset == end) {\n            // all coordinates snap to the same value, the line collapses to a point\n            // push the last snapped value anyway to ensure that the output contains\n            // at least two points\n            // FIXME should we really return at least two points anyway?\n            simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n            simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n            return simplifiedOffset;\n        }\n    } while (x2 == x1 && y2 == y1);\n    while (offset < end) {\n        // snap the next coordinate (P3)\n        var x3 = snap(flatCoordinates[offset], tolerance);\n        var y3 = snap(flatCoordinates[offset + 1], tolerance);\n        offset += stride;\n        // skip P3 if it is equal to P2\n        if (x3 == x2 && y3 == y2) {\n            continue;\n        }\n        // calculate the delta between P1 and P2\n        var dx1 = x2 - x1;\n        var dy1 = y2 - y1;\n        // calculate the delta between P3 and P1\n        var dx2 = x3 - x1;\n        var dy2 = y3 - y1;\n        // if P1, P2, and P3 are colinear and P3 is further from P1 than P2 is from\n        // P1 in the same direction then P2 is on the straight line between P1 and\n        // P3\n        if (dx1 * dy2 == dy1 * dx2 &&\n            ((dx1 < 0 && dx2 < dx1) || dx1 == dx2 || (dx1 > 0 && dx2 > dx1)) &&\n            ((dy1 < 0 && dy2 < dy1) || dy1 == dy2 || (dy1 > 0 && dy2 > dy1))) {\n            // discard P2 and set P2 = P3\n            x2 = x3;\n            y2 = y3;\n            continue;\n        }\n        // either P1, P2, and P3 are not colinear, or they are colinear but P3 is\n        // between P3 and P1 or on the opposite half of the line to P2.  add P2,\n        // and continue with P1 = P2 and P2 = P3\n        simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n        simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n        x1 = x2;\n        y1 = y2;\n        x2 = x3;\n        y2 = y3;\n    }\n    // add the last point (P2)\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function quantizeArray(flatCoordinates, offset, ends, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        simplifiedOffset = quantize(flatCoordinates, offset, end, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset);\n        simplifiedEnds.push(simplifiedOffset);\n        offset = end;\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function quantizeMultiArray(flatCoordinates, offset, endss, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        var simplifiedEnds = [];\n        simplifiedOffset = quantizeArray(flatCoordinates, offset, ends, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n        simplifiedEndss.push(simplifiedEnds);\n        offset = ends[ends.length - 1];\n    }\n    return simplifiedOffset;\n}\n//# sourceMappingURL=simplify.js.map","/**\n * @module ol/events/EventType\n */\n/**\n * @enum {string}\n * @const\n */\nexport default {\n    /**\n     * Generic change event. Triggered when the revision counter is increased.\n     * @event module:ol/events/Event~BaseEvent#change\n     * @api\n     */\n    CHANGE: 'change',\n    /**\n     * Generic error event. Triggered when an error occurs.\n     * @event module:ol/events/Event~BaseEvent#error\n     * @api\n     */\n    ERROR: 'error',\n    BLUR: 'blur',\n    CLEAR: 'clear',\n    CONTEXTMENU: 'contextmenu',\n    CLICK: 'click',\n    DBLCLICK: 'dblclick',\n    DRAGENTER: 'dragenter',\n    DRAGOVER: 'dragover',\n    DROP: 'drop',\n    FOCUS: 'focus',\n    KEYDOWN: 'keydown',\n    KEYPRESS: 'keypress',\n    LOAD: 'load',\n    RESIZE: 'resize',\n    TOUCHMOVE: 'touchmove',\n    WHEEL: 'wheel',\n};\n//# sourceMappingURL=EventType.js.map","/**\n * @module ol/array\n */\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function} [opt_comparator] Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, opt_comparator) {\n    var mid, cmp;\n    var comparator = opt_comparator || numberSafeCompareFunction;\n    var low = 0;\n    var high = haystack.length;\n    var found = false;\n    while (low < high) {\n        /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n         * to double (which gives the wrong results). */\n        mid = low + ((high - low) >> 1);\n        cmp = +comparator(haystack[mid], needle);\n        if (cmp < 0.0) {\n            /* Too low. */\n            low = mid + 1;\n        }\n        else {\n            /* Key found or too high */\n            high = mid;\n            found = !cmp;\n        }\n    }\n    /* Key not found. */\n    return found ? low : ~low;\n}\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function numberSafeCompareFunction(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n}\n/**\n * Whether the array contains the given object.\n * @param {Array<*>} arr The array to test for the presence of the element.\n * @param {*} obj The object for which to test.\n * @return {boolean} The object is in the array.\n */\nexport function includes(arr, obj) {\n    return arr.indexOf(obj) >= 0;\n}\n/**\n * {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution} can use a function\n * of this type to determine which nearest resolution to use.\n *\n * This function takes a `{number}` representing a value between two array entries,\n * a `{number}` representing the value of the nearest higher entry and\n * a `{number}` representing the value of the nearest lower entry\n * as arguments and returns a `{number}`. If a negative number or zero is returned\n * the lower value will be used, if a positive number is returned the higher value\n * will be used.\n * @typedef {function(number, number, number): number} NearestDirectionFunction\n * @api\n */\n/**\n * @param {Array<number>} arr Array in descending order.\n * @param {number} target Target.\n * @param {number|NearestDirectionFunction} direction\n *    0 means return the nearest,\n *    > 0 means return the largest nearest,\n *    < 0 means return the smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n    var n = arr.length;\n    if (arr[0] <= target) {\n        return 0;\n    }\n    else if (target <= arr[n - 1]) {\n        return n - 1;\n    }\n    else {\n        var i = void 0;\n        if (direction > 0) {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] < target) {\n                    return i - 1;\n                }\n            }\n        }\n        else if (direction < 0) {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] <= target) {\n                    return i;\n                }\n            }\n        }\n        else {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] == target) {\n                    return i;\n                }\n                else if (arr[i] < target) {\n                    if (typeof direction === 'function') {\n                        if (direction(target, arr[i - 1], arr[i]) > 0) {\n                            return i - 1;\n                        }\n                        else {\n                            return i;\n                        }\n                    }\n                    else if (arr[i - 1] - target < target - arr[i]) {\n                        return i - 1;\n                    }\n                    else {\n                        return i;\n                    }\n                }\n            }\n        }\n        return n - 1;\n    }\n}\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n    while (begin < end) {\n        var tmp = arr[begin];\n        arr[begin] = arr[end];\n        arr[end] = tmp;\n        ++begin;\n        --end;\n    }\n}\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n    var extension = Array.isArray(data) ? data : [data];\n    var length = extension.length;\n    for (var i = 0; i < length; i++) {\n        arr[arr.length] = extension[i];\n    }\n}\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n    var i = arr.indexOf(obj);\n    var found = i > -1;\n    if (found) {\n        arr.splice(i, 1);\n    }\n    return found;\n}\n/**\n * @param {Array<VALUE>} arr The array to search in.\n * @param {function(VALUE, number, ?) : boolean} func The function to compare.\n * @template VALUE\n * @return {VALUE|null} The element found or null.\n */\nexport function find(arr, func) {\n    var length = arr.length >>> 0;\n    var value;\n    for (var i = 0; i < length; i++) {\n        value = arr[i];\n        if (func(value, i, arr)) {\n            return value;\n        }\n    }\n    return null;\n}\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n    var len1 = arr1.length;\n    if (len1 !== arr2.length) {\n        return false;\n    }\n    for (var i = 0; i < len1; i++) {\n        if (arr1[i] !== arr2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Sort the passed array such that the relative order of equal elements is preserved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n    var length = arr.length;\n    var tmp = Array(arr.length);\n    var i;\n    for (i = 0; i < length; i++) {\n        tmp[i] = { index: i, value: arr[i] };\n    }\n    tmp.sort(function (a, b) {\n        return compareFnc(a.value, b.value) || a.index - b.index;\n    });\n    for (i = 0; i < arr.length; i++) {\n        arr[i] = tmp[i].value;\n    }\n}\n/**\n * @param {Array<*>} arr The array to search in.\n * @param {Function} func Comparison function.\n * @return {number} Return index.\n */\nexport function findIndex(arr, func) {\n    var index;\n    var found = !arr.every(function (el, idx) {\n        index = idx;\n        return !func(el, idx, arr);\n    });\n    return found ? index : -1;\n}\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function} [opt_func] Comparison function.\n * @param {boolean} [opt_strict] Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, opt_func, opt_strict) {\n    var compare = opt_func || numberSafeCompareFunction;\n    return arr.every(function (currentVal, index) {\n        if (index === 0) {\n            return true;\n        }\n        var res = compare(arr[index - 1], currentVal);\n        return !(res > 0 || (opt_strict && res === 0));\n    });\n}\n//# sourceMappingURL=array.js.map","/**\n * @module ol/ImageState\n */\n/**\n * @enum {number}\n */\nexport default {\n    IDLE: 0,\n    LOADING: 1,\n    LOADED: 2,\n    ERROR: 3,\n    EMPTY: 4,\n};\n//# sourceMappingURL=ImageState.js.map","/**\n * @module ol/events/condition\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport { FALSE, TRUE } from '../functions.js';\nimport { MAC, WEBKIT } from '../has.js';\nimport { assert } from '../asserts.js';\n/**\n * A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * `{boolean}`. If the condition is met, true should be returned.\n *\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default): boolean} Condition\n */\n/**\n * Creates a condition function that passes when all provided conditions pass.\n * @param {...Condition} var_args Conditions to check.\n * @return {Condition} Condition function.\n */\nexport function all(var_args) {\n    var conditions = arguments;\n    /**\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     * @return {boolean} All conditions passed.\n     */\n    return function (event) {\n        var pass = true;\n        for (var i = 0, ii = conditions.length; i < ii; ++i) {\n            pass = pass && conditions[i](event);\n            if (!pass) {\n                break;\n            }\n        }\n        return pass;\n    };\n}\n/**\n * Return `true` if only the alt-key is pressed, `false` otherwise (e.g. when\n * additionally the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt key is pressed.\n * @api\n */\nexport var altKeyOnly = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (originalEvent.altKey &&\n        !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n        !originalEvent.shiftKey);\n};\n/**\n * Return `true` if only the alt-key and shift-key is pressed, `false` otherwise\n * (e.g. when additionally the platform-modifier-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt and shift keys are pressed.\n * @api\n */\nexport var altShiftKeysOnly = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (originalEvent.altKey &&\n        !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n        originalEvent.shiftKey);\n};\n/**\n * Return `true` if the map has the focus. This condition requires a map target\n * element with a `tabindex` attribute, e.g. `<div id=\"map\" tabindex=\"1\">`.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n * @return {boolean} The map has the focus.\n * @api\n */\nexport var focus = function (event) {\n    var targetElement = event.map.getTargetElement();\n    var activeElement = event.map.getOwnerDocument().activeElement;\n    return targetElement.contains(activeElement);\n};\n/**\n * Return `true` if the map has the focus or no 'tabindex' attribute set.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n * @return {boolean} The map container has the focus or no 'tabindex' attribute.\n */\nexport var focusWithTabindex = function (event) {\n    return event.map.getTargetElement().hasAttribute('tabindex')\n        ? focus(event)\n        : true;\n};\n/**\n * Return always true.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True.\n * @api\n */\nexport var always = TRUE;\n/**\n * Return `true` if the event is a `click` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `click` event.\n * @api\n */\nexport var click = function (mapBrowserEvent) {\n    return mapBrowserEvent.type == MapBrowserEventType.CLICK;\n};\n/**\n * Return `true` if the event has an \"action\"-producing mouse button.\n *\n * By definition, this includes left-click on windows/linux, and left-click\n * without the ctrl key on Macs.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} The result.\n */\nexport var mouseActionButton = function (mapBrowserEvent) {\n    var originalEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n    return originalEvent.button == 0 && !(WEBKIT && MAC && originalEvent.ctrlKey);\n};\n/**\n * Return always false.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} False.\n * @api\n */\nexport var never = FALSE;\n/**\n * Return `true` if the browser event is a `pointermove` event, `false`\n * otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the browser event is a `pointermove` event.\n * @api\n */\nexport var pointerMove = function (mapBrowserEvent) {\n    return mapBrowserEvent.type == 'pointermove';\n};\n/**\n * Return `true` if the event is a map `singleclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `singleclick` event.\n * @api\n */\nexport var singleClick = function (mapBrowserEvent) {\n    return mapBrowserEvent.type == MapBrowserEventType.SINGLECLICK;\n};\n/**\n * Return `true` if the event is a map `dblclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `dblclick` event.\n * @api\n */\nexport var doubleClick = function (mapBrowserEvent) {\n    return mapBrowserEvent.type == MapBrowserEventType.DBLCLICK;\n};\n/**\n * Return `true` if no modifier key (alt-, shift- or platform-modifier-key) is\n * pressed.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if there no modifier keys are pressed.\n * @api\n */\nexport var noModifierKeys = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (!originalEvent.altKey &&\n        !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n        !originalEvent.shiftKey);\n};\n/**\n * Return `true` if only the platform-modifier-key (the meta-key on Mac,\n * ctrl-key otherwise) is pressed, `false` otherwise (e.g. when additionally\n * the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the platform modifier key is pressed.\n * @api\n */\nexport var platformModifierKeyOnly = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (!originalEvent.altKey &&\n        (MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n        !originalEvent.shiftKey);\n};\n/**\n * Return `true` if only the shift-key is pressed, `false` otherwise (e.g. when\n * additionally the alt-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the shift key is pressed.\n * @api\n */\nexport var shiftKeyOnly = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (!originalEvent.altKey &&\n        !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n        originalEvent.shiftKey);\n};\n/**\n * Return `true` if the target element is not editable, i.e. not an `input`,\n * `select`, or `textarea` element and no `contenteditable` attribute is\n * set or inherited, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if the target element is not editable.\n * @api\n */\nexport var targetNotEditable = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    var tagName = /** @type {Element} */ (originalEvent.target).tagName;\n    return (tagName !== 'INPUT' &&\n        tagName !== 'SELECT' &&\n        tagName !== 'TEXTAREA' &&\n        // `isContentEditable` is only available on `HTMLElement`, but it may also be a\n        // different type like `SVGElement`.\n        // @ts-ignore\n        !originalEvent.target.isContentEditable);\n};\n/**\n * Return `true` if the event originates from a mouse device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a mouse device.\n * @api\n */\nexport var mouseOnly = function (mapBrowserEvent) {\n    var pointerEvent = /** @type {import(\"../MapBrowserEvent\").default} */ (mapBrowserEvent).originalEvent;\n    assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n    // see https://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n    return pointerEvent.pointerType == 'mouse';\n};\n/**\n * Return `true` if the event originates from a touchable device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a touchable device.\n * @api\n */\nexport var touchOnly = function (mapBrowserEvent) {\n    var pointerEvt = /** @type {import(\"../MapBrowserEvent\").default} */ (mapBrowserEvent).originalEvent;\n    assert(pointerEvt !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n    // see https://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n    return pointerEvt.pointerType === 'touch';\n};\n/**\n * Return `true` if the event originates from a digital pen.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a digital pen.\n * @api\n */\nexport var penOnly = function (mapBrowserEvent) {\n    var pointerEvt = /** @type {import(\"../MapBrowserEvent\").default} */ (mapBrowserEvent).originalEvent;\n    assert(pointerEvt !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n    // see https://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n    return pointerEvt.pointerType === 'pen';\n};\n/**\n * Return `true` if the event originates from a primary pointer in\n * contact with the surface or if the left mouse button is pressed.\n * See https://www.w3.org/TR/pointerevents/#button-states.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a primary pointer.\n * @api\n */\nexport var primaryAction = function (mapBrowserEvent) {\n    var pointerEvent = /** @type {import(\"../MapBrowserEvent\").default} */ (mapBrowserEvent).originalEvent;\n    assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n    return pointerEvent.isPrimary && pointerEvent.button === 0;\n};\n//# sourceMappingURL=condition.js.map","/**\n * @module ol/TileState\n */\n/**\n * @enum {number}\n */\nexport default {\n    IDLE: 0,\n    LOADING: 1,\n    LOADED: 2,\n    /**\n     * Indicates that tile loading failed\n     * @type {number}\n     */\n    ERROR: 3,\n    EMPTY: 4,\n};\n//# sourceMappingURL=TileState.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Pointer\n */\nimport Interaction from './Interaction.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\n/**\n * @typedef {Object} Options\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleDownEvent]\n * Function handling \"down\" events. If the function returns `true` then a drag\n * sequence is started.\n * @property {function(import(\"../MapBrowserEvent.js\").default):void} [handleDragEvent]\n * Function handling \"drag\" events. This function is called on \"move\" events\n * during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleEvent]\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. The function may return `false` to prevent the\n * propagation of the event to other interactions in the map's interactions\n * chain.\n * @property {function(import(\"../MapBrowserEvent.js\").default):void} [handleMoveEvent]\n * Function handling \"move\" events. This function is called on \"move\" events.\n * This functions is also called during a drag sequence, so during a drag\n * sequence both the `handleDragEvent` function and this function are called.\n * If `handleDownEvent` is defined and it returns true this function will not\n * be called during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleUpEvent]\n *  Function handling \"up\" events. If the function returns `false` then the\n * current drag sequence is stopped.\n * @property {function(boolean):boolean} [stopDown]\n * Should the down event be propagated to other interactions, or should be\n * stopped?\n */\n/**\n * @classdesc\n * Base class that calls user-defined functions on `down`, `move` and `up`\n * events. This class also manages \"drag sequences\".\n *\n * When the `handleDownEvent` user function returns `true` a drag sequence is\n * started. During a drag sequence the `handleDragEvent` user function is\n * called on `move` events. The drag sequence ends when the `handleUpEvent`\n * user function is called and returns `false`.\n * @api\n */\nvar PointerInteraction = /** @class */ (function (_super) {\n    __extends(PointerInteraction, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function PointerInteraction(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, \n        /** @type {import(\"./Interaction.js\").InteractionOptions} */ (options)) || this;\n        if (options.handleDownEvent) {\n            _this.handleDownEvent = options.handleDownEvent;\n        }\n        if (options.handleDragEvent) {\n            _this.handleDragEvent = options.handleDragEvent;\n        }\n        if (options.handleMoveEvent) {\n            _this.handleMoveEvent = options.handleMoveEvent;\n        }\n        if (options.handleUpEvent) {\n            _this.handleUpEvent = options.handleUpEvent;\n        }\n        if (options.stopDown) {\n            _this.stopDown = options.stopDown;\n        }\n        /**\n         * @type {boolean}\n         * @protected\n         */\n        _this.handlingDownUpSequence = false;\n        /**\n         * @type {Array<PointerEvent>}\n         * @protected\n         */\n        _this.targetPointers = [];\n        return _this;\n    }\n    /**\n     * Returns the current number of pointers involved in the interaction,\n     * e.g. `2` when two fingers are used.\n     * @return {number} The number of pointers.\n     * @api\n     */\n    PointerInteraction.prototype.getPointerCount = function () {\n        return this.targetPointers.length;\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     * @protected\n     */\n    PointerInteraction.prototype.handleDownEvent = function (mapBrowserEvent) {\n        return false;\n    };\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @protected\n     */\n    PointerInteraction.prototype.handleDragEvent = function (mapBrowserEvent) { };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} and may call into\n     * other functions, if event sequences like e.g. 'drag' or 'down-up' etc. are\n     * detected.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @api\n     */\n    PointerInteraction.prototype.handleEvent = function (mapBrowserEvent) {\n        if (!mapBrowserEvent.originalEvent) {\n            return true;\n        }\n        var stopEvent = false;\n        this.updateTrackedPointers_(mapBrowserEvent);\n        if (this.handlingDownUpSequence) {\n            if (mapBrowserEvent.type == MapBrowserEventType.POINTERDRAG) {\n                this.handleDragEvent(mapBrowserEvent);\n                // prevent page scrolling during dragging\n                mapBrowserEvent.originalEvent.preventDefault();\n            }\n            else if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n                var handledUp = this.handleUpEvent(mapBrowserEvent);\n                this.handlingDownUpSequence =\n                    handledUp && this.targetPointers.length > 0;\n            }\n        }\n        else {\n            if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n                var handled = this.handleDownEvent(mapBrowserEvent);\n                this.handlingDownUpSequence = handled;\n                stopEvent = this.stopDown(handled);\n            }\n            else if (mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE) {\n                this.handleMoveEvent(mapBrowserEvent);\n            }\n        }\n        return !stopEvent;\n    };\n    /**\n     * Handle pointer move events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @protected\n     */\n    PointerInteraction.prototype.handleMoveEvent = function (mapBrowserEvent) { };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     * @protected\n     */\n    PointerInteraction.prototype.handleUpEvent = function (mapBrowserEvent) {\n        return false;\n    };\n    /**\n     * This function is used to determine if \"down\" events should be propagated\n     * to other interactions or should be stopped.\n     * @param {boolean} handled Was the event handled by the interaction?\n     * @return {boolean} Should the `down` event be stopped?\n     */\n    PointerInteraction.prototype.stopDown = function (handled) {\n        return handled;\n    };\n    /**\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @private\n     */\n    PointerInteraction.prototype.updateTrackedPointers_ = function (mapBrowserEvent) {\n        if (mapBrowserEvent.activePointers) {\n            this.targetPointers = mapBrowserEvent.activePointers;\n        }\n    };\n    return PointerInteraction;\n}(Interaction));\n/**\n * @param {Array<PointerEvent>} pointerEvents List of events.\n * @return {import(\"../pixel.js\").Pixel} Centroid pixel.\n */\nexport function centroid(pointerEvents) {\n    var length = pointerEvents.length;\n    var clientX = 0;\n    var clientY = 0;\n    for (var i = 0; i < length; i++) {\n        clientX += pointerEvents[i].clientX;\n        clientY += pointerEvents[i].clientY;\n    }\n    return [clientX / length, clientY / length];\n}\nexport default PointerInteraction;\n//# sourceMappingURL=Pointer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Image\n */\nimport EventType from './events/EventType.js';\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport { IMAGE_DECODE } from './has.js';\nimport { getHeight } from './extent.js';\nimport { listenOnce, unlistenByKey } from './events.js';\n/**\n * A function that takes an {@link module:ol/Image~ImageWrapper} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~ImageWrapper#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string): void} LoadFunction\n * @api\n */\nvar ImageWrapper = /** @class */ (function (_super) {\n    __extends(ImageWrapper, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {LoadFunction} imageLoadFunction Image load function.\n     */\n    function ImageWrapper(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n        var _this = _super.call(this, extent, resolution, pixelRatio, ImageState.IDLE) || this;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = ImageState.IDLE;\n        /**\n         * @private\n         * @type {LoadFunction}\n         */\n        _this.imageLoadFunction_ = imageLoadFunction;\n        return _this;\n    }\n    /**\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @api\n     */\n    ImageWrapper.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageError_ = function () {\n        this.state = ImageState.ERROR;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageLoad_ = function () {\n        if (this.resolution === undefined) {\n            this.resolution = getHeight(this.extent) / this.image_.height;\n        }\n        this.state = ImageState.LOADED;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Load the image or retry if loading previously failed.\n     * Loading is taken care of by the tile queue, and calling this method is\n     * only needed for preloading or for reloading in case of an error.\n     * @api\n     */\n    ImageWrapper.prototype.load = function () {\n        if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n            this.state = ImageState.LOADING;\n            this.changed();\n            this.imageLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n     */\n    ImageWrapper.prototype.setImage = function (image) {\n        this.image_ = image;\n        this.resolution = getHeight(this.extent) / this.image_.height;\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageWrapper;\n}(ImageBase));\n/**\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n    var img = /** @type {HTMLImageElement} */ (image);\n    var listening = true;\n    var decoding = false;\n    var loaded = false;\n    var listenerKeys = [\n        listenOnce(img, EventType.LOAD, function () {\n            loaded = true;\n            if (!decoding) {\n                loadHandler();\n            }\n        }),\n    ];\n    if (img.src && IMAGE_DECODE) {\n        decoding = true;\n        img\n            .decode()\n            .then(function () {\n            if (listening) {\n                loadHandler();\n            }\n        })\n            .catch(function (error) {\n            if (listening) {\n                if (loaded) {\n                    loadHandler();\n                }\n                else {\n                    errorHandler();\n                }\n            }\n        });\n    }\n    else {\n        listenerKeys.push(listenOnce(img, EventType.ERROR, errorHandler));\n    }\n    return function unlisten() {\n        listening = false;\n        listenerKeys.forEach(unlistenByKey);\n    };\n}\nexport default ImageWrapper;\n//# sourceMappingURL=Image.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/LinearRing\n */\nimport GeometryLayout from './GeometryLayout.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestPoint, maxSquaredDelta } from './flat/closest.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { douglasPeucker } from './flat/simplify.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { linearRing as linearRingArea } from './flat/area.js';\n/**\n * @classdesc\n * Linear ring geometry. Only used as part of polygon; cannot be rendered\n * on its own.\n *\n * @api\n */\nvar LinearRing = /** @class */ (function (_super) {\n    __extends(LinearRing, _super);\n    /**\n     * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     */\n    function LinearRing(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n            _this.setFlatCoordinates(opt_layout, \n            /** @type {Array<number>} */ (coordinates));\n        }\n        else {\n            _this.setCoordinates(\n            /** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!LinearRing} Clone.\n     * @api\n     */\n    LinearRing.prototype.clone = function () {\n        return new LinearRing(this.flatCoordinates.slice(), this.layout);\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    LinearRing.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(maxSquaredDelta(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestPoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * Return the area of the linear ring on projected plane.\n     * @return {number} Area (on projected plane).\n     * @api\n     */\n    LinearRing.prototype.getArea = function () {\n        return linearRingArea(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * Return the coordinates of the linear ring.\n     * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n     * @api\n     */\n    LinearRing.prototype.getCoordinates = function () {\n        return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {LinearRing} Simplified LinearRing.\n     * @protected\n     */\n    LinearRing.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        simplifiedFlatCoordinates.length = douglasPeucker(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n        return new LinearRing(simplifiedFlatCoordinates, GeometryLayout.XY);\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./Geometry.js\").Type} Geometry type.\n     * @api\n     */\n    LinearRing.prototype.getType = function () {\n        return 'LinearRing';\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    LinearRing.prototype.intersectsExtent = function (extent) {\n        return false;\n    };\n    /**\n     * Set the coordinates of the linear ring.\n     * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @api\n     */\n    LinearRing.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 1);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return LinearRing;\n}(SimpleGeometry));\nexport default LinearRing;\n//# sourceMappingURL=LinearRing.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/Polygon\n */\nimport GeometryLayout from './GeometryLayout.js';\nimport LinearRing from './LinearRing.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { arrayMaxSquaredDelta, assignClosestArrayPoint } from './flat/closest.js';\nimport { closestSquaredDistanceXY, getCenter } from '../extent.js';\nimport { deflateCoordinatesArray } from './flat/deflate.js';\nimport { extend } from '../array.js';\nimport { getInteriorPointOfArray } from './flat/interiorpoint.js';\nimport { inflateCoordinatesArray } from './flat/inflate.js';\nimport { intersectsLinearRingArray } from './flat/intersectsextent.js';\nimport { linearRingsAreOriented, orientLinearRings } from './flat/orient.js';\nimport { linearRings as linearRingsArea } from './flat/area.js';\nimport { linearRingsContainsXY } from './flat/contains.js';\nimport { modulo } from '../math.js';\nimport { quantizeArray } from './flat/simplify.js';\nimport { offset as sphereOffset } from '../sphere.js';\n/**\n * @classdesc\n * Polygon geometry.\n *\n * @api\n */\nvar Polygon = /** @class */ (function (_super) {\n    __extends(Polygon, _super);\n    /**\n     * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>|!Array<number>} coordinates\n     *     Array of linear rings that define the polygon. The first linear ring of the\n     *     array defines the outer-boundary or surface of the polygon. Each subsequent\n     *     linear ring defines a hole in the surface of the polygon. A linear ring is\n     *     an array of vertices' coordinates where the first coordinate and the last are\n     *     equivalent. (For internal use, flat coordinates in combination with\n     *     `opt_layout` and `opt_ends` are also accepted.)\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @param {Array<number>} [opt_ends] Ends (for internal use with flat coordinates).\n     */\n    function Polygon(coordinates, opt_layout, opt_ends) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        _this.ends_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.flatInteriorPointRevision_ = -1;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.flatInteriorPoint_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.orientedRevision_ = -1;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.orientedFlatCoordinates_ = null;\n        if (opt_layout !== undefined && opt_ends) {\n            _this.setFlatCoordinates(opt_layout, \n            /** @type {Array<number>} */ (coordinates));\n            _this.ends_ = opt_ends;\n        }\n        else {\n            _this.setCoordinates(\n            /** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed linear ring to this polygon.\n     * @param {LinearRing} linearRing Linear ring.\n     * @api\n     */\n    Polygon.prototype.appendLinearRing = function (linearRing) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = linearRing.getFlatCoordinates().slice();\n        }\n        else {\n            extend(this.flatCoordinates, linearRing.getFlatCoordinates());\n        }\n        this.ends_.push(this.flatCoordinates.length);\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!Polygon} Clone.\n     * @api\n     */\n    Polygon.prototype.clone = function () {\n        var polygon = new Polygon(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n        polygon.applyProperties(this);\n        return polygon;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    Polygon.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates, 0, this.ends_, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestArrayPoint(this.flatCoordinates, 0, this.ends_, this.stride, this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @return {boolean} Contains (x, y).\n     */\n    Polygon.prototype.containsXY = function (x, y) {\n        return linearRingsContainsXY(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, x, y);\n    };\n    /**\n     * Return the area of the polygon on projected plane.\n     * @return {number} Area (on projected plane).\n     * @api\n     */\n    Polygon.prototype.getArea = function () {\n        return linearRingsArea(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride);\n    };\n    /**\n     * Get the coordinate array for this geometry.  This array has the structure\n     * of a GeoJSON coordinate array for polygons.\n     *\n     * @param {boolean} [opt_right] Orient coordinates according to the right-hand\n     *     rule (counter-clockwise for exterior and clockwise for interior rings).\n     *     If `false`, coordinates will be oriented according to the left-hand rule\n     *     (clockwise for exterior and counter-clockwise for interior rings).\n     *     By default, coordinate orientation will depend on how the geometry was\n     *     constructed.\n     * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n     * @api\n     */\n    Polygon.prototype.getCoordinates = function (opt_right) {\n        var flatCoordinates;\n        if (opt_right !== undefined) {\n            flatCoordinates = this.getOrientedFlatCoordinates().slice();\n            orientLinearRings(flatCoordinates, 0, this.ends_, this.stride, opt_right);\n        }\n        else {\n            flatCoordinates = this.flatCoordinates;\n        }\n        return inflateCoordinatesArray(flatCoordinates, 0, this.ends_, this.stride);\n    };\n    /**\n     * @return {Array<number>} Ends.\n     */\n    Polygon.prototype.getEnds = function () {\n        return this.ends_;\n    };\n    /**\n     * @return {Array<number>} Interior point.\n     */\n    Polygon.prototype.getFlatInteriorPoint = function () {\n        if (this.flatInteriorPointRevision_ != this.getRevision()) {\n            var flatCenter = getCenter(this.getExtent());\n            this.flatInteriorPoint_ = getInteriorPointOfArray(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, flatCenter, 0);\n            this.flatInteriorPointRevision_ = this.getRevision();\n        }\n        return this.flatInteriorPoint_;\n    };\n    /**\n     * Return an interior point of the polygon.\n     * @return {Point} Interior point as XYM coordinate, where M is the\n     * length of the horizontal intersection that the point belongs to.\n     * @api\n     */\n    Polygon.prototype.getInteriorPoint = function () {\n        return new Point(this.getFlatInteriorPoint(), GeometryLayout.XYM);\n    };\n    /**\n     * Return the number of rings of the polygon,  this includes the exterior\n     * ring and any interior rings.\n     *\n     * @return {number} Number of rings.\n     * @api\n     */\n    Polygon.prototype.getLinearRingCount = function () {\n        return this.ends_.length;\n    };\n    /**\n     * Return the Nth linear ring of the polygon geometry. Return `null` if the\n     * given index is out of range.\n     * The exterior linear ring is available at index `0` and the interior rings\n     * at index `1` and beyond.\n     *\n     * @param {number} index Index.\n     * @return {LinearRing|null} Linear ring.\n     * @api\n     */\n    Polygon.prototype.getLinearRing = function (index) {\n        if (index < 0 || this.ends_.length <= index) {\n            return null;\n        }\n        return new LinearRing(this.flatCoordinates.slice(index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n    };\n    /**\n     * Return the linear rings of the polygon.\n     * @return {Array<LinearRing>} Linear rings.\n     * @api\n     */\n    Polygon.prototype.getLinearRings = function () {\n        var layout = this.layout;\n        var flatCoordinates = this.flatCoordinates;\n        var ends = this.ends_;\n        var linearRings = [];\n        var offset = 0;\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            var end = ends[i];\n            var linearRing = new LinearRing(flatCoordinates.slice(offset, end), layout);\n            linearRings.push(linearRing);\n            offset = end;\n        }\n        return linearRings;\n    };\n    /**\n     * @return {Array<number>} Oriented flat coordinates.\n     */\n    Polygon.prototype.getOrientedFlatCoordinates = function () {\n        if (this.orientedRevision_ != this.getRevision()) {\n            var flatCoordinates = this.flatCoordinates;\n            if (linearRingsAreOriented(flatCoordinates, 0, this.ends_, this.stride)) {\n                this.orientedFlatCoordinates_ = flatCoordinates;\n            }\n            else {\n                this.orientedFlatCoordinates_ = flatCoordinates.slice();\n                this.orientedFlatCoordinates_.length = orientLinearRings(this.orientedFlatCoordinates_, 0, this.ends_, this.stride);\n            }\n            this.orientedRevision_ = this.getRevision();\n        }\n        return this.orientedFlatCoordinates_;\n    };\n    /**\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {Polygon} Simplified Polygon.\n     * @protected\n     */\n    Polygon.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        var simplifiedEnds = [];\n        simplifiedFlatCoordinates.length = quantizeArray(this.flatCoordinates, 0, this.ends_, this.stride, Math.sqrt(squaredTolerance), simplifiedFlatCoordinates, 0, simplifiedEnds);\n        return new Polygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./Geometry.js\").Type} Geometry type.\n     * @api\n     */\n    Polygon.prototype.getType = function () {\n        return 'Polygon';\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    Polygon.prototype.intersectsExtent = function (extent) {\n        return intersectsLinearRingArray(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the polygon.\n     * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @api\n     */\n    Polygon.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 2);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        var ends = deflateCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n        this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n        this.changed();\n    };\n    return Polygon;\n}(SimpleGeometry));\nexport default Polygon;\n/**\n * Create an approximation of a circle on the surface of a sphere.\n * @param {import(\"../coordinate.js\").Coordinate} center Center (`[lon, lat]` in degrees).\n * @param {number} radius The great-circle distance from the center to\n *     the polygon vertices in meters.\n * @param {number} [opt_n] Optional number of vertices for the resulting\n *     polygon. Default is `32`.\n * @param {number} [opt_sphereRadius] Optional radius for the sphere (defaults to\n *     the Earth's mean radius using the WGS84 ellipsoid).\n * @return {Polygon} The \"circular\" polygon.\n * @api\n */\nexport function circular(center, radius, opt_n, opt_sphereRadius) {\n    var n = opt_n ? opt_n : 32;\n    /** @type {Array<number>} */\n    var flatCoordinates = [];\n    for (var i = 0; i < n; ++i) {\n        extend(flatCoordinates, sphereOffset(center, radius, (2 * Math.PI * i) / n, opt_sphereRadius));\n    }\n    flatCoordinates.push(flatCoordinates[0], flatCoordinates[1]);\n    return new Polygon(flatCoordinates, GeometryLayout.XY, [\n        flatCoordinates.length,\n    ]);\n}\n/**\n * Create a polygon from an extent. The layout used is `XY`.\n * @param {import(\"../extent.js\").Extent} extent The extent.\n * @return {Polygon} The polygon.\n * @api\n */\nexport function fromExtent(extent) {\n    var minX = extent[0];\n    var minY = extent[1];\n    var maxX = extent[2];\n    var maxY = extent[3];\n    var flatCoordinates = [\n        minX,\n        minY,\n        minX,\n        maxY,\n        maxX,\n        maxY,\n        maxX,\n        minY,\n        minX,\n        minY,\n    ];\n    return new Polygon(flatCoordinates, GeometryLayout.XY, [\n        flatCoordinates.length,\n    ]);\n}\n/**\n * Create a regular polygon from a circle.\n * @param {import(\"./Circle.js\").default} circle Circle geometry.\n * @param {number} [opt_sides] Number of sides of the polygon. Default is 32.\n * @param {number} [opt_angle] Start angle for the first vertex of the polygon in\n *     counter-clockwise radians. 0 means East. Default is 0.\n * @return {Polygon} Polygon geometry.\n * @api\n */\nexport function fromCircle(circle, opt_sides, opt_angle) {\n    var sides = opt_sides ? opt_sides : 32;\n    var stride = circle.getStride();\n    var layout = circle.getLayout();\n    var center = circle.getCenter();\n    var arrayLength = stride * (sides + 1);\n    var flatCoordinates = new Array(arrayLength);\n    for (var i = 0; i < arrayLength; i += stride) {\n        flatCoordinates[i] = 0;\n        flatCoordinates[i + 1] = 0;\n        for (var j = 2; j < stride; j++) {\n            flatCoordinates[i + j] = center[j];\n        }\n    }\n    var ends = [flatCoordinates.length];\n    var polygon = new Polygon(flatCoordinates, layout, ends);\n    makeRegular(polygon, center, circle.getRadius(), opt_angle);\n    return polygon;\n}\n/**\n * Modify the coordinates of a polygon to make it a regular polygon.\n * @param {Polygon} polygon Polygon geometry.\n * @param {import(\"../coordinate.js\").Coordinate} center Center of the regular polygon.\n * @param {number} radius Radius of the regular polygon.\n * @param {number} [opt_angle] Start angle for the first vertex of the polygon in\n *     counter-clockwise radians. 0 means East. Default is 0.\n */\nexport function makeRegular(polygon, center, radius, opt_angle) {\n    var flatCoordinates = polygon.getFlatCoordinates();\n    var stride = polygon.getStride();\n    var sides = flatCoordinates.length / stride - 1;\n    var startAngle = opt_angle ? opt_angle : 0;\n    for (var i = 0; i <= sides; ++i) {\n        var offset = i * stride;\n        var angle = startAngle + (modulo(i, sides) * 2 * Math.PI) / sides;\n        flatCoordinates[offset] = center[0] + radius * Math.cos(angle);\n        flatCoordinates[offset + 1] = center[1] + radius * Math.sin(angle);\n    }\n    polygon.changed();\n}\n//# sourceMappingURL=Polygon.js.map","/**\n * @module ol/geom/flat/intersectsextent\n */\nimport { containsExtent, createEmpty, extendFlatCoordinates, intersects, intersectsSegment, } from '../../extent.js';\nimport { forEach as forEachSegment } from './segments.js';\nimport { linearRingContainsExtent, linearRingContainsXY } from './contains.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineString(flatCoordinates, offset, end, stride, extent) {\n    var coordinatesExtent = extendFlatCoordinates(createEmpty(), flatCoordinates, offset, end, stride);\n    if (!intersects(extent, coordinatesExtent)) {\n        return false;\n    }\n    if (containsExtent(extent, coordinatesExtent)) {\n        return true;\n    }\n    if (coordinatesExtent[0] >= extent[0] && coordinatesExtent[2] <= extent[2]) {\n        return true;\n    }\n    if (coordinatesExtent[1] >= extent[1] && coordinatesExtent[3] <= extent[3]) {\n        return true;\n    }\n    return forEachSegment(flatCoordinates, offset, end, stride, \n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} point1 Start point.\n     * @param {import(\"../../coordinate.js\").Coordinate} point2 End point.\n     * @return {boolean} `true` if the segment and the extent intersect,\n     *     `false` otherwise.\n     */\n    function (point1, point2) {\n        return intersectsSegment(extent, point1, point2);\n    });\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineStringArray(flatCoordinates, offset, ends, stride, extent) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        if (intersectsLineString(flatCoordinates, offset, ends[i], stride, extent)) {\n            return true;\n        }\n        offset = ends[i];\n    }\n    return false;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRing(flatCoordinates, offset, end, stride, extent) {\n    if (intersectsLineString(flatCoordinates, offset, end, stride, extent)) {\n        return true;\n    }\n    if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[1])) {\n        return true;\n    }\n    if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[3])) {\n        return true;\n    }\n    if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[1])) {\n        return true;\n    }\n    if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[3])) {\n        return true;\n    }\n    return false;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent) {\n    if (!intersectsLinearRing(flatCoordinates, offset, ends[0], stride, extent)) {\n        return false;\n    }\n    if (ends.length === 1) {\n        return true;\n    }\n    for (var i = 1, ii = ends.length; i < ii; ++i) {\n        if (linearRingContainsExtent(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n            if (!intersectsLineString(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingMultiArray(flatCoordinates, offset, endss, stride, extent) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        if (intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent)) {\n            return true;\n        }\n        offset = ends[ends.length - 1];\n    }\n    return false;\n}\n//# sourceMappingURL=intersectsextent.js.map","/**\n * @module ol/reproj/Triangulation\n */\nimport { boundingExtent, createEmpty, extendCoordinate, getArea, getBottomLeft, getBottomRight, getTopLeft, getTopRight, getWidth, intersects, } from '../extent.js';\nimport { getTransform } from '../proj.js';\nimport { log2, modulo } from '../math.js';\n/**\n * Single triangle; consists of 3 source points and 3 target points.\n * @typedef {Object} Triangle\n * @property {Array<import(\"../coordinate.js\").Coordinate>} source Source.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} target Target.\n */\n/**\n * Maximum number of subdivision steps during raster reprojection triangulation.\n * Prevents high memory usage and large number of proj4 calls (for certain\n * transformations and areas). At most `2*(2^this)` triangles are created for\n * each triangulated extent (tile/image).\n * @type {number}\n */\nvar MAX_SUBDIVISION = 10;\n/**\n * Maximum allowed size of triangle relative to world width. When transforming\n * corners of world extent between certain projections, the resulting\n * triangulation seems to have zero error and no subdivision is performed. If\n * the triangle width is more than this (relative to world width; 0-1),\n * subdivison is forced (up to `MAX_SUBDIVISION`). Default is `0.25`.\n * @type {number}\n */\nvar MAX_TRIANGLE_WIDTH = 0.25;\n/**\n * @classdesc\n * Class containing triangulation of the given target extent.\n * Used for determining source data and the reprojection itself.\n */\nvar Triangulation = /** @class */ (function () {\n    /**\n     * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n     * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n     * @param {import(\"../extent.js\").Extent} targetExtent Target extent to triangulate.\n     * @param {import(\"../extent.js\").Extent} maxSourceExtent Maximal source extent that can be used.\n     * @param {number} errorThreshold Acceptable error (in source units).\n     * @param {?number} opt_destinationResolution The (optional) resolution of the destination.\n     */\n    function Triangulation(sourceProj, targetProj, targetExtent, maxSourceExtent, errorThreshold, opt_destinationResolution) {\n        /**\n         * @type {import(\"../proj/Projection.js\").default}\n         * @private\n         */\n        this.sourceProj_ = sourceProj;\n        /**\n         * @type {import(\"../proj/Projection.js\").default}\n         * @private\n         */\n        this.targetProj_ = targetProj;\n        /** @type {!Object<string, import(\"../coordinate.js\").Coordinate>} */\n        var transformInvCache = {};\n        var transformInv = getTransform(this.targetProj_, this.sourceProj_);\n        /**\n         * @param {import(\"../coordinate.js\").Coordinate} c A coordinate.\n         * @return {import(\"../coordinate.js\").Coordinate} Transformed coordinate.\n         * @private\n         */\n        this.transformInv_ = function (c) {\n            var key = c[0] + '/' + c[1];\n            if (!transformInvCache[key]) {\n                transformInvCache[key] = transformInv(c);\n            }\n            return transformInvCache[key];\n        };\n        /**\n         * @type {import(\"../extent.js\").Extent}\n         * @private\n         */\n        this.maxSourceExtent_ = maxSourceExtent;\n        /**\n         * @type {number}\n         * @private\n         */\n        this.errorThresholdSquared_ = errorThreshold * errorThreshold;\n        /**\n         * @type {Array<Triangle>}\n         * @private\n         */\n        this.triangles_ = [];\n        /**\n         * Indicates that the triangulation crosses edge of the source projection.\n         * @type {boolean}\n         * @private\n         */\n        this.wrapsXInSource_ = false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.canWrapXInSource_ =\n            this.sourceProj_.canWrapX() &&\n                !!maxSourceExtent &&\n                !!this.sourceProj_.getExtent() &&\n                getWidth(maxSourceExtent) == getWidth(this.sourceProj_.getExtent());\n        /**\n         * @type {?number}\n         * @private\n         */\n        this.sourceWorldWidth_ = this.sourceProj_.getExtent()\n            ? getWidth(this.sourceProj_.getExtent())\n            : null;\n        /**\n         * @type {?number}\n         * @private\n         */\n        this.targetWorldWidth_ = this.targetProj_.getExtent()\n            ? getWidth(this.targetProj_.getExtent())\n            : null;\n        var destinationTopLeft = getTopLeft(targetExtent);\n        var destinationTopRight = getTopRight(targetExtent);\n        var destinationBottomRight = getBottomRight(targetExtent);\n        var destinationBottomLeft = getBottomLeft(targetExtent);\n        var sourceTopLeft = this.transformInv_(destinationTopLeft);\n        var sourceTopRight = this.transformInv_(destinationTopRight);\n        var sourceBottomRight = this.transformInv_(destinationBottomRight);\n        var sourceBottomLeft = this.transformInv_(destinationBottomLeft);\n        /*\n         * The maxSubdivision controls how many splittings of the target area can\n         * be done. The idea here is to do a linear mapping of the target areas\n         * but the actual overal reprojection (can be) extremely non-linear. The\n         * default value of MAX_SUBDIVISION was chosen based on mapping a 256x256\n         * tile size. However this function is also called to remap canvas rendered\n         * layers which can be much larger. This calculation increases the maxSubdivision\n         * value by the right factor so that each 256x256 pixel area has\n         * MAX_SUBDIVISION divisions.\n         */\n        var maxSubdivision = MAX_SUBDIVISION +\n            (opt_destinationResolution\n                ? Math.max(0, Math.ceil(log2(getArea(targetExtent) /\n                    (opt_destinationResolution *\n                        opt_destinationResolution *\n                        256 *\n                        256))))\n                : 0);\n        this.addQuad_(destinationTopLeft, destinationTopRight, destinationBottomRight, destinationBottomLeft, sourceTopLeft, sourceTopRight, sourceBottomRight, sourceBottomLeft, maxSubdivision);\n        if (this.wrapsXInSource_) {\n            var leftBound_1 = Infinity;\n            this.triangles_.forEach(function (triangle, i, arr) {\n                leftBound_1 = Math.min(leftBound_1, triangle.source[0][0], triangle.source[1][0], triangle.source[2][0]);\n            });\n            // Shift triangles to be as close to `leftBound` as possible\n            // (if the distance is more than `worldWidth / 2` it can be closer.\n            this.triangles_.forEach(function (triangle) {\n                if (Math.max(triangle.source[0][0], triangle.source[1][0], triangle.source[2][0]) -\n                    leftBound_1 >\n                    this.sourceWorldWidth_ / 2) {\n                    var newTriangle = [\n                        [triangle.source[0][0], triangle.source[0][1]],\n                        [triangle.source[1][0], triangle.source[1][1]],\n                        [triangle.source[2][0], triangle.source[2][1]],\n                    ];\n                    if (newTriangle[0][0] - leftBound_1 > this.sourceWorldWidth_ / 2) {\n                        newTriangle[0][0] -= this.sourceWorldWidth_;\n                    }\n                    if (newTriangle[1][0] - leftBound_1 > this.sourceWorldWidth_ / 2) {\n                        newTriangle[1][0] -= this.sourceWorldWidth_;\n                    }\n                    if (newTriangle[2][0] - leftBound_1 > this.sourceWorldWidth_ / 2) {\n                        newTriangle[2][0] -= this.sourceWorldWidth_;\n                    }\n                    // Rarely (if the extent contains both the dateline and prime meridian)\n                    // the shift can in turn break some triangles.\n                    // Detect this here and don't shift in such cases.\n                    var minX = Math.min(newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n                    var maxX = Math.max(newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n                    if (maxX - minX < this.sourceWorldWidth_ / 2) {\n                        triangle.source = newTriangle;\n                    }\n                }\n            }.bind(this));\n        }\n        transformInvCache = {};\n    }\n    /**\n     * Adds triangle to the triangulation.\n     * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n     * @private\n     */\n    Triangulation.prototype.addTriangle_ = function (a, b, c, aSrc, bSrc, cSrc) {\n        this.triangles_.push({\n            source: [aSrc, bSrc, cSrc],\n            target: [a, b, c],\n        });\n    };\n    /**\n     * Adds quad (points in clock-wise order) to the triangulation\n     * (and reprojects the vertices) if valid.\n     * Performs quad subdivision if needed to increase precision.\n     *\n     * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} d The target d coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} dSrc The source d coordinate.\n     * @param {number} maxSubdivision Maximal allowed subdivision of the quad.\n     * @private\n     */\n    Triangulation.prototype.addQuad_ = function (a, b, c, d, aSrc, bSrc, cSrc, dSrc, maxSubdivision) {\n        var sourceQuadExtent = boundingExtent([aSrc, bSrc, cSrc, dSrc]);\n        var sourceCoverageX = this.sourceWorldWidth_\n            ? getWidth(sourceQuadExtent) / this.sourceWorldWidth_\n            : null;\n        var sourceWorldWidth = /** @type {number} */ (this.sourceWorldWidth_);\n        // when the quad is wrapped in the source projection\n        // it covers most of the projection extent, but not fully\n        var wrapsX = this.sourceProj_.canWrapX() &&\n            sourceCoverageX > 0.5 &&\n            sourceCoverageX < 1;\n        var needsSubdivision = false;\n        if (maxSubdivision > 0) {\n            if (this.targetProj_.isGlobal() && this.targetWorldWidth_) {\n                var targetQuadExtent = boundingExtent([a, b, c, d]);\n                var targetCoverageX = getWidth(targetQuadExtent) / this.targetWorldWidth_;\n                needsSubdivision =\n                    targetCoverageX > MAX_TRIANGLE_WIDTH || needsSubdivision;\n            }\n            if (!wrapsX && this.sourceProj_.isGlobal() && sourceCoverageX) {\n                needsSubdivision =\n                    sourceCoverageX > MAX_TRIANGLE_WIDTH || needsSubdivision;\n            }\n        }\n        if (!needsSubdivision && this.maxSourceExtent_) {\n            if (isFinite(sourceQuadExtent[0]) &&\n                isFinite(sourceQuadExtent[1]) &&\n                isFinite(sourceQuadExtent[2]) &&\n                isFinite(sourceQuadExtent[3])) {\n                if (!intersects(sourceQuadExtent, this.maxSourceExtent_)) {\n                    // whole quad outside source projection extent -> ignore\n                    return;\n                }\n            }\n        }\n        var isNotFinite = 0;\n        if (!needsSubdivision) {\n            if (!isFinite(aSrc[0]) ||\n                !isFinite(aSrc[1]) ||\n                !isFinite(bSrc[0]) ||\n                !isFinite(bSrc[1]) ||\n                !isFinite(cSrc[0]) ||\n                !isFinite(cSrc[1]) ||\n                !isFinite(dSrc[0]) ||\n                !isFinite(dSrc[1])) {\n                if (maxSubdivision > 0) {\n                    needsSubdivision = true;\n                }\n                else {\n                    // It might be the case that only 1 of the points is infinite. In this case\n                    // we can draw a single triangle with the other three points\n                    isNotFinite =\n                        (!isFinite(aSrc[0]) || !isFinite(aSrc[1]) ? 8 : 0) +\n                            (!isFinite(bSrc[0]) || !isFinite(bSrc[1]) ? 4 : 0) +\n                            (!isFinite(cSrc[0]) || !isFinite(cSrc[1]) ? 2 : 0) +\n                            (!isFinite(dSrc[0]) || !isFinite(dSrc[1]) ? 1 : 0);\n                    if (isNotFinite != 1 &&\n                        isNotFinite != 2 &&\n                        isNotFinite != 4 &&\n                        isNotFinite != 8) {\n                        return;\n                    }\n                }\n            }\n        }\n        if (maxSubdivision > 0) {\n            if (!needsSubdivision) {\n                var center = [(a[0] + c[0]) / 2, (a[1] + c[1]) / 2];\n                var centerSrc = this.transformInv_(center);\n                var dx = void 0;\n                if (wrapsX) {\n                    var centerSrcEstimX = (modulo(aSrc[0], sourceWorldWidth) +\n                        modulo(cSrc[0], sourceWorldWidth)) /\n                        2;\n                    dx = centerSrcEstimX - modulo(centerSrc[0], sourceWorldWidth);\n                }\n                else {\n                    dx = (aSrc[0] + cSrc[0]) / 2 - centerSrc[0];\n                }\n                var dy = (aSrc[1] + cSrc[1]) / 2 - centerSrc[1];\n                var centerSrcErrorSquared = dx * dx + dy * dy;\n                needsSubdivision = centerSrcErrorSquared > this.errorThresholdSquared_;\n            }\n            if (needsSubdivision) {\n                if (Math.abs(a[0] - c[0]) <= Math.abs(a[1] - c[1])) {\n                    // split horizontally (top & bottom)\n                    var bc = [(b[0] + c[0]) / 2, (b[1] + c[1]) / 2];\n                    var bcSrc = this.transformInv_(bc);\n                    var da = [(d[0] + a[0]) / 2, (d[1] + a[1]) / 2];\n                    var daSrc = this.transformInv_(da);\n                    this.addQuad_(a, b, bc, da, aSrc, bSrc, bcSrc, daSrc, maxSubdivision - 1);\n                    this.addQuad_(da, bc, c, d, daSrc, bcSrc, cSrc, dSrc, maxSubdivision - 1);\n                }\n                else {\n                    // split vertically (left & right)\n                    var ab = [(a[0] + b[0]) / 2, (a[1] + b[1]) / 2];\n                    var abSrc = this.transformInv_(ab);\n                    var cd = [(c[0] + d[0]) / 2, (c[1] + d[1]) / 2];\n                    var cdSrc = this.transformInv_(cd);\n                    this.addQuad_(a, ab, cd, d, aSrc, abSrc, cdSrc, dSrc, maxSubdivision - 1);\n                    this.addQuad_(ab, b, c, cd, abSrc, bSrc, cSrc, cdSrc, maxSubdivision - 1);\n                }\n                return;\n            }\n        }\n        if (wrapsX) {\n            if (!this.canWrapXInSource_) {\n                return;\n            }\n            this.wrapsXInSource_ = true;\n        }\n        // Exactly zero or one of *Src is not finite\n        // The triangles must have the diagonal line as the first side\n        // This is to allow easy code in reproj.s to make it straight for broken\n        // browsers that can't handle diagonal clipping\n        if ((isNotFinite & 0xb) == 0) {\n            this.addTriangle_(a, c, d, aSrc, cSrc, dSrc);\n        }\n        if ((isNotFinite & 0xe) == 0) {\n            this.addTriangle_(a, c, b, aSrc, cSrc, bSrc);\n        }\n        if (isNotFinite) {\n            // Try the other two triangles\n            if ((isNotFinite & 0xd) == 0) {\n                this.addTriangle_(b, d, a, bSrc, dSrc, aSrc);\n            }\n            if ((isNotFinite & 0x7) == 0) {\n                this.addTriangle_(b, d, c, bSrc, dSrc, cSrc);\n            }\n        }\n    };\n    /**\n     * Calculates extent of the `source` coordinates from all the triangles.\n     *\n     * @return {import(\"../extent.js\").Extent} Calculated extent.\n     */\n    Triangulation.prototype.calculateSourceExtent = function () {\n        var extent = createEmpty();\n        this.triangles_.forEach(function (triangle, i, arr) {\n            var src = triangle.source;\n            extendCoordinate(extent, src[0]);\n            extendCoordinate(extent, src[1]);\n            extendCoordinate(extent, src[2]);\n        });\n        return extent;\n    };\n    /**\n     * @return {Array<Triangle>} Array of the calculated triangles.\n     */\n    Triangulation.prototype.getTriangles = function () {\n        return this.triangles_;\n    };\n    return Triangulation;\n}());\nexport default Triangulation;\n//# sourceMappingURL=Triangulation.js.map","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n    /**\n     * A true single click with no dragging and no double click. Note that this\n     * event is delayed by 250 ms to ensure that it is not a double click.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n     * @api\n     */\n    SINGLECLICK: 'singleclick',\n    /**\n     * A click with no dragging. A double click will fire two of this.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n     * @api\n     */\n    CLICK: EventType.CLICK,\n    /**\n     * A true double click, with no dragging.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n     * @api\n     */\n    DBLCLICK: EventType.DBLCLICK,\n    /**\n     * Triggered when a pointer is dragged.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n     * @api\n     */\n    POINTERDRAG: 'pointerdrag',\n    /**\n     * Triggered when a pointer is moved. Note that on touch devices this is\n     * triggered when the map is panned, so is not the same as mousemove.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n     * @api\n     */\n    POINTERMOVE: 'pointermove',\n    POINTERDOWN: 'pointerdown',\n    POINTERUP: 'pointerup',\n    POINTEROVER: 'pointerover',\n    POINTEROUT: 'pointerout',\n    POINTERENTER: 'pointerenter',\n    POINTERLEAVE: 'pointerleave',\n    POINTERCANCEL: 'pointercancel',\n};\n/***\n * @typedef {'singleclick'|'click'|'dblclick'|'pointerdrag'|'pointermove'} Types\n */\n//# sourceMappingURL=MapBrowserEventType.js.map","/**\n * @module ol/CollectionEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when an item is added to the collection.\n     * @event module:ol/Collection.CollectionEvent#add\n     * @api\n     */\n    ADD: 'add',\n    /**\n     * Triggered when an item is removed from the collection.\n     * @event module:ol/Collection.CollectionEvent#remove\n     * @api\n     */\n    REMOVE: 'remove',\n};\n//# sourceMappingURL=CollectionEventType.js.map","/**\n * @module ol/geom/flat/inflate\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>} [opt_coordinates] Coordinates.\n * @return {Array<import(\"../../coordinate.js\").Coordinate>} Coordinates.\n */\nexport function inflateCoordinates(flatCoordinates, offset, end, stride, opt_coordinates) {\n    var coordinates = opt_coordinates !== undefined ? opt_coordinates : [];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        coordinates[i++] = flatCoordinates.slice(j, j + stride);\n    }\n    coordinates.length = i;\n    return coordinates;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>} [opt_coordinatess] Coordinatess.\n * @return {Array<Array<import(\"../../coordinate.js\").Coordinate>>} Coordinatess.\n */\nexport function inflateCoordinatesArray(flatCoordinates, offset, ends, stride, opt_coordinatess) {\n    var coordinatess = opt_coordinatess !== undefined ? opt_coordinatess : [];\n    var i = 0;\n    for (var j = 0, jj = ends.length; j < jj; ++j) {\n        var end = ends[j];\n        coordinatess[i++] = inflateCoordinates(flatCoordinates, offset, end, stride, coordinatess[i]);\n        offset = end;\n    }\n    coordinatess.length = i;\n    return coordinatess;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} [opt_coordinatesss]\n *     Coordinatesss.\n * @return {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} Coordinatesss.\n */\nexport function inflateMultiCoordinatesArray(flatCoordinates, offset, endss, stride, opt_coordinatesss) {\n    var coordinatesss = opt_coordinatesss !== undefined ? opt_coordinatesss : [];\n    var i = 0;\n    for (var j = 0, jj = endss.length; j < jj; ++j) {\n        var ends = endss[j];\n        coordinatesss[i++] = inflateCoordinatesArray(flatCoordinates, offset, ends, stride, coordinatesss[i]);\n        offset = ends[ends.length - 1];\n    }\n    coordinatesss.length = i;\n    return coordinatesss;\n}\n//# sourceMappingURL=inflate.js.map","/**\n * @module ol/extent/Relationship\n */\n/**\n * Relationship to an extent.\n * @enum {number}\n */\nexport default {\n    UNKNOWN: 0,\n    INTERSECTING: 1,\n    ABOVE: 2,\n    RIGHT: 4,\n    BELOW: 8,\n    LEFT: 16,\n};\n//# sourceMappingURL=Relationship.js.map","/**\n * @module ol/geom/flat/reverse\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nexport function coordinates(flatCoordinates, offset, end, stride) {\n    while (offset < end - stride) {\n        for (var i = 0; i < stride; ++i) {\n            var tmp = flatCoordinates[offset + i];\n            flatCoordinates[offset + i] = flatCoordinates[end - stride + i];\n            flatCoordinates[end - stride + i] = tmp;\n        }\n        offset += stride;\n        end -= stride;\n    }\n}\n//# sourceMappingURL=reverse.js.map","/**\n * @module ol/geom/flat/orient\n */\nimport { coordinates as reverseCoordinates } from './reverse.js';\n/**\n * Is the linear ring oriented clockwise in a coordinate system with a bottom-left\n * coordinate origin? For a coordinate system with a top-left coordinate origin,\n * the ring's orientation is clockwise when this function returns false.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} Is clockwise.\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n    // https://stackoverflow.com/q/1165647/clockwise-method#1165943\n    // https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogrlinearring.cpp\n    var edge = 0;\n    var x1 = flatCoordinates[end - stride];\n    var y1 = flatCoordinates[end - stride + 1];\n    for (; offset < end; offset += stride) {\n        var x2 = flatCoordinates[offset];\n        var y2 = flatCoordinates[offset + 1];\n        edge += (x2 - x1) * (y2 + y1);\n        x1 = x2;\n        y1 = y2;\n    }\n    return edge === 0 ? undefined : edge > 0;\n}\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [opt_right] Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingsAreOriented(flatCoordinates, offset, ends, stride, opt_right) {\n    var right = opt_right !== undefined ? opt_right : false;\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        var isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride);\n        if (i === 0) {\n            if ((right && isClockwise) || (!right && !isClockwise)) {\n                return false;\n            }\n        }\n        else {\n            if ((right && !isClockwise) || (!right && isClockwise)) {\n                return false;\n            }\n        }\n        offset = end;\n    }\n    return true;\n}\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [opt_right] Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingssAreOriented(flatCoordinates, offset, endss, stride, opt_right) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        if (!linearRingsAreOriented(flatCoordinates, offset, ends, stride, opt_right)) {\n            return false;\n        }\n        if (ends.length) {\n            offset = ends[ends.length - 1];\n        }\n    }\n    return true;\n}\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {boolean} [opt_right] Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRings(flatCoordinates, offset, ends, stride, opt_right) {\n    var right = opt_right !== undefined ? opt_right : false;\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        var isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride);\n        var reverse = i === 0\n            ? (right && isClockwise) || (!right && !isClockwise)\n            : (right && !isClockwise) || (!right && isClockwise);\n        if (reverse) {\n            reverseCoordinates(flatCoordinates, offset, end, stride);\n        }\n        offset = end;\n    }\n    return offset;\n}\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [opt_right] Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRingsArray(flatCoordinates, offset, endss, stride, opt_right) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        offset = orientLinearRings(flatCoordinates, offset, endss[i], stride, opt_right);\n    }\n    return offset;\n}\n/**\n * Return a two-dimensional endss\n * @param {Array<number>} flatCoordinates Flat coordinates\n * @param {Array<number>} ends Linear ring end indexes\n * @return {Array<Array<number>>} Two dimensional endss array that can\n * be used to contruct a MultiPolygon\n */\nexport function inflateEnds(flatCoordinates, ends) {\n    var endss = [];\n    var offset = 0;\n    var prevEndIndex = 0;\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        // classifies an array of rings into polygons with outer rings and holes\n        if (!linearRingIsClockwise(flatCoordinates, offset, end, 2)) {\n            endss.push(ends.slice(prevEndIndex, i + 1));\n        }\n        else {\n            if (endss.length === 0) {\n                continue;\n            }\n            endss[endss.length - 1].push(ends[prevEndIndex]);\n        }\n        prevEndIndex = i + 1;\n        offset = end;\n    }\n    return endss;\n}\n//# sourceMappingURL=orient.js.map","/**\n * @module ol/obj\n */\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n * See https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign.\n *\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport var assign = typeof Object.assign === 'function'\n    ? Object.assign\n    : function (target, var_sources) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n        var output = Object(target);\n        for (var i = 1, ii = arguments.length; i < ii; ++i) {\n            var source = arguments[i];\n            if (source !== undefined && source !== null) {\n                for (var key in source) {\n                    if (source.hasOwnProperty(key)) {\n                        output[key] = source[key];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n    for (var property in object) {\n        delete object[property];\n    }\n}\n/**\n * Polyfill for Object.values().  Get an array of property values from an object.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values\n *\n * @param {!Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport var getValues = typeof Object.values === 'function'\n    ? Object.values\n    : function (object) {\n        var values = [];\n        for (var property in object) {\n            values.push(object[property]);\n        }\n        return values;\n    };\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n    var property;\n    for (property in object) {\n        return false;\n    }\n    return !property;\n}\n//# sourceMappingURL=obj.js.map","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n    if (!assertion) {\n        throw new AssertionError(errorCode);\n    }\n}\n//# sourceMappingURL=asserts.js.map","/**\n * @module ol/layer/Property\n */\n/**\n * @enum {string}\n */\nexport default {\n    OPACITY: 'opacity',\n    VISIBLE: 'visible',\n    EXTENT: 'extent',\n    Z_INDEX: 'zIndex',\n    MAX_RESOLUTION: 'maxResolution',\n    MIN_RESOLUTION: 'minResolution',\n    MAX_ZOOM: 'maxZoom',\n    MIN_ZOOM: 'minZoom',\n    SOURCE: 'source',\n    MAP: 'map',\n};\n//# sourceMappingURL=Property.js.map","/**\n * @module ol/geom/GeometryLayout\n */\n/**\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available. Supported values are `'XY'`,\n * `'XYZ'`, `'XYM'`, `'XYZM'`.\n * @enum {string}\n */\nexport default {\n    XY: 'XY',\n    XYZ: 'XYZ',\n    XYM: 'XYM',\n    XYZM: 'XYZM',\n};\n//# sourceMappingURL=GeometryLayout.js.map","import { WORKER_OFFSCREEN_CANVAS } from './has.js';\n/**\n * @module ol/dom\n */\n//FIXME Move this function to the canvas module\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number} [opt_width] Canvas width.\n * @param {number} [opt_height] Canvas height.\n * @param {Array<HTMLCanvasElement>} [opt_canvasPool] Canvas pool to take existing canvas from.\n * @param {CanvasRenderingContext2DSettings} [opt_Context2DSettings] CanvasRenderingContext2DSettings\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(opt_width, opt_height, opt_canvasPool, opt_Context2DSettings) {\n    /** @type {HTMLCanvasElement|OffscreenCanvas} */\n    var canvas;\n    if (opt_canvasPool && opt_canvasPool.length) {\n        canvas = opt_canvasPool.shift();\n    }\n    else if (WORKER_OFFSCREEN_CANVAS) {\n        canvas = new OffscreenCanvas(opt_width || 300, opt_height || 300);\n    }\n    else {\n        canvas = document.createElement('canvas');\n    }\n    if (opt_width) {\n        canvas.width = opt_width;\n    }\n    if (opt_height) {\n        canvas.height = opt_height;\n    }\n    //FIXME Allow OffscreenCanvasRenderingContext2D as return type\n    return /** @type {CanvasRenderingContext2D} */ (canvas.getContext('2d', opt_Context2DSettings));\n}\n/**\n * Releases canvas memory to avoid exceeding memory limits in Safari.\n * See https://pqina.nl/blog/total-canvas-memory-use-exceeds-the-maximum-limit/\n * @param {CanvasRenderingContext2D} context Context.\n */\nexport function releaseCanvas(context) {\n    var canvas = context.canvas;\n    canvas.width = 1;\n    canvas.height = 1;\n    context.clearRect(0, 0, 1, 1);\n}\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n    var width = element.offsetWidth;\n    var style = getComputedStyle(element);\n    width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n    return width;\n}\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n    var height = element.offsetHeight;\n    var style = getComputedStyle(element);\n    height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n    return height;\n}\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n    var parent = oldNode.parentNode;\n    if (parent) {\n        parent.replaceChild(newNode, oldNode);\n    }\n}\n/**\n * @param {Node} node The node to remove.\n * @return {Node|null} The node that was removed or null.\n */\nexport function removeNode(node) {\n    return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n    while (node.lastChild) {\n        node.removeChild(node.lastChild);\n    }\n}\n/**\n * Transform the children of a parent node so they match the\n * provided list of children.  This function aims to efficiently\n * remove, add, and reorder child nodes while maintaining a simple\n * implementation (it is not guaranteed to minimize DOM operations).\n * @param {Node} node The parent node whose children need reworking.\n * @param {Array<Node>} children The desired children.\n */\nexport function replaceChildren(node, children) {\n    var oldChildren = node.childNodes;\n    for (var i = 0; true; ++i) {\n        var oldChild = oldChildren[i];\n        var newChild = children[i];\n        // check if our work is done\n        if (!oldChild && !newChild) {\n            break;\n        }\n        // check if children match\n        if (oldChild === newChild) {\n            continue;\n        }\n        // check if a new child needs to be added\n        if (!oldChild) {\n            node.appendChild(newChild);\n            continue;\n        }\n        // check if an old child needs to be removed\n        if (!newChild) {\n            node.removeChild(oldChild);\n            --i;\n            continue;\n        }\n        // reorder\n        node.insertBefore(newChild, oldChild);\n    }\n}\n//# sourceMappingURL=dom.js.map","/**\n * @module ol/ObjectEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a property is changed.\n     * @event module:ol/Object.ObjectEvent#propertychange\n     * @api\n     */\n    PROPERTYCHANGE: 'propertychange',\n};\n/**\n * @typedef {'propertychange'} Types\n */\n//# sourceMappingURL=ObjectEventType.js.map","/**\n * @module ol/string\n */\n/**\n * @param {number} number Number to be formatted\n * @param {number} width The desired width\n * @param {number} [opt_precision] Precision of the output string (i.e. number of decimal places)\n * @return {string} Formatted string\n */\nexport function padNumber(number, width, opt_precision) {\n    var numberString = opt_precision !== undefined ? number.toFixed(opt_precision) : '' + number;\n    var decimal = numberString.indexOf('.');\n    decimal = decimal === -1 ? numberString.length : decimal;\n    return decimal > width\n        ? numberString\n        : new Array(1 + width - decimal).join('0') + numberString;\n}\n/**\n * Adapted from https://github.com/omichelsen/compare-versions/blob/master/index.js\n * @param {string|number} v1 First version\n * @param {string|number} v2 Second version\n * @return {number} Value\n */\nexport function compareVersions(v1, v2) {\n    var s1 = ('' + v1).split('.');\n    var s2 = ('' + v2).split('.');\n    for (var i = 0; i < Math.max(s1.length, s2.length); i++) {\n        var n1 = parseInt(s1[i] || '0', 10);\n        var n2 = parseInt(s2[i] || '0', 10);\n        if (n1 > n2) {\n            return 1;\n        }\n        if (n2 > n1) {\n            return -1;\n        }\n    }\n    return 0;\n}\n//# sourceMappingURL=string.js.map","/**\n * @module ol/render/canvas\n */\nimport BaseObject from '../Object.js';\nimport EventTarget from '../events/Target.js';\nimport { WORKER_OFFSCREEN_CANVAS } from '../has.js';\nimport { clear } from '../obj.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { getFontParameters } from '../css.js';\n/**\n * @typedef {'Circle' | 'Image' | 'LineString' | 'Polygon' | 'Text' | 'Default'} BuilderType\n */\n/**\n * @typedef {Object} FillState\n * @property {import(\"../colorlike.js\").ColorLike} fillStyle FillStyle.\n */\n/**\n * @typedef Label\n * @property {number} width Width.\n * @property {number} height Height.\n * @property {Array<string|number>} contextInstructions ContextInstructions.\n */\n/**\n * @typedef {Object} FillStrokeState\n * @property {import(\"../colorlike.js\").ColorLike} [currentFillStyle] Current FillStyle.\n * @property {import(\"../colorlike.js\").ColorLike} [currentStrokeStyle] Current StrokeStyle.\n * @property {CanvasLineCap} [currentLineCap] Current LineCap.\n * @property {Array<number>} currentLineDash Current LineDash.\n * @property {number} [currentLineDashOffset] Current LineDashOffset.\n * @property {CanvasLineJoin} [currentLineJoin] Current LineJoin.\n * @property {number} [currentLineWidth] Current LineWidth.\n * @property {number} [currentMiterLimit] Current MiterLimit.\n * @property {number} [lastStroke] Last stroke.\n * @property {import(\"../colorlike.js\").ColorLike} [fillStyle] FillStyle.\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle] StrokeStyle.\n * @property {CanvasLineCap} [lineCap] LineCap.\n * @property {Array<number>} lineDash LineDash.\n * @property {number} [lineDashOffset] LineDashOffset.\n * @property {CanvasLineJoin} [lineJoin] LineJoin.\n * @property {number} [lineWidth] LineWidth.\n * @property {number} [miterLimit] MiterLimit.\n */\n/**\n * @typedef {Object} StrokeState\n * @property {CanvasLineCap} lineCap LineCap.\n * @property {Array<number>} lineDash LineDash.\n * @property {number} lineDashOffset LineDashOffset.\n * @property {CanvasLineJoin} lineJoin LineJoin.\n * @property {number} lineWidth LineWidth.\n * @property {number} miterLimit MiterLimit.\n * @property {import(\"../colorlike.js\").ColorLike} strokeStyle StrokeStyle.\n */\n/**\n * @typedef {Object} TextState\n * @property {string} font Font.\n * @property {string} [textAlign] TextAlign.\n * @property {string} [justify] Justify.\n * @property {string} textBaseline TextBaseline.\n * @property {string} [placement] Placement.\n * @property {number} [maxAngle] MaxAngle.\n * @property {boolean} [overflow] Overflow.\n * @property {import(\"../style/Fill.js\").default} [backgroundFill] BackgroundFill.\n * @property {import(\"../style/Stroke.js\").default} [backgroundStroke] BackgroundStroke.\n * @property {import(\"../size.js\").Size} [scale] Scale.\n * @property {Array<number>} [padding] Padding.\n */\n/**\n * @typedef {Object} SerializableInstructions\n * @property {Array<*>} instructions The rendering instructions.\n * @property {Array<*>} hitDetectionInstructions The rendering hit detection instructions.\n * @property {Array<number>} coordinates The array of all coordinates.\n * @property {!Object<string, TextState>} [textStates] The text states (decluttering).\n * @property {!Object<string, FillState>} [fillStates] The fill states (decluttering).\n * @property {!Object<string, StrokeState>} [strokeStates] The stroke states (decluttering).\n */\n/**\n * @typedef {Object<number, import(\"./canvas/Executor.js\").ReplayImageOrLabelArgs>} DeclutterImageWithText\n */\n/**\n * @const\n * @type {string}\n */\nexport var defaultFont = '10px sans-serif';\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport var defaultFillStyle = '#000';\n/**\n * @const\n * @type {CanvasLineCap}\n */\nexport var defaultLineCap = 'round';\n/**\n * @const\n * @type {Array<number>}\n */\nexport var defaultLineDash = [];\n/**\n * @const\n * @type {number}\n */\nexport var defaultLineDashOffset = 0;\n/**\n * @const\n * @type {CanvasLineJoin}\n */\nexport var defaultLineJoin = 'round';\n/**\n * @const\n * @type {number}\n */\nexport var defaultMiterLimit = 10;\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport var defaultStrokeStyle = '#000';\n/**\n * @const\n * @type {string}\n */\nexport var defaultTextAlign = 'center';\n/**\n * @const\n * @type {string}\n */\nexport var defaultTextBaseline = 'middle';\n/**\n * @const\n * @type {Array<number>}\n */\nexport var defaultPadding = [0, 0, 0, 0];\n/**\n * @const\n * @type {number}\n */\nexport var defaultLineWidth = 1;\n/**\n * @type {BaseObject}\n */\nexport var checkedFonts = new BaseObject();\n/**\n * The label cache for text rendering. To change the default cache size of 2048\n * entries, use {@link module:ol/structs/LRUCache~LRUCache#setSize cache.setSize()}.\n * Deprecated - there is no label cache any more.\n * @type {?}\n * @api\n * @deprecated\n */\nexport var labelCache = new EventTarget();\nlabelCache.setSize = function () {\n    console.warn('labelCache is deprecated.'); //eslint-disable-line\n};\n/**\n * @type {CanvasRenderingContext2D}\n */\nvar measureContext = null;\n/**\n * @type {string}\n */\nvar measureFont;\n/**\n * @type {!Object<string, number>}\n */\nexport var textHeights = {};\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport var registerFont = (function () {\n    var retries = 100;\n    var size = '32px ';\n    var referenceFonts = ['monospace', 'serif'];\n    var len = referenceFonts.length;\n    var text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n    var interval, referenceWidth;\n    /**\n     * @param {string} fontStyle Css font-style\n     * @param {string} fontWeight Css font-weight\n     * @param {*} fontFamily Css font-family\n     * @return {boolean} Font with style and weight is available\n     */\n    function isAvailable(fontStyle, fontWeight, fontFamily) {\n        var available = true;\n        for (var i = 0; i < len; ++i) {\n            var referenceFont = referenceFonts[i];\n            referenceWidth = measureTextWidth(fontStyle + ' ' + fontWeight + ' ' + size + referenceFont, text);\n            if (fontFamily != referenceFont) {\n                var width = measureTextWidth(fontStyle +\n                    ' ' +\n                    fontWeight +\n                    ' ' +\n                    size +\n                    fontFamily +\n                    ',' +\n                    referenceFont, text);\n                // If width and referenceWidth are the same, then the fallback was used\n                // instead of the font we wanted, so the font is not available.\n                available = available && width != referenceWidth;\n            }\n        }\n        if (available) {\n            return true;\n        }\n        return false;\n    }\n    function check() {\n        var done = true;\n        var fonts = checkedFonts.getKeys();\n        for (var i = 0, ii = fonts.length; i < ii; ++i) {\n            var font = fonts[i];\n            if (checkedFonts.get(font) < retries) {\n                if (isAvailable.apply(this, font.split('\\n'))) {\n                    clear(textHeights);\n                    // Make sure that loaded fonts are picked up by Safari\n                    measureContext = null;\n                    measureFont = undefined;\n                    checkedFonts.set(font, retries);\n                }\n                else {\n                    checkedFonts.set(font, checkedFonts.get(font) + 1, true);\n                    done = false;\n                }\n            }\n        }\n        if (done) {\n            clearInterval(interval);\n            interval = undefined;\n        }\n    }\n    return function (fontSpec) {\n        var font = getFontParameters(fontSpec);\n        if (!font) {\n            return;\n        }\n        var families = font.families;\n        for (var i = 0, ii = families.length; i < ii; ++i) {\n            var family = families[i];\n            var key = font.style + '\\n' + font.weight + '\\n' + family;\n            if (checkedFonts.get(key) === undefined) {\n                checkedFonts.set(key, retries, true);\n                if (!isAvailable(font.style, font.weight, family)) {\n                    checkedFonts.set(key, 0, true);\n                    if (interval === undefined) {\n                        interval = setInterval(check, 32);\n                    }\n                }\n            }\n        }\n    };\n})();\n/**\n * @param {string} font Font to use for measuring.\n * @return {import(\"../size.js\").Size} Measurement.\n */\nexport var measureTextHeight = (function () {\n    /**\n     * @type {HTMLDivElement}\n     */\n    var measureElement;\n    return function (fontSpec) {\n        var height = textHeights[fontSpec];\n        if (height == undefined) {\n            if (WORKER_OFFSCREEN_CANVAS) {\n                var font = getFontParameters(fontSpec);\n                var metrics = measureText(fontSpec, 'g');\n                var lineHeight = isNaN(Number(font.lineHeight))\n                    ? 1.2\n                    : Number(font.lineHeight);\n                height =\n                    lineHeight *\n                        (metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent);\n            }\n            else {\n                if (!measureElement) {\n                    measureElement = document.createElement('div');\n                    measureElement.innerHTML = 'M';\n                    measureElement.style.minHeight = '0';\n                    measureElement.style.maxHeight = 'none';\n                    measureElement.style.height = 'auto';\n                    measureElement.style.padding = '0';\n                    measureElement.style.border = 'none';\n                    measureElement.style.position = 'absolute';\n                    measureElement.style.display = 'block';\n                    measureElement.style.left = '-99999px';\n                }\n                measureElement.style.font = fontSpec;\n                document.body.appendChild(measureElement);\n                height = measureElement.offsetHeight;\n                document.body.removeChild(measureElement);\n            }\n            textHeights[fontSpec] = height;\n        }\n        return height;\n    };\n})();\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {TextMetrics} Text metrics.\n */\nfunction measureText(font, text) {\n    if (!measureContext) {\n        measureContext = createCanvasContext2D(1, 1);\n    }\n    if (font != measureFont) {\n        measureContext.font = font;\n        measureFont = measureContext.font;\n    }\n    return measureContext.measureText(text);\n}\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n    return measureText(font, text).width;\n}\n/**\n * Measure text width using a cache.\n * @param {string} font The font.\n * @param {string} text The text to measure.\n * @param {Object<string, number>} cache A lookup of cached widths by text.\n * @return {number} The text width.\n */\nexport function measureAndCacheTextWidth(font, text, cache) {\n    if (text in cache) {\n        return cache[text];\n    }\n    var width = text\n        .split('\\n')\n        .reduce(function (prev, curr) { return Math.max(prev, measureTextWidth(font, curr)); }, 0);\n    cache[text] = width;\n    return width;\n}\n/**\n * @param {TextState} baseStyle Base style.\n * @param {Array<string>} chunks Text chunks to measure.\n * @return {{width: number, height: number, widths: Array<number>, heights: Array<number>, lineWidths: Array<number>}}} Text metrics.\n */\nexport function getTextDimensions(baseStyle, chunks) {\n    var widths = [];\n    var heights = [];\n    var lineWidths = [];\n    var width = 0;\n    var lineWidth = 0;\n    var height = 0;\n    var lineHeight = 0;\n    for (var i = 0, ii = chunks.length; i <= ii; i += 2) {\n        var text = chunks[i];\n        if (text === '\\n' || i === ii) {\n            width = Math.max(width, lineWidth);\n            lineWidths.push(lineWidth);\n            lineWidth = 0;\n            height += lineHeight;\n            continue;\n        }\n        var font = chunks[i + 1] || baseStyle.font;\n        var currentWidth = measureTextWidth(font, text);\n        widths.push(currentWidth);\n        lineWidth += currentWidth;\n        var currentHeight = measureTextHeight(font);\n        heights.push(currentHeight);\n        lineHeight = Math.max(lineHeight, currentHeight);\n    }\n    return { width: width, height: height, widths: widths, heights: heights, lineWidths: lineWidths };\n}\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n    if (rotation !== 0) {\n        context.translate(offsetX, offsetY);\n        context.rotate(rotation);\n        context.translate(-offsetX, -offsetY);\n    }\n}\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {import(\"../transform.js\").Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {Label|HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} labelOrImage Label.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {import(\"../size.js\").Size} scale Scale.\n */\nexport function drawImageOrLabel(context, transform, opacity, labelOrImage, originX, originY, w, h, x, y, scale) {\n    context.save();\n    if (opacity !== 1) {\n        context.globalAlpha *= opacity;\n    }\n    if (transform) {\n        context.setTransform.apply(context, transform);\n    }\n    if ( /** @type {*} */(labelOrImage).contextInstructions) {\n        // label\n        context.translate(x, y);\n        context.scale(scale[0], scale[1]);\n        executeLabelInstructions(/** @type {Label} */ (labelOrImage), context);\n    }\n    else if (scale[0] < 0 || scale[1] < 0) {\n        // flipped image\n        context.translate(x, y);\n        context.scale(scale[0], scale[1]);\n        context.drawImage(\n        /** @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} */ (labelOrImage), originX, originY, w, h, 0, 0, w, h);\n    }\n    else {\n        // if image not flipped translate and scale can be avoided\n        context.drawImage(\n        /** @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} */ (labelOrImage), originX, originY, w, h, x, y, w * scale[0], h * scale[1]);\n    }\n    context.restore();\n}\n/**\n * @param {Label} label Label.\n * @param {CanvasRenderingContext2D} context Context.\n */\nfunction executeLabelInstructions(label, context) {\n    var contextInstructions = label.contextInstructions;\n    for (var i = 0, ii = contextInstructions.length; i < ii; i += 2) {\n        if (Array.isArray(contextInstructions[i + 1])) {\n            context[contextInstructions[i]].apply(context, contextInstructions[i + 1]);\n        }\n        else {\n            context[contextInstructions[i]] = contextInstructions[i + 1];\n        }\n    }\n}\n//# sourceMappingURL=canvas.js.map","/**\n * @module ol/render/Event\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Event from '../events/Event.js';\nvar RenderEvent = /** @class */ (function (_super) {\n    __extends(RenderEvent, _super);\n    /**\n     * @param {import(\"./EventType.js\").default} type Type.\n     * @param {import(\"../transform.js\").Transform} [opt_inversePixelTransform] Transform for\n     *     CSS pixels to rendered pixels.\n     * @param {import(\"../PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     * @param {?(CanvasRenderingContext2D|WebGLRenderingContext)} [opt_context] Context.\n     */\n    function RenderEvent(type, opt_inversePixelTransform, opt_frameState, opt_context) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * Transform from CSS pixels (relative to the top-left corner of the map viewport)\n         * to rendered pixels on this event's `context`. Only available when a Canvas renderer is used, null otherwise.\n         * @type {import(\"../transform.js\").Transform|undefined}\n         * @api\n         */\n        _this.inversePixelTransform = opt_inversePixelTransform;\n        /**\n         * An object representing the current render frame state.\n         * @type {import(\"../PluggableMap.js\").FrameState|undefined}\n         * @api\n         */\n        _this.frameState = opt_frameState;\n        /**\n         * Canvas context. Not available when the event is dispatched by the map. For Canvas 2D layers,\n         * the context will be the 2D rendering context.  For WebGL layers, the context will be the WebGL\n         * context.\n         * @type {CanvasRenderingContext2D|WebGLRenderingContext|undefined}\n         * @api\n         */\n        _this.context = opt_context;\n        return _this;\n    }\n    return RenderEvent;\n}(Event));\nexport default RenderEvent;\n//# sourceMappingURL=Event.js.map","/**\n * @module ol/renderer/canvas/common\n */\n/**\n * Context options to disable image smoothing.\n * @type {Object}\n */\nexport var IMAGE_SMOOTHING_DISABLED = {\n    imageSmoothingEnabled: false,\n    msImageSmoothingEnabled: false,\n};\n/**\n * Context options to enable image smoothing.\n * @type {Object}\n */\nexport var IMAGE_SMOOTHING_ENABLED = {\n    imageSmoothingEnabled: true,\n    msImageSmoothingEnabled: true,\n};\n//# sourceMappingURL=common.js.map","/**\n * @module ol/extent\n */\nimport Relationship from './extent/Relationship.js';\nimport { assert } from './asserts.js';\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n/**\n * Extent corner.\n * @typedef {'bottom-left' | 'bottom-right' | 'top-left' | 'top-right'} Corner\n */\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n    var extent = createEmpty();\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        extendCoordinate(extent, coordinates[i]);\n    }\n    return extent;\n}\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent} [opt_extent] Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, opt_extent) {\n    var minX = Math.min.apply(null, xs);\n    var minY = Math.min.apply(null, ys);\n    var maxX = Math.max.apply(null, xs);\n    var maxY = Math.max.apply(null, ys);\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n}\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0] - value;\n        opt_extent[1] = extent[1] - value;\n        opt_extent[2] = extent[2] + value;\n        opt_extent[3] = extent[3] + value;\n        return opt_extent;\n    }\n    else {\n        return [\n            extent[0] - value,\n            extent[1] - value,\n            extent[2] + value,\n            extent[3] + value,\n        ];\n    }\n}\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0];\n        opt_extent[1] = extent[1];\n        opt_extent[2] = extent[2];\n        opt_extent[3] = extent[3];\n        return opt_extent;\n    }\n    else {\n        return extent.slice();\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n    var dx, dy;\n    if (x < extent[0]) {\n        dx = extent[0] - x;\n    }\n    else if (extent[2] < x) {\n        dx = x - extent[2];\n    }\n    else {\n        dx = 0;\n    }\n    if (y < extent[1]) {\n        dy = extent[1] - y;\n    }\n    else if (extent[3] < y) {\n        dy = y - extent[3];\n    }\n    else {\n        dy = 0;\n    }\n    return dx * dx + dy * dy;\n}\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n    return containsXY(extent, coordinate[0], coordinate[1]);\n}\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n    return (extent1[0] <= extent2[0] &&\n        extent2[2] <= extent1[2] &&\n        extent1[1] <= extent2[1] &&\n        extent2[3] <= extent1[3]);\n}\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n    return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {import(\"./extent/Relationship.js\").default} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n    var minX = extent[0];\n    var minY = extent[1];\n    var maxX = extent[2];\n    var maxY = extent[3];\n    var x = coordinate[0];\n    var y = coordinate[1];\n    var relationship = Relationship.UNKNOWN;\n    if (x < minX) {\n        relationship = relationship | Relationship.LEFT;\n    }\n    else if (x > maxX) {\n        relationship = relationship | Relationship.RIGHT;\n    }\n    if (y < minY) {\n        relationship = relationship | Relationship.BELOW;\n    }\n    else if (y > maxY) {\n        relationship = relationship | Relationship.ABOVE;\n    }\n    if (relationship === Relationship.UNKNOWN) {\n        relationship = Relationship.INTERSECTING;\n    }\n    return relationship;\n}\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n    return [Infinity, Infinity, -Infinity, -Infinity];\n}\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent} [opt_extent] Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = minX;\n        opt_extent[1] = minY;\n        opt_extent[2] = maxX;\n        opt_extent[3] = maxY;\n        return opt_extent;\n    }\n    else {\n        return [minX, minY, maxX, maxY];\n    }\n}\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(opt_extent) {\n    return createOrUpdate(Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, opt_extent) {\n    var x = coordinate[0];\n    var y = coordinate[1];\n    return createOrUpdate(x, y, x, y, opt_extent);\n}\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendCoordinates(extent, coordinates);\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(flatCoordinates, offset, end, stride, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendRings(extent, rings);\n}\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n    return (extent1[0] == extent2[0] &&\n        extent1[2] == extent2[2] &&\n        extent1[1] == extent2[1] &&\n        extent1[3] == extent2[3]);\n}\n/**\n * Determine if two extents are approximately equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {number} tolerance Tolerance in extent coordinate units.\n * @return {boolean} The two extents differ by less than the tolerance.\n */\nexport function approximatelyEquals(extent1, extent2, tolerance) {\n    return (Math.abs(extent1[0] - extent2[0]) < tolerance &&\n        Math.abs(extent1[2] - extent2[2]) < tolerance &&\n        Math.abs(extent1[1] - extent2[1]) < tolerance &&\n        Math.abs(extent1[3] - extent2[3]) < tolerance);\n}\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n    if (extent2[0] < extent1[0]) {\n        extent1[0] = extent2[0];\n    }\n    if (extent2[2] > extent1[2]) {\n        extent1[2] = extent2[2];\n    }\n    if (extent2[1] < extent1[1]) {\n        extent1[1] = extent2[1];\n    }\n    if (extent2[3] > extent1[3]) {\n        extent1[3] = extent2[3];\n    }\n    return extent1;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n    if (coordinate[0] < extent[0]) {\n        extent[0] = coordinate[0];\n    }\n    if (coordinate[0] > extent[2]) {\n        extent[2] = coordinate[0];\n    }\n    if (coordinate[1] < extent[1]) {\n        extent[1] = coordinate[1];\n    }\n    if (coordinate[1] > extent[3]) {\n        extent[3] = coordinate[1];\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        extendCoordinate(extent, coordinates[i]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n    for (; offset < end; offset += stride) {\n        extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n    for (var i = 0, ii = rings.length; i < ii; ++i) {\n        extendCoordinates(extent, rings[i]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n    extent[0] = Math.min(extent[0], x);\n    extent[1] = Math.min(extent[1], y);\n    extent[2] = Math.max(extent[2], x);\n    extent[3] = Math.max(extent[3], y);\n}\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @return {S|boolean} Value.\n * @template S\n */\nexport function forEachCorner(extent, callback) {\n    var val;\n    val = callback(getBottomLeft(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getBottomRight(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getTopRight(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getTopLeft(extent));\n    if (val) {\n        return val;\n    }\n    return false;\n}\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n    var area = 0;\n    if (!isEmpty(extent)) {\n        area = getWidth(extent) * getHeight(extent);\n    }\n    return area;\n}\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n    return [extent[0], extent[1]];\n}\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n    return [extent[2], extent[1]];\n}\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n    return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {Corner} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n    var coordinate;\n    if (corner === 'bottom-left') {\n        coordinate = getBottomLeft(extent);\n    }\n    else if (corner === 'bottom-right') {\n        coordinate = getBottomRight(extent);\n    }\n    else if (corner === 'top-left') {\n        coordinate = getTopLeft(extent);\n    }\n    else if (corner === 'top-right') {\n        coordinate = getTopRight(extent);\n    }\n    else {\n        assert(false, 13); // Invalid corner\n    }\n    return coordinate;\n}\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n    var minX = Math.min(extent1[0], extent2[0]);\n    var minY = Math.min(extent1[1], extent2[1]);\n    var maxX = Math.max(extent1[2], extent2[2]);\n    var maxY = Math.max(extent1[3], extent2[3]);\n    return (maxX - minX) * (maxY - minY);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent} [opt_extent] Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, opt_extent) {\n    var _a = getRotatedViewport(center, resolution, rotation, size), x0 = _a[0], y0 = _a[1], x1 = _a[2], y1 = _a[3], x2 = _a[4], y2 = _a[5], x3 = _a[6], y3 = _a[7];\n    return createOrUpdate(Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3), Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3), opt_extent);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @return {Array<number>} Linear ring representing the viewport.\n */\nexport function getRotatedViewport(center, resolution, rotation, size) {\n    var dx = (resolution * size[0]) / 2;\n    var dy = (resolution * size[1]) / 2;\n    var cosRotation = Math.cos(rotation);\n    var sinRotation = Math.sin(rotation);\n    var xCos = dx * cosRotation;\n    var xSin = dx * sinRotation;\n    var yCos = dy * cosRotation;\n    var ySin = dy * sinRotation;\n    var x = center[0];\n    var y = center[1];\n    return [\n        x - xCos + ySin,\n        y - xSin - yCos,\n        x - xCos - ySin,\n        y - xSin + yCos,\n        x + xCos - ySin,\n        y + xSin + yCos,\n        x + xCos + ySin,\n        y + xSin - yCos,\n        x - xCos + ySin,\n        y - xSin - yCos,\n    ];\n}\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n    return extent[3] - extent[1];\n}\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n    var intersection = getIntersection(extent1, extent2);\n    return getArea(intersection);\n}\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent} [opt_extent] Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, opt_extent) {\n    var intersection = opt_extent ? opt_extent : createEmpty();\n    if (intersects(extent1, extent2)) {\n        if (extent1[0] > extent2[0]) {\n            intersection[0] = extent1[0];\n        }\n        else {\n            intersection[0] = extent2[0];\n        }\n        if (extent1[1] > extent2[1]) {\n            intersection[1] = extent1[1];\n        }\n        else {\n            intersection[1] = extent2[1];\n        }\n        if (extent1[2] < extent2[2]) {\n            intersection[2] = extent1[2];\n        }\n        else {\n            intersection[2] = extent2[2];\n        }\n        if (extent1[3] < extent2[3]) {\n            intersection[3] = extent1[3];\n        }\n        else {\n            intersection[3] = extent2[3];\n        }\n    }\n    else {\n        createOrUpdateEmpty(intersection);\n    }\n    return intersection;\n}\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n    return getWidth(extent) + getHeight(extent);\n}\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n    return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n    return [extent[0], extent[3]];\n}\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n    return [extent[2], extent[3]];\n}\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n    return extent[2] - extent[0];\n}\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n    return (extent1[0] <= extent2[2] &&\n        extent1[2] >= extent2[0] &&\n        extent1[1] <= extent2[3] &&\n        extent1[3] >= extent2[1]);\n}\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n    return extent[2] < extent[0] || extent[3] < extent[1];\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Extent} [opt_extent] Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0];\n        opt_extent[1] = extent[1];\n        opt_extent[2] = extent[2];\n        opt_extent[3] = extent[3];\n        return opt_extent;\n    }\n    else {\n        return extent;\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n    var deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n    var deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n    extent[0] -= deltaX;\n    extent[2] += deltaX;\n    extent[1] -= deltaY;\n    extent[3] += deltaY;\n}\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n    var intersects = false;\n    var startRel = coordinateRelationship(extent, start);\n    var endRel = coordinateRelationship(extent, end);\n    if (startRel === Relationship.INTERSECTING ||\n        endRel === Relationship.INTERSECTING) {\n        intersects = true;\n    }\n    else {\n        var minX = extent[0];\n        var minY = extent[1];\n        var maxX = extent[2];\n        var maxY = extent[3];\n        var startX = start[0];\n        var startY = start[1];\n        var endX = end[0];\n        var endY = end[1];\n        var slope = (endY - startY) / (endX - startX);\n        var x = void 0, y = void 0;\n        if (!!(endRel & Relationship.ABOVE) && !(startRel & Relationship.ABOVE)) {\n            // potentially intersects top\n            x = endX - (endY - maxY) / slope;\n            intersects = x >= minX && x <= maxX;\n        }\n        if (!intersects &&\n            !!(endRel & Relationship.RIGHT) &&\n            !(startRel & Relationship.RIGHT)) {\n            // potentially intersects right\n            y = endY - (endX - maxX) * slope;\n            intersects = y >= minY && y <= maxY;\n        }\n        if (!intersects &&\n            !!(endRel & Relationship.BELOW) &&\n            !(startRel & Relationship.BELOW)) {\n            // potentially intersects bottom\n            x = endX - (endY - minY) / slope;\n            intersects = x >= minX && x <= maxX;\n        }\n        if (!intersects &&\n            !!(endRel & Relationship.LEFT) &&\n            !(startRel & Relationship.LEFT)) {\n            // potentially intersects left\n            y = endY - (endX - minX) * slope;\n            intersects = y >= minY && y <= maxY;\n        }\n    }\n    return intersects;\n}\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent} [opt_extent] Destination extent.\n * @param {number} [opt_stops] Number of stops per side used for the transform.\n * By default only the corners are used.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, opt_extent, opt_stops) {\n    var coordinates = [];\n    if (opt_stops > 1) {\n        var width = extent[2] - extent[0];\n        var height = extent[3] - extent[1];\n        for (var i = 0; i < opt_stops; ++i) {\n            coordinates.push(extent[0] + (width * i) / opt_stops, extent[1], extent[2], extent[1] + (height * i) / opt_stops, extent[2] - (width * i) / opt_stops, extent[3], extent[0], extent[3] - (height * i) / opt_stops);\n        }\n    }\n    else {\n        coordinates = [\n            extent[0],\n            extent[1],\n            extent[2],\n            extent[1],\n            extent[2],\n            extent[3],\n            extent[0],\n            extent[3],\n        ];\n    }\n    transformFn(coordinates, coordinates, 2);\n    var xs = [];\n    var ys = [];\n    for (var i = 0, l = coordinates.length; i < l; i += 2) {\n        xs.push(coordinates[i]);\n        ys.push(coordinates[i + 1]);\n    }\n    return _boundingExtentXYs(xs, ys, opt_extent);\n}\n/**\n * Modifies the provided extent in-place to be within the real world\n * extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./proj/Projection.js\").default} projection Projection\n * @return {Extent} The extent within the real world extent.\n */\nexport function wrapX(extent, projection) {\n    var projectionExtent = projection.getExtent();\n    var center = getCenter(extent);\n    if (projection.canWrapX() &&\n        (center[0] < projectionExtent[0] || center[0] >= projectionExtent[2])) {\n        var worldWidth = getWidth(projectionExtent);\n        var worldsAway = Math.floor((center[0] - projectionExtent[0]) / worldWidth);\n        var offset = worldsAway * worldWidth;\n        extent[0] -= offset;\n        extent[2] -= offset;\n    }\n    return extent;\n}\n/**\n * Fits the extent to the real world\n *\n * If the extent does not cross the anti meridian, this will return the extent in an array\n * If the extent crosses the anti meridian, the extent will be sliced, so each part fits within the\n * real world\n *\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./proj/Projection.js\").default} projection Projection\n * @return {Array<Extent>} The extent within the real world extent.\n */\nexport function wrapAndSliceX(extent, projection) {\n    if (projection.canWrapX()) {\n        var projectionExtent = projection.getExtent();\n        if (!isFinite(extent[0]) || !isFinite(extent[2])) {\n            return [[projectionExtent[0], extent[1], projectionExtent[2], extent[3]]];\n        }\n        wrapX(extent, projection);\n        var worldWidth = getWidth(projectionExtent);\n        if (getWidth(extent) > worldWidth) {\n            // the extent wraps around on itself\n            return [[projectionExtent[0], extent[1], projectionExtent[2], extent[3]]];\n        }\n        else if (extent[0] < projectionExtent[0]) {\n            // the extent crosses the anti meridian, so it needs to be sliced\n            return [\n                [extent[0] + worldWidth, extent[1], projectionExtent[2], extent[3]],\n                [projectionExtent[0], extent[1], extent[2], extent[3]],\n            ];\n        }\n        else if (extent[2] > projectionExtent[2]) {\n            // the extent crosses the anti meridian, so it needs to be sliced\n            return [\n                [extent[0], extent[1], projectionExtent[2], extent[3]],\n                [projectionExtent[0], extent[1], extent[2] - worldWidth, extent[3]],\n            ];\n        }\n    }\n    return [extent];\n}\n//# sourceMappingURL=extent.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/source/Source\n */\nimport BaseObject from '../Object.js';\nimport { abstract } from '../util.js';\nimport { get as getProjection } from '../proj.js';\n/**\n * @typedef {'undefined' | 'loading' | 'ready' | 'error'} State\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n */\n/**\n * A function that takes a {@link module:ol/PluggableMap~FrameState} and returns a string or\n * an array of strings representing source attributions.\n *\n * @typedef {function(import(\"../PluggableMap.js\").FrameState): (string|Array<string>)} Attribution\n */\n/**\n * A type that can be used to provide attribution information for data sources.\n *\n * It represents either\n * * a simple string (e.g. `' Acme Inc.'`)\n * * an array of simple strings (e.g. `[' Acme Inc.', ' Bacme Inc.']`)\n * * a function that returns a string or array of strings ({@link module:ol/source/Source~Attribution})\n *\n * @typedef {string|Array<string>|Attribution} AttributionLike\n */\n/**\n * @typedef {Object} Options\n * @property {AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {import(\"./Source.js\").State} [state='ready'] State.\n * @property {boolean} [wrapX=false] WrapX.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for {@link module:ol/layer/Layer~Layer} sources.\n *\n * A generic `change` event is triggered when the state of the source changes.\n * @abstract\n * @api\n */\nvar Source = /** @class */ (function (_super) {\n    __extends(Source, _super);\n    /**\n     * @param {Options} options Source options.\n     */\n    function Source(options) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {import(\"../proj/Projection.js\").default|null}\n         */\n        _this.projection = getProjection(options.projection);\n        /**\n         * @private\n         * @type {?Attribution}\n         */\n        _this.attributions_ = adaptAttributions(options.attributions);\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.attributionsCollapsible_ =\n            options.attributionsCollapsible !== undefined\n                ? options.attributionsCollapsible\n                : true;\n        /**\n         * This source is currently loading data. Sources that defer loading to the\n         * map's tile queue never set this to `true`.\n         * @type {boolean}\n         */\n        _this.loading = false;\n        /**\n         * @private\n         * @type {import(\"./Source.js\").State}\n         */\n        _this.state_ = options.state !== undefined ? options.state : 'ready';\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.wrapX_ = options.wrapX !== undefined ? options.wrapX : false;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.interpolate_ = !!options.interpolate;\n        /**\n         * @protected\n         * @type {function(import(\"../View.js\").ViewOptions):void}\n         */\n        _this.viewResolver = null;\n        /**\n         * @protected\n         * @type {function(Error):void}\n         */\n        _this.viewRejector = null;\n        var self = _this;\n        /**\n         * @private\n         * @type {Promise<import(\"../View.js\").ViewOptions>}\n         */\n        _this.viewPromise_ = new Promise(function (resolve, reject) {\n            self.viewResolver = resolve;\n            self.viewRejector = reject;\n        });\n        return _this;\n    }\n    /**\n     * Get the attribution function for the source.\n     * @return {?Attribution} Attribution function.\n     * @api\n     */\n    Source.prototype.getAttributions = function () {\n        return this.attributions_;\n    };\n    /**\n     * @return {boolean} Attributions are collapsible.\n     * @api\n     */\n    Source.prototype.getAttributionsCollapsible = function () {\n        return this.attributionsCollapsible_;\n    };\n    /**\n     * Get the projection of the source.\n     * @return {import(\"../proj/Projection.js\").default|null} Projection.\n     * @api\n     */\n    Source.prototype.getProjection = function () {\n        return this.projection;\n    };\n    /**\n     * @abstract\n     * @return {Array<number>|null} Resolutions.\n     */\n    Source.prototype.getResolutions = function () {\n        return abstract();\n    };\n    /**\n     * @return {Promise<import(\"../View.js\").ViewOptions>} A promise for view-related properties.\n     */\n    Source.prototype.getView = function () {\n        return this.viewPromise_;\n    };\n    /**\n     * Get the state of the source, see {@link import(\"./Source.js\").State} for possible states.\n     * @return {import(\"./Source.js\").State} State.\n     * @api\n     */\n    Source.prototype.getState = function () {\n        return this.state_;\n    };\n    /**\n     * @return {boolean|undefined} Wrap X.\n     */\n    Source.prototype.getWrapX = function () {\n        return this.wrapX_;\n    };\n    /**\n     * @return {boolean} Use linear interpolation when resampling.\n     */\n    Source.prototype.getInterpolate = function () {\n        return this.interpolate_;\n    };\n    /**\n     * Refreshes the source. The source will be cleared, and data from the server will be reloaded.\n     * @api\n     */\n    Source.prototype.refresh = function () {\n        this.changed();\n    };\n    /**\n     * Set the attributions of the source.\n     * @param {AttributionLike|undefined} attributions Attributions.\n     *     Can be passed as `string`, `Array<string>`, {@link module:ol/source/Source~Attribution},\n     *     or `undefined`.\n     * @api\n     */\n    Source.prototype.setAttributions = function (attributions) {\n        this.attributions_ = adaptAttributions(attributions);\n        this.changed();\n    };\n    /**\n     * Set the state of the source.\n     * @param {import(\"./Source.js\").State} state State.\n     */\n    Source.prototype.setState = function (state) {\n        this.state_ = state;\n        this.changed();\n    };\n    return Source;\n}(BaseObject));\n/**\n * Turns the attributions option into an attributions function.\n * @param {AttributionLike|undefined} attributionLike The attribution option.\n * @return {Attribution|null} An attribution function (or null).\n */\nfunction adaptAttributions(attributionLike) {\n    if (!attributionLike) {\n        return null;\n    }\n    if (Array.isArray(attributionLike)) {\n        return function (frameState) {\n            return attributionLike;\n        };\n    }\n    if (typeof attributionLike === 'function') {\n        return attributionLike;\n    }\n    return function (frameState) {\n        return [attributionLike];\n    };\n}\nexport default Source;\n//# sourceMappingURL=Source.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/Control\n */\nimport BaseObject from '../Object.js';\nimport MapEventType from '../MapEventType.js';\nimport { VOID } from '../functions.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport { removeNode } from '../dom.js';\n/**\n * @typedef {Object} Options\n * @property {HTMLElement} [element] The element is the control's\n * container element. This only needs to be specified if you're developing\n * a custom control.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want\n * the control to be rendered outside of the map's viewport.\n */\n/**\n * @classdesc\n * A control is a visible widget with a DOM element in a fixed position on the\n * screen. They can involve user input (buttons), or be informational only;\n * the position is determined using CSS. By default these are placed in the\n * container with CSS class name `ol-overlaycontainer-stopevent`, but can use\n * any outside DOM element.\n *\n * This is the base class for controls. You can use it for simple custom\n * controls by creating the element with listeners, creating an instance:\n * ```js\n * var myControl = new Control({element: myElement});\n * ```\n * and then adding this to the map.\n *\n * The main advantage of having this as a control rather than a simple separate\n * DOM element is that preventing propagation is handled for you. Controls\n * will also be objects in a {@link module:ol/Collection~Collection}, so you can use their methods.\n *\n * You can also extend this base for your own control class. See\n * examples/custom-controls for an example of how to do this.\n *\n * @api\n */\nvar Control = /** @class */ (function (_super) {\n    __extends(Control, _super);\n    /**\n     * @param {Options} options Control options.\n     */\n    function Control(options) {\n        var _this = _super.call(this) || this;\n        var element = options.element;\n        if (element && !options.target && !element.style.pointerEvents) {\n            element.style.pointerEvents = 'auto';\n        }\n        /**\n         * @protected\n         * @type {HTMLElement}\n         */\n        _this.element = element ? element : null;\n        /**\n         * @private\n         * @type {HTMLElement}\n         */\n        _this.target_ = null;\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default|null}\n         */\n        _this.map_ = null;\n        /**\n         * @protected\n         * @type {!Array<import(\"../events.js\").EventsKey>}\n         */\n        _this.listenerKeys = [];\n        if (options.render) {\n            _this.render = options.render;\n        }\n        if (options.target) {\n            _this.setTarget(options.target);\n        }\n        return _this;\n    }\n    /**\n     * Clean up.\n     */\n    Control.prototype.disposeInternal = function () {\n        removeNode(this.element);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Get the map associated with this control.\n     * @return {import(\"../PluggableMap.js\").default|null} Map.\n     * @api\n     */\n    Control.prototype.getMap = function () {\n        return this.map_;\n    };\n    /**\n     * Remove the control from its current map and attach it to the new map.\n     * Pass `null` to just remove the control from the current map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default|null} map Map.\n     * @api\n     */\n    Control.prototype.setMap = function (map) {\n        if (this.map_) {\n            removeNode(this.element);\n        }\n        for (var i = 0, ii = this.listenerKeys.length; i < ii; ++i) {\n            unlistenByKey(this.listenerKeys[i]);\n        }\n        this.listenerKeys.length = 0;\n        this.map_ = map;\n        if (map) {\n            var target = this.target_\n                ? this.target_\n                : map.getOverlayContainerStopEvent();\n            target.appendChild(this.element);\n            if (this.render !== VOID) {\n                this.listenerKeys.push(listen(map, MapEventType.POSTRENDER, this.render, this));\n            }\n            map.render();\n        }\n    };\n    /**\n     * Renders the control.\n     * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n     * @api\n     */\n    Control.prototype.render = function (mapEvent) { };\n    /**\n     * This function is used to set a target element for the control. It has no\n     * effect if it is called after the control has been added to the map (i.e.\n     * after `setMap` is called on the control). If no `target` is set in the\n     * options passed to the control constructor and if `setTarget` is not called\n     * then the control is added to the map's overlay container.\n     * @param {HTMLElement|string} target Target.\n     * @api\n     */\n    Control.prototype.setTarget = function (target) {\n        this.target_ =\n            typeof target === 'string' ? document.getElementById(target) : target;\n    };\n    return Control;\n}(BaseObject));\nexport default Control;\n//# sourceMappingURL=Control.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/Geometry\n */\nimport BaseObject from '../Object.js';\nimport Units from '../proj/Units.js';\nimport { abstract } from '../util.js';\nimport { compose as composeTransform, create as createTransform, } from '../transform.js';\nimport { createEmpty, createOrUpdateEmpty, getHeight, returnOrUpdate, } from '../extent.js';\nimport { get as getProjection, getTransform } from '../proj.js';\nimport { memoizeOne } from '../functions.js';\nimport { transform2D } from './flat/transform.js';\n/**\n * @typedef {'Point' | 'LineString' | 'LinearRing' | 'Polygon' | 'MultiPoint' | 'MultiLineString' | 'MultiPolygon' | 'GeometryCollection' | 'Circle'} Type\n * The geometry type.  One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, or `'Circle'`.\n */\n/**\n * @type {import(\"../transform.js\").Transform}\n */\nvar tmpTransform = createTransform();\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for vector geometries.\n *\n * To get notified of changes to the geometry, register a listener for the\n * generic `change` event on your geometry instance.\n *\n * @abstract\n * @api\n */\nvar Geometry = /** @class */ (function (_super) {\n    __extends(Geometry, _super);\n    function Geometry() {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        _this.extent_ = createEmpty();\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.extentRevision_ = -1;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.simplifiedGeometryRevision = 0;\n        /**\n         * Get a transformed and simplified version of the geometry.\n         * @abstract\n         * @param {number} revision The geometry revision.\n         * @param {number} squaredTolerance Squared tolerance.\n         * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Optional transform function.\n         * @return {Geometry} Simplified geometry.\n         */\n        _this.simplifyTransformedInternal = memoizeOne(function (revision, squaredTolerance, opt_transform) {\n            if (!opt_transform) {\n                return this.getSimplifiedGeometry(squaredTolerance);\n            }\n            var clone = this.clone();\n            clone.applyTransform(opt_transform);\n            return clone.getSimplifiedGeometry(squaredTolerance);\n        });\n        return _this;\n    }\n    /**\n     * Get a transformed and simplified version of the geometry.\n     * @abstract\n     * @param {number} squaredTolerance Squared tolerance.\n     * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Optional transform function.\n     * @return {Geometry} Simplified geometry.\n     */\n    Geometry.prototype.simplifyTransformed = function (squaredTolerance, opt_transform) {\n        return this.simplifyTransformedInternal(this.getRevision(), squaredTolerance, opt_transform);\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @abstract\n     * @return {!Geometry} Clone.\n     */\n    Geometry.prototype.clone = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    Geometry.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        return abstract();\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @return {boolean} Contains (x, y).\n     */\n    Geometry.prototype.containsXY = function (x, y) {\n        var coord = this.getClosestPoint([x, y]);\n        return coord[0] === x && coord[1] === y;\n    };\n    /**\n     * Return the closest point of the geometry to the passed point as\n     * {@link module:ol/coordinate~Coordinate coordinate}.\n     * @param {import(\"../coordinate.js\").Coordinate} point Point.\n     * @param {import(\"../coordinate.js\").Coordinate} [opt_closestPoint] Closest point.\n     * @return {import(\"../coordinate.js\").Coordinate} Closest point.\n     * @api\n     */\n    Geometry.prototype.getClosestPoint = function (point, opt_closestPoint) {\n        var closestPoint = opt_closestPoint ? opt_closestPoint : [NaN, NaN];\n        this.closestPointXY(point[0], point[1], closestPoint, Infinity);\n        return closestPoint;\n    };\n    /**\n     * Returns true if this geometry includes the specified coordinate. If the\n     * coordinate is on the boundary of the geometry, returns false.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains coordinate.\n     * @api\n     */\n    Geometry.prototype.intersectsCoordinate = function (coordinate) {\n        return this.containsXY(coordinate[0], coordinate[1]);\n    };\n    /**\n     * @abstract\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @protected\n     * @return {import(\"../extent.js\").Extent} extent Extent.\n     */\n    Geometry.prototype.computeExtent = function (extent) {\n        return abstract();\n    };\n    /**\n     * Get the extent of the geometry.\n     * @param {import(\"../extent.js\").Extent} [opt_extent] Extent.\n     * @return {import(\"../extent.js\").Extent} extent Extent.\n     * @api\n     */\n    Geometry.prototype.getExtent = function (opt_extent) {\n        if (this.extentRevision_ != this.getRevision()) {\n            var extent = this.computeExtent(this.extent_);\n            if (isNaN(extent[0]) || isNaN(extent[1])) {\n                createOrUpdateEmpty(extent);\n            }\n            this.extentRevision_ = this.getRevision();\n        }\n        return returnOrUpdate(this.extent_, opt_extent);\n    };\n    /**\n     * Rotate the geometry around a given coordinate. This modifies the geometry\n     * coordinates in place.\n     * @abstract\n     * @param {number} angle Rotation angle in radians.\n     * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n     * @api\n     */\n    Geometry.prototype.rotate = function (angle, anchor) {\n        abstract();\n    };\n    /**\n     * Scale the geometry (with an optional origin).  This modifies the geometry\n     * coordinates in place.\n     * @abstract\n     * @param {number} sx The scaling factor in the x-direction.\n     * @param {number} [opt_sy] The scaling factor in the y-direction (defaults to sx).\n     * @param {import(\"../coordinate.js\").Coordinate} [opt_anchor] The scale origin (defaults to the center\n     *     of the geometry extent).\n     * @api\n     */\n    Geometry.prototype.scale = function (sx, opt_sy, opt_anchor) {\n        abstract();\n    };\n    /**\n     * Create a simplified version of this geometry.  For linestrings, this uses\n     * the [Douglas Peucker](https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm)\n     * algorithm.  For polygons, a quantization-based\n     * simplification is used to preserve topology.\n     * @param {number} tolerance The tolerance distance for simplification.\n     * @return {Geometry} A new, simplified version of the original geometry.\n     * @api\n     */\n    Geometry.prototype.simplify = function (tolerance) {\n        return this.getSimplifiedGeometry(tolerance * tolerance);\n    };\n    /**\n     * Create a simplified version of this geometry using the Douglas Peucker\n     * algorithm.\n     * See https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm.\n     * @abstract\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {Geometry} Simplified geometry.\n     */\n    Geometry.prototype.getSimplifiedGeometry = function (squaredTolerance) {\n        return abstract();\n    };\n    /**\n     * Get the type of this geometry.\n     * @abstract\n     * @return {Type} Geometry type.\n     */\n    Geometry.prototype.getType = function () {\n        return abstract();\n    };\n    /**\n     * Apply a transform function to the coordinates of the geometry.\n     * The geometry is modified in place.\n     * If you do not want the geometry modified in place, first `clone()` it and\n     * then use this function on the clone.\n     * @abstract\n     * @param {import(\"../proj.js\").TransformFunction} transformFn Transform function.\n     * Called with a flat array of geometry coordinates.\n     */\n    Geometry.prototype.applyTransform = function (transformFn) {\n        abstract();\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @abstract\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     */\n    Geometry.prototype.intersectsExtent = function (extent) {\n        return abstract();\n    };\n    /**\n     * Translate the geometry.  This modifies the geometry coordinates in place.  If\n     * instead you want a new geometry, first `clone()` this geometry.\n     * @abstract\n     * @param {number} deltaX Delta X.\n     * @param {number} deltaY Delta Y.\n     * @api\n     */\n    Geometry.prototype.translate = function (deltaX, deltaY) {\n        abstract();\n    };\n    /**\n     * Transform each coordinate of the geometry from one coordinate reference\n     * system to another. The geometry is modified in place.\n     * For example, a line will be transformed to a line and a circle to a circle.\n     * If you do not want the geometry modified in place, first `clone()` it and\n     * then use this function on the clone.\n     *\n     * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n     *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n     * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n     *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n     * @return {Geometry} This geometry.  Note that original geometry is\n     *     modified in place.\n     * @api\n     */\n    Geometry.prototype.transform = function (source, destination) {\n        /** @type {import(\"../proj/Projection.js\").default} */\n        var sourceProj = getProjection(source);\n        var transformFn = sourceProj.getUnits() == Units.TILE_PIXELS\n            ? function (inCoordinates, outCoordinates, stride) {\n                var pixelExtent = sourceProj.getExtent();\n                var projectedExtent = sourceProj.getWorldExtent();\n                var scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n                composeTransform(tmpTransform, projectedExtent[0], projectedExtent[3], scale, -scale, 0, 0, 0);\n                transform2D(inCoordinates, 0, inCoordinates.length, stride, tmpTransform, outCoordinates);\n                return getTransform(sourceProj, destination)(inCoordinates, outCoordinates, stride);\n            }\n            : getTransform(sourceProj, destination);\n        this.applyTransform(transformFn);\n        return this;\n    };\n    return Geometry;\n}(BaseObject));\nexport default Geometry;\n//# sourceMappingURL=Geometry.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map event.\n */\nvar MapEvent = /** @class */ (function (_super) {\n    __extends(MapEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {?import(\"./PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     */\n    function MapEvent(type, map, opt_frameState) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The map where the event occurred.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @api\n         */\n        _this.map = map;\n        /**\n         * The frame state at the time of the event.\n         * @type {?import(\"./PluggableMap.js\").FrameState}\n         * @api\n         */\n        _this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n        return _this;\n    }\n    return MapEvent;\n}(Event));\nexport default MapEvent;\n//# sourceMappingURL=MapEvent.js.map","/**\n * @module ol/proj/Units\n */\n/**\n * Projection units: `'degrees'`, `'ft'`, `'m'`, `'pixels'`, `'tile-pixels'` or\n * `'us-ft'`.\n * @enum {string}\n */\nvar Units = {\n    /**\n     * Radians\n     * @api\n     */\n    RADIANS: 'radians',\n    /**\n     * Degrees\n     * @api\n     */\n    DEGREES: 'degrees',\n    /**\n     * Feet\n     * @api\n     */\n    FEET: 'ft',\n    /**\n     * Meters\n     * @api\n     */\n    METERS: 'm',\n    /**\n     * Pixels\n     * @api\n     */\n    PIXELS: 'pixels',\n    /**\n     * Tile Pixels\n     * @api\n     */\n    TILE_PIXELS: 'tile-pixels',\n    /**\n     * US Feet\n     * @api\n     */\n    USFEET: 'us-ft',\n};\n/**\n * See http://duff.ess.washington.edu/data/raster/drg/docs/geotiff.txt\n * @type {Object<number, Units>}\n */\nvar unitByCode = {\n    '9001': Units.METERS,\n    '9002': Units.FEET,\n    '9003': Units.USFEET,\n    '9101': Units.RADIANS,\n    '9102': Units.DEGREES,\n};\n/**\n * @param {number} code Unit code.\n * @return {Units} Units.\n */\nexport function fromCode(code) {\n    return unitByCode[code];\n}\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object<Units, number>}\n * @api\n */\nexport var METERS_PER_UNIT = {};\n// use the radius of the Normal sphere\nMETERS_PER_UNIT[Units.RADIANS] = 6370997 / (2 * Math.PI);\nMETERS_PER_UNIT[Units.DEGREES] = (2 * Math.PI * 6370997) / 360;\nMETERS_PER_UNIT[Units.FEET] = 0.3048;\nMETERS_PER_UNIT[Units.METERS] = 1;\nMETERS_PER_UNIT[Units.USFEET] = 1200 / 3937;\nexport default Units;\n//# sourceMappingURL=Units.js.map","/**\n * @module ol/has\n */\nvar ua = typeof navigator !== 'undefined' && typeof navigator.userAgent !== 'undefined'\n    ? navigator.userAgent.toLowerCase()\n    : '';\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport var FIREFOX = ua.indexOf('firefox') !== -1;\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport var SAFARI = ua.indexOf('safari') !== -1 && ua.indexOf('chrom') == -1;\n/**\n * https://bugs.webkit.org/show_bug.cgi?id=237906\n * @type {boolean}\n */\nexport var SAFARI_BUG_237906 = SAFARI &&\n    !!(ua.indexOf('version/15.4') >= 0 ||\n        ua.match(/cpu (os|iphone os) 15_4 like mac os x/));\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport var WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport var MAC = ua.indexOf('macintosh') !== -1;\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport var DEVICE_PIXEL_RATIO = typeof devicePixelRatio !== 'undefined' ? devicePixelRatio : 1;\n/**\n * The execution context is a worker with OffscreenCanvas available.\n * @const\n * @type {boolean}\n */\nexport var WORKER_OFFSCREEN_CANVAS = typeof WorkerGlobalScope !== 'undefined' &&\n    typeof OffscreenCanvas !== 'undefined' &&\n    self instanceof WorkerGlobalScope; //eslint-disable-line\n/**\n * Image.prototype.decode() is supported.\n * @type {boolean}\n */\nexport var IMAGE_DECODE = typeof Image !== 'undefined' && Image.prototype.decode;\n/**\n * @type {boolean}\n */\nexport var PASSIVE_EVENT_LISTENERS = (function () {\n    var passive = false;\n    try {\n        var options = Object.defineProperty({}, 'passive', {\n            get: function () {\n                passive = true;\n            },\n        });\n        window.addEventListener('_', null, options);\n        window.removeEventListener('_', null, options);\n    }\n    catch (error) {\n        // passive not supported\n    }\n    return passive;\n})();\n//# sourceMappingURL=has.js.map","/**\n * @module ol/geom/flat/closest\n */\nimport { lerp, squaredDistance as squaredDx } from '../../math.js';\n/**\n * Returns the point on the 2D line segment flatCoordinates[offset1] to\n * flatCoordinates[offset2] that is closest to the point (x, y).  Extra\n * dimensions are linearly interpolated.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset1 Offset 1.\n * @param {number} offset2 Offset 2.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n */\nfunction assignClosest(flatCoordinates, offset1, offset2, stride, x, y, closestPoint) {\n    var x1 = flatCoordinates[offset1];\n    var y1 = flatCoordinates[offset1 + 1];\n    var dx = flatCoordinates[offset2] - x1;\n    var dy = flatCoordinates[offset2 + 1] - y1;\n    var offset;\n    if (dx === 0 && dy === 0) {\n        offset = offset1;\n    }\n    else {\n        var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n        if (t > 1) {\n            offset = offset2;\n        }\n        else if (t > 0) {\n            for (var i = 0; i < stride; ++i) {\n                closestPoint[i] = lerp(flatCoordinates[offset1 + i], flatCoordinates[offset2 + i], t);\n            }\n            closestPoint.length = stride;\n            return;\n        }\n        else {\n            offset = offset1;\n        }\n    }\n    for (var i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[offset + i];\n    }\n    closestPoint.length = stride;\n}\n/**\n * Return the squared of the largest distance between any pair of consecutive\n * coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function maxSquaredDelta(flatCoordinates, offset, end, stride, max) {\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    for (offset += stride; offset < end; offset += stride) {\n        var x2 = flatCoordinates[offset];\n        var y2 = flatCoordinates[offset + 1];\n        var squaredDelta = squaredDx(x1, y1, x2, y2);\n        if (squaredDelta > max) {\n            max = squaredDelta;\n        }\n        x1 = x2;\n        y1 = y2;\n    }\n    return max;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        max = maxSquaredDelta(flatCoordinates, offset, end, stride, max);\n        offset = end;\n    }\n    return max;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function multiArrayMaxSquaredDelta(flatCoordinates, offset, endss, stride, max) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        max = arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max);\n        offset = ends[ends.length - 1];\n    }\n    return max;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>} [opt_tmpPoint] Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestPoint(flatCoordinates, offset, end, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, opt_tmpPoint) {\n    if (offset == end) {\n        return minSquaredDistance;\n    }\n    var i, squaredDistance;\n    if (maxDelta === 0) {\n        // All points are identical, so just test the first point.\n        squaredDistance = squaredDx(x, y, flatCoordinates[offset], flatCoordinates[offset + 1]);\n        if (squaredDistance < minSquaredDistance) {\n            for (i = 0; i < stride; ++i) {\n                closestPoint[i] = flatCoordinates[offset + i];\n            }\n            closestPoint.length = stride;\n            return squaredDistance;\n        }\n        else {\n            return minSquaredDistance;\n        }\n    }\n    var tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n    var index = offset + stride;\n    while (index < end) {\n        assignClosest(flatCoordinates, index - stride, index, stride, x, y, tmpPoint);\n        squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n        if (squaredDistance < minSquaredDistance) {\n            minSquaredDistance = squaredDistance;\n            for (i = 0; i < stride; ++i) {\n                closestPoint[i] = tmpPoint[i];\n            }\n            closestPoint.length = stride;\n            index += stride;\n        }\n        else {\n            // Skip ahead multiple points, because we know that all the skipped\n            // points cannot be any closer than the closest point we have found so\n            // far.  We know this because we know how close the current point is, how\n            // close the closest point we have found so far is, and the maximum\n            // distance between consecutive points.  For example, if we're currently\n            // at distance 10, the best we've found so far is 3, and that the maximum\n            // distance between consecutive points is 2, then we'll need to skip at\n            // least (10 - 3) / 2 == 3 (rounded down) points to have any chance of\n            // finding a closer point.  We use Math.max(..., 1) to ensure that we\n            // always advance at least one point, to avoid an infinite loop.\n            index +=\n                stride *\n                    Math.max(((Math.sqrt(squaredDistance) - Math.sqrt(minSquaredDistance)) /\n                        maxDelta) |\n                        0, 1);\n        }\n    }\n    if (isRing) {\n        // Check the closing segment.\n        assignClosest(flatCoordinates, end - stride, offset, stride, x, y, tmpPoint);\n        squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n        if (squaredDistance < minSquaredDistance) {\n            minSquaredDistance = squaredDistance;\n            for (i = 0; i < stride; ++i) {\n                closestPoint[i] = tmpPoint[i];\n            }\n            closestPoint.length = stride;\n        }\n    }\n    return minSquaredDistance;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>} [opt_tmpPoint] Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestArrayPoint(flatCoordinates, offset, ends, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, opt_tmpPoint) {\n    var tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        minSquaredDistance = assignClosestPoint(flatCoordinates, offset, end, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n        offset = end;\n    }\n    return minSquaredDistance;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>} [opt_tmpPoint] Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestMultiArrayPoint(flatCoordinates, offset, endss, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, opt_tmpPoint) {\n    var tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        minSquaredDistance = assignClosestArrayPoint(flatCoordinates, offset, ends, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n        offset = ends[ends.length - 1];\n    }\n    return minSquaredDistance;\n}\n//# sourceMappingURL=closest.js.map","/**\n * @module ol/geom/flat/contains\n */\nimport { forEachCorner } from '../../extent.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} Contains extent.\n */\nexport function linearRingContainsExtent(flatCoordinates, offset, end, stride, extent) {\n    var outside = forEachCorner(extent, \n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains (x, y).\n     */\n    function (coordinate) {\n        return !linearRingContainsXY(flatCoordinates, offset, end, stride, coordinate[0], coordinate[1]);\n    });\n    return !outside;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingContainsXY(flatCoordinates, offset, end, stride, x, y) {\n    // https://geomalgorithms.com/a03-_inclusion.html\n    // Copyright 2000 softSurfer, 2012 Dan Sunday\n    // This code may be freely used and modified for any purpose\n    // providing that this copyright notice is included with it.\n    // SoftSurfer makes no warranty for this code, and cannot be held\n    // liable for any real or imagined damage resulting from its use.\n    // Users of this code must verify correctness for their application.\n    var wn = 0;\n    var x1 = flatCoordinates[end - stride];\n    var y1 = flatCoordinates[end - stride + 1];\n    for (; offset < end; offset += stride) {\n        var x2 = flatCoordinates[offset];\n        var y2 = flatCoordinates[offset + 1];\n        if (y1 <= y) {\n            if (y2 > y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) > 0) {\n                wn++;\n            }\n        }\n        else if (y2 <= y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) < 0) {\n            wn--;\n        }\n        x1 = x2;\n        y1 = y2;\n    }\n    return wn !== 0;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y) {\n    if (ends.length === 0) {\n        return false;\n    }\n    if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n        return false;\n    }\n    for (var i = 1, ii = ends.length; i < ii; ++i) {\n        if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingssContainsXY(flatCoordinates, offset, endss, stride, x, y) {\n    if (endss.length === 0) {\n        return false;\n    }\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n            return true;\n        }\n        offset = ends[ends.length - 1];\n    }\n    return false;\n}\n//# sourceMappingURL=contains.js.map","/**\n * @module ol/Disposable\n */\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nvar Disposable = /** @class */ (function () {\n    function Disposable() {\n        /**\n         * The object has already been disposed.\n         * @type {boolean}\n         * @protected\n         */\n        this.disposed = false;\n    }\n    /**\n     * Clean up.\n     */\n    Disposable.prototype.dispose = function () {\n        if (!this.disposed) {\n            this.disposed = true;\n            this.disposeInternal();\n        }\n    };\n    /**\n     * Extension point for disposable objects.\n     * @protected\n     */\n    Disposable.prototype.disposeInternal = function () { };\n    return Disposable;\n}());\nexport default Disposable;\n//# sourceMappingURL=Disposable.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map browser event.\n * @template {UIEvent} EVENT\n */\nvar MapBrowserEvent = /** @class */ (function (_super) {\n    __extends(MapBrowserEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {EVENT} originalEvent Original event.\n     * @param {boolean} [opt_dragging] Is the map currently being dragged?\n     * @param {import(\"./PluggableMap.js\").FrameState} [opt_frameState] Frame state.\n     * @param {Array<PointerEvent>} [opt_activePointers] Active pointers.\n     */\n    function MapBrowserEvent(type, map, originalEvent, opt_dragging, opt_frameState, opt_activePointers) {\n        var _this = _super.call(this, type, map, opt_frameState) || this;\n        /**\n         * The original browser event.\n         * @const\n         * @type {EVENT}\n         * @api\n         */\n        _this.originalEvent = originalEvent;\n        /**\n         * The map pixel relative to the viewport corresponding to the original browser event.\n         * @type {?import(\"./pixel.js\").Pixel}\n         */\n        _this.pixel_ = null;\n        /**\n         * The coordinate in the user projection corresponding to the original browser event.\n         * @type {?import(\"./coordinate.js\").Coordinate}\n         */\n        _this.coordinate_ = null;\n        /**\n         * Indicates if the map is currently being dragged. Only set for\n         * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n         *\n         * @type {boolean}\n         * @api\n         */\n        _this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n        /**\n         * @type {Array<PointerEvent>|undefined}\n         */\n        _this.activePointers = opt_activePointers;\n        return _this;\n    }\n    Object.defineProperty(MapBrowserEvent.prototype, \"pixel\", {\n        /**\n         * The map pixel relative to the viewport corresponding to the original event.\n         * @type {import(\"./pixel.js\").Pixel}\n         * @api\n         */\n        get: function () {\n            if (!this.pixel_) {\n                this.pixel_ = this.map.getEventPixel(this.originalEvent);\n            }\n            return this.pixel_;\n        },\n        set: function (pixel) {\n            this.pixel_ = pixel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MapBrowserEvent.prototype, \"coordinate\", {\n        /**\n         * The coordinate corresponding to the original browser event.  This will be in the user\n         * projection if one is set.  Otherwise it will be in the view projection.\n         * @type {import(\"./coordinate.js\").Coordinate}\n         * @api\n         */\n        get: function () {\n            if (!this.coordinate_) {\n                this.coordinate_ = this.map.getCoordinateFromPixel(this.pixel);\n            }\n            return this.coordinate_;\n        },\n        set: function (coordinate) {\n            this.coordinate_ = coordinate;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Prevents the default browser action.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n     * @api\n     */\n    MapBrowserEvent.prototype.preventDefault = function () {\n        _super.prototype.preventDefault.call(this);\n        if ('preventDefault' in this.originalEvent) {\n            /** @type {UIEvent} */ (this.originalEvent).preventDefault();\n        }\n    };\n    /**\n     * Prevents further propagation of the current event.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n     * @api\n     */\n    MapBrowserEvent.prototype.stopPropagation = function () {\n        _super.prototype.stopPropagation.call(this);\n        if ('stopPropagation' in this.originalEvent) {\n            /** @type {UIEvent} */ (this.originalEvent).stopPropagation();\n        }\n    };\n    return MapBrowserEvent;\n}(MapEvent));\nexport default MapBrowserEvent;\n//# sourceMappingURL=MapBrowserEvent.js.map","/**\n * @module ol/geom/flat/segments\n */\n/**\n * This function calls `callback` for each segment of the flat coordinates\n * array. If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {function(import(\"../../coordinate.js\").Coordinate, import(\"../../coordinate.js\").Coordinate): T} callback Function\n *     called for each segment.\n * @return {T|boolean} Value.\n * @template T\n */\nexport function forEach(flatCoordinates, offset, end, stride, callback) {\n    var ret;\n    offset += stride;\n    for (; offset < end; offset += stride) {\n        ret = callback(flatCoordinates.slice(offset - stride, offset), flatCoordinates.slice(offset, offset + stride));\n        if (ret) {\n            return ret;\n        }\n    }\n    return false;\n}\n//# sourceMappingURL=segments.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Object\n */\nimport Event from './events/Event.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport { assign, isEmpty } from './obj.js';\nimport { getUid } from './util.js';\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nvar ObjectEvent = /** @class */ (function (_super) {\n    __extends(ObjectEvent, _super);\n    /**\n     * @param {string} type The event type.\n     * @param {string} key The property name.\n     * @param {*} oldValue The old value for `key`.\n     */\n    function ObjectEvent(type, key, oldValue) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The name of the property whose value is changing.\n         * @type {string}\n         * @api\n         */\n        _this.key = key;\n        /**\n         * The old value. To get the new value use `e.target.get(e.key)` where\n         * `e` is the event object.\n         * @type {*}\n         * @api\n         */\n        _this.oldValue = oldValue;\n        return _this;\n    }\n    return ObjectEvent;\n}(Event));\nexport { ObjectEvent };\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types, ObjectEvent, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types, Return>} ObjectOnSignature\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable~Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nvar BaseObject = /** @class */ (function (_super) {\n    __extends(BaseObject, _super);\n    /**\n     * @param {Object<string, *>} [opt_values] An object with key-value pairs.\n     */\n    function BaseObject(opt_values) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {ObjectOnSignature<void>}\n         */\n        _this.un;\n        // Call {@link module:ol/util.getUid} to ensure that the order of objects' ids is\n        // the same as the order in which they were created.  This also helps to\n        // ensure that object properties are always added in the same order, which\n        // helps many JavaScript engines generate faster code.\n        getUid(_this);\n        /**\n         * @private\n         * @type {Object<string, *>}\n         */\n        _this.values_ = null;\n        if (opt_values !== undefined) {\n            _this.setProperties(opt_values);\n        }\n        return _this;\n    }\n    /**\n     * Gets a value.\n     * @param {string} key Key name.\n     * @return {*} Value.\n     * @api\n     */\n    BaseObject.prototype.get = function (key) {\n        var value;\n        if (this.values_ && this.values_.hasOwnProperty(key)) {\n            value = this.values_[key];\n        }\n        return value;\n    };\n    /**\n     * Get a list of object property names.\n     * @return {Array<string>} List of property names.\n     * @api\n     */\n    BaseObject.prototype.getKeys = function () {\n        return (this.values_ && Object.keys(this.values_)) || [];\n    };\n    /**\n     * Get an object of all property names and values.\n     * @return {Object<string, *>} Object.\n     * @api\n     */\n    BaseObject.prototype.getProperties = function () {\n        return (this.values_ && assign({}, this.values_)) || {};\n    };\n    /**\n     * @return {boolean} The object has properties.\n     */\n    BaseObject.prototype.hasProperties = function () {\n        return !!this.values_;\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {*} oldValue Old value.\n     */\n    BaseObject.prototype.notify = function (key, oldValue) {\n        var eventType;\n        eventType = \"change:\".concat(key);\n        if (this.hasListener(eventType)) {\n            this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n        }\n        eventType = ObjectEventType.PROPERTYCHANGE;\n        if (this.hasListener(eventType)) {\n            this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n        }\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {import(\"./events.js\").Listener} listener Listener.\n     */\n    BaseObject.prototype.addChangeListener = function (key, listener) {\n        this.addEventListener(\"change:\".concat(key), listener);\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {import(\"./events.js\").Listener} listener Listener.\n     */\n    BaseObject.prototype.removeChangeListener = function (key, listener) {\n        this.removeEventListener(\"change:\".concat(key), listener);\n    };\n    /**\n     * Sets a value.\n     * @param {string} key Key name.\n     * @param {*} value Value.\n     * @param {boolean} [opt_silent] Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.set = function (key, value, opt_silent) {\n        var values = this.values_ || (this.values_ = {});\n        if (opt_silent) {\n            values[key] = value;\n        }\n        else {\n            var oldValue = values[key];\n            values[key] = value;\n            if (oldValue !== value) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    /**\n     * Sets a collection of key-value pairs.  Note that this changes any existing\n     * properties and adds new ones (it does not remove any existing properties).\n     * @param {Object<string, *>} values Values.\n     * @param {boolean} [opt_silent] Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.setProperties = function (values, opt_silent) {\n        for (var key in values) {\n            this.set(key, values[key], opt_silent);\n        }\n    };\n    /**\n     * Apply any properties from another object without triggering events.\n     * @param {BaseObject} source The source object.\n     * @protected\n     */\n    BaseObject.prototype.applyProperties = function (source) {\n        if (!source.values_) {\n            return;\n        }\n        assign(this.values_ || (this.values_ = {}), source.values_);\n    };\n    /**\n     * Unsets a property.\n     * @param {string} key Key name.\n     * @param {boolean} [opt_silent] Unset without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.unset = function (key, opt_silent) {\n        if (this.values_ && key in this.values_) {\n            var oldValue = this.values_[key];\n            delete this.values_[key];\n            if (isEmpty(this.values_)) {\n                this.values_ = null;\n            }\n            if (!opt_silent) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    return BaseObject;\n}(Observable));\nexport default BaseObject;\n//# sourceMappingURL=Object.js.map","/**\n * @module ol/geom/flat/transform\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../transform.js\").Transform} transform Transform.\n * @param {Array<number>} [opt_dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function transform2D(flatCoordinates, offset, end, stride, transform, opt_dest) {\n    var dest = opt_dest ? opt_dest : [];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        var x = flatCoordinates[j];\n        var y = flatCoordinates[j + 1];\n        dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n        dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n    }\n    if (opt_dest && dest.length != i) {\n        dest.length = i;\n    }\n    return dest;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array<number>} anchor Rotation anchor point.\n * @param {Array<number>} [opt_dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function rotate(flatCoordinates, offset, end, stride, angle, anchor, opt_dest) {\n    var dest = opt_dest ? opt_dest : [];\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    var anchorX = anchor[0];\n    var anchorY = anchor[1];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        var deltaX = flatCoordinates[j] - anchorX;\n        var deltaY = flatCoordinates[j + 1] - anchorY;\n        dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n        dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n        for (var k = j + 2; k < j + stride; ++k) {\n            dest[i++] = flatCoordinates[k];\n        }\n    }\n    if (opt_dest && dest.length != i) {\n        dest.length = i;\n    }\n    return dest;\n}\n/**\n * Scale the coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array<number>} anchor Scale anchor point.\n * @param {Array<number>} [opt_dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function scale(flatCoordinates, offset, end, stride, sx, sy, anchor, opt_dest) {\n    var dest = opt_dest ? opt_dest : [];\n    var anchorX = anchor[0];\n    var anchorY = anchor[1];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        var deltaX = flatCoordinates[j] - anchorX;\n        var deltaY = flatCoordinates[j + 1] - anchorY;\n        dest[i++] = anchorX + sx * deltaX;\n        dest[i++] = anchorY + sy * deltaY;\n        for (var k = j + 2; k < j + stride; ++k) {\n            dest[i++] = flatCoordinates[k];\n        }\n    }\n    if (opt_dest && dest.length != i) {\n        dest.length = i;\n    }\n    return dest;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array<number>} [opt_dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function translate(flatCoordinates, offset, end, stride, deltaX, deltaY, opt_dest) {\n    var dest = opt_dest ? opt_dest : [];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        dest[i++] = flatCoordinates[j] + deltaX;\n        dest[i++] = flatCoordinates[j + 1] + deltaY;\n        for (var k = j + 2; k < j + stride; ++k) {\n            dest[i++] = flatCoordinates[k];\n        }\n    }\n    if (opt_dest && dest.length != i) {\n        dest.length = i;\n    }\n    return dest;\n}\n//# sourceMappingURL=transform.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/proj/epsg3857\n */\nimport Projection from './Projection.js';\nimport Units from './Units.js';\nimport { cosh } from '../math.js';\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport var RADIUS = 6378137;\n/**\n * @const\n * @type {number}\n */\nexport var HALF_SIZE = Math.PI * RADIUS;\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport var EXTENT = [-HALF_SIZE, -HALF_SIZE, HALF_SIZE, HALF_SIZE];\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport var WORLD_EXTENT = [-180, -85, 180, 85];\n/**\n * Maximum safe value in y direction\n * @const\n * @type {number}\n */\nexport var MAX_SAFE_Y = RADIUS * Math.log(Math.tan(Math.PI / 2));\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n */\nvar EPSG3857Projection = /** @class */ (function (_super) {\n    __extends(EPSG3857Projection, _super);\n    /**\n     * @param {string} code Code.\n     */\n    function EPSG3857Projection(code) {\n        return _super.call(this, {\n            code: code,\n            units: Units.METERS,\n            extent: EXTENT,\n            global: true,\n            worldExtent: WORLD_EXTENT,\n            getPointResolution: function (resolution, point) {\n                return resolution / cosh(point[1] / RADIUS);\n            },\n        }) || this;\n    }\n    return EPSG3857Projection;\n}(Projection));\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport var PROJECTIONS = [\n    new EPSG3857Projection('EPSG:3857'),\n    new EPSG3857Projection('EPSG:102100'),\n    new EPSG3857Projection('EPSG:102113'),\n    new EPSG3857Projection('EPSG:900913'),\n    new EPSG3857Projection('http://www.opengis.net/def/crs/EPSG/0/3857'),\n    new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857'),\n];\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>} [opt_output] Output array of coordinate values.\n * @param {number} [opt_dimension] Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, opt_output, opt_dimension) {\n    var length = input.length;\n    var dimension = opt_dimension > 1 ? opt_dimension : 2;\n    var output = opt_output;\n    if (output === undefined) {\n        if (dimension > 2) {\n            // preserve values beyond second dimension\n            output = input.slice();\n        }\n        else {\n            output = new Array(length);\n        }\n    }\n    for (var i = 0; i < length; i += dimension) {\n        output[i] = (HALF_SIZE * input[i]) / 180;\n        var y = RADIUS * Math.log(Math.tan((Math.PI * (+input[i + 1] + 90)) / 360));\n        if (y > MAX_SAFE_Y) {\n            y = MAX_SAFE_Y;\n        }\n        else if (y < -MAX_SAFE_Y) {\n            y = -MAX_SAFE_Y;\n        }\n        output[i + 1] = y;\n    }\n    return output;\n}\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>} [opt_output] Output array of coordinate values.\n * @param {number} [opt_dimension] Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, opt_output, opt_dimension) {\n    var length = input.length;\n    var dimension = opt_dimension > 1 ? opt_dimension : 2;\n    var output = opt_output;\n    if (output === undefined) {\n        if (dimension > 2) {\n            // preserve values beyond second dimension\n            output = input.slice();\n        }\n        else {\n            output = new Array(length);\n        }\n    }\n    for (var i = 0; i < length; i += dimension) {\n        output[i] = (180 * input[i]) / HALF_SIZE;\n        output[i + 1] =\n            (360 * Math.atan(Math.exp(input[i + 1] / RADIUS))) / Math.PI - 90;\n    }\n    return output;\n}\n//# sourceMappingURL=epsg3857.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/proj/epsg4326\n */\nimport Projection from './Projection.js';\nimport Units from './Units.js';\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport var RADIUS = 6378137;\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport var EXTENT = [-180, -90, 180, 90];\n/**\n * @const\n * @type {number}\n */\nexport var METERS_PER_UNIT = (Math.PI * RADIUS) / 180;\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n */\nvar EPSG4326Projection = /** @class */ (function (_super) {\n    __extends(EPSG4326Projection, _super);\n    /**\n     * @param {string} code Code.\n     * @param {string} [opt_axisOrientation] Axis orientation.\n     */\n    function EPSG4326Projection(code, opt_axisOrientation) {\n        return _super.call(this, {\n            code: code,\n            units: Units.DEGREES,\n            extent: EXTENT,\n            axisOrientation: opt_axisOrientation,\n            global: true,\n            metersPerUnit: METERS_PER_UNIT,\n            worldExtent: EXTENT,\n        }) || this;\n    }\n    return EPSG4326Projection;\n}(Projection));\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport var PROJECTIONS = [\n    new EPSG4326Projection('CRS:84'),\n    new EPSG4326Projection('EPSG:4326', 'neu'),\n    new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n    new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n    new EPSG4326Projection('http://www.opengis.net/def/crs/OGC/1.3/CRS84'),\n    new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n    new EPSG4326Projection('http://www.opengis.net/def/crs/EPSG/0/4326', 'neu'),\n];\n//# sourceMappingURL=epsg4326.js.map","/**\n * @module ol/proj/projections\n */\n/**\n * @type {Object<string, import(\"./Projection.js\").default>}\n */\nvar cache = {};\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n    cache = {};\n}\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {import(\"./Projection.js\").default} The projection (if cached).\n */\nexport function get(code) {\n    return (cache[code] ||\n        cache[code.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\\w+)$/, 'EPSG:$3')] ||\n        null);\n}\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {import(\"./Projection.js\").default} projection The projection to cache.\n */\nexport function add(code, projection) {\n    cache[code] = projection;\n}\n//# sourceMappingURL=projections.js.map","/**\n * @module ol/proj\n */\n/**\n * The ol/proj module stores:\n * * a list of {@link module:ol/proj/Projection~Projection}\n * objects, one for each projection supported by the application\n * * a list of transform functions needed to convert coordinates in one projection\n * into another.\n *\n * The static functions are the methods used to maintain these.\n * Each transform function can handle not only simple coordinate pairs, but also\n * large arrays of coordinates such as vector geometries.\n *\n * When loaded, the library adds projection objects for EPSG:4326 (WGS84\n * geographic coordinates) and EPSG:3857 (Web or Spherical Mercator, as used\n * for example by Bing Maps or OpenStreetMap), together with the relevant\n * transform functions.\n *\n * Additional transforms may be added by using the http://proj4js.org/\n * library (version 2.2 or later). You can use the full build supplied by\n * Proj4js, or create a custom build to support those projections you need; see\n * the Proj4js website for how to do this. You also need the Proj4js definitions\n * for the required projections. These definitions can be obtained from\n * https://epsg.io/, and are a JS function, so can be loaded in a script\n * tag (as in the examples) or pasted into your application.\n *\n * After all required projection definitions are added to proj4's registry (by\n * using `proj4.defs()`), simply call `register(proj4)` from the `ol/proj/proj4`\n * package. Existing transforms are not changed by this function. See\n * examples/wms-image-custom-proj for an example of this.\n *\n * Additional projection definitions can be registered with `proj4.defs()` any\n * time. Just make sure to call `register(proj4)` again; for example, with user-supplied data where you don't\n * know in advance what projections are needed, you can initially load minimal\n * support and then load whichever are requested.\n *\n * Note that Proj4js does not support projection extents. If you want to add\n * one for creating default tile grids, you can add it after the Projection\n * object has been created with `setExtent`, for example,\n * `get('EPSG:1234').setExtent(extent)`.\n *\n * In addition to Proj4js support, any transform functions can be added with\n * {@link module:ol/proj.addCoordinateTransforms}. To use this, you must first create\n * a {@link module:ol/proj/Projection~Projection} object for the new projection and add it with\n * {@link module:ol/proj.addProjection}. You can then add the forward and inverse\n * functions with {@link module:ol/proj.addCoordinateTransforms}. See\n * examples/wms-custom-proj for an example of this.\n *\n * Note that if no transforms are needed and you only need to define the\n * projection, just add a {@link module:ol/proj/Projection~Projection} with\n * {@link module:ol/proj.addProjection}. See examples/wms-no-proj for an example of\n * this.\n */\nimport Projection from './proj/Projection.js';\nimport Units, { METERS_PER_UNIT } from './proj/Units.js';\nimport { PROJECTIONS as EPSG3857_PROJECTIONS, fromEPSG4326, toEPSG4326, } from './proj/epsg3857.js';\nimport { PROJECTIONS as EPSG4326_PROJECTIONS } from './proj/epsg4326.js';\nimport { add as addProj, clear as clearProj, get as getProj, } from './proj/projections.js';\nimport { add as addTransformFunc, clear as clearTransformFuncs, get as getTransformFunc, } from './proj/transforms.js';\nimport { applyTransform, getWidth } from './extent.js';\nimport { clamp, modulo } from './math.js';\nimport { equals, getWorldsAway } from './coordinate.js';\nimport { getDistance } from './sphere.js';\n/**\n * A projection as {@link module:ol/proj/Projection~Projection}, SRS identifier\n * string or undefined.\n * @typedef {Projection|string|undefined} ProjectionLike\n * @api\n */\n/**\n * A transform function accepts an array of input coordinate values, an optional\n * output array, and an optional dimension (default should be 2).  The function\n * transforms the input coordinate values, populates the output array, and\n * returns the output array.\n *\n * @typedef {function(Array<number>, Array<number>=, number=): Array<number>} TransformFunction\n * @api\n */\nexport { METERS_PER_UNIT };\nexport { Projection };\nvar showCoordinateWarning = true;\n/**\n * @param {boolean} [opt_disable = true] Disable console info about `useGeographic()`\n */\nexport function disableCoordinateWarning(opt_disable) {\n    var hide = opt_disable === undefined ? true : opt_disable;\n    showCoordinateWarning = !hide;\n}\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>} [opt_output] Output array of coordinate values.\n * @param {number} [opt_dimension] Dimension.\n * @return {Array<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, opt_output, opt_dimension) {\n    var output;\n    if (opt_output !== undefined) {\n        for (var i = 0, ii = input.length; i < ii; ++i) {\n            opt_output[i] = input[i];\n        }\n        output = opt_output;\n    }\n    else {\n        output = input.slice();\n    }\n    return output;\n}\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>} [opt_output] Output array of coordinate values.\n * @param {number} [opt_dimension] Dimension.\n * @return {Array<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, opt_output, opt_dimension) {\n    if (opt_output !== undefined && input !== opt_output) {\n        for (var i = 0, ii = input.length; i < ii; ++i) {\n            opt_output[i] = input[i];\n        }\n        input = opt_output;\n    }\n    return input;\n}\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n    addProj(projection.getCode(), projection);\n    addTransformFunc(projection, projection, cloneTransform);\n}\n/**\n * @param {Array<Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n    projections.forEach(addProjection);\n}\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {Projection|null} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n    return typeof projectionLike === 'string'\n        ? getProj(/** @type {string} */ (projectionLike))\n        : /** @type {Projection} */ (projectionLike) || null;\n}\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the `point` pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link module:ol/proj/Projection~Projection} constructor or by using\n * {@link module:ol/proj/Projection~Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {import(\"./coordinate.js\").Coordinate} point Point to find adjusted resolution at.\n * @param {import(\"./proj/Units.js\").default} [opt_units] Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, opt_units) {\n    projection = get(projection);\n    var pointResolution;\n    var getter = projection.getPointResolutionFunc();\n    if (getter) {\n        pointResolution = getter(resolution, point);\n        if (opt_units && opt_units !== projection.getUnits()) {\n            var metersPerUnit = projection.getMetersPerUnit();\n            if (metersPerUnit) {\n                pointResolution =\n                    (pointResolution * metersPerUnit) / METERS_PER_UNIT[opt_units];\n            }\n        }\n    }\n    else {\n        var units = projection.getUnits();\n        if ((units == Units.DEGREES && !opt_units) || opt_units == Units.DEGREES) {\n            pointResolution = resolution;\n        }\n        else {\n            // Estimate point resolution by transforming the center pixel to EPSG:4326,\n            // measuring its width and height on the normal sphere, and taking the\n            // average of the width and height.\n            var toEPSG4326_1 = getTransformFromProjections(projection, get('EPSG:4326'));\n            if (toEPSG4326_1 === identityTransform && units !== Units.DEGREES) {\n                // no transform is available\n                pointResolution = resolution * projection.getMetersPerUnit();\n            }\n            else {\n                var vertices = [\n                    point[0] - resolution / 2,\n                    point[1],\n                    point[0] + resolution / 2,\n                    point[1],\n                    point[0],\n                    point[1] - resolution / 2,\n                    point[0],\n                    point[1] + resolution / 2,\n                ];\n                vertices = toEPSG4326_1(vertices, vertices, 2);\n                var width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n                var height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n                pointResolution = (width + height) / 2;\n            }\n            var metersPerUnit = opt_units\n                ? METERS_PER_UNIT[opt_units]\n                : projection.getMetersPerUnit();\n            if (metersPerUnit !== undefined) {\n                pointResolution /= metersPerUnit;\n            }\n        }\n    }\n    return pointResolution;\n}\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array<Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n    addProjections(projections);\n    projections.forEach(function (source) {\n        projections.forEach(function (destination) {\n            if (source !== destination) {\n                addTransformFunc(source, destination, cloneTransform);\n            }\n        });\n    });\n}\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array<Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array<Projection>} projections2 Projections with equal\n *     meaning.\n * @param {TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(projections1, projections2, forwardTransform, inverseTransform) {\n    projections1.forEach(function (projection1) {\n        projections2.forEach(function (projection2) {\n            addTransformFunc(projection1, projection2, forwardTransform);\n            addTransformFunc(projection2, projection1, inverseTransform);\n        });\n    });\n}\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n    clearProj();\n    clearTransformFuncs();\n}\n/**\n * @param {Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n    if (!projection) {\n        return get(defaultCode);\n    }\n    else if (typeof projection === 'string') {\n        return get(projection);\n    }\n    else {\n        return /** @type {Projection} */ (projection);\n    }\n}\n/**\n * Creates a {@link module:ol/proj~TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} coordTransform Coordinate\n *     transform.\n * @return {TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n    return (\n    /**\n     * @param {Array<number>} input Input.\n     * @param {Array<number>} [opt_output] Output.\n     * @param {number} [opt_dimension] Dimension.\n     * @return {Array<number>} Output.\n     */\n    function (input, opt_output, opt_dimension) {\n        var length = input.length;\n        var dimension = opt_dimension !== undefined ? opt_dimension : 2;\n        var output = opt_output !== undefined ? opt_output : new Array(length);\n        for (var i = 0; i < length; i += dimension) {\n            var point = coordTransform(input.slice(i, i + dimension));\n            var pointLength = point.length;\n            for (var j = 0, jj = dimension; j < jj; ++j) {\n                output[i + j] = j >= pointLength ? input[i + j] : point[j];\n            }\n        }\n        return output;\n    });\n}\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {ProjectionLike} source Source projection.\n * @param {ProjectionLike} destination Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}. If the transform function can only\n *     transform less dimensions than the input coordinate, it is supposeed to return a coordinate\n *     with only the length it can transform. The other dimensions will be taken unchanged from the\n *     source.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n    var sourceProj = get(source);\n    var destProj = get(destination);\n    addTransformFunc(sourceProj, destProj, createTransformFromCoordinateTransform(forward));\n    addTransformFunc(destProj, sourceProj, createTransformFromCoordinateTransform(inverse));\n}\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {ProjectionLike} [opt_projection] Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, opt_projection) {\n    disableCoordinateWarning();\n    return transform(coordinate, 'EPSG:4326', opt_projection !== undefined ? opt_projection : 'EPSG:3857');\n}\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Projected coordinate.\n * @param {ProjectionLike} [opt_projection] Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, opt_projection) {\n    var lonLat = transform(coordinate, opt_projection !== undefined ? opt_projection : 'EPSG:3857', 'EPSG:4326');\n    var lon = lonLat[0];\n    if (lon < -180 || lon > 180) {\n        lonLat[0] = modulo(lon + 180, 360) - 180;\n    }\n    return lonLat;\n}\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {Projection} projection1 Projection 1.\n * @param {Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n    if (projection1 === projection2) {\n        return true;\n    }\n    var equalUnits = projection1.getUnits() === projection2.getUnits();\n    if (projection1.getCode() === projection2.getCode()) {\n        return equalUnits;\n    }\n    else {\n        var transformFunc = getTransformFromProjections(projection1, projection2);\n        return transformFunc === cloneTransform && equalUnits;\n    }\n}\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {Projection} sourceProjection Source Projection object.\n * @param {Projection} destinationProjection Destination Projection\n *     object.\n * @return {TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(sourceProjection, destinationProjection) {\n    var sourceCode = sourceProjection.getCode();\n    var destinationCode = destinationProjection.getCode();\n    var transformFunc = getTransformFunc(sourceCode, destinationCode);\n    if (!transformFunc) {\n        transformFunc = identityTransform;\n    }\n    return transformFunc;\n}\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {ProjectionLike} source Source.\n * @param {ProjectionLike} destination Destination.\n * @return {TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n    var sourceProjection = get(source);\n    var destinationProjection = get(destination);\n    return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link module:ol/proj.transformExtent} for extent transformation.\n * See the transform method of {@link module:ol/geom/Geometry~Geometry} and its\n * subclasses for geometry transforms.\n *\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n    var transformFunc = getTransform(source, destination);\n    return transformFunc(coordinate, undefined, coordinate.length);\n}\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {import(\"./extent.js\").Extent} extent The extent to transform.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @param {number} [opt_stops] Number of stops per side used for the transform.\n * By default only the corners are used.\n * @return {import(\"./extent.js\").Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination, opt_stops) {\n    var transformFunc = getTransform(source, destination);\n    return applyTransform(extent, transformFunc, undefined, opt_stops);\n}\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {import(\"./coordinate.js\").Coordinate} point Point.\n * @param {Projection} sourceProjection Source projection.\n * @param {Projection} destinationProjection Destination projection.\n * @return {import(\"./coordinate.js\").Coordinate} Point.\n */\nexport function transformWithProjections(point, sourceProjection, destinationProjection) {\n    var transformFunc = getTransformFromProjections(sourceProjection, destinationProjection);\n    return transformFunc(point);\n}\n/**\n * @type {Projection|null}\n */\nvar userProjection = null;\n/**\n * Set the projection for coordinates supplied from and returned by API methods.\n * This includes all API methods except for those interacting with tile grids.\n * @param {ProjectionLike} projection The user projection.\n * @api\n */\nexport function setUserProjection(projection) {\n    userProjection = get(projection);\n}\n/**\n * Clear the user projection if set.\n * @api\n */\nexport function clearUserProjection() {\n    userProjection = null;\n}\n/**\n * Get the projection for coordinates supplied from and returned by API methods.\n * Note that this method is not yet a part of the stable API.  Support for user\n * projections is not yet complete and should be considered experimental.\n * @return {Projection|null} The user projection (or null if not set).\n * @api\n */\nexport function getUserProjection() {\n    return userProjection;\n}\n/**\n * Use geographic coordinates (WGS-84 datum) in API methods.  This includes all API\n * methods except for those interacting with tile grids.\n * @api\n */\nexport function useGeographic() {\n    setUserProjection('EPSG:4326');\n}\n/**\n * Return a coordinate transformed into the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} sourceProjection The input coordinate projection.\n * @return {Array<number>} The input coordinate in the user projection.\n */\nexport function toUserCoordinate(coordinate, sourceProjection) {\n    if (!userProjection) {\n        return coordinate;\n    }\n    return transform(coordinate, sourceProjection, userProjection);\n}\n/**\n * Return a coordinate transformed from the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {Array<number>} The input coordinate transformed.\n */\nexport function fromUserCoordinate(coordinate, destProjection) {\n    if (!userProjection) {\n        if (showCoordinateWarning &&\n            !equals(coordinate, [0, 0]) &&\n            coordinate[0] >= -180 &&\n            coordinate[0] <= 180 &&\n            coordinate[1] >= -90 &&\n            coordinate[1] <= 90) {\n            showCoordinateWarning = false;\n            // eslint-disable-next-line no-console\n            console.warn('Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.');\n        }\n        return coordinate;\n    }\n    return transform(coordinate, userProjection, destProjection);\n}\n/**\n * Return an extent transformed into the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} sourceProjection The input extent projection.\n * @return {import(\"./extent.js\").Extent} The input extent in the user projection.\n */\nexport function toUserExtent(extent, sourceProjection) {\n    if (!userProjection) {\n        return extent;\n    }\n    return transformExtent(extent, sourceProjection, userProjection);\n}\n/**\n * Return an extent transformed from the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {import(\"./extent.js\").Extent} The input extent transformed.\n */\nexport function fromUserExtent(extent, destProjection) {\n    if (!userProjection) {\n        return extent;\n    }\n    return transformExtent(extent, userProjection, destProjection);\n}\n/**\n * Return the resolution in user projection units per pixel. If no user projection\n * is set, or source or user projection are missing units, the original resolution\n * is returned.\n * @param {number} resolution Resolution in input projection units per pixel.\n * @param {ProjectionLike} sourceProjection The input projection.\n * @return {number} Resolution in user projection units per pixel.\n */\nexport function toUserResolution(resolution, sourceProjection) {\n    if (!userProjection) {\n        return resolution;\n    }\n    var sourceUnits = get(sourceProjection).getUnits();\n    var userUnits = userProjection.getUnits();\n    return sourceUnits && userUnits\n        ? (resolution * METERS_PER_UNIT[sourceUnits]) / METERS_PER_UNIT[userUnits]\n        : resolution;\n}\n/**\n * Return the resolution in user projection units per pixel. If no user projection\n * is set, or source or user projection are missing units, the original resolution\n * is returned.\n * @param {number} resolution Resolution in user projection units per pixel.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {number} Resolution in destination projection units per pixel.\n */\nexport function fromUserResolution(resolution, destProjection) {\n    if (!userProjection) {\n        return resolution;\n    }\n    var sourceUnits = get(destProjection).getUnits();\n    var userUnits = userProjection.getUnits();\n    return sourceUnits && userUnits\n        ? (resolution * METERS_PER_UNIT[userUnits]) / METERS_PER_UNIT[sourceUnits]\n        : resolution;\n}\n/**\n * Creates a safe coordinate transform function from a coordinate transform function.\n * \"Safe\" means that it can handle wrapping of x-coordinates for global projections,\n * and that coordinates exceeding the source projection validity extent's range will be\n * clamped to the validity range.\n * @param {Projection} sourceProj Source projection.\n * @param {Projection} destProj Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} transform Transform function (source to destiation).\n * @return {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} Safe transform function (source to destiation).\n */\nexport function createSafeCoordinateTransform(sourceProj, destProj, transform) {\n    return function (coord) {\n        var transformed, worldsAway;\n        if (sourceProj.canWrapX()) {\n            var sourceExtent = sourceProj.getExtent();\n            var sourceExtentWidth = getWidth(sourceExtent);\n            coord = coord.slice(0);\n            worldsAway = getWorldsAway(coord, sourceProj, sourceExtentWidth);\n            if (worldsAway) {\n                // Move x to the real world\n                coord[0] = coord[0] - worldsAway * sourceExtentWidth;\n            }\n            coord[0] = clamp(coord[0], sourceExtent[0], sourceExtent[2]);\n            coord[1] = clamp(coord[1], sourceExtent[1], sourceExtent[3]);\n            transformed = transform(coord);\n        }\n        else {\n            transformed = transform(coord);\n        }\n        if (worldsAway && destProj.canWrapX()) {\n            // Move transformed coordinate back to the offset world\n            transformed[0] += worldsAway * getWidth(destProj.getExtent());\n        }\n        return transformed;\n    };\n}\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n    // Add transformations that don't alter coordinates to convert within set of\n    // projections with equal meaning.\n    addEquivalentProjections(EPSG3857_PROJECTIONS);\n    addEquivalentProjections(EPSG4326_PROJECTIONS);\n    // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n    // coordinates and back.\n    addEquivalentTransforms(EPSG4326_PROJECTIONS, EPSG3857_PROJECTIONS, fromEPSG4326, toEPSG4326);\n}\naddCommon();\n//# sourceMappingURL=proj.js.map","/**\n * @module ol/color\n */\nimport { assert } from './asserts.js';\nimport { clamp } from './math.js';\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nvar HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nvar NAMED_COLOR_RE_ = /^([a-z]*)$|^hsla?\\(.*\\)$/i;\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n    if (typeof color === 'string') {\n        return color;\n    }\n    else {\n        return toString(color);\n    }\n}\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n    var el = document.createElement('div');\n    el.style.color = color;\n    if (el.style.color !== '') {\n        document.body.appendChild(el);\n        var rgb = getComputedStyle(el).color;\n        document.body.removeChild(el);\n        return rgb;\n    }\n    else {\n        return '';\n    }\n}\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport var fromString = (function () {\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n    /**\n     * @const\n     * @type {number}\n     */\n    var MAX_CACHE_SIZE = 1024;\n    /**\n     * @type {Object<string, Color>}\n     */\n    var cache = {};\n    /**\n     * @type {number}\n     */\n    var cacheSize = 0;\n    return (\n    /**\n     * @param {string} s String.\n     * @return {Color} Color.\n     */\n    function (s) {\n        var color;\n        if (cache.hasOwnProperty(s)) {\n            color = cache[s];\n        }\n        else {\n            if (cacheSize >= MAX_CACHE_SIZE) {\n                var i = 0;\n                for (var key in cache) {\n                    if ((i++ & 3) === 0) {\n                        delete cache[key];\n                        --cacheSize;\n                    }\n                }\n            }\n            color = fromStringInternal_(s);\n            cache[s] = color;\n            ++cacheSize;\n        }\n        return color;\n    });\n})();\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n    if (Array.isArray(color)) {\n        return color;\n    }\n    else {\n        return fromString(color);\n    }\n}\n/**\n * @param {string} s String.\n * @private\n * @return {Color} Color.\n */\nfunction fromStringInternal_(s) {\n    var r, g, b, a, color;\n    if (NAMED_COLOR_RE_.exec(s)) {\n        s = fromNamed(s);\n    }\n    if (HEX_COLOR_RE_.exec(s)) {\n        // hex\n        var n = s.length - 1; // number of hex digits\n        var d = // number of digits per channel\n         void 0; // number of digits per channel\n        if (n <= 4) {\n            d = 1;\n        }\n        else {\n            d = 2;\n        }\n        var hasAlpha = n === 4 || n === 8;\n        r = parseInt(s.substr(1 + 0 * d, d), 16);\n        g = parseInt(s.substr(1 + 1 * d, d), 16);\n        b = parseInt(s.substr(1 + 2 * d, d), 16);\n        if (hasAlpha) {\n            a = parseInt(s.substr(1 + 3 * d, d), 16);\n        }\n        else {\n            a = 255;\n        }\n        if (d == 1) {\n            r = (r << 4) + r;\n            g = (g << 4) + g;\n            b = (b << 4) + b;\n            if (hasAlpha) {\n                a = (a << 4) + a;\n            }\n        }\n        color = [r, g, b, a / 255];\n    }\n    else if (s.indexOf('rgba(') == 0) {\n        // rgba()\n        color = s.slice(5, -1).split(',').map(Number);\n        normalize(color);\n    }\n    else if (s.indexOf('rgb(') == 0) {\n        // rgb()\n        color = s.slice(4, -1).split(',').map(Number);\n        color.push(1);\n        normalize(color);\n    }\n    else {\n        assert(false, 14); // Invalid color\n    }\n    return color;\n}\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n    color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n    color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n    color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n    color[3] = clamp(color[3], 0, 1);\n    return color;\n}\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n    var r = color[0];\n    if (r != (r | 0)) {\n        r = (r + 0.5) | 0;\n    }\n    var g = color[1];\n    if (g != (g | 0)) {\n        g = (g + 0.5) | 0;\n    }\n    var b = color[2];\n    if (b != (b | 0)) {\n        b = (b + 0.5) | 0;\n    }\n    var a = color[3] === undefined ? 1 : Math.round(color[3] * 100) / 100;\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n/**\n * @param {string} s String.\n * @return {boolean} Whether the string is actually a valid color\n */\nexport function isStringColor(s) {\n    if (NAMED_COLOR_RE_.test(s)) {\n        s = fromNamed(s);\n    }\n    return (HEX_COLOR_RE_.test(s) || s.indexOf('rgba(') === 0 || s.indexOf('rgb(') === 0);\n}\n//# sourceMappingURL=color.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Base\n */\nimport BaseObject from '../Object.js';\nimport LayerProperty from './Property.js';\nimport { abstract } from '../util.js';\nimport { assert } from '../asserts.js';\nimport { assign } from '../obj.js';\nimport { clamp } from '../math.js';\n/**\n * A css color, or a function called with a view resolution returning a css color.\n *\n * @typedef {string|function(number):string} BackgroundColor\n * @api\n */\n/**\n * @typedef {import(\"../ObjectEventType\").Types|'change:extent'|'change:maxResolution'|'change:maxZoom'|\n *    'change:minResolution'|'change:minZoom'|'change:opacity'|'change:visible'|'change:zIndex'} BaseLayerObjectEventTypes\n */\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<BaseLayerObjectEventTypes, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|BaseLayerObjectEventTypes, Return>} BaseLayerOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {BackgroundColor} [background] Background color for the layer. If not specified, no background\n * will be rendered.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base~BaseLayer} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object~BaseObject} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nvar BaseLayer = /** @class */ (function (_super) {\n    __extends(BaseLayer, _super);\n    /**\n     * @param {Options} options Layer options.\n     */\n    function BaseLayer(options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {BaseLayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {BaseLayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {BaseLayerOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @type {BackgroundColor|false}\n         * @private\n         */\n        _this.background_ = options.background;\n        /**\n         * @type {Object<string, *>}\n         */\n        var properties = assign({}, options);\n        if (typeof options.properties === 'object') {\n            delete properties.properties;\n            assign(properties, options.properties);\n        }\n        properties[LayerProperty.OPACITY] =\n            options.opacity !== undefined ? options.opacity : 1;\n        assert(typeof properties[LayerProperty.OPACITY] === 'number', 64); // Layer opacity must be a number\n        properties[LayerProperty.VISIBLE] =\n            options.visible !== undefined ? options.visible : true;\n        properties[LayerProperty.Z_INDEX] = options.zIndex;\n        properties[LayerProperty.MAX_RESOLUTION] =\n            options.maxResolution !== undefined ? options.maxResolution : Infinity;\n        properties[LayerProperty.MIN_RESOLUTION] =\n            options.minResolution !== undefined ? options.minResolution : 0;\n        properties[LayerProperty.MIN_ZOOM] =\n            options.minZoom !== undefined ? options.minZoom : -Infinity;\n        properties[LayerProperty.MAX_ZOOM] =\n            options.maxZoom !== undefined ? options.maxZoom : Infinity;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.className_ =\n            properties.className !== undefined ? properties.className : 'ol-layer';\n        delete properties.className;\n        _this.setProperties(properties);\n        /**\n         * @type {import(\"./Layer.js\").State}\n         * @private\n         */\n        _this.state_ = null;\n        return _this;\n    }\n    /**\n     * Get the background for this layer.\n     * @return {BackgroundColor|false} Layer background.\n     */\n    BaseLayer.prototype.getBackground = function () {\n        return this.background_;\n    };\n    /**\n     * @return {string} CSS class name.\n     */\n    BaseLayer.prototype.getClassName = function () {\n        return this.className_;\n    };\n    /**\n     * This method is not meant to be called by layers or layer renderers because the state\n     * is incorrect if the layer is included in a layer group.\n     *\n     * @param {boolean} [opt_managed] Layer is managed.\n     * @return {import(\"./Layer.js\").State} Layer state.\n     */\n    BaseLayer.prototype.getLayerState = function (opt_managed) {\n        /** @type {import(\"./Layer.js\").State} */\n        var state = this.state_ ||\n            /** @type {?} */ ({\n                layer: this,\n                managed: opt_managed === undefined ? true : opt_managed,\n            });\n        var zIndex = this.getZIndex();\n        state.opacity = clamp(Math.round(this.getOpacity() * 100) / 100, 0, 1);\n        state.visible = this.getVisible();\n        state.extent = this.getExtent();\n        state.zIndex = zIndex === undefined && !state.managed ? Infinity : zIndex;\n        state.maxResolution = this.getMaxResolution();\n        state.minResolution = Math.max(this.getMinResolution(), 0);\n        state.minZoom = this.getMinZoom();\n        state.maxZoom = this.getMaxZoom();\n        this.state_ = state;\n        return state;\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"./Layer.js\").default>} [opt_array] Array of layers (to be\n     *     modified in place).\n     * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n     */\n    BaseLayer.prototype.getLayersArray = function (opt_array) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"./Layer.js\").State>} [opt_states] Optional list of layer\n     *     states (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n     */\n    BaseLayer.prototype.getLayerStatesArray = function (opt_states) {\n        return abstract();\n    };\n    /**\n     * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n     * will be visible regardless of extent.\n     * @return {import(\"../extent.js\").Extent|undefined} The layer extent.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getExtent = function () {\n        return /** @type {import(\"../extent.js\").Extent|undefined} */ (this.get(LayerProperty.EXTENT));\n    };\n    /**\n     * Return the maximum resolution of the layer.\n     * @return {number} The maximum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMaxResolution = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n    };\n    /**\n     * Return the minimum resolution of the layer.\n     * @return {number} The minimum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMinResolution = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n    };\n    /**\n     * Return the minimum zoom level of the layer.\n     * @return {number} The minimum zoom level of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMinZoom = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MIN_ZOOM));\n    };\n    /**\n     * Return the maximum zoom level of the layer.\n     * @return {number} The maximum zoom level of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMaxZoom = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MAX_ZOOM));\n    };\n    /**\n     * Return the opacity of the layer (between 0 and 1).\n     * @return {number} The opacity of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getOpacity = function () {\n        return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n    };\n    /**\n     * @abstract\n     * @return {import(\"../source/Source.js\").State} Source state.\n     */\n    BaseLayer.prototype.getSourceState = function () {\n        return abstract();\n    };\n    /**\n     * Return the visibility of the layer (`true` or `false`).\n     * @return {boolean} The visibility of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getVisible = function () {\n        return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n    };\n    /**\n     * Return the Z-index of the layer, which is used to order layers before\n     * rendering. The default Z-index is 0.\n     * @return {number} The Z-index of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getZIndex = function () {\n        return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n    };\n    /**\n     * Sets the background color.\n     * @param {BackgroundColor} [opt_background] Background color.\n     */\n    BaseLayer.prototype.setBackground = function (opt_background) {\n        this.background_ = opt_background;\n        this.changed();\n    };\n    /**\n     * Set the extent at which the layer is visible.  If `undefined`, the layer\n     * will be visible at all extents.\n     * @param {import(\"../extent.js\").Extent|undefined} extent The extent of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setExtent = function (extent) {\n        this.set(LayerProperty.EXTENT, extent);\n    };\n    /**\n     * Set the maximum resolution at which the layer is visible.\n     * @param {number} maxResolution The maximum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMaxResolution = function (maxResolution) {\n        this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n    };\n    /**\n     * Set the minimum resolution at which the layer is visible.\n     * @param {number} minResolution The minimum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMinResolution = function (minResolution) {\n        this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n    };\n    /**\n     * Set the maximum zoom (exclusive) at which the layer is visible.\n     * Note that the zoom levels for layer visibility are based on the\n     * view zoom level, which may be different from a tile source zoom level.\n     * @param {number} maxZoom The maximum zoom of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMaxZoom = function (maxZoom) {\n        this.set(LayerProperty.MAX_ZOOM, maxZoom);\n    };\n    /**\n     * Set the minimum zoom (inclusive) at which the layer is visible.\n     * Note that the zoom levels for layer visibility are based on the\n     * view zoom level, which may be different from a tile source zoom level.\n     * @param {number} minZoom The minimum zoom of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMinZoom = function (minZoom) {\n        this.set(LayerProperty.MIN_ZOOM, minZoom);\n    };\n    /**\n     * Set the opacity of the layer, allowed values range from 0 to 1.\n     * @param {number} opacity The opacity of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setOpacity = function (opacity) {\n        assert(typeof opacity === 'number', 64); // Layer opacity must be a number\n        this.set(LayerProperty.OPACITY, opacity);\n    };\n    /**\n     * Set the visibility of the layer (`true` or `false`).\n     * @param {boolean} visible The visibility of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setVisible = function (visible) {\n        this.set(LayerProperty.VISIBLE, visible);\n    };\n    /**\n     * Set Z-index of the layer, which is used to order layers before rendering.\n     * The default Z-index is 0.\n     * @param {number} zindex The z-index of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setZIndex = function (zindex) {\n        this.set(LayerProperty.Z_INDEX, zindex);\n    };\n    /**\n     * Clean up.\n     */\n    BaseLayer.prototype.disposeInternal = function () {\n        if (this.state_) {\n            this.state_.layer = null;\n            this.state_ = null;\n        }\n        _super.prototype.disposeInternal.call(this);\n    };\n    return BaseLayer;\n}(BaseObject));\nexport default BaseLayer;\n//# sourceMappingURL=Base.js.map","/**\n * @module ol/centerconstraint\n */\nimport { clamp } from './math.js';\n/**\n * @typedef {function((import(\"./coordinate.js\").Coordinate|undefined), number, import(\"./size.js\").Size, boolean=, Array<number>=): (import(\"./coordinate.js\").Coordinate|undefined)} Type\n */\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {boolean} onlyCenter If true, the constraint will only apply to the view center.\n * @param {boolean} smooth If true, the view will be able to go slightly out of the given extent\n * (only during interaction and animation).\n * @return {Type} The constraint.\n */\nexport function createExtent(extent, onlyCenter, smooth) {\n    return (\n    /**\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center Center.\n     * @param {number|undefined} resolution Resolution.\n     * @param {import(\"./size.js\").Size} size Viewport size; unused if `onlyCenter` was specified.\n     * @param {boolean} [opt_isMoving] True if an interaction or animation is in progress.\n     * @param {Array<number>} [opt_centerShift] Shift between map center and viewport center.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n     */\n    function (center, resolution, size, opt_isMoving, opt_centerShift) {\n        if (!center) {\n            return undefined;\n        }\n        if (!resolution && !onlyCenter) {\n            return center;\n        }\n        var viewWidth = onlyCenter ? 0 : size[0] * resolution;\n        var viewHeight = onlyCenter ? 0 : size[1] * resolution;\n        var shiftX = opt_centerShift ? opt_centerShift[0] : 0;\n        var shiftY = opt_centerShift ? opt_centerShift[1] : 0;\n        var minX = extent[0] + viewWidth / 2 + shiftX;\n        var maxX = extent[2] - viewWidth / 2 + shiftX;\n        var minY = extent[1] + viewHeight / 2 + shiftY;\n        var maxY = extent[3] - viewHeight / 2 + shiftY;\n        // note: when zooming out of bounds, min and max values for x and y may\n        // end up inverted (min > max); this has to be accounted for\n        if (minX > maxX) {\n            minX = (maxX + minX) / 2;\n            maxX = minX;\n        }\n        if (minY > maxY) {\n            minY = (maxY + minY) / 2;\n            maxY = minY;\n        }\n        var x = clamp(center[0], minX, maxX);\n        var y = clamp(center[1], minY, maxY);\n        // during an interaction, allow some overscroll\n        if (opt_isMoving && smooth && resolution) {\n            var ratio = 30 * resolution;\n            x +=\n                -ratio * Math.log(1 + Math.max(0, minX - center[0]) / ratio) +\n                    ratio * Math.log(1 + Math.max(0, center[0] - maxX) / ratio);\n            y +=\n                -ratio * Math.log(1 + Math.max(0, minY - center[1]) / ratio) +\n                    ratio * Math.log(1 + Math.max(0, center[1] - maxY) / ratio);\n        }\n        return [x, y];\n    });\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} [center] Center.\n * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n */\nexport function none(center) {\n    return center;\n}\n//# sourceMappingURL=centerconstraint.js.map","/**\n * @module ol/resolutionconstraint\n */\nimport { clamp } from './math.js';\nimport { getHeight, getWidth } from './extent.js';\nimport { linearFindNearest } from './array.js';\n/**\n * @typedef {function((number|undefined), number, import(\"./size.js\").Size, boolean=): (number|undefined)} Type\n */\n/**\n * Returns a modified resolution taking into account the viewport size and maximum\n * allowed extent.\n * @param {number} resolution Resolution\n * @param {import(\"./extent.js\").Extent} maxExtent Maximum allowed extent.\n * @param {import(\"./size.js\").Size} viewportSize Viewport size.\n * @param {boolean} showFullExtent Whether to show the full extent.\n * @return {number} Capped resolution.\n */\nfunction getViewportClampedResolution(resolution, maxExtent, viewportSize, showFullExtent) {\n    var xResolution = getWidth(maxExtent) / viewportSize[0];\n    var yResolution = getHeight(maxExtent) / viewportSize[1];\n    if (showFullExtent) {\n        return Math.min(resolution, Math.max(xResolution, yResolution));\n    }\n    return Math.min(resolution, Math.min(xResolution, yResolution));\n}\n/**\n * Returns a modified resolution to be between maxResolution and minResolution while\n * still allowing the value to be slightly out of bounds.\n * Note: the computation is based on the logarithm function (ln):\n *  - at 1, ln(x) is 0\n *  - above 1, ln(x) keeps increasing but at a much slower pace than x\n * The final result is clamped to prevent getting too far away from bounds.\n * @param {number} resolution Resolution.\n * @param {number} maxResolution Max resolution.\n * @param {number} minResolution Min resolution.\n * @return {number} Smoothed resolution.\n */\nfunction getSmoothClampedResolution(resolution, maxResolution, minResolution) {\n    var result = Math.min(resolution, maxResolution);\n    var ratio = 50;\n    result *=\n        Math.log(1 + ratio * Math.max(0, resolution / maxResolution - 1)) / ratio +\n            1;\n    if (minResolution) {\n        result = Math.max(result, minResolution);\n        result /=\n            Math.log(1 + ratio * Math.max(0, minResolution / resolution - 1)) /\n                ratio +\n                1;\n    }\n    return clamp(result, minResolution / 2, maxResolution * 2);\n}\n/**\n * @param {Array<number>} resolutions Resolutions.\n * @param {boolean} [opt_smooth] If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent} [opt_maxExtent] Maximum allowed extent.\n * @param {boolean} [opt_showFullExtent] If true, allows us to show the full extent. Default: false.\n * @return {Type} Zoom function.\n */\nexport function createSnapToResolutions(resolutions, opt_smooth, opt_maxExtent, opt_showFullExtent) {\n    return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean} [opt_isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, opt_isMoving) {\n        if (resolution !== undefined) {\n            var maxResolution = resolutions[0];\n            var minResolution = resolutions[resolutions.length - 1];\n            var cappedMaxRes = opt_maxExtent\n                ? getViewportClampedResolution(maxResolution, opt_maxExtent, size, opt_showFullExtent)\n                : maxResolution;\n            // during interacting or animating, allow intermediary values\n            if (opt_isMoving) {\n                var smooth = opt_smooth !== undefined ? opt_smooth : true;\n                if (!smooth) {\n                    return clamp(resolution, minResolution, cappedMaxRes);\n                }\n                return getSmoothClampedResolution(resolution, cappedMaxRes, minResolution);\n            }\n            var capped = Math.min(cappedMaxRes, resolution);\n            var z = Math.floor(linearFindNearest(resolutions, capped, direction));\n            if (resolutions[z] > cappedMaxRes && z < resolutions.length - 1) {\n                return resolutions[z + 1];\n            }\n            return resolutions[z];\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n/**\n * @param {number} power Power.\n * @param {number} maxResolution Maximum resolution.\n * @param {number} [opt_minResolution] Minimum resolution.\n * @param {boolean} [opt_smooth] If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent} [opt_maxExtent] Maximum allowed extent.\n * @param {boolean} [opt_showFullExtent] If true, allows us to show the full extent. Default: false.\n * @return {Type} Zoom function.\n */\nexport function createSnapToPower(power, maxResolution, opt_minResolution, opt_smooth, opt_maxExtent, opt_showFullExtent) {\n    return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean} [opt_isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, opt_isMoving) {\n        if (resolution !== undefined) {\n            var cappedMaxRes = opt_maxExtent\n                ? getViewportClampedResolution(maxResolution, opt_maxExtent, size, opt_showFullExtent)\n                : maxResolution;\n            var minResolution = opt_minResolution !== undefined ? opt_minResolution : 0;\n            // during interacting or animating, allow intermediary values\n            if (opt_isMoving) {\n                var smooth = opt_smooth !== undefined ? opt_smooth : true;\n                if (!smooth) {\n                    return clamp(resolution, minResolution, cappedMaxRes);\n                }\n                return getSmoothClampedResolution(resolution, cappedMaxRes, minResolution);\n            }\n            var tolerance = 1e-9;\n            var minZoomLevel = Math.ceil(Math.log(maxResolution / cappedMaxRes) / Math.log(power) - tolerance);\n            var offset = -direction * (0.5 - tolerance) + 0.5;\n            var capped = Math.min(cappedMaxRes, resolution);\n            var cappedZoomLevel = Math.floor(Math.log(maxResolution / capped) / Math.log(power) + offset);\n            var zoomLevel = Math.max(minZoomLevel, cappedZoomLevel);\n            var newResolution = maxResolution / Math.pow(power, zoomLevel);\n            return clamp(newResolution, minResolution, cappedMaxRes);\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n/**\n * @param {number} maxResolution Max resolution.\n * @param {number} minResolution Min resolution.\n * @param {boolean} [opt_smooth] If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent} [opt_maxExtent] Maximum allowed extent.\n * @param {boolean} [opt_showFullExtent] If true, allows us to show the full extent. Default: false.\n * @return {Type} Zoom function.\n */\nexport function createMinMaxResolution(maxResolution, minResolution, opt_smooth, opt_maxExtent, opt_showFullExtent) {\n    return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean} [opt_isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, opt_isMoving) {\n        if (resolution !== undefined) {\n            var cappedMaxRes = opt_maxExtent\n                ? getViewportClampedResolution(maxResolution, opt_maxExtent, size, opt_showFullExtent)\n                : maxResolution;\n            var smooth = opt_smooth !== undefined ? opt_smooth : true;\n            if (!smooth || !opt_isMoving) {\n                return clamp(resolution, minResolution, cappedMaxRes);\n            }\n            return getSmoothClampedResolution(resolution, cappedMaxRes, minResolution);\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n//# sourceMappingURL=resolutionconstraint.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/View\n */\nimport BaseObject from './Object.js';\nimport Units from './proj/Units.js';\nimport ViewHint from './ViewHint.js';\nimport ViewProperty from './ViewProperty.js';\nimport { DEFAULT_TILE_SIZE } from './tilegrid/common.js';\nimport { METERS_PER_UNIT, createProjection, disableCoordinateWarning, fromUserCoordinate, fromUserExtent, getUserProjection, toUserCoordinate, toUserExtent, } from './proj.js';\nimport { VOID } from './functions.js';\nimport { add as addCoordinate, equals as coordinatesEqual, equals, rotate as rotateCoordinate, } from './coordinate.js';\nimport { assert } from './asserts.js';\nimport { assign } from './obj.js';\nimport { none as centerNone, createExtent } from './centerconstraint.js';\nimport { clamp, modulo } from './math.js';\nimport { createMinMaxResolution, createSnapToPower, createSnapToResolutions, } from './resolutionconstraint.js';\nimport { createSnapToN, createSnapToZero, disable, none as rotationNone, } from './rotationconstraint.js';\nimport { easeOut, inAndOut } from './easing.js';\nimport { getCenter, getForViewAndSize, getHeight, getWidth, isEmpty, } from './extent.js';\nimport { linearFindNearest } from './array.js';\nimport { fromExtent as polygonFromExtent } from './geom/Polygon.js';\n/**\n * An animation configuration\n *\n * @typedef {Object} Animation\n * @property {import(\"./coordinate.js\").Coordinate} [sourceCenter] Source center.\n * @property {import(\"./coordinate.js\").Coordinate} [targetCenter] Target center.\n * @property {number} [sourceResolution] Source resolution.\n * @property {number} [targetResolution] Target resolution.\n * @property {number} [sourceRotation] Source rotation.\n * @property {number} [targetRotation] Target rotation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Anchor.\n * @property {number} start Start.\n * @property {number} duration Duration.\n * @property {boolean} complete Complete.\n * @property {function(number):number} easing Easing.\n * @property {function(boolean):void} callback Callback.\n */\n/**\n * @typedef {Object} Constraints\n * @property {import(\"./centerconstraint.js\").Type} center Center.\n * @property {import(\"./resolutionconstraint.js\").Type} resolution Resolution.\n * @property {import(\"./rotationconstraint.js\").Type} rotation Rotation.\n */\n/**\n * @typedef {Object} FitOptions\n * @property {import(\"./size.js\").Size} [size] The size in pixels of the box to fit\n * the extent into. Default is the current size of the first map in the DOM that\n * uses this view, or `[100, 100]` if no such map is found.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in pixels) to be\n * cleared inside the view. Values in the array are top, right, bottom and left\n * padding.\n * @property {boolean} [nearest=false] If the view `constrainResolution` option is `true`,\n * get the nearest extent instead of the closest that actually fits the view.\n * @property {number} [minResolution=0] Minimum resolution that we zoom to.\n * @property {number} [maxZoom] Maximum zoom level that we zoom to. If\n * `minResolution` is given, this property is ignored.\n * @property {number} [duration] The duration of the animation in milliseconds.\n * By default, there is no animation to the target extent.\n * @property {function(number):number} [easing] The easing function used during\n * the animation (defaults to {@link module:ol/easing.inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n * @property {function(boolean):void} [callback] Function called when the view is in\n * its final position. The callback will be called with `true` if the animation\n * series completed on its own or `false` if it was cancelled.\n */\n/**\n * @typedef {Object} ViewOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The initial center for\n * the view. If a user projection is not set, the coordinate system for the center is\n * specified with the `projection` option. Layer sources will not be fetched if this\n * is not set, but the center can be set later with {@link #setCenter}.\n * @property {boolean|number} [constrainRotation=true] Rotation constraint.\n * `false` means no constraint. `true` means no constraint, but snap to zero\n * near zero. A number constrains the rotation to that number of values. For\n * example, `4` will constrain the rotation to 0, 90, 180, and 270 degrees.\n * @property {boolean} [enableRotation=true] Enable rotation.\n * If `false`, a rotation constraint that always sets the rotation to zero is\n * used. The `constrainRotation` option has no effect if `enableRotation` is\n * `false`.\n * @property {import(\"./extent.js\").Extent} [extent] The extent that constrains the\n * view, in other words, nothing outside of this extent can be visible on the map.\n * @property {boolean} [constrainOnlyCenter=false] If true, the extent\n * constraint will only apply to the view center and not the whole extent.\n * @property {boolean} [smoothExtentConstraint=true] If true, the extent\n * constraint will be applied smoothly, i.e. allow the view to go slightly outside\n * of the given `extent`.\n * @property {number} [maxResolution] The maximum resolution used to determine\n * the resolution constraint. It is used together with `minResolution` (or\n * `maxZoom`) and `zoomFactor`. If unspecified it is calculated in such a way\n * that the projection's validity extent fits in a 256x256 px tile. If the\n * projection is Spherical Mercator (the default) then `maxResolution` defaults\n * to `40075016.68557849 / 256 = 156543.03392804097`.\n * @property {number} [minResolution] The minimum resolution used to determine\n * the resolution constraint.  It is used together with `maxResolution` (or\n * `minZoom`) and `zoomFactor`.  If unspecified it is calculated assuming 29\n * zoom levels (with a factor of 2). If the projection is Spherical Mercator\n * (the default) then `minResolution` defaults to\n * `40075016.68557849 / 256 / Math.pow(2, 28) = 0.0005831682455839253`.\n * @property {number} [maxZoom=28] The maximum zoom level used to determine the\n * resolution constraint. It is used together with `minZoom` (or\n * `maxResolution`) and `zoomFactor`.  Note that if `minResolution` is also\n * provided, it is given precedence over `maxZoom`.\n * @property {number} [minZoom=0] The minimum zoom level used to determine the\n * resolution constraint. It is used together with `maxZoom` (or\n * `minResolution`) and `zoomFactor`.  Note that if `maxResolution` is also\n * provided, it is given precedence over `minZoom`.\n * @property {boolean} [multiWorld=false] If `false` the view is constrained so\n * only one world is visible, and you cannot pan off the edge.  If `true` the map\n * may show multiple worlds at low zoom levels.  Only used if the `projection` is\n * global.  Note that if `extent` is also provided it is given precedence.\n * @property {boolean} [constrainResolution=false] If true, the view will always\n * animate to the closest zoom level after an interaction; false means\n * intermediary zoom levels are allowed.\n * @property {boolean} [smoothResolutionConstraint=true] If true, the resolution\n * min/max values will be applied smoothly, i. e. allow the view to exceed slightly\n * the given resolution or zoom bounds.\n * @property {boolean} [showFullExtent=false] Allow the view to be zoomed out to\n * show the full configured extent. By default, when a view is configured with an\n * extent, users will not be able to zoom out so the viewport exceeds the extent in\n * either dimension. This means the full extent may not be visible if the viewport\n * is taller or wider than the aspect ratio of the configured extent. If\n * showFullExtent is true, the user will be able to zoom out so that the viewport\n * exceeds the height or width of the configured extent, but not both, allowing the\n * full extent to be shown.\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857'] The\n * projection. The default is Spherical Mercator.\n * @property {number} [resolution] The initial resolution for the view. The\n * units are `projection` units per pixel (e.g. meters per pixel). An\n * alternative to setting this is to set `zoom`. Layer sources will not be\n * fetched if neither this nor `zoom` are defined, but they can be set later\n * with {@link #setZoom} or {@link #setResolution}.\n * @property {Array<number>} [resolutions] Resolutions that determine the\n * zoom levels if specified. The index in the array corresponds to the zoom level,\n * therefore the resolution values have to be in descending order. It also constrains\n * the resolution by the minimum and maximum value. If set the `maxResolution`,\n * `minResolution`, `minZoom`, `maxZoom`, and `zoomFactor` options are ignored.\n * @property {number} [rotation=0] The initial rotation for the view in radians\n * (positive rotation clockwise, 0 means North).\n * @property {number} [zoom] Only used if `resolution` is not defined. Zoom\n * level used to calculate the initial resolution for the view.\n * @property {number} [zoomFactor=2] The zoom factor used to compute the\n * corresponding resolution.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in css pixels).\n * If the map viewport is partially covered with other content (overlays) along\n * its edges, this setting allows to shift the center of the viewport away from\n * that content. The order of the values is top, right, bottom, left.\n */\n/**\n * @typedef {Object} AnimationOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The center of the view at the end of\n * the animation.\n * @property {number} [zoom] The zoom level of the view at the end of the\n * animation. This takes precedence over `resolution`.\n * @property {number} [resolution] The resolution of the view at the end\n * of the animation.  If `zoom` is also provided, this option will be ignored.\n * @property {number} [rotation] The rotation of the view at the end of\n * the animation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Optional anchor to remain fixed\n * during a rotation or resolution animation.\n * @property {number} [duration=1000] The duration of the animation in milliseconds.\n * @property {function(number):number} [easing] The easing function used\n * during the animation (defaults to {@link module:ol/easing.inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n */\n/**\n * @typedef {Object} State\n * @property {import(\"./coordinate.js\").Coordinate} center Center.\n * @property {import(\"./proj/Projection.js\").default} projection Projection.\n * @property {number} resolution Resolution.\n * @property {import(\"./coordinate.js\").Coordinate} [nextCenter] The next center during an animation series.\n * @property {number} [nextResolution] The next resolution during an animation series.\n * @property {number} [nextRotation] The next rotation during an animation series.\n * @property {number} rotation Rotation.\n * @property {number} zoom Zoom.\n */\n/**\n * Default min zoom level for the map view.\n * @type {number}\n */\nvar DEFAULT_MIN_ZOOM = 0;\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:center'|'change:resolution'|'change:rotation'} ViewObjectEventTypes\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<ViewObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|ViewObjectEventTypes, Return>} ViewOnSignature\n */\n/**\n * @classdesc\n * A View object represents a simple 2D view of the map.\n *\n * This is the object to act upon to change the center, resolution,\n * and rotation of the map.\n *\n * A View has a `projection`. The projection determines the\n * coordinate system of the center, and its units determine the units of the\n * resolution (projection units per pixel). The default projection is\n * Web Mercator (EPSG:3857).\n *\n * ### The view states\n *\n * A View is determined by three states: `center`, `resolution`,\n * and `rotation`. Each state has a corresponding getter and setter, e.g.\n * `getCenter` and `setCenter` for the `center` state.\n *\n * The `zoom` state is actually not saved on the view: all computations\n * internally use the `resolution` state. Still, the `setZoom` and `getZoom`\n * methods are available, as well as `getResolutionForZoom` and\n * `getZoomForResolution` to switch from one system to the other.\n *\n * ### The constraints\n *\n * `setCenter`, `setResolution` and `setRotation` can be used to change the\n * states of the view, but any constraint defined in the constructor will\n * be applied along the way.\n *\n * A View object can have a *resolution constraint*, a *rotation constraint*\n * and a *center constraint*.\n *\n * The *resolution constraint* typically restricts min/max values and\n * snaps to specific resolutions. It is determined by the following\n * options: `resolutions`, `maxResolution`, `maxZoom` and `zoomFactor`.\n * If `resolutions` is set, the other three options are ignored. See\n * documentation for each option for more information. By default, the view\n * only has a min/max restriction and allow intermediary zoom levels when\n * pinch-zooming for example.\n *\n * The *rotation constraint* snaps to specific angles. It is determined\n * by the following options: `enableRotation` and `constrainRotation`.\n * By default rotation is allowed and its value is snapped to zero when approaching the\n * horizontal.\n *\n * The *center constraint* is determined by the `extent` option. By\n * default the view center is not constrained at all.\n *\n * ### Changing the view state\n *\n * It is important to note that `setZoom`, `setResolution`, `setCenter` and\n * `setRotation` are subject to the above mentioned constraints. As such, it\n * may sometimes not be possible to know in advance the resulting state of the\n * View. For example, calling `setResolution(10)` does not guarantee that\n * `getResolution()` will return `10`.\n *\n * A consequence of this is that, when applying a delta on the view state, one\n * should use `adjustCenter`, `adjustRotation`, `adjustZoom` and `adjustResolution`\n * rather than the corresponding setters. This will let view do its internal\n * computations. Besides, the `adjust*` methods also take an `opt_anchor`\n * argument which allows specifying an origin for the transformation.\n *\n * ### Interacting with the view\n *\n * View constraints are usually only applied when the view is *at rest*, meaning that\n * no interaction or animation is ongoing. As such, if the user puts the view in a\n * state that is not equivalent to a constrained one (e.g. rotating the view when\n * the snap angle is 0), an animation will be triggered at the interaction end to\n * put back the view to a stable state;\n *\n * @api\n */\nvar View = /** @class */ (function (_super) {\n    __extends(View, _super);\n    /**\n     * @param {ViewOptions} [opt_options] View options.\n     */\n    function View(opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {ViewOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {ViewOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {ViewOnSignature<void>}\n         */\n        _this.un;\n        var options = assign({}, opt_options);\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.hints_ = [0, 0];\n        /**\n         * @private\n         * @type {Array<Array<Animation>>}\n         */\n        _this.animations_ = [];\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.updateAnimationKey_;\n        /**\n         * @private\n         * @const\n         * @type {import(\"./proj/Projection.js\").default}\n         */\n        _this.projection_ = createProjection(options.projection, 'EPSG:3857');\n        /**\n         * @private\n         * @type {import(\"./size.js\").Size}\n         */\n        _this.viewportSize_ = [100, 100];\n        /**\n         * @private\n         * @type {import(\"./coordinate.js\").Coordinate|undefined}\n         */\n        _this.targetCenter_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.targetResolution_;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.targetRotation_;\n        /**\n         * @private\n         * @type {import(\"./coordinate.js\").Coordinate}\n         */\n        _this.nextCenter_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.nextResolution_;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.nextRotation_;\n        /**\n         * @private\n         * @type {import(\"./coordinate.js\").Coordinate|undefined}\n         */\n        _this.cancelAnchor_ = undefined;\n        if (options.projection) {\n            disableCoordinateWarning();\n        }\n        if (options.center) {\n            options.center = fromUserCoordinate(options.center, _this.projection_);\n        }\n        if (options.extent) {\n            options.extent = fromUserExtent(options.extent, _this.projection_);\n        }\n        _this.applyOptions_(options);\n        return _this;\n    }\n    /**\n     * Set up the view with the given options.\n     * @param {ViewOptions} options View options.\n     */\n    View.prototype.applyOptions_ = function (options) {\n        var properties = assign({}, options);\n        for (var key in ViewProperty) {\n            delete properties[key];\n        }\n        this.setProperties(properties, true);\n        var resolutionConstraintInfo = createResolutionConstraint(options);\n        /**\n         * @private\n         * @type {number}\n         */\n        this.maxResolution_ = resolutionConstraintInfo.maxResolution;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minResolution_ = resolutionConstraintInfo.minResolution;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.zoomFactor_ = resolutionConstraintInfo.zoomFactor;\n        /**\n         * @private\n         * @type {Array<number>|undefined}\n         */\n        this.resolutions_ = options.resolutions;\n        /**\n         * @type {Array<number>|undefined}\n         * @private\n         */\n        this.padding_ = options.padding;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minZoom_ = resolutionConstraintInfo.minZoom;\n        var centerConstraint = createCenterConstraint(options);\n        var resolutionConstraint = resolutionConstraintInfo.constraint;\n        var rotationConstraint = createRotationConstraint(options);\n        /**\n         * @private\n         * @type {Constraints}\n         */\n        this.constraints_ = {\n            center: centerConstraint,\n            resolution: resolutionConstraint,\n            rotation: rotationConstraint,\n        };\n        this.setRotation(options.rotation !== undefined ? options.rotation : 0);\n        this.setCenterInternal(options.center !== undefined ? options.center : null);\n        if (options.resolution !== undefined) {\n            this.setResolution(options.resolution);\n        }\n        else if (options.zoom !== undefined) {\n            this.setZoom(options.zoom);\n        }\n    };\n    Object.defineProperty(View.prototype, \"padding\", {\n        /**\n         * Padding (in css pixels).\n         * If the map viewport is partially covered with other content (overlays) along\n         * its edges, this setting allows to shift the center of the viewport away from that\n         * content. The order of the values in the array is top, right, bottom, left.\n         * The default is no padding, which is equivalent to `[0, 0, 0, 0]`.\n         * @type {Array<number>|undefined}\n         * @api\n         */\n        get: function () {\n            return this.padding_;\n        },\n        set: function (padding) {\n            var oldPadding = this.padding_;\n            this.padding_ = padding;\n            var center = this.getCenter();\n            if (center) {\n                var newPadding = padding || [0, 0, 0, 0];\n                oldPadding = oldPadding || [0, 0, 0, 0];\n                var resolution = this.getResolution();\n                var offsetX = (resolution / 2) *\n                    (newPadding[3] - oldPadding[3] + oldPadding[1] - newPadding[1]);\n                var offsetY = (resolution / 2) *\n                    (newPadding[0] - oldPadding[0] + oldPadding[2] - newPadding[2]);\n                this.setCenterInternal([center[0] + offsetX, center[1] - offsetY]);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Get an updated version of the view options used to construct the view.  The\n     * current resolution (or zoom), center, and rotation are applied to any stored\n     * options.  The provided options can be used to apply new min/max zoom or\n     * resolution limits.\n     * @param {ViewOptions} newOptions New options to be applied.\n     * @return {ViewOptions} New options updated with the current view state.\n     */\n    View.prototype.getUpdatedOptions_ = function (newOptions) {\n        var options = this.getProperties();\n        // preserve resolution (or zoom)\n        if (options.resolution !== undefined) {\n            options.resolution = this.getResolution();\n        }\n        else {\n            options.zoom = this.getZoom();\n        }\n        // preserve center\n        options.center = this.getCenterInternal();\n        // preserve rotation\n        options.rotation = this.getRotation();\n        return assign({}, options, newOptions);\n    };\n    /**\n     * Animate the view.  The view's center, zoom (or resolution), and rotation\n     * can be animated for smooth transitions between view states.  For example,\n     * to animate the view to a new zoom level:\n     *\n     *     view.animate({zoom: view.getZoom() + 1});\n     *\n     * By default, the animation lasts one second and uses in-and-out easing.  You\n     * can customize this behavior by including `duration` (in milliseconds) and\n     * `easing` options (see {@link module:ol/easing}).\n     *\n     * To chain together multiple animations, call the method with multiple\n     * animation objects.  For example, to first zoom and then pan:\n     *\n     *     view.animate({zoom: 10}, {center: [0, 0]});\n     *\n     * If you provide a function as the last argument to the animate method, it\n     * will get called at the end of an animation series.  The callback will be\n     * called with `true` if the animation series completed on its own or `false`\n     * if it was cancelled.\n     *\n     * Animations are cancelled by user interactions (e.g. dragging the map) or by\n     * calling `view.setCenter()`, `view.setResolution()`, or `view.setRotation()`\n     * (or another method that calls one of these).\n     *\n     * @param {...(AnimationOptions|function(boolean): void)} var_args Animation\n     *     options.  Multiple animations can be run in series by passing multiple\n     *     options objects.  To run multiple animations in parallel, call the method\n     *     multiple times.  An optional callback can be provided as a final\n     *     argument.  The callback will be called with a boolean indicating whether\n     *     the animation completed without being cancelled.\n     * @api\n     */\n    View.prototype.animate = function (var_args) {\n        if (this.isDef() && !this.getAnimating()) {\n            this.resolveConstraints(0);\n        }\n        var args = new Array(arguments.length);\n        for (var i = 0; i < args.length; ++i) {\n            var options = arguments[i];\n            if (options.center) {\n                options = assign({}, options);\n                options.center = fromUserCoordinate(options.center, this.getProjection());\n            }\n            if (options.anchor) {\n                options = assign({}, options);\n                options.anchor = fromUserCoordinate(options.anchor, this.getProjection());\n            }\n            args[i] = options;\n        }\n        this.animateInternal.apply(this, args);\n    };\n    /**\n     * @param {...(AnimationOptions|function(boolean): void)} var_args Animation options.\n     */\n    View.prototype.animateInternal = function (var_args) {\n        var animationCount = arguments.length;\n        var callback;\n        if (animationCount > 1 &&\n            typeof arguments[animationCount - 1] === 'function') {\n            callback = arguments[animationCount - 1];\n            --animationCount;\n        }\n        var i = 0;\n        for (; i < animationCount && !this.isDef(); ++i) {\n            // if view properties are not yet set, shortcut to the final state\n            var state = arguments[i];\n            if (state.center) {\n                this.setCenterInternal(state.center);\n            }\n            if (state.zoom !== undefined) {\n                this.setZoom(state.zoom);\n            }\n            else if (state.resolution) {\n                this.setResolution(state.resolution);\n            }\n            if (state.rotation !== undefined) {\n                this.setRotation(state.rotation);\n            }\n        }\n        if (i === animationCount) {\n            if (callback) {\n                animationCallback(callback, true);\n            }\n            return;\n        }\n        var start = Date.now();\n        var center = this.targetCenter_.slice();\n        var resolution = this.targetResolution_;\n        var rotation = this.targetRotation_;\n        var series = [];\n        for (; i < animationCount; ++i) {\n            var options = /** @type {AnimationOptions} */ (arguments[i]);\n            var animation = {\n                start: start,\n                complete: false,\n                anchor: options.anchor,\n                duration: options.duration !== undefined ? options.duration : 1000,\n                easing: options.easing || inAndOut,\n                callback: callback,\n            };\n            if (options.center) {\n                animation.sourceCenter = center;\n                animation.targetCenter = options.center.slice();\n                center = animation.targetCenter;\n            }\n            if (options.zoom !== undefined) {\n                animation.sourceResolution = resolution;\n                animation.targetResolution = this.getResolutionForZoom(options.zoom);\n                resolution = animation.targetResolution;\n            }\n            else if (options.resolution) {\n                animation.sourceResolution = resolution;\n                animation.targetResolution = options.resolution;\n                resolution = animation.targetResolution;\n            }\n            if (options.rotation !== undefined) {\n                animation.sourceRotation = rotation;\n                var delta = modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;\n                animation.targetRotation = rotation + delta;\n                rotation = animation.targetRotation;\n            }\n            // check if animation is a no-op\n            if (isNoopAnimation(animation)) {\n                animation.complete = true;\n                // we still push it onto the series for callback handling\n            }\n            else {\n                start += animation.duration;\n            }\n            series.push(animation);\n        }\n        this.animations_.push(series);\n        this.setHint(ViewHint.ANIMATING, 1);\n        this.updateAnimations_();\n    };\n    /**\n     * Determine if the view is being animated.\n     * @return {boolean} The view is being animated.\n     * @api\n     */\n    View.prototype.getAnimating = function () {\n        return this.hints_[ViewHint.ANIMATING] > 0;\n    };\n    /**\n     * Determine if the user is interacting with the view, such as panning or zooming.\n     * @return {boolean} The view is being interacted with.\n     * @api\n     */\n    View.prototype.getInteracting = function () {\n        return this.hints_[ViewHint.INTERACTING] > 0;\n    };\n    /**\n     * Cancel any ongoing animations.\n     * @api\n     */\n    View.prototype.cancelAnimations = function () {\n        this.setHint(ViewHint.ANIMATING, -this.hints_[ViewHint.ANIMATING]);\n        var anchor;\n        for (var i = 0, ii = this.animations_.length; i < ii; ++i) {\n            var series = this.animations_[i];\n            if (series[0].callback) {\n                animationCallback(series[0].callback, false);\n            }\n            if (!anchor) {\n                for (var j = 0, jj = series.length; j < jj; ++j) {\n                    var animation = series[j];\n                    if (!animation.complete) {\n                        anchor = animation.anchor;\n                        break;\n                    }\n                }\n            }\n        }\n        this.animations_.length = 0;\n        this.cancelAnchor_ = anchor;\n        this.nextCenter_ = null;\n        this.nextResolution_ = NaN;\n        this.nextRotation_ = NaN;\n    };\n    /**\n     * Update all animations.\n     */\n    View.prototype.updateAnimations_ = function () {\n        if (this.updateAnimationKey_ !== undefined) {\n            cancelAnimationFrame(this.updateAnimationKey_);\n            this.updateAnimationKey_ = undefined;\n        }\n        if (!this.getAnimating()) {\n            return;\n        }\n        var now = Date.now();\n        var more = false;\n        for (var i = this.animations_.length - 1; i >= 0; --i) {\n            var series = this.animations_[i];\n            var seriesComplete = true;\n            for (var j = 0, jj = series.length; j < jj; ++j) {\n                var animation = series[j];\n                if (animation.complete) {\n                    continue;\n                }\n                var elapsed = now - animation.start;\n                var fraction = animation.duration > 0 ? elapsed / animation.duration : 1;\n                if (fraction >= 1) {\n                    animation.complete = true;\n                    fraction = 1;\n                }\n                else {\n                    seriesComplete = false;\n                }\n                var progress = animation.easing(fraction);\n                if (animation.sourceCenter) {\n                    var x0 = animation.sourceCenter[0];\n                    var y0 = animation.sourceCenter[1];\n                    var x1 = animation.targetCenter[0];\n                    var y1 = animation.targetCenter[1];\n                    this.nextCenter_ = animation.targetCenter;\n                    var x = x0 + progress * (x1 - x0);\n                    var y = y0 + progress * (y1 - y0);\n                    this.targetCenter_ = [x, y];\n                }\n                if (animation.sourceResolution && animation.targetResolution) {\n                    var resolution = progress === 1\n                        ? animation.targetResolution\n                        : animation.sourceResolution +\n                            progress *\n                                (animation.targetResolution - animation.sourceResolution);\n                    if (animation.anchor) {\n                        var size = this.getViewportSize_(this.getRotation());\n                        var constrainedResolution = this.constraints_.resolution(resolution, 0, size, true);\n                        this.targetCenter_ = this.calculateCenterZoom(constrainedResolution, animation.anchor);\n                    }\n                    this.nextResolution_ = animation.targetResolution;\n                    this.targetResolution_ = resolution;\n                    this.applyTargetState_(true);\n                }\n                if (animation.sourceRotation !== undefined &&\n                    animation.targetRotation !== undefined) {\n                    var rotation = progress === 1\n                        ? modulo(animation.targetRotation + Math.PI, 2 * Math.PI) -\n                            Math.PI\n                        : animation.sourceRotation +\n                            progress *\n                                (animation.targetRotation - animation.sourceRotation);\n                    if (animation.anchor) {\n                        var constrainedRotation = this.constraints_.rotation(rotation, true);\n                        this.targetCenter_ = this.calculateCenterRotate(constrainedRotation, animation.anchor);\n                    }\n                    this.nextRotation_ = animation.targetRotation;\n                    this.targetRotation_ = rotation;\n                }\n                this.applyTargetState_(true);\n                more = true;\n                if (!animation.complete) {\n                    break;\n                }\n            }\n            if (seriesComplete) {\n                this.animations_[i] = null;\n                this.setHint(ViewHint.ANIMATING, -1);\n                this.nextCenter_ = null;\n                this.nextResolution_ = NaN;\n                this.nextRotation_ = NaN;\n                var callback = series[0].callback;\n                if (callback) {\n                    animationCallback(callback, true);\n                }\n            }\n        }\n        // prune completed series\n        this.animations_ = this.animations_.filter(Boolean);\n        if (more && this.updateAnimationKey_ === undefined) {\n            this.updateAnimationKey_ = requestAnimationFrame(this.updateAnimations_.bind(this));\n        }\n    };\n    /**\n     * @param {number} rotation Target rotation.\n     * @param {import(\"./coordinate.js\").Coordinate} anchor Rotation anchor.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for rotation and anchor.\n     */\n    View.prototype.calculateCenterRotate = function (rotation, anchor) {\n        var center;\n        var currentCenter = this.getCenterInternal();\n        if (currentCenter !== undefined) {\n            center = [currentCenter[0] - anchor[0], currentCenter[1] - anchor[1]];\n            rotateCoordinate(center, rotation - this.getRotation());\n            addCoordinate(center, anchor);\n        }\n        return center;\n    };\n    /**\n     * @param {number} resolution Target resolution.\n     * @param {import(\"./coordinate.js\").Coordinate} anchor Zoom anchor.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for resolution and anchor.\n     */\n    View.prototype.calculateCenterZoom = function (resolution, anchor) {\n        var center;\n        var currentCenter = this.getCenterInternal();\n        var currentResolution = this.getResolution();\n        if (currentCenter !== undefined && currentResolution !== undefined) {\n            var x = anchor[0] -\n                (resolution * (anchor[0] - currentCenter[0])) / currentResolution;\n            var y = anchor[1] -\n                (resolution * (anchor[1] - currentCenter[1])) / currentResolution;\n            center = [x, y];\n        }\n        return center;\n    };\n    /**\n     * Returns the current viewport size.\n     * @private\n     * @param {number} [opt_rotation] Take into account the rotation of the viewport when giving the size\n     * @return {import(\"./size.js\").Size} Viewport size or `[100, 100]` when no viewport is found.\n     */\n    View.prototype.getViewportSize_ = function (opt_rotation) {\n        var size = this.viewportSize_;\n        if (opt_rotation) {\n            var w = size[0];\n            var h = size[1];\n            return [\n                Math.abs(w * Math.cos(opt_rotation)) +\n                    Math.abs(h * Math.sin(opt_rotation)),\n                Math.abs(w * Math.sin(opt_rotation)) +\n                    Math.abs(h * Math.cos(opt_rotation)),\n            ];\n        }\n        else {\n            return size;\n        }\n    };\n    /**\n     * Stores the viewport size on the view. The viewport size is not read every time from the DOM\n     * to avoid performance hit and layout reflow.\n     * This should be done on map size change.\n     * Note: the constraints are not resolved during an animation to avoid stopping it\n     * @param {import(\"./size.js\").Size} [opt_size] Viewport size; if undefined, [100, 100] is assumed\n     */\n    View.prototype.setViewportSize = function (opt_size) {\n        this.viewportSize_ = Array.isArray(opt_size)\n            ? opt_size.slice()\n            : [100, 100];\n        if (!this.getAnimating()) {\n            this.resolveConstraints(0);\n        }\n    };\n    /**\n     * Get the view center.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n     * @observable\n     * @api\n     */\n    View.prototype.getCenter = function () {\n        var center = this.getCenterInternal();\n        if (!center) {\n            return center;\n        }\n        return toUserCoordinate(center, this.getProjection());\n    };\n    /**\n     * Get the view center without transforming to user projection.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n     */\n    View.prototype.getCenterInternal = function () {\n        return /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(ViewProperty.CENTER));\n    };\n    /**\n     * @return {Constraints} Constraints.\n     */\n    View.prototype.getConstraints = function () {\n        return this.constraints_;\n    };\n    /**\n     * @return {boolean} Resolution constraint is set\n     */\n    View.prototype.getConstrainResolution = function () {\n        return this.get('constrainResolution');\n    };\n    /**\n     * @param {Array<number>} [opt_hints] Destination array.\n     * @return {Array<number>} Hint.\n     */\n    View.prototype.getHints = function (opt_hints) {\n        if (opt_hints !== undefined) {\n            opt_hints[0] = this.hints_[0];\n            opt_hints[1] = this.hints_[1];\n            return opt_hints;\n        }\n        else {\n            return this.hints_.slice();\n        }\n    };\n    /**\n     * Calculate the extent for the current view state and the passed size.\n     * The size is the pixel dimensions of the box into which the calculated extent\n     * should fit. In most cases you want to get the extent of the entire map,\n     * that is `map.getSize()`.\n     * @param {import(\"./size.js\").Size} [opt_size] Box pixel size. If not provided, the size\n     * of the map that uses this view will be used.\n     * @return {import(\"./extent.js\").Extent} Extent.\n     * @api\n     */\n    View.prototype.calculateExtent = function (opt_size) {\n        var extent = this.calculateExtentInternal(opt_size);\n        return toUserExtent(extent, this.getProjection());\n    };\n    /**\n     * @param {import(\"./size.js\").Size} [opt_size] Box pixel size. If not provided,\n     * the map's last known viewport size will be used.\n     * @return {import(\"./extent.js\").Extent} Extent.\n     */\n    View.prototype.calculateExtentInternal = function (opt_size) {\n        var size = opt_size || this.getViewportSizeMinusPadding_();\n        var center = /** @type {!import(\"./coordinate.js\").Coordinate} */ (this.getCenterInternal());\n        assert(center, 1); // The view center is not defined\n        var resolution = /** @type {!number} */ (this.getResolution());\n        assert(resolution !== undefined, 2); // The view resolution is not defined\n        var rotation = /** @type {!number} */ (this.getRotation());\n        assert(rotation !== undefined, 3); // The view rotation is not defined\n        return getForViewAndSize(center, resolution, rotation, size);\n    };\n    /**\n     * Get the maximum resolution of the view.\n     * @return {number} The maximum resolution of the view.\n     * @api\n     */\n    View.prototype.getMaxResolution = function () {\n        return this.maxResolution_;\n    };\n    /**\n     * Get the minimum resolution of the view.\n     * @return {number} The minimum resolution of the view.\n     * @api\n     */\n    View.prototype.getMinResolution = function () {\n        return this.minResolution_;\n    };\n    /**\n     * Get the maximum zoom level for the view.\n     * @return {number} The maximum zoom level.\n     * @api\n     */\n    View.prototype.getMaxZoom = function () {\n        return /** @type {number} */ (this.getZoomForResolution(this.minResolution_));\n    };\n    /**\n     * Set a new maximum zoom level for the view.\n     * @param {number} zoom The maximum zoom level.\n     * @api\n     */\n    View.prototype.setMaxZoom = function (zoom) {\n        this.applyOptions_(this.getUpdatedOptions_({ maxZoom: zoom }));\n    };\n    /**\n     * Get the minimum zoom level for the view.\n     * @return {number} The minimum zoom level.\n     * @api\n     */\n    View.prototype.getMinZoom = function () {\n        return /** @type {number} */ (this.getZoomForResolution(this.maxResolution_));\n    };\n    /**\n     * Set a new minimum zoom level for the view.\n     * @param {number} zoom The minimum zoom level.\n     * @api\n     */\n    View.prototype.setMinZoom = function (zoom) {\n        this.applyOptions_(this.getUpdatedOptions_({ minZoom: zoom }));\n    };\n    /**\n     * Set whether the view should allow intermediary zoom levels.\n     * @param {boolean} enabled Whether the resolution is constrained.\n     * @api\n     */\n    View.prototype.setConstrainResolution = function (enabled) {\n        this.applyOptions_(this.getUpdatedOptions_({ constrainResolution: enabled }));\n    };\n    /**\n     * Get the view projection.\n     * @return {import(\"./proj/Projection.js\").default} The projection of the view.\n     * @api\n     */\n    View.prototype.getProjection = function () {\n        return this.projection_;\n    };\n    /**\n     * Get the view resolution.\n     * @return {number|undefined} The resolution of the view.\n     * @observable\n     * @api\n     */\n    View.prototype.getResolution = function () {\n        return /** @type {number|undefined} */ (this.get(ViewProperty.RESOLUTION));\n    };\n    /**\n     * Get the resolutions for the view. This returns the array of resolutions\n     * passed to the constructor of the View, or undefined if none were given.\n     * @return {Array<number>|undefined} The resolutions of the view.\n     * @api\n     */\n    View.prototype.getResolutions = function () {\n        return this.resolutions_;\n    };\n    /**\n     * Get the resolution for a provided extent (in map units) and size (in pixels).\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {import(\"./size.js\").Size} [opt_size] Box pixel size.\n     * @return {number} The resolution at which the provided extent will render at\n     *     the given size.\n     * @api\n     */\n    View.prototype.getResolutionForExtent = function (extent, opt_size) {\n        return this.getResolutionForExtentInternal(fromUserExtent(extent, this.getProjection()), opt_size);\n    };\n    /**\n     * Get the resolution for a provided extent (in map units) and size (in pixels).\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {import(\"./size.js\").Size} [opt_size] Box pixel size.\n     * @return {number} The resolution at which the provided extent will render at\n     *     the given size.\n     */\n    View.prototype.getResolutionForExtentInternal = function (extent, opt_size) {\n        var size = opt_size || this.getViewportSizeMinusPadding_();\n        var xResolution = getWidth(extent) / size[0];\n        var yResolution = getHeight(extent) / size[1];\n        return Math.max(xResolution, yResolution);\n    };\n    /**\n     * Return a function that returns a value between 0 and 1 for a\n     * resolution. Exponential scaling is assumed.\n     * @param {number} [opt_power] Power.\n     * @return {function(number): number} Resolution for value function.\n     */\n    View.prototype.getResolutionForValueFunction = function (opt_power) {\n        var power = opt_power || 2;\n        var maxResolution = this.getConstrainedResolution(this.maxResolution_);\n        var minResolution = this.minResolution_;\n        var max = Math.log(maxResolution / minResolution) / Math.log(power);\n        return (\n        /**\n         * @param {number} value Value.\n         * @return {number} Resolution.\n         */\n        function (value) {\n            var resolution = maxResolution / Math.pow(power, value * max);\n            return resolution;\n        });\n    };\n    /**\n     * Get the view rotation.\n     * @return {number} The rotation of the view in radians.\n     * @observable\n     * @api\n     */\n    View.prototype.getRotation = function () {\n        return /** @type {number} */ (this.get(ViewProperty.ROTATION));\n    };\n    /**\n     * Return a function that returns a resolution for a value between\n     * 0 and 1. Exponential scaling is assumed.\n     * @param {number} [opt_power] Power.\n     * @return {function(number): number} Value for resolution function.\n     */\n    View.prototype.getValueForResolutionFunction = function (opt_power) {\n        var logPower = Math.log(opt_power || 2);\n        var maxResolution = this.getConstrainedResolution(this.maxResolution_);\n        var minResolution = this.minResolution_;\n        var max = Math.log(maxResolution / minResolution) / logPower;\n        return (\n        /**\n         * @param {number} resolution Resolution.\n         * @return {number} Value.\n         */\n        function (resolution) {\n            var value = Math.log(maxResolution / resolution) / logPower / max;\n            return value;\n        });\n    };\n    /**\n     * Returns the size of the viewport minus padding.\n     * @private\n     * @param {number} [opt_rotation] Take into account the rotation of the viewport when giving the size\n     * @return {import(\"./size.js\").Size} Viewport size reduced by the padding.\n     */\n    View.prototype.getViewportSizeMinusPadding_ = function (opt_rotation) {\n        var size = this.getViewportSize_(opt_rotation);\n        var padding = this.padding_;\n        if (padding) {\n            size = [\n                size[0] - padding[1] - padding[3],\n                size[1] - padding[0] - padding[2],\n            ];\n        }\n        return size;\n    };\n    /**\n     * @return {State} View state.\n     */\n    View.prototype.getState = function () {\n        var projection = this.getProjection();\n        var resolution = this.getResolution();\n        var rotation = this.getRotation();\n        var center = /** @type {import(\"./coordinate.js\").Coordinate} */ (this.getCenterInternal());\n        var padding = this.padding_;\n        if (padding) {\n            var reducedSize = this.getViewportSizeMinusPadding_();\n            center = calculateCenterOn(center, this.getViewportSize_(), [reducedSize[0] / 2 + padding[3], reducedSize[1] / 2 + padding[0]], resolution, rotation);\n        }\n        return {\n            center: center.slice(0),\n            projection: projection !== undefined ? projection : null,\n            resolution: resolution,\n            nextCenter: this.nextCenter_,\n            nextResolution: this.nextResolution_,\n            nextRotation: this.nextRotation_,\n            rotation: rotation,\n            zoom: this.getZoom(),\n        };\n    };\n    /**\n     * Get the current zoom level. This method may return non-integer zoom levels\n     * if the view does not constrain the resolution, or if an interaction or\n     * animation is underway.\n     * @return {number|undefined} Zoom.\n     * @api\n     */\n    View.prototype.getZoom = function () {\n        var zoom;\n        var resolution = this.getResolution();\n        if (resolution !== undefined) {\n            zoom = this.getZoomForResolution(resolution);\n        }\n        return zoom;\n    };\n    /**\n     * Get the zoom level for a resolution.\n     * @param {number} resolution The resolution.\n     * @return {number|undefined} The zoom level for the provided resolution.\n     * @api\n     */\n    View.prototype.getZoomForResolution = function (resolution) {\n        var offset = this.minZoom_ || 0;\n        var max, zoomFactor;\n        if (this.resolutions_) {\n            var nearest = linearFindNearest(this.resolutions_, resolution, 1);\n            offset = nearest;\n            max = this.resolutions_[nearest];\n            if (nearest == this.resolutions_.length - 1) {\n                zoomFactor = 2;\n            }\n            else {\n                zoomFactor = max / this.resolutions_[nearest + 1];\n            }\n        }\n        else {\n            max = this.maxResolution_;\n            zoomFactor = this.zoomFactor_;\n        }\n        return offset + Math.log(max / resolution) / Math.log(zoomFactor);\n    };\n    /**\n     * Get the resolution for a zoom level.\n     * @param {number} zoom Zoom level.\n     * @return {number} The view resolution for the provided zoom level.\n     * @api\n     */\n    View.prototype.getResolutionForZoom = function (zoom) {\n        if (this.resolutions_) {\n            if (this.resolutions_.length <= 1) {\n                return 0;\n            }\n            var baseLevel = clamp(Math.floor(zoom), 0, this.resolutions_.length - 2);\n            var zoomFactor = this.resolutions_[baseLevel] / this.resolutions_[baseLevel + 1];\n            return (this.resolutions_[baseLevel] /\n                Math.pow(zoomFactor, clamp(zoom - baseLevel, 0, 1)));\n        }\n        else {\n            return (this.maxResolution_ / Math.pow(this.zoomFactor_, zoom - this.minZoom_));\n        }\n    };\n    /**\n     * Fit the given geometry or extent based on the given map size and border.\n     * The size is pixel dimensions of the box to fit the extent into.\n     * In most cases you will want to use the map size, that is `map.getSize()`.\n     * Takes care of the map angle.\n     * @param {import(\"./geom/SimpleGeometry.js\").default|import(\"./extent.js\").Extent} geometryOrExtent The geometry or\n     *     extent to fit the view to.\n     * @param {FitOptions} [opt_options] Options.\n     * @api\n     */\n    View.prototype.fit = function (geometryOrExtent, opt_options) {\n        /** @type {import(\"./geom/SimpleGeometry.js\").default} */\n        var geometry;\n        assert(Array.isArray(geometryOrExtent) ||\n            typeof ( /** @type {?} */(geometryOrExtent).getSimplifiedGeometry) ===\n                'function', 24); // Invalid extent or geometry provided as `geometry`\n        if (Array.isArray(geometryOrExtent)) {\n            assert(!isEmpty(geometryOrExtent), 25); // Cannot fit empty extent provided as `geometry`\n            var extent = fromUserExtent(geometryOrExtent, this.getProjection());\n            geometry = polygonFromExtent(extent);\n        }\n        else if (geometryOrExtent.getType() === 'Circle') {\n            var extent = fromUserExtent(geometryOrExtent.getExtent(), this.getProjection());\n            geometry = polygonFromExtent(extent);\n            geometry.rotate(this.getRotation(), getCenter(extent));\n        }\n        else {\n            var userProjection = getUserProjection();\n            if (userProjection) {\n                geometry = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometryOrExtent\n                    .clone()\n                    .transform(userProjection, this.getProjection()));\n            }\n            else {\n                geometry = geometryOrExtent;\n            }\n        }\n        this.fitInternal(geometry, opt_options);\n    };\n    /**\n     * Calculate rotated extent\n     * @param {import(\"./geom/SimpleGeometry.js\").default} geometry The geometry.\n     * @return {import(\"./extent\").Extent} The rotated extent for the geometry.\n     */\n    View.prototype.rotatedExtentForGeometry = function (geometry) {\n        var rotation = this.getRotation();\n        var cosAngle = Math.cos(rotation);\n        var sinAngle = Math.sin(-rotation);\n        var coords = geometry.getFlatCoordinates();\n        var stride = geometry.getStride();\n        var minRotX = +Infinity;\n        var minRotY = +Infinity;\n        var maxRotX = -Infinity;\n        var maxRotY = -Infinity;\n        for (var i = 0, ii = coords.length; i < ii; i += stride) {\n            var rotX = coords[i] * cosAngle - coords[i + 1] * sinAngle;\n            var rotY = coords[i] * sinAngle + coords[i + 1] * cosAngle;\n            minRotX = Math.min(minRotX, rotX);\n            minRotY = Math.min(minRotY, rotY);\n            maxRotX = Math.max(maxRotX, rotX);\n            maxRotY = Math.max(maxRotY, rotY);\n        }\n        return [minRotX, minRotY, maxRotX, maxRotY];\n    };\n    /**\n     * @param {import(\"./geom/SimpleGeometry.js\").default} geometry The geometry.\n     * @param {FitOptions} [opt_options] Options.\n     */\n    View.prototype.fitInternal = function (geometry, opt_options) {\n        var options = opt_options || {};\n        var size = options.size;\n        if (!size) {\n            size = this.getViewportSizeMinusPadding_();\n        }\n        var padding = options.padding !== undefined ? options.padding : [0, 0, 0, 0];\n        var nearest = options.nearest !== undefined ? options.nearest : false;\n        var minResolution;\n        if (options.minResolution !== undefined) {\n            minResolution = options.minResolution;\n        }\n        else if (options.maxZoom !== undefined) {\n            minResolution = this.getResolutionForZoom(options.maxZoom);\n        }\n        else {\n            minResolution = 0;\n        }\n        var rotatedExtent = this.rotatedExtentForGeometry(geometry);\n        // calculate resolution\n        var resolution = this.getResolutionForExtentInternal(rotatedExtent, [\n            size[0] - padding[1] - padding[3],\n            size[1] - padding[0] - padding[2],\n        ]);\n        resolution = isNaN(resolution)\n            ? minResolution\n            : Math.max(resolution, minResolution);\n        resolution = this.getConstrainedResolution(resolution, nearest ? 0 : 1);\n        // calculate center\n        var rotation = this.getRotation();\n        var sinAngle = Math.sin(rotation);\n        var cosAngle = Math.cos(rotation);\n        var centerRot = getCenter(rotatedExtent);\n        centerRot[0] += ((padding[1] - padding[3]) / 2) * resolution;\n        centerRot[1] += ((padding[0] - padding[2]) / 2) * resolution;\n        var centerX = centerRot[0] * cosAngle - centerRot[1] * sinAngle;\n        var centerY = centerRot[1] * cosAngle + centerRot[0] * sinAngle;\n        var center = this.getConstrainedCenter([centerX, centerY], resolution);\n        var callback = options.callback ? options.callback : VOID;\n        if (options.duration !== undefined) {\n            this.animateInternal({\n                resolution: resolution,\n                center: center,\n                duration: options.duration,\n                easing: options.easing,\n            }, callback);\n        }\n        else {\n            this.targetResolution_ = resolution;\n            this.targetCenter_ = center;\n            this.applyTargetState_(false, true);\n            animationCallback(callback, true);\n        }\n    };\n    /**\n     * Center on coordinate and view position.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"./size.js\").Size} size Box pixel size.\n     * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n     * @api\n     */\n    View.prototype.centerOn = function (coordinate, size, position) {\n        this.centerOnInternal(fromUserCoordinate(coordinate, this.getProjection()), size, position);\n    };\n    /**\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"./size.js\").Size} size Box pixel size.\n     * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n     */\n    View.prototype.centerOnInternal = function (coordinate, size, position) {\n        this.setCenterInternal(calculateCenterOn(coordinate, size, position, this.getResolution(), this.getRotation()));\n    };\n    /**\n     * Calculates the shift between map and viewport center.\n     * @param {import(\"./coordinate.js\").Coordinate} center Center.\n     * @param {number} resolution Resolution.\n     * @param {number} rotation Rotation.\n     * @param {import(\"./size.js\").Size} size Size.\n     * @return {Array<number>|undefined} Center shift.\n     */\n    View.prototype.calculateCenterShift = function (center, resolution, rotation, size) {\n        var centerShift;\n        var padding = this.padding_;\n        if (padding && center) {\n            var reducedSize = this.getViewportSizeMinusPadding_(-rotation);\n            var shiftedCenter = calculateCenterOn(center, size, [reducedSize[0] / 2 + padding[3], reducedSize[1] / 2 + padding[0]], resolution, rotation);\n            centerShift = [\n                center[0] - shiftedCenter[0],\n                center[1] - shiftedCenter[1],\n            ];\n        }\n        return centerShift;\n    };\n    /**\n     * @return {boolean} Is defined.\n     */\n    View.prototype.isDef = function () {\n        return !!this.getCenterInternal() && this.getResolution() !== undefined;\n    };\n    /**\n     * Adds relative coordinates to the center of the view. Any extent constraint will apply.\n     * @param {import(\"./coordinate.js\").Coordinate} deltaCoordinates Relative value to add.\n     * @api\n     */\n    View.prototype.adjustCenter = function (deltaCoordinates) {\n        var center = toUserCoordinate(this.targetCenter_, this.getProjection());\n        this.setCenter([\n            center[0] + deltaCoordinates[0],\n            center[1] + deltaCoordinates[1],\n        ]);\n    };\n    /**\n     * Adds relative coordinates to the center of the view. Any extent constraint will apply.\n     * @param {import(\"./coordinate.js\").Coordinate} deltaCoordinates Relative value to add.\n     */\n    View.prototype.adjustCenterInternal = function (deltaCoordinates) {\n        var center = this.targetCenter_;\n        this.setCenterInternal([\n            center[0] + deltaCoordinates[0],\n            center[1] + deltaCoordinates[1],\n        ]);\n    };\n    /**\n     * Multiply the view resolution by a ratio, optionally using an anchor. Any resolution\n     * constraint will apply.\n     * @param {number} ratio The ratio to apply on the view resolution.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The origin of the transformation.\n     * @api\n     */\n    View.prototype.adjustResolution = function (ratio, opt_anchor) {\n        var anchor = opt_anchor && fromUserCoordinate(opt_anchor, this.getProjection());\n        this.adjustResolutionInternal(ratio, anchor);\n    };\n    /**\n     * Multiply the view resolution by a ratio, optionally using an anchor. Any resolution\n     * constraint will apply.\n     * @param {number} ratio The ratio to apply on the view resolution.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The origin of the transformation.\n     */\n    View.prototype.adjustResolutionInternal = function (ratio, opt_anchor) {\n        var isMoving = this.getAnimating() || this.getInteracting();\n        var size = this.getViewportSize_(this.getRotation());\n        var newResolution = this.constraints_.resolution(this.targetResolution_ * ratio, 0, size, isMoving);\n        if (opt_anchor) {\n            this.targetCenter_ = this.calculateCenterZoom(newResolution, opt_anchor);\n        }\n        this.targetResolution_ *= ratio;\n        this.applyTargetState_();\n    };\n    /**\n     * Adds a value to the view zoom level, optionally using an anchor. Any resolution\n     * constraint will apply.\n     * @param {number} delta Relative value to add to the zoom level.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The origin of the transformation.\n     * @api\n     */\n    View.prototype.adjustZoom = function (delta, opt_anchor) {\n        this.adjustResolution(Math.pow(this.zoomFactor_, -delta), opt_anchor);\n    };\n    /**\n     * Adds a value to the view rotation, optionally using an anchor. Any rotation\n     * constraint will apply.\n     * @param {number} delta Relative value to add to the zoom rotation, in radians.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The rotation center.\n     * @api\n     */\n    View.prototype.adjustRotation = function (delta, opt_anchor) {\n        if (opt_anchor) {\n            opt_anchor = fromUserCoordinate(opt_anchor, this.getProjection());\n        }\n        this.adjustRotationInternal(delta, opt_anchor);\n    };\n    /**\n     * @param {number} delta Relative value to add to the zoom rotation, in radians.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The rotation center.\n     */\n    View.prototype.adjustRotationInternal = function (delta, opt_anchor) {\n        var isMoving = this.getAnimating() || this.getInteracting();\n        var newRotation = this.constraints_.rotation(this.targetRotation_ + delta, isMoving);\n        if (opt_anchor) {\n            this.targetCenter_ = this.calculateCenterRotate(newRotation, opt_anchor);\n        }\n        this.targetRotation_ += delta;\n        this.applyTargetState_();\n    };\n    /**\n     * Set the center of the current view. Any extent constraint will apply.\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n     * @observable\n     * @api\n     */\n    View.prototype.setCenter = function (center) {\n        this.setCenterInternal(center ? fromUserCoordinate(center, this.getProjection()) : center);\n    };\n    /**\n     * Set the center using the view projection (not the user projection).\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n     */\n    View.prototype.setCenterInternal = function (center) {\n        this.targetCenter_ = center;\n        this.applyTargetState_();\n    };\n    /**\n     * @param {import(\"./ViewHint.js\").default} hint Hint.\n     * @param {number} delta Delta.\n     * @return {number} New value.\n     */\n    View.prototype.setHint = function (hint, delta) {\n        this.hints_[hint] += delta;\n        this.changed();\n        return this.hints_[hint];\n    };\n    /**\n     * Set the resolution for this view. Any resolution constraint will apply.\n     * @param {number|undefined} resolution The resolution of the view.\n     * @observable\n     * @api\n     */\n    View.prototype.setResolution = function (resolution) {\n        this.targetResolution_ = resolution;\n        this.applyTargetState_();\n    };\n    /**\n     * Set the rotation for this view. Any rotation constraint will apply.\n     * @param {number} rotation The rotation of the view in radians.\n     * @observable\n     * @api\n     */\n    View.prototype.setRotation = function (rotation) {\n        this.targetRotation_ = rotation;\n        this.applyTargetState_();\n    };\n    /**\n     * Zoom to a specific zoom level. Any resolution constrain will apply.\n     * @param {number} zoom Zoom level.\n     * @api\n     */\n    View.prototype.setZoom = function (zoom) {\n        this.setResolution(this.getResolutionForZoom(zoom));\n    };\n    /**\n     * Recompute rotation/resolution/center based on target values.\n     * Note: we have to compute rotation first, then resolution and center considering that\n     * parameters can influence one another in case a view extent constraint is present.\n     * @param {boolean} [opt_doNotCancelAnims] Do not cancel animations.\n     * @param {boolean} [opt_forceMoving] Apply constraints as if the view is moving.\n     * @private\n     */\n    View.prototype.applyTargetState_ = function (opt_doNotCancelAnims, opt_forceMoving) {\n        var isMoving = this.getAnimating() || this.getInteracting() || opt_forceMoving;\n        // compute rotation\n        var newRotation = this.constraints_.rotation(this.targetRotation_, isMoving);\n        var size = this.getViewportSize_(newRotation);\n        var newResolution = this.constraints_.resolution(this.targetResolution_, 0, size, isMoving);\n        var newCenter = this.constraints_.center(this.targetCenter_, newResolution, size, isMoving, this.calculateCenterShift(this.targetCenter_, newResolution, newRotation, size));\n        if (this.get(ViewProperty.ROTATION) !== newRotation) {\n            this.set(ViewProperty.ROTATION, newRotation);\n        }\n        if (this.get(ViewProperty.RESOLUTION) !== newResolution) {\n            this.set(ViewProperty.RESOLUTION, newResolution);\n            this.set('zoom', this.getZoom(), true);\n        }\n        if (!newCenter ||\n            !this.get(ViewProperty.CENTER) ||\n            !equals(this.get(ViewProperty.CENTER), newCenter)) {\n            this.set(ViewProperty.CENTER, newCenter);\n        }\n        if (this.getAnimating() && !opt_doNotCancelAnims) {\n            this.cancelAnimations();\n        }\n        this.cancelAnchor_ = undefined;\n    };\n    /**\n     * If any constraints need to be applied, an animation will be triggered.\n     * This is typically done on interaction end.\n     * Note: calling this with a duration of 0 will apply the constrained values straight away,\n     * without animation.\n     * @param {number} [opt_duration] The animation duration in ms.\n     * @param {number} [opt_resolutionDirection] Which direction to zoom.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The origin of the transformation.\n     */\n    View.prototype.resolveConstraints = function (opt_duration, opt_resolutionDirection, opt_anchor) {\n        var duration = opt_duration !== undefined ? opt_duration : 200;\n        var direction = opt_resolutionDirection || 0;\n        var newRotation = this.constraints_.rotation(this.targetRotation_);\n        var size = this.getViewportSize_(newRotation);\n        var newResolution = this.constraints_.resolution(this.targetResolution_, direction, size);\n        var newCenter = this.constraints_.center(this.targetCenter_, newResolution, size, false, this.calculateCenterShift(this.targetCenter_, newResolution, newRotation, size));\n        if (duration === 0 && !this.cancelAnchor_) {\n            this.targetResolution_ = newResolution;\n            this.targetRotation_ = newRotation;\n            this.targetCenter_ = newCenter;\n            this.applyTargetState_();\n            return;\n        }\n        var anchor = opt_anchor || (duration === 0 ? this.cancelAnchor_ : undefined);\n        this.cancelAnchor_ = undefined;\n        if (this.getResolution() !== newResolution ||\n            this.getRotation() !== newRotation ||\n            !this.getCenterInternal() ||\n            !equals(this.getCenterInternal(), newCenter)) {\n            if (this.getAnimating()) {\n                this.cancelAnimations();\n            }\n            this.animateInternal({\n                rotation: newRotation,\n                center: newCenter,\n                resolution: newResolution,\n                duration: duration,\n                easing: easeOut,\n                anchor: anchor,\n            });\n        }\n    };\n    /**\n     * Notify the View that an interaction has started.\n     * The view state will be resolved to a stable one if needed\n     * (depending on its constraints).\n     * @api\n     */\n    View.prototype.beginInteraction = function () {\n        this.resolveConstraints(0);\n        this.setHint(ViewHint.INTERACTING, 1);\n    };\n    /**\n     * Notify the View that an interaction has ended. The view state will be resolved\n     * to a stable one if needed (depending on its constraints).\n     * @param {number} [opt_duration] Animation duration in ms.\n     * @param {number} [opt_resolutionDirection] Which direction to zoom.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The origin of the transformation.\n     * @api\n     */\n    View.prototype.endInteraction = function (opt_duration, opt_resolutionDirection, opt_anchor) {\n        var anchor = opt_anchor && fromUserCoordinate(opt_anchor, this.getProjection());\n        this.endInteractionInternal(opt_duration, opt_resolutionDirection, anchor);\n    };\n    /**\n     * Notify the View that an interaction has ended. The view state will be resolved\n     * to a stable one if needed (depending on its constraints).\n     * @param {number} [opt_duration] Animation duration in ms.\n     * @param {number} [opt_resolutionDirection] Which direction to zoom.\n     * @param {import(\"./coordinate.js\").Coordinate} [opt_anchor] The origin of the transformation.\n     */\n    View.prototype.endInteractionInternal = function (opt_duration, opt_resolutionDirection, opt_anchor) {\n        this.setHint(ViewHint.INTERACTING, -1);\n        this.resolveConstraints(opt_duration, opt_resolutionDirection, opt_anchor);\n    };\n    /**\n     * Get a valid position for the view center according to the current constraints.\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} targetCenter Target center position.\n     * @param {number} [opt_targetResolution] Target resolution. If not supplied, the current one will be used.\n     * This is useful to guess a valid center position at a different zoom level.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Valid center position.\n     */\n    View.prototype.getConstrainedCenter = function (targetCenter, opt_targetResolution) {\n        var size = this.getViewportSize_(this.getRotation());\n        return this.constraints_.center(targetCenter, opt_targetResolution || this.getResolution(), size);\n    };\n    /**\n     * Get a valid zoom level according to the current view constraints.\n     * @param {number|undefined} targetZoom Target zoom.\n     * @param {number} [opt_direction=0] Indicate which resolution should be used\n     * by a renderer if the view resolution does not match any resolution of the tile source.\n     * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n     * will be used. If -1, the nearest higher resolution will be used.\n     * @return {number|undefined} Valid zoom level.\n     */\n    View.prototype.getConstrainedZoom = function (targetZoom, opt_direction) {\n        var targetRes = this.getResolutionForZoom(targetZoom);\n        return this.getZoomForResolution(this.getConstrainedResolution(targetRes, opt_direction));\n    };\n    /**\n     * Get a valid resolution according to the current view constraints.\n     * @param {number|undefined} targetResolution Target resolution.\n     * @param {number} [opt_direction=0] Indicate which resolution should be used\n     * by a renderer if the view resolution does not match any resolution of the tile source.\n     * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n     * will be used. If -1, the nearest higher resolution will be used.\n     * @return {number|undefined} Valid resolution.\n     */\n    View.prototype.getConstrainedResolution = function (targetResolution, opt_direction) {\n        var direction = opt_direction || 0;\n        var size = this.getViewportSize_(this.getRotation());\n        return this.constraints_.resolution(targetResolution, direction, size);\n    };\n    return View;\n}(BaseObject));\n/**\n * @param {Function} callback Callback.\n * @param {*} returnValue Return value.\n */\nfunction animationCallback(callback, returnValue) {\n    setTimeout(function () {\n        callback(returnValue);\n    }, 0);\n}\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./centerconstraint.js\").Type} The constraint.\n */\nexport function createCenterConstraint(options) {\n    if (options.extent !== undefined) {\n        var smooth = options.smoothExtentConstraint !== undefined\n            ? options.smoothExtentConstraint\n            : true;\n        return createExtent(options.extent, options.constrainOnlyCenter, smooth);\n    }\n    var projection = createProjection(options.projection, 'EPSG:3857');\n    if (options.multiWorld !== true && projection.isGlobal()) {\n        var extent = projection.getExtent().slice();\n        extent[0] = -Infinity;\n        extent[2] = Infinity;\n        return createExtent(extent, false, false);\n    }\n    return centerNone;\n}\n/**\n * @param {ViewOptions} options View options.\n * @return {{constraint: import(\"./resolutionconstraint.js\").Type, maxResolution: number,\n *     minResolution: number, minZoom: number, zoomFactor: number}} The constraint.\n */\nexport function createResolutionConstraint(options) {\n    var resolutionConstraint;\n    var maxResolution;\n    var minResolution;\n    // TODO: move these to be ol constants\n    // see https://github.com/openlayers/openlayers/issues/2076\n    var defaultMaxZoom = 28;\n    var defaultZoomFactor = 2;\n    var minZoom = options.minZoom !== undefined ? options.minZoom : DEFAULT_MIN_ZOOM;\n    var maxZoom = options.maxZoom !== undefined ? options.maxZoom : defaultMaxZoom;\n    var zoomFactor = options.zoomFactor !== undefined ? options.zoomFactor : defaultZoomFactor;\n    var multiWorld = options.multiWorld !== undefined ? options.multiWorld : false;\n    var smooth = options.smoothResolutionConstraint !== undefined\n        ? options.smoothResolutionConstraint\n        : true;\n    var showFullExtent = options.showFullExtent !== undefined ? options.showFullExtent : false;\n    var projection = createProjection(options.projection, 'EPSG:3857');\n    var projExtent = projection.getExtent();\n    var constrainOnlyCenter = options.constrainOnlyCenter;\n    var extent = options.extent;\n    if (!multiWorld && !extent && projection.isGlobal()) {\n        constrainOnlyCenter = false;\n        extent = projExtent;\n    }\n    if (options.resolutions !== undefined) {\n        var resolutions = options.resolutions;\n        maxResolution = resolutions[minZoom];\n        minResolution =\n            resolutions[maxZoom] !== undefined\n                ? resolutions[maxZoom]\n                : resolutions[resolutions.length - 1];\n        if (options.constrainResolution) {\n            resolutionConstraint = createSnapToResolutions(resolutions, smooth, !constrainOnlyCenter && extent, showFullExtent);\n        }\n        else {\n            resolutionConstraint = createMinMaxResolution(maxResolution, minResolution, smooth, !constrainOnlyCenter && extent, showFullExtent);\n        }\n    }\n    else {\n        // calculate the default min and max resolution\n        var size = !projExtent\n            ? // use an extent that can fit the whole world if need be\n                (360 * METERS_PER_UNIT[Units.DEGREES]) / projection.getMetersPerUnit()\n            : Math.max(getWidth(projExtent), getHeight(projExtent));\n        var defaultMaxResolution = size / DEFAULT_TILE_SIZE / Math.pow(defaultZoomFactor, DEFAULT_MIN_ZOOM);\n        var defaultMinResolution = defaultMaxResolution /\n            Math.pow(defaultZoomFactor, defaultMaxZoom - DEFAULT_MIN_ZOOM);\n        // user provided maxResolution takes precedence\n        maxResolution = options.maxResolution;\n        if (maxResolution !== undefined) {\n            minZoom = 0;\n        }\n        else {\n            maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n        }\n        // user provided minResolution takes precedence\n        minResolution = options.minResolution;\n        if (minResolution === undefined) {\n            if (options.maxZoom !== undefined) {\n                if (options.maxResolution !== undefined) {\n                    minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n                }\n                else {\n                    minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n                }\n            }\n            else {\n                minResolution = defaultMinResolution;\n            }\n        }\n        // given discrete zoom levels, minResolution may be different than provided\n        maxZoom =\n            minZoom +\n                Math.floor(Math.log(maxResolution / minResolution) / Math.log(zoomFactor));\n        minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n        if (options.constrainResolution) {\n            resolutionConstraint = createSnapToPower(zoomFactor, maxResolution, minResolution, smooth, !constrainOnlyCenter && extent, showFullExtent);\n        }\n        else {\n            resolutionConstraint = createMinMaxResolution(maxResolution, minResolution, smooth, !constrainOnlyCenter && extent, showFullExtent);\n        }\n    }\n    return {\n        constraint: resolutionConstraint,\n        maxResolution: maxResolution,\n        minResolution: minResolution,\n        minZoom: minZoom,\n        zoomFactor: zoomFactor,\n    };\n}\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./rotationconstraint.js\").Type} Rotation constraint.\n */\nexport function createRotationConstraint(options) {\n    var enableRotation = options.enableRotation !== undefined ? options.enableRotation : true;\n    if (enableRotation) {\n        var constrainRotation = options.constrainRotation;\n        if (constrainRotation === undefined || constrainRotation === true) {\n            return createSnapToZero();\n        }\n        else if (constrainRotation === false) {\n            return rotationNone;\n        }\n        else if (typeof constrainRotation === 'number') {\n            return createSnapToN(constrainRotation);\n        }\n        else {\n            return rotationNone;\n        }\n    }\n    else {\n        return disable;\n    }\n}\n/**\n * Determine if an animation involves no view change.\n * @param {Animation} animation The animation.\n * @return {boolean} The animation involves no view change.\n */\nexport function isNoopAnimation(animation) {\n    if (animation.sourceCenter && animation.targetCenter) {\n        if (!coordinatesEqual(animation.sourceCenter, animation.targetCenter)) {\n            return false;\n        }\n    }\n    if (animation.sourceResolution !== animation.targetResolution) {\n        return false;\n    }\n    if (animation.sourceRotation !== animation.targetRotation) {\n        return false;\n    }\n    return true;\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {import(\"./size.js\").Size} size Box pixel size.\n * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @return {import(\"./coordinate.js\").Coordinate} Shifted center.\n */\nfunction calculateCenterOn(coordinate, size, position, resolution, rotation) {\n    // calculate rotated position\n    var cosAngle = Math.cos(-rotation);\n    var sinAngle = Math.sin(-rotation);\n    var rotX = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n    var rotY = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n    rotX += (size[0] / 2 - position[0]) * resolution;\n    rotY += (position[1] - size[1] / 2) * resolution;\n    // go back to original angle\n    sinAngle = -sinAngle; // go back to original rotation\n    var centerX = rotX * cosAngle - rotY * sinAngle;\n    var centerY = rotY * cosAngle + rotX * sinAngle;\n    return [centerX, centerY];\n}\nexport default View;\n//# sourceMappingURL=View.js.map","/**\n * @module ol/events\n */\nimport { clear } from './obj.js';\n/**\n * Key to use with {@link module:ol/Observable.unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener Listener.\n * @property {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @property {string} type Type.\n * @api\n */\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n/**\n * @typedef {Object} ListenerObject\n * @property {ListenerFunction} handleEvent HandleEvent listener function.\n */\n/**\n * @typedef {ListenerFunction|ListenerObject} Listener\n */\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events.unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [opt_this] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean} [opt_once] If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, opt_this, opt_once) {\n    if (opt_this && opt_this !== target) {\n        listener = listener.bind(opt_this);\n    }\n    if (opt_once) {\n        var originalListener_1 = listener;\n        listener = function () {\n            target.removeEventListener(type, listener);\n            originalListener_1.apply(this, arguments);\n        };\n    }\n    var eventsKey = {\n        target: target,\n        type: type,\n        listener: listener,\n    };\n    target.addEventListener(type, listener);\n    return eventsKey;\n}\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events.unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events.listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [opt_this] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, opt_this) {\n    return listen(target, type, listener, opt_this, true);\n}\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events.listen} or {@link module:ol/events.listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n    if (key && key.target) {\n        key.target.removeEventListener(key.type, key.listener);\n        clear(key);\n    }\n}\n//# sourceMappingURL=events.js.map","/**\n * @module ol/MapEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered after a map frame is rendered.\n     * @event module:ol/MapEvent~MapEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered when the map starts moving.\n     * @event module:ol/MapEvent~MapEvent#movestart\n     * @api\n     */\n    MOVESTART: 'movestart',\n    /**\n     * Triggered after the map is moved.\n     * @event module:ol/MapEvent~MapEvent#moveend\n     * @api\n     */\n    MOVEEND: 'moveend',\n    /**\n     * Triggered when loading of additional map data (tiles, images, features) starts.\n     * @event module:ol/MapEvent~MapEvent#loadstart\n     * @api\n     */\n    LOADSTART: 'loadstart',\n    /**\n     * Triggered when loading of additional map data has completed.\n     * @event module:ol/MapEvent~MapEvent#loadend\n     * @api\n     */\n    LOADEND: 'loadend',\n};\n/***\n * @typedef {'postrender'|'movestart'|'moveend'|'loadstart'|'loadend'} Types\n */\n//# sourceMappingURL=MapEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageBase\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport { abstract } from './util.js';\n/**\n * @abstract\n */\nvar ImageBase = /** @class */ (function (_super) {\n    __extends(ImageBase, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./ImageState.js\").default} state State.\n     */\n    function ImageBase(extent, resolution, pixelRatio, state) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.extent = extent;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = pixelRatio;\n        /**\n         * @protected\n         * @type {number|undefined}\n         */\n        _this.resolution = resolution;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = state;\n        return _this;\n    }\n    /**\n     * @protected\n     */\n    ImageBase.prototype.changed = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @return {import(\"./extent.js\").Extent} Extent.\n     */\n    ImageBase.prototype.getExtent = function () {\n        return this.extent;\n    };\n    /**\n     * @abstract\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     */\n    ImageBase.prototype.getImage = function () {\n        return abstract();\n    };\n    /**\n     * @return {number} PixelRatio.\n     */\n    ImageBase.prototype.getPixelRatio = function () {\n        return this.pixelRatio_;\n    };\n    /**\n     * @return {number} Resolution.\n     */\n    ImageBase.prototype.getResolution = function () {\n        return /** @type {number} */ (this.resolution);\n    };\n    /**\n     * @return {import(\"./ImageState.js\").default} State.\n     */\n    ImageBase.prototype.getState = function () {\n        return this.state;\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageBase.prototype.load = function () {\n        abstract();\n    };\n    return ImageBase;\n}(EventTarget));\nexport default ImageBase;\n//# sourceMappingURL=ImageBase.js.map","/**\n * @module ol/rotationconstraint\n */\nimport { toRadians } from './math.js';\n/**\n * @typedef {function((number|undefined), boolean=): (number|undefined)} Type\n */\n/**\n * @param {number|undefined} rotation Rotation.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation) {\n    if (rotation !== undefined) {\n        return 0;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {number|undefined} rotation Rotation.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation) {\n    if (rotation !== undefined) {\n        return rotation;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {number} n N.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n    var theta = (2 * Math.PI) / n;\n    return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {boolean} [opt_isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Rotation.\n     */\n    function (rotation, opt_isMoving) {\n        if (opt_isMoving) {\n            return rotation;\n        }\n        if (rotation !== undefined) {\n            rotation = Math.floor(rotation / theta + 0.5) * theta;\n            return rotation;\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n/**\n * @param {number} [opt_tolerance] Tolerance.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToZero(opt_tolerance) {\n    var tolerance = opt_tolerance || toRadians(5);\n    return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {boolean} [opt_isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Rotation.\n     */\n    function (rotation, opt_isMoving) {\n        if (opt_isMoving) {\n            return rotation;\n        }\n        if (rotation !== undefined) {\n            if (Math.abs(rotation) <= tolerance) {\n                return 0;\n            }\n            else {\n                return rotation;\n            }\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n//# sourceMappingURL=rotationconstraint.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/Map\n */\nimport Disposable from '../Disposable.js';\nimport { TRUE } from '../functions.js';\nimport { abstract } from '../util.js';\nimport { compose as composeTransform, makeInverse } from '../transform.js';\nimport { getWidth } from '../extent.js';\nimport { shared as iconImageCache } from '../style/IconImageCache.js';\nimport { inView } from '../layer/Layer.js';\nimport { wrapX } from '../coordinate.js';\n/**\n * @typedef HitMatch\n * @property {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @property {import(\"../layer/Layer.js\").default} layer Layer.\n * @property {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n * @property {number} distanceSq Squared distance.\n * @property {import(\"./vector.js\").FeatureCallback<T>} callback Callback.\n * @template T\n */\n/**\n * @abstract\n */\nvar MapRenderer = /** @class */ (function (_super) {\n    __extends(MapRenderer, _super);\n    /**\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    function MapRenderer(map) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default}\n         */\n        _this.map_ = map;\n        return _this;\n    }\n    /**\n     * @abstract\n     * @param {import(\"../render/EventType.js\").default} type Event type.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    MapRenderer.prototype.dispatchRenderEvent = function (type, frameState) {\n        abstract();\n    };\n    /**\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @protected\n     */\n    MapRenderer.prototype.calculateMatrices2D = function (frameState) {\n        var viewState = frameState.viewState;\n        var coordinateToPixelTransform = frameState.coordinateToPixelTransform;\n        var pixelToCoordinateTransform = frameState.pixelToCoordinateTransform;\n        composeTransform(coordinateToPixelTransform, frameState.size[0] / 2, frameState.size[1] / 2, 1 / viewState.resolution, -1 / viewState.resolution, -viewState.rotation, -viewState.center[0], -viewState.center[1]);\n        makeInverse(pixelToCoordinateTransform, coordinateToPixelTransform);\n    };\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {boolean} checkWrapped Check for wrapped geometries.\n     * @param {import(\"./vector.js\").FeatureCallback<T>} callback Feature callback.\n     * @param {S} thisArg Value to use as `this` when executing `callback`.\n     * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n     *     function, only layers which are visible and for which this function\n     *     returns `true` will be tested for features.  By default, all visible\n     *     layers will be tested.\n     * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n     * @return {T|undefined} Callback result.\n     * @template S,T,U\n     */\n    MapRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, checkWrapped, callback, thisArg, layerFilter, thisArg2) {\n        var result;\n        var viewState = frameState.viewState;\n        /**\n         * @param {boolean} managed Managed layer.\n         * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n         * @param {import(\"../layer/Layer.js\").default} layer Layer.\n         * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n         * @return {T|undefined} Callback result.\n         */\n        function forEachFeatureAtCoordinate(managed, feature, layer, geometry) {\n            return callback.call(thisArg, feature, managed ? layer : null, geometry);\n        }\n        var projection = viewState.projection;\n        var translatedCoordinate = wrapX(coordinate.slice(), projection);\n        var offsets = [[0, 0]];\n        if (projection.canWrapX() && checkWrapped) {\n            var projectionExtent = projection.getExtent();\n            var worldWidth = getWidth(projectionExtent);\n            offsets.push([-worldWidth, 0], [worldWidth, 0]);\n        }\n        var layerStates = frameState.layerStatesArray;\n        var numLayers = layerStates.length;\n        var matches = /** @type {Array<HitMatch<T>>} */ ([]);\n        var tmpCoord = [];\n        for (var i = 0; i < offsets.length; i++) {\n            for (var j = numLayers - 1; j >= 0; --j) {\n                var layerState = layerStates[j];\n                var layer = layerState.layer;\n                if (layer.hasRenderer() &&\n                    inView(layerState, viewState) &&\n                    layerFilter.call(thisArg2, layer)) {\n                    var layerRenderer = layer.getRenderer();\n                    var source = layer.getSource();\n                    if (layerRenderer && source) {\n                        var coordinates = source.getWrapX()\n                            ? translatedCoordinate\n                            : coordinate;\n                        var callback_1 = forEachFeatureAtCoordinate.bind(null, layerState.managed);\n                        tmpCoord[0] = coordinates[0] + offsets[i][0];\n                        tmpCoord[1] = coordinates[1] + offsets[i][1];\n                        result = layerRenderer.forEachFeatureAtCoordinate(tmpCoord, frameState, hitTolerance, callback_1, matches);\n                    }\n                    if (result) {\n                        return result;\n                    }\n                }\n            }\n        }\n        if (matches.length === 0) {\n            return undefined;\n        }\n        var order = 1 / matches.length;\n        matches.forEach(function (m, i) { return (m.distanceSq += i * order); });\n        matches.sort(function (a, b) { return a.distanceSq - b.distanceSq; });\n        matches.some(function (m) {\n            return (result = m.callback(m.feature, m.layer, m.geometry));\n        });\n        return result;\n    };\n    /**\n     * @abstract\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n     *     callback.\n     * @param {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} layerFilter Layer filter\n     *     function, only layers which are visible and for which this function\n     *     returns `true` will be tested for features.  By default, all visible\n     *     layers will be tested.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    MapRenderer.prototype.forEachLayerAtPixel = function (pixel, frameState, hitTolerance, callback, layerFilter) {\n        return abstract();\n    };\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {boolean} checkWrapped Check for wrapped geometries.\n     * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n     *     function, only layers which are visible and for which this function\n     *     returns `true` will be tested for features.  By default, all visible\n     *     layers will be tested.\n     * @param {U} thisArg Value to use as `this` when executing `layerFilter`.\n     * @return {boolean} Is there a feature at the given coordinate?\n     * @template U\n     */\n    MapRenderer.prototype.hasFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, checkWrapped, layerFilter, thisArg) {\n        var hasFeature = this.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, checkWrapped, TRUE, this, layerFilter, thisArg);\n        return hasFeature !== undefined;\n    };\n    /**\n     * @return {import(\"../PluggableMap.js\").default} Map.\n     */\n    MapRenderer.prototype.getMap = function () {\n        return this.map_;\n    };\n    /**\n     * Render.\n     * @abstract\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    MapRenderer.prototype.renderFrame = function (frameState) {\n        abstract();\n    };\n    /**\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    MapRenderer.prototype.scheduleExpireIconCache = function (frameState) {\n        if (iconImageCache.canExpireCache()) {\n            frameState.postRenderFunctions.push(expireIconCache);\n        }\n    };\n    return MapRenderer;\n}(Disposable));\n/**\n * @param {import(\"../PluggableMap.js\").default} map Map.\n * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n */\nfunction expireIconCache(map, frameState) {\n    iconImageCache.expire();\n}\nexport default MapRenderer;\n//# sourceMappingURL=Map.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/Composite\n */\nimport MapRenderer from './Map.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport RenderEvent from '../render/Event.js';\nimport RenderEventType from '../render/EventType.js';\nimport { CLASS_UNSELECTABLE } from '../css.js';\nimport { checkedFonts } from '../render/canvas.js';\nimport { inView } from '../layer/Layer.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport { replaceChildren } from '../dom.js';\n/**\n * @classdesc\n * Canvas map renderer.\n * @api\n */\nvar CompositeMapRenderer = /** @class */ (function (_super) {\n    __extends(CompositeMapRenderer, _super);\n    /**\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    function CompositeMapRenderer(map) {\n        var _this = _super.call(this, map) || this;\n        /**\n         * @type {import(\"../events.js\").EventsKey}\n         */\n        _this.fontChangeListenerKey_ = listen(checkedFonts, ObjectEventType.PROPERTYCHANGE, map.redrawText.bind(map));\n        /**\n         * @private\n         * @type {HTMLDivElement}\n         */\n        _this.element_ = document.createElement('div');\n        var style = _this.element_.style;\n        style.position = 'absolute';\n        style.width = '100%';\n        style.height = '100%';\n        style.zIndex = '0';\n        _this.element_.className = CLASS_UNSELECTABLE + ' ol-layers';\n        var container = map.getViewport();\n        container.insertBefore(_this.element_, container.firstChild || null);\n        /**\n         * @private\n         * @type {Array<HTMLElement>}\n         */\n        _this.children_ = [];\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderedVisible_ = true;\n        return _this;\n    }\n    /**\n     * @param {import(\"../render/EventType.js\").default} type Event type.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    CompositeMapRenderer.prototype.dispatchRenderEvent = function (type, frameState) {\n        var map = this.getMap();\n        if (map.hasListener(type)) {\n            var event_1 = new RenderEvent(type, undefined, frameState);\n            map.dispatchEvent(event_1);\n        }\n    };\n    CompositeMapRenderer.prototype.disposeInternal = function () {\n        unlistenByKey(this.fontChangeListenerKey_);\n        this.element_.parentNode.removeChild(this.element_);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Render.\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    CompositeMapRenderer.prototype.renderFrame = function (frameState) {\n        if (!frameState) {\n            if (this.renderedVisible_) {\n                this.element_.style.display = 'none';\n                this.renderedVisible_ = false;\n            }\n            return;\n        }\n        this.calculateMatrices2D(frameState);\n        this.dispatchRenderEvent(RenderEventType.PRECOMPOSE, frameState);\n        var layerStatesArray = frameState.layerStatesArray.sort(function (a, b) {\n            return a.zIndex - b.zIndex;\n        });\n        var viewState = frameState.viewState;\n        this.children_.length = 0;\n        /**\n         * @type {Array<import(\"../layer/BaseVector.js\").default>}\n         */\n        var declutterLayers = [];\n        var previousElement = null;\n        for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n            var layerState = layerStatesArray[i];\n            frameState.layerIndex = i;\n            var layer = layerState.layer;\n            var sourceState = layer.getSourceState();\n            if (!inView(layerState, viewState) ||\n                (sourceState != 'ready' && sourceState != 'undefined')) {\n                layer.unrender();\n                continue;\n            }\n            var element = layer.render(frameState, previousElement);\n            if (!element) {\n                continue;\n            }\n            if (element !== previousElement) {\n                this.children_.push(element);\n                previousElement = element;\n            }\n            if ('getDeclutter' in layer) {\n                declutterLayers.push(\n                /** @type {import(\"../layer/BaseVector.js\").default} */ (layer));\n            }\n        }\n        for (var i = declutterLayers.length - 1; i >= 0; --i) {\n            declutterLayers[i].renderDeclutter(frameState);\n        }\n        replaceChildren(this.element_, this.children_);\n        this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE, frameState);\n        if (!this.renderedVisible_) {\n            this.element_.style.display = '';\n            this.renderedVisible_ = true;\n        }\n        this.scheduleExpireIconCache(frameState);\n    };\n    /**\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n     *     callback.\n     * @param {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} layerFilter Layer filter\n     *     function, only layers which are visible and for which this function\n     *     returns `true` will be tested for features.  By default, all visible\n     *     layers will be tested.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    CompositeMapRenderer.prototype.forEachLayerAtPixel = function (pixel, frameState, hitTolerance, callback, layerFilter) {\n        var viewState = frameState.viewState;\n        var layerStates = frameState.layerStatesArray;\n        var numLayers = layerStates.length;\n        for (var i = numLayers - 1; i >= 0; --i) {\n            var layerState = layerStates[i];\n            var layer = layerState.layer;\n            if (layer.hasRenderer() &&\n                inView(layerState, viewState) &&\n                layerFilter(layer)) {\n                var layerRenderer = layer.getRenderer();\n                var data = layerRenderer.getDataAtPixel(pixel, frameState, hitTolerance);\n                if (data) {\n                    var result = callback(layer, data);\n                    if (result) {\n                        return result;\n                    }\n                }\n            }\n        }\n        return undefined;\n    };\n    return CompositeMapRenderer;\n}(MapRenderer));\nexport default CompositeMapRenderer;\n//# sourceMappingURL=Composite.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DoubleClickZoom\n */\nimport Interaction, { zoomByDelta } from './Interaction.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [delta=1] The zoom delta applied on each double click.\n */\n/**\n * @classdesc\n * Allows the user to zoom by double-clicking on the map.\n * @api\n */\nvar DoubleClickZoom = /** @class */ (function (_super) {\n    __extends(DoubleClickZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DoubleClickZoom(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.delta_ = options.delta ? options.delta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} (if it was a\n     * doubleclick) and eventually zooms the map.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     */\n    DoubleClickZoom.prototype.handleEvent = function (mapBrowserEvent) {\n        var stopEvent = false;\n        if (mapBrowserEvent.type == MapBrowserEventType.DBLCLICK) {\n            var browserEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n            var map = mapBrowserEvent.map;\n            var anchor = mapBrowserEvent.coordinate;\n            var delta = browserEvent.shiftKey ? -this.delta_ : this.delta_;\n            var view = map.getView();\n            zoomByDelta(view, delta, anchor, this.duration_);\n            browserEvent.preventDefault();\n            stopEvent = true;\n        }\n        return !stopEvent;\n    };\n    return DoubleClickZoom;\n}(Interaction));\nexport default DoubleClickZoom;\n//# sourceMappingURL=DoubleClickZoom.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragPan\n */\nimport PointerInteraction, { centroid as centroidFromPointers, } from './Pointer.js';\nimport { FALSE } from '../functions.js';\nimport { all, focusWithTabindex, noModifierKeys, primaryAction, } from '../events/condition.js';\nimport { easeOut } from '../easing.js';\nimport { rotate as rotateCoordinate, scale as scaleCoordinate, } from '../coordinate.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.noModifierKeys} and {@link module:ol/events/condition.primaryAction}.\n * @property {boolean} [onFocusOnly=false] When the map's target has a `tabindex` attribute set,\n * the interaction will only handle events when the map has the focus.\n * @property {import(\"../Kinetic.js\").default} [kinetic] Kinetic inertia to apply to the pan.\n */\n/**\n * @classdesc\n * Allows the user to pan the map by dragging the map.\n * @api\n */\nvar DragPan = /** @class */ (function (_super) {\n    __extends(DragPan, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DragPan(opt_options) {\n        var _this = _super.call(this, {\n            stopDown: FALSE,\n        }) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {import(\"../Kinetic.js\").default|undefined}\n         */\n        _this.kinetic_ = options.kinetic;\n        /**\n         * @type {import(\"../pixel.js\").Pixel}\n         */\n        _this.lastCentroid = null;\n        /**\n         * @type {number}\n         */\n        _this.lastPointersCount_;\n        /**\n         * @type {boolean}\n         */\n        _this.panning_ = false;\n        var condition = options.condition\n            ? options.condition\n            : all(noModifierKeys, primaryAction);\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.onFocusOnly\n            ? all(focusWithTabindex, condition)\n            : condition;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.noKinetic_ = false;\n        return _this;\n    }\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    DragPan.prototype.handleDragEvent = function (mapBrowserEvent) {\n        if (!this.panning_) {\n            this.panning_ = true;\n            this.getMap().getView().beginInteraction();\n        }\n        var targetPointers = this.targetPointers;\n        var centroid = centroidFromPointers(targetPointers);\n        if (targetPointers.length == this.lastPointersCount_) {\n            if (this.kinetic_) {\n                this.kinetic_.update(centroid[0], centroid[1]);\n            }\n            if (this.lastCentroid) {\n                var delta = [\n                    this.lastCentroid[0] - centroid[0],\n                    centroid[1] - this.lastCentroid[1],\n                ];\n                var map = mapBrowserEvent.map;\n                var view = map.getView();\n                scaleCoordinate(delta, view.getResolution());\n                rotateCoordinate(delta, view.getRotation());\n                view.adjustCenterInternal(delta);\n            }\n        }\n        else if (this.kinetic_) {\n            // reset so we don't overestimate the kinetic energy after\n            // after one finger down, tiny drag, second finger down\n            this.kinetic_.begin();\n        }\n        this.lastCentroid = centroid;\n        this.lastPointersCount_ = targetPointers.length;\n        mapBrowserEvent.originalEvent.preventDefault();\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragPan.prototype.handleUpEvent = function (mapBrowserEvent) {\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (this.targetPointers.length === 0) {\n            if (!this.noKinetic_ && this.kinetic_ && this.kinetic_.end()) {\n                var distance = this.kinetic_.getDistance();\n                var angle = this.kinetic_.getAngle();\n                var center = view.getCenterInternal();\n                var centerpx = map.getPixelFromCoordinateInternal(center);\n                var dest = map.getCoordinateFromPixelInternal([\n                    centerpx[0] - distance * Math.cos(angle),\n                    centerpx[1] - distance * Math.sin(angle),\n                ]);\n                view.animateInternal({\n                    center: view.getConstrainedCenter(dest),\n                    duration: 500,\n                    easing: easeOut,\n                });\n            }\n            if (this.panning_) {\n                this.panning_ = false;\n                view.endInteraction();\n            }\n            return false;\n        }\n        else {\n            if (this.kinetic_) {\n                // reset so we don't overestimate the kinetic energy after\n                // after one finger up, tiny drag, second finger up\n                this.kinetic_.begin();\n            }\n            this.lastCentroid = null;\n            return true;\n        }\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragPan.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length > 0 && this.condition_(mapBrowserEvent)) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            this.lastCentroid = null;\n            // stop any current animation\n            if (view.getAnimating()) {\n                view.cancelAnimations();\n            }\n            if (this.kinetic_) {\n                this.kinetic_.begin();\n            }\n            // No kinetic as soon as more than one pointer on the screen is\n            // detected. This is to prevent nasty pans after pinch.\n            this.noKinetic_ = this.targetPointers.length > 1;\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return DragPan;\n}(PointerInteraction));\nexport default DragPan;\n//# sourceMappingURL=DragPan.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragRotate\n */\nimport PointerInteraction from './Pointer.js';\nimport { FALSE } from '../functions.js';\nimport { altShiftKeysOnly, mouseActionButton, mouseOnly, } from '../events/condition.js';\nimport { disable } from '../rotationconstraint.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an\n * {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.altShiftKeysOnly}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n */\n/**\n * @classdesc\n * Allows the user to rotate the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the alt and shift keys are held down.\n *\n * This interaction is only supported for mouse devices.\n * @api\n */\nvar DragRotate = /** @class */ (function (_super) {\n    __extends(DragRotate, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DragRotate(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            stopDown: FALSE,\n        }) || this;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : altShiftKeysOnly;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.lastAngle_ = undefined;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    DragRotate.prototype.handleDragEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return;\n        }\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (view.getConstraints().rotation === disable) {\n            return;\n        }\n        var size = map.getSize();\n        var offset = mapBrowserEvent.pixel;\n        var theta = Math.atan2(size[1] / 2 - offset[1], offset[0] - size[0] / 2);\n        if (this.lastAngle_ !== undefined) {\n            var delta = theta - this.lastAngle_;\n            view.adjustRotationInternal(-delta);\n        }\n        this.lastAngle_ = theta;\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragRotate.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return true;\n        }\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        view.endInteraction(this.duration_);\n        return false;\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragRotate.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return false;\n        }\n        if (mouseActionButton(mapBrowserEvent) &&\n            this.condition_(mapBrowserEvent)) {\n            var map = mapBrowserEvent.map;\n            map.getView().beginInteraction();\n            this.lastAngle_ = undefined;\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return DragRotate;\n}(PointerInteraction));\nexport default DragRotate;\n//# sourceMappingURL=DragRotate.js.map","/**\n * @module ol/render/Box\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Disposable from '../Disposable.js';\nimport Polygon from '../geom/Polygon.js';\nvar RenderBox = /** @class */ (function (_super) {\n    __extends(RenderBox, _super);\n    /**\n     * @param {string} className CSS class name.\n     */\n    function RenderBox(className) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {import(\"../geom/Polygon.js\").default}\n         * @private\n         */\n        _this.geometry_ = null;\n        /**\n         * @type {HTMLDivElement}\n         * @private\n         */\n        _this.element_ = document.createElement('div');\n        _this.element_.style.position = 'absolute';\n        _this.element_.style.pointerEvents = 'auto';\n        _this.element_.className = 'ol-box ' + className;\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default|null}\n         */\n        _this.map_ = null;\n        /**\n         * @private\n         * @type {import(\"../pixel.js\").Pixel}\n         */\n        _this.startPixel_ = null;\n        /**\n         * @private\n         * @type {import(\"../pixel.js\").Pixel}\n         */\n        _this.endPixel_ = null;\n        return _this;\n    }\n    /**\n     * Clean up.\n     */\n    RenderBox.prototype.disposeInternal = function () {\n        this.setMap(null);\n    };\n    /**\n     * @private\n     */\n    RenderBox.prototype.render_ = function () {\n        var startPixel = this.startPixel_;\n        var endPixel = this.endPixel_;\n        var px = 'px';\n        var style = this.element_.style;\n        style.left = Math.min(startPixel[0], endPixel[0]) + px;\n        style.top = Math.min(startPixel[1], endPixel[1]) + px;\n        style.width = Math.abs(endPixel[0] - startPixel[0]) + px;\n        style.height = Math.abs(endPixel[1] - startPixel[1]) + px;\n    };\n    /**\n     * @param {import(\"../PluggableMap.js\").default|null} map Map.\n     */\n    RenderBox.prototype.setMap = function (map) {\n        if (this.map_) {\n            this.map_.getOverlayContainer().removeChild(this.element_);\n            var style = this.element_.style;\n            style.left = 'inherit';\n            style.top = 'inherit';\n            style.width = 'inherit';\n            style.height = 'inherit';\n        }\n        this.map_ = map;\n        if (this.map_) {\n            this.map_.getOverlayContainer().appendChild(this.element_);\n        }\n    };\n    /**\n     * @param {import(\"../pixel.js\").Pixel} startPixel Start pixel.\n     * @param {import(\"../pixel.js\").Pixel} endPixel End pixel.\n     */\n    RenderBox.prototype.setPixels = function (startPixel, endPixel) {\n        this.startPixel_ = startPixel;\n        this.endPixel_ = endPixel;\n        this.createOrUpdateGeometry();\n        this.render_();\n    };\n    /**\n     * Creates or updates the cached geometry.\n     */\n    RenderBox.prototype.createOrUpdateGeometry = function () {\n        var startPixel = this.startPixel_;\n        var endPixel = this.endPixel_;\n        var pixels = [\n            startPixel,\n            [startPixel[0], endPixel[1]],\n            endPixel,\n            [endPixel[0], startPixel[1]],\n        ];\n        var coordinates = pixels.map(this.map_.getCoordinateFromPixelInternal, this.map_);\n        // close the polygon\n        coordinates[4] = coordinates[0].slice();\n        if (!this.geometry_) {\n            this.geometry_ = new Polygon([coordinates]);\n        }\n        else {\n            this.geometry_.setCoordinates([coordinates]);\n        }\n    };\n    /**\n     * @return {import(\"../geom/Polygon.js\").default} Geometry.\n     */\n    RenderBox.prototype.getGeometry = function () {\n        return this.geometry_;\n    };\n    return RenderBox;\n}(Disposable));\nexport default RenderBox;\n//# sourceMappingURL=Box.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragBox\n */\n// FIXME draw drag box\nimport Event from '../events/Event.js';\nimport PointerInteraction from './Pointer.js';\nimport RenderBox from '../render/Box.js';\nimport { mouseActionButton } from '../events/condition.js';\n/**\n * A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s and returns a `{boolean}`. If the condition is met,\n * true should be returned.\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default, import(\"../pixel.js\").Pixel, import(\"../pixel.js\").Pixel):boolean} EndCondition\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragbox'] CSS class name for styling the box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link ol/events/condition~mouseActionButton}.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the default\n * `boxEndCondition` function.\n * @property {EndCondition} [boxEndCondition] A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s to indicate whether a `boxend` event should be fired.\n * Default is `true` if the area of the box is bigger than the `minArea` option.\n * @property {function(this:DragBox, import(\"../MapBrowserEvent.js\").default):void} [onBoxEnd] Code to execute just\n * before `boxend` is fired.\n */\n/**\n * @enum {string}\n */\nvar DragBoxEventType = {\n    /**\n     * Triggered upon drag box start.\n     * @event DragBoxEvent#boxstart\n     * @api\n     */\n    BOXSTART: 'boxstart',\n    /**\n     * Triggered on drag when box is active.\n     * @event DragBoxEvent#boxdrag\n     * @api\n     */\n    BOXDRAG: 'boxdrag',\n    /**\n     * Triggered upon drag box end.\n     * @event DragBoxEvent#boxend\n     * @api\n     */\n    BOXEND: 'boxend',\n    /**\n     * Triggered upon drag box canceled.\n     * @event DragBoxEvent#boxcancel\n     * @api\n     */\n    BOXCANCEL: 'boxcancel',\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragBox~DragBox} instances are instances of\n * this type.\n */\nvar DragBoxEvent = /** @class */ (function (_super) {\n    __extends(DragBoxEvent, _super);\n    /**\n     * @param {string} type The event type.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate The event coordinate.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Originating event.\n     */\n    function DragBoxEvent(type, coordinate, mapBrowserEvent) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The coordinate of the drag event.\n         * @const\n         * @type {import(\"../coordinate.js\").Coordinate}\n         * @api\n         */\n        _this.coordinate = coordinate;\n        /**\n         * @const\n         * @type {import(\"../MapBrowserEvent.js\").default}\n         * @api\n         */\n        _this.mapBrowserEvent = mapBrowserEvent;\n        return _this;\n    }\n    return DragBoxEvent;\n}(Event));\nexport { DragBoxEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'boxcancel'|'boxdrag'|'boxend'|'boxstart', DragBoxEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'boxcancel'|'boxdrag'|'boxend', Return>} DragBoxOnSignature\n */\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the shift or other key is held down. This is used, for example,\n * for zooming to a specific area of the map\n * (see {@link module:ol/interaction/DragZoom~DragZoom} and\n * {@link module:ol/interaction/DragRotateAndZoom~DragRotateAndZoom}).\n *\n * @fires DragBoxEvent\n * @api\n */\nvar DragBox = /** @class */ (function (_super) {\n    __extends(DragBox, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DragBox(opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {DragBoxOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {DragBoxOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {DragBoxOnSignature<void>}\n         */\n        _this.un;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @type {import(\"../render/Box.js\").default}\n         * @private\n         */\n        _this.box_ = new RenderBox(options.className || 'ol-dragbox');\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.minArea_ = options.minArea !== undefined ? options.minArea : 64;\n        if (options.onBoxEnd) {\n            _this.onBoxEnd = options.onBoxEnd;\n        }\n        /**\n         * @type {import(\"../pixel.js\").Pixel}\n         * @private\n         */\n        _this.startPixel_ = null;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : mouseActionButton;\n        /**\n         * @private\n         * @type {EndCondition}\n         */\n        _this.boxEndCondition_ = options.boxEndCondition\n            ? options.boxEndCondition\n            : _this.defaultBoxEndCondition;\n        return _this;\n    }\n    /**\n     * The default condition for determining whether the boxend event\n     * should fire.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent The originating MapBrowserEvent\n     *     leading to the box end.\n     * @param {import(\"../pixel.js\").Pixel} startPixel The starting pixel of the box.\n     * @param {import(\"../pixel.js\").Pixel} endPixel The end pixel of the box.\n     * @return {boolean} Whether or not the boxend condition should be fired.\n     */\n    DragBox.prototype.defaultBoxEndCondition = function (mapBrowserEvent, startPixel, endPixel) {\n        var width = endPixel[0] - startPixel[0];\n        var height = endPixel[1] - startPixel[1];\n        return width * width + height * height >= this.minArea_;\n    };\n    /**\n     * Returns geometry of last drawn box.\n     * @return {import(\"../geom/Polygon.js\").default} Geometry.\n     * @api\n     */\n    DragBox.prototype.getGeometry = function () {\n        return this.box_.getGeometry();\n    };\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    DragBox.prototype.handleDragEvent = function (mapBrowserEvent) {\n        this.box_.setPixels(this.startPixel_, mapBrowserEvent.pixel);\n        this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG, mapBrowserEvent.coordinate, mapBrowserEvent));\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragBox.prototype.handleUpEvent = function (mapBrowserEvent) {\n        this.box_.setMap(null);\n        var completeBox = this.boxEndCondition_(mapBrowserEvent, this.startPixel_, mapBrowserEvent.pixel);\n        if (completeBox) {\n            this.onBoxEnd(mapBrowserEvent);\n        }\n        this.dispatchEvent(new DragBoxEvent(completeBox ? DragBoxEventType.BOXEND : DragBoxEventType.BOXCANCEL, mapBrowserEvent.coordinate, mapBrowserEvent));\n        return false;\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    DragBox.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.condition_(mapBrowserEvent)) {\n            this.startPixel_ = mapBrowserEvent.pixel;\n            this.box_.setMap(mapBrowserEvent.map);\n            this.box_.setPixels(this.startPixel_, this.startPixel_);\n            this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART, mapBrowserEvent.coordinate, mapBrowserEvent));\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * Function to execute just before `onboxend` is fired\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     */\n    DragBox.prototype.onBoxEnd = function (event) { };\n    return DragBox;\n}(PointerInteraction));\nexport default DragBox;\n//# sourceMappingURL=DragBox.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragZoom\n */\nimport DragBox from './DragBox.js';\nimport { easeOut } from '../easing.js';\nimport { shiftKeyOnly } from '../events/condition.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragzoom'] CSS class name for styling the\n * box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.shiftKeyOnly}.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {boolean} [out=false] Use interaction for zooming out.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the parent default\n * `boxEndCondition` function.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when a key, shift by default, is held down.\n *\n * To change the style of the box, use CSS and the `.ol-dragzoom` selector, or\n * your custom one configured with `className`.\n * @api\n */\nvar DragZoom = /** @class */ (function (_super) {\n    __extends(DragZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function DragZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var condition = options.condition ? options.condition : shiftKeyOnly;\n        _this = _super.call(this, {\n            condition: condition,\n            className: options.className || 'ol-dragzoom',\n            minArea: options.minArea,\n        }) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 200;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.out_ = options.out !== undefined ? options.out : false;\n        return _this;\n    }\n    /**\n     * Function to execute just before `onboxend` is fired\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     */\n    DragZoom.prototype.onBoxEnd = function (event) {\n        var map = this.getMap();\n        var view = /** @type {!import(\"../View.js\").default} */ (map.getView());\n        var geometry = this.getGeometry();\n        if (this.out_) {\n            var rotatedExtent = view.rotatedExtentForGeometry(geometry);\n            var resolution = view.getResolutionForExtentInternal(rotatedExtent);\n            var factor = view.getResolution() / resolution;\n            geometry = geometry.clone();\n            geometry.scale(factor * factor);\n        }\n        view.fitInternal(geometry, {\n            duration: this.duration_,\n            easing: easeOut,\n        });\n    };\n    return DragZoom;\n}(DragBox));\nexport default DragZoom;\n//# sourceMappingURL=DragZoom.js.map","/**\n * @module ol/events/KeyCode\n */\n/**\n * @enum {number}\n * @const\n */\nexport default {\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n};\n//# sourceMappingURL=KeyCode.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/KeyboardPan\n */\nimport EventType from '../events/EventType.js';\nimport Interaction, { pan } from './Interaction.js';\nimport KeyCode from '../events/KeyCode.js';\nimport { noModifierKeys, targetNotEditable } from '../events/condition.js';\nimport { rotate as rotateCoordinate } from '../coordinate.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition.noModifierKeys} and\n * {@link module:ol/events/condition.targetNotEditable}.\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {number} [pixelDelta=128] The amount of pixels to pan on each key\n * press.\n */\n/**\n * @classdesc\n * Allows the user to pan the map using keyboard arrows.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}.\n * @api\n */\nvar KeyboardPan = /** @class */ (function (_super) {\n    __extends(KeyboardPan, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function KeyboardPan(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options || {};\n        /**\n         * @private\n         * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Browser event.\n         * @return {boolean} Combined condition result.\n         */\n        _this.defaultCondition_ = function (mapBrowserEvent) {\n            return (noModifierKeys(mapBrowserEvent) && targetNotEditable(mapBrowserEvent));\n        };\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ =\n            options.condition !== undefined\n                ? options.condition\n                : _this.defaultCondition_;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 100;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelDelta_ =\n            options.pixelDelta !== undefined ? options.pixelDelta : 128;\n        return _this;\n    }\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} if it was a\n     * `KeyEvent`, and decides the direction to pan to (if an arrow key was\n     * pressed).\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @this {KeyboardPan}\n     */\n    KeyboardPan.prototype.handleEvent = function (mapBrowserEvent) {\n        var stopEvent = false;\n        if (mapBrowserEvent.type == EventType.KEYDOWN) {\n            var keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n            var keyCode = keyEvent.keyCode;\n            if (this.condition_(mapBrowserEvent) &&\n                (keyCode == KeyCode.DOWN ||\n                    keyCode == KeyCode.LEFT ||\n                    keyCode == KeyCode.RIGHT ||\n                    keyCode == KeyCode.UP)) {\n                var map = mapBrowserEvent.map;\n                var view = map.getView();\n                var mapUnitsDelta = view.getResolution() * this.pixelDelta_;\n                var deltaX = 0, deltaY = 0;\n                if (keyCode == KeyCode.DOWN) {\n                    deltaY = -mapUnitsDelta;\n                }\n                else if (keyCode == KeyCode.LEFT) {\n                    deltaX = -mapUnitsDelta;\n                }\n                else if (keyCode == KeyCode.RIGHT) {\n                    deltaX = mapUnitsDelta;\n                }\n                else {\n                    deltaY = mapUnitsDelta;\n                }\n                var delta = [deltaX, deltaY];\n                rotateCoordinate(delta, view.getRotation());\n                pan(view, delta, this.duration_);\n                keyEvent.preventDefault();\n                stopEvent = true;\n            }\n        }\n        return !stopEvent;\n    };\n    return KeyboardPan;\n}(Interaction));\nexport default KeyboardPan;\n//# sourceMappingURL=KeyboardPan.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/KeyboardZoom\n */\nimport EventType from '../events/EventType.js';\nimport Interaction, { zoomByDelta } from './Interaction.js';\nimport { targetNotEditable } from '../events/condition.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition.targetNotEditable}.\n * @property {number} [delta=1] The zoom level delta on each key press.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map using keyboard + and -.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardPan~KeyboardPan}.\n * @api\n */\nvar KeyboardZoom = /** @class */ (function (_super) {\n    __extends(KeyboardZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function KeyboardZoom(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : targetNotEditable;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.delta_ = options.delta ? options.delta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 100;\n        return _this;\n    }\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} if it was a\n     * `KeyEvent`, and decides whether to zoom in or out (depending on whether the\n     * key pressed was '+' or '-').\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @this {KeyboardZoom}\n     */\n    KeyboardZoom.prototype.handleEvent = function (mapBrowserEvent) {\n        var stopEvent = false;\n        if (mapBrowserEvent.type == EventType.KEYDOWN ||\n            mapBrowserEvent.type == EventType.KEYPRESS) {\n            var keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n            var charCode = keyEvent.charCode;\n            if (this.condition_(mapBrowserEvent) &&\n                (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n                var map = mapBrowserEvent.map;\n                var delta = charCode == '+'.charCodeAt(0) ? this.delta_ : -this.delta_;\n                var view = map.getView();\n                zoomByDelta(view, delta, undefined, this.duration_);\n                keyEvent.preventDefault();\n                stopEvent = true;\n            }\n        }\n        return !stopEvent;\n    };\n    return KeyboardZoom;\n}(Interaction));\nexport default KeyboardZoom;\n//# sourceMappingURL=KeyboardZoom.js.map","/**\n * @module ol/Kinetic\n */\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nvar Kinetic = /** @class */ (function () {\n    /**\n     * @param {number} decay Rate of decay (must be negative).\n     * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n     * @param {number} delay Delay to consider to calculate the kinetic\n     *     initial values (milliseconds).\n     */\n    function Kinetic(decay, minVelocity, delay) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.decay_ = decay;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minVelocity_ = minVelocity;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.delay_ = delay;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.points_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        this.angle_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.initialVelocity_ = 0;\n    }\n    /**\n     * FIXME empty description for jsdoc\n     */\n    Kinetic.prototype.begin = function () {\n        this.points_.length = 0;\n        this.angle_ = 0;\n        this.initialVelocity_ = 0;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     */\n    Kinetic.prototype.update = function (x, y) {\n        this.points_.push(x, y, Date.now());\n    };\n    /**\n     * @return {boolean} Whether we should do kinetic animation.\n     */\n    Kinetic.prototype.end = function () {\n        if (this.points_.length < 6) {\n            // at least 2 points are required (i.e. there must be at least 6 elements\n            // in the array)\n            return false;\n        }\n        var delay = Date.now() - this.delay_;\n        var lastIndex = this.points_.length - 3;\n        if (this.points_[lastIndex + 2] < delay) {\n            // the last tracked point is too old, which means that the user stopped\n            // panning before releasing the map\n            return false;\n        }\n        // get the first point which still falls into the delay time\n        var firstIndex = lastIndex - 3;\n        while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n            firstIndex -= 3;\n        }\n        var duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n        // we don't want a duration of 0 (divide by zero)\n        // we also make sure the user panned for a duration of at least one frame\n        // (1/60s) to compute sane displacement values\n        if (duration < 1000 / 60) {\n            return false;\n        }\n        var dx = this.points_[lastIndex] - this.points_[firstIndex];\n        var dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n        this.angle_ = Math.atan2(dy, dx);\n        this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n        return this.initialVelocity_ > this.minVelocity_;\n    };\n    /**\n     * @return {number} Total distance travelled (pixels).\n     */\n    Kinetic.prototype.getDistance = function () {\n        return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n    };\n    /**\n     * @return {number} Angle of the kinetic panning animation (radians).\n     */\n    Kinetic.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    return Kinetic;\n}());\nexport default Kinetic;\n//# sourceMappingURL=Kinetic.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/MouseWheelZoom\n */\nimport EventType from '../events/EventType.js';\nimport Interaction, { zoomByDelta } from './Interaction.js';\nimport { DEVICE_PIXEL_RATIO, FIREFOX } from '../has.js';\nimport { all, always, focusWithTabindex } from '../events/condition.js';\nimport { clamp } from '../math.js';\n/**\n * @enum {string}\n */\nexport var Mode = {\n    TRACKPAD: 'trackpad',\n    WHEEL: 'wheel',\n};\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition.always}.\n * @property {boolean} [onFocusOnly=false] When the map's target has a `tabindex` attribute set,\n * the interaction will only handle events when the map has the focus.\n * @property {number} [maxDelta=1] Maximum mouse wheel delta.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n * @property {boolean} [constrainResolution=false] If true, the mouse wheel zoom\n * event will always animate to the closest zoom level after an interaction;\n * false means intermediary zoom levels are allowed.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n * @api\n */\nvar MouseWheelZoom = /** @class */ (function (_super) {\n    __extends(MouseWheelZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function MouseWheelZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, \n        /** @type {import(\"./Interaction.js\").InteractionOptions} */ (options)) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.totalDelta_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.lastDelta_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = options.maxDelta !== undefined ? options.maxDelta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.useAnchor_ =\n            options.useAnchor !== undefined ? options.useAnchor : true;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.constrainResolution_ =\n            options.constrainResolution !== undefined\n                ? options.constrainResolution\n                : false;\n        var condition = options.condition ? options.condition : always;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.onFocusOnly\n            ? all(focusWithTabindex, condition)\n            : condition;\n        /**\n         * @private\n         * @type {?import(\"../coordinate.js\").Coordinate}\n         */\n        _this.lastAnchor_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.startTime_ = undefined;\n        /**\n         * @private\n         * @type {?}\n         */\n        _this.timeoutId_;\n        /**\n         * @private\n         * @type {Mode|undefined}\n         */\n        _this.mode_ = undefined;\n        /**\n         * Trackpad events separated by this delay will be considered separate\n         * interactions.\n         * @type {number}\n         */\n        _this.trackpadEventGap_ = 400;\n        /**\n         * @type {?}\n         */\n        _this.trackpadTimeoutId_;\n        /**\n         * The number of delta values per zoom level\n         * @private\n         * @type {number}\n         */\n        _this.deltaPerZoom_ = 300;\n        return _this;\n    }\n    /**\n     * @private\n     */\n    MouseWheelZoom.prototype.endInteraction_ = function () {\n        this.trackpadTimeoutId_ = undefined;\n        var map = this.getMap();\n        if (!map) {\n            return;\n        }\n        var view = map.getView();\n        view.endInteraction(undefined, this.lastDelta_ ? (this.lastDelta_ > 0 ? 1 : -1) : 0, this.lastAnchor_);\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} (if it was a mousewheel-event) and eventually\n     * zooms the map.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     */\n    MouseWheelZoom.prototype.handleEvent = function (mapBrowserEvent) {\n        if (!this.condition_(mapBrowserEvent)) {\n            return true;\n        }\n        var type = mapBrowserEvent.type;\n        if (type !== EventType.WHEEL) {\n            return true;\n        }\n        var map = mapBrowserEvent.map;\n        var wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n        wheelEvent.preventDefault();\n        if (this.useAnchor_) {\n            this.lastAnchor_ = mapBrowserEvent.coordinate;\n        }\n        // Delta normalisation inspired by\n        // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n        var delta;\n        if (mapBrowserEvent.type == EventType.WHEEL) {\n            delta = wheelEvent.deltaY;\n            if (FIREFOX && wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n                delta /= DEVICE_PIXEL_RATIO;\n            }\n            if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n                delta *= 40;\n            }\n        }\n        if (delta === 0) {\n            return false;\n        }\n        else {\n            this.lastDelta_ = delta;\n        }\n        var now = Date.now();\n        if (this.startTime_ === undefined) {\n            this.startTime_ = now;\n        }\n        if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n            this.mode_ = Math.abs(delta) < 4 ? Mode.TRACKPAD : Mode.WHEEL;\n        }\n        var view = map.getView();\n        if (this.mode_ === Mode.TRACKPAD &&\n            !(view.getConstrainResolution() || this.constrainResolution_)) {\n            if (this.trackpadTimeoutId_) {\n                clearTimeout(this.trackpadTimeoutId_);\n            }\n            else {\n                if (view.getAnimating()) {\n                    view.cancelAnimations();\n                }\n                view.beginInteraction();\n            }\n            this.trackpadTimeoutId_ = setTimeout(this.endInteraction_.bind(this), this.timeout_);\n            view.adjustZoom(-delta / this.deltaPerZoom_, this.lastAnchor_);\n            this.startTime_ = now;\n            return false;\n        }\n        this.totalDelta_ += delta;\n        var timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n        clearTimeout(this.timeoutId_);\n        this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n        return false;\n    };\n    /**\n     * @private\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    MouseWheelZoom.prototype.handleWheelZoom_ = function (map) {\n        var view = map.getView();\n        if (view.getAnimating()) {\n            view.cancelAnimations();\n        }\n        var delta = -clamp(this.totalDelta_, -this.maxDelta_ * this.deltaPerZoom_, this.maxDelta_ * this.deltaPerZoom_) / this.deltaPerZoom_;\n        if (view.getConstrainResolution() || this.constrainResolution_) {\n            // view has a zoom constraint, zoom by 1\n            delta = delta ? (delta > 0 ? 1 : -1) : 0;\n        }\n        zoomByDelta(view, delta, this.lastAnchor_, this.duration_);\n        this.mode_ = undefined;\n        this.totalDelta_ = 0;\n        this.lastAnchor_ = null;\n        this.startTime_ = undefined;\n        this.timeoutId_ = undefined;\n    };\n    /**\n     * Enable or disable using the mouse's location as an anchor when zooming\n     * @param {boolean} useAnchor true to zoom to the mouse's location, false\n     * to zoom to the center of the map\n     * @api\n     */\n    MouseWheelZoom.prototype.setMouseAnchor = function (useAnchor) {\n        this.useAnchor_ = useAnchor;\n        if (!useAnchor) {\n            this.lastAnchor_ = null;\n        }\n    };\n    return MouseWheelZoom;\n}(Interaction));\nexport default MouseWheelZoom;\n//# sourceMappingURL=MouseWheelZoom.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/PinchRotate\n */\nimport PointerInteraction, { centroid as centroidFromPointers, } from './Pointer.js';\nimport { FALSE } from '../functions.js';\nimport { disable } from '../rotationconstraint.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] The duration of the animation in\n * milliseconds.\n * @property {number} [threshold=0.3] Minimal angle in radians to start a rotation.\n */\n/**\n * @classdesc\n * Allows the user to rotate the map by twisting with two fingers\n * on a touch screen.\n * @api\n */\nvar PinchRotate = /** @class */ (function (_super) {\n    __extends(PinchRotate, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function PinchRotate(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n        if (!pointerOptions.stopDown) {\n            pointerOptions.stopDown = FALSE;\n        }\n        _this = _super.call(this, pointerOptions) || this;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.anchor_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.lastAngle_ = undefined;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.rotating_ = false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.rotationDelta_ = 0.0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.threshold_ = options.threshold !== undefined ? options.threshold : 0.3;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    PinchRotate.prototype.handleDragEvent = function (mapBrowserEvent) {\n        var rotationDelta = 0.0;\n        var touch0 = this.targetPointers[0];\n        var touch1 = this.targetPointers[1];\n        // angle between touches\n        var angle = Math.atan2(touch1.clientY - touch0.clientY, touch1.clientX - touch0.clientX);\n        if (this.lastAngle_ !== undefined) {\n            var delta = angle - this.lastAngle_;\n            this.rotationDelta_ += delta;\n            if (!this.rotating_ && Math.abs(this.rotationDelta_) > this.threshold_) {\n                this.rotating_ = true;\n            }\n            rotationDelta = delta;\n        }\n        this.lastAngle_ = angle;\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (view.getConstraints().rotation === disable) {\n            return;\n        }\n        // rotate anchor point.\n        // FIXME: should be the intersection point between the lines:\n        //     touch0,touch1 and previousTouch0,previousTouch1\n        var viewportPosition = map.getViewport().getBoundingClientRect();\n        var centroid = centroidFromPointers(this.targetPointers);\n        centroid[0] -= viewportPosition.left;\n        centroid[1] -= viewportPosition.top;\n        this.anchor_ = map.getCoordinateFromPixelInternal(centroid);\n        // rotate\n        if (this.rotating_) {\n            map.render();\n            view.adjustRotationInternal(rotationDelta, this.anchor_);\n        }\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    PinchRotate.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length < 2) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            view.endInteraction(this.duration_);\n            return false;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    PinchRotate.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length >= 2) {\n            var map = mapBrowserEvent.map;\n            this.anchor_ = null;\n            this.lastAngle_ = undefined;\n            this.rotating_ = false;\n            this.rotationDelta_ = 0.0;\n            if (!this.handlingDownUpSequence) {\n                map.getView().beginInteraction();\n            }\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return PinchRotate;\n}(PointerInteraction));\nexport default PinchRotate;\n//# sourceMappingURL=PinchRotate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/PinchZoom\n */\nimport PointerInteraction, { centroid as centroidFromPointers, } from './Pointer.js';\nimport { FALSE } from '../functions.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=400] Animation duration in milliseconds.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by pinching with two fingers\n * on a touch screen.\n * @api\n */\nvar PinchZoom = /** @class */ (function (_super) {\n    __extends(PinchZoom, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function PinchZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n        if (!pointerOptions.stopDown) {\n            pointerOptions.stopDown = FALSE;\n        }\n        _this = _super.call(this, pointerOptions) || this;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.anchor_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 400;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.lastDistance_ = undefined;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.lastScaleDelta_ = 1;\n        return _this;\n    }\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     */\n    PinchZoom.prototype.handleDragEvent = function (mapBrowserEvent) {\n        var scaleDelta = 1.0;\n        var touch0 = this.targetPointers[0];\n        var touch1 = this.targetPointers[1];\n        var dx = touch0.clientX - touch1.clientX;\n        var dy = touch0.clientY - touch1.clientY;\n        // distance between touches\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        if (this.lastDistance_ !== undefined) {\n            scaleDelta = this.lastDistance_ / distance;\n        }\n        this.lastDistance_ = distance;\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (scaleDelta != 1.0) {\n            this.lastScaleDelta_ = scaleDelta;\n        }\n        // scale anchor point.\n        var viewportPosition = map.getViewport().getBoundingClientRect();\n        var centroid = centroidFromPointers(this.targetPointers);\n        centroid[0] -= viewportPosition.left;\n        centroid[1] -= viewportPosition.top;\n        this.anchor_ = map.getCoordinateFromPixelInternal(centroid);\n        // scale, bypass the resolution constraint\n        map.render();\n        view.adjustResolutionInternal(scaleDelta, this.anchor_);\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    PinchZoom.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length < 2) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            var direction = this.lastScaleDelta_ > 1 ? 1 : -1;\n            view.endInteraction(this.duration_, direction);\n            return false;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     */\n    PinchZoom.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length >= 2) {\n            var map = mapBrowserEvent.map;\n            this.anchor_ = null;\n            this.lastDistance_ = undefined;\n            this.lastScaleDelta_ = 1;\n            if (!this.handlingDownUpSequence) {\n                map.getView().beginInteraction();\n            }\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return PinchZoom;\n}(PointerInteraction));\nexport default PinchZoom;\n//# sourceMappingURL=PinchZoom.js.map","/**\n * @module ol/interaction\n */\nimport Collection from './Collection.js';\nimport DoubleClickZoom from './interaction/DoubleClickZoom.js';\nimport DragPan from './interaction/DragPan.js';\nimport DragRotate from './interaction/DragRotate.js';\nimport DragZoom from './interaction/DragZoom.js';\nimport KeyboardPan from './interaction/KeyboardPan.js';\nimport KeyboardZoom from './interaction/KeyboardZoom.js';\nimport Kinetic from './Kinetic.js';\nimport MouseWheelZoom from './interaction/MouseWheelZoom.js';\nimport PinchRotate from './interaction/PinchRotate.js';\nimport PinchZoom from './interaction/PinchZoom.js';\nexport { default as DoubleClickZoom } from './interaction/DoubleClickZoom.js';\nexport { default as DragAndDrop } from './interaction/DragAndDrop.js';\nexport { default as DragBox } from './interaction/DragBox.js';\nexport { default as DragPan } from './interaction/DragPan.js';\nexport { default as DragRotate } from './interaction/DragRotate.js';\nexport { default as DragRotateAndZoom } from './interaction/DragRotateAndZoom.js';\nexport { default as DragZoom } from './interaction/DragZoom.js';\nexport { default as Draw } from './interaction/Draw.js';\nexport { default as Extent } from './interaction/Extent.js';\nexport { default as Interaction } from './interaction/Interaction.js';\nexport { default as KeyboardPan } from './interaction/KeyboardPan.js';\nexport { default as KeyboardZoom } from './interaction/KeyboardZoom.js';\nexport { default as Modify } from './interaction/Modify.js';\nexport { default as MouseWheelZoom } from './interaction/MouseWheelZoom.js';\nexport { default as PinchRotate } from './interaction/PinchRotate.js';\nexport { default as PinchZoom } from './interaction/PinchZoom.js';\nexport { default as Pointer } from './interaction/Pointer.js';\nexport { default as Select } from './interaction/Select.js';\nexport { default as Snap } from './interaction/Snap.js';\nexport { default as Translate } from './interaction/Translate.js';\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [altShiftDragRotate=true] Whether Alt-Shift-drag rotate is\n * desired.\n * @property {boolean} [onFocusOnly=false] Interact only when the map has the\n * focus. This affects the `MouseWheelZoom` and `DragPan` interactions and is\n * useful when page scroll is desired for maps that do not have the browser's\n * focus.\n * @property {boolean} [doubleClickZoom=true] Whether double click zoom is\n * desired.\n * @property {boolean} [keyboard=true] Whether keyboard interaction is desired.\n * @property {boolean} [mouseWheelZoom=true] Whether mousewheel zoom is desired.\n * @property {boolean} [shiftDragZoom=true] Whether Shift-drag zoom is desired.\n * @property {boolean} [dragPan=true] Whether drag pan is desired.\n * @property {boolean} [pinchRotate=true] Whether pinch rotate is desired.\n * @property {boolean} [pinchZoom=true] Whether pinch zoom is desired.\n * @property {number} [zoomDelta] Zoom level delta when using keyboard or double click zoom.\n * @property {number} [zoomDuration] Duration of the zoom animation in\n * milliseconds.\n */\n/**\n * Set of interactions included in maps by default. Specific interactions can be\n * excluded by setting the appropriate option to false in the constructor\n * options, but the order of the interactions is fixed.  If you want to specify\n * a different order for interactions, you will need to create your own\n * {@link module:ol/interaction/Interaction~Interaction} instances and insert\n * them into a {@link module:ol/Collection~Collection} in the order you want\n * before creating your {@link module:ol/Map~Map} instance. Changing the order can\n * be of interest if the event propagation needs to be stopped at a point.\n * The default set of interactions, in sequence, is:\n * * {@link module:ol/interaction/DragRotate~DragRotate}\n * * {@link module:ol/interaction/DoubleClickZoom~DoubleClickZoom}\n * * {@link module:ol/interaction/DragPan~DragPan}\n * * {@link module:ol/interaction/PinchRotate~PinchRotate}\n * * {@link module:ol/interaction/PinchZoom~PinchZoom}\n * * {@link module:ol/interaction/KeyboardPan~KeyboardPan}\n * * {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}\n * * {@link module:ol/interaction/MouseWheelZoom~MouseWheelZoom}\n * * {@link module:ol/interaction/DragZoom~DragZoom}\n *\n * @param {DefaultsOptions} [opt_options] Defaults options.\n * @return {import(\"./Collection.js\").default<import(\"./interaction/Interaction.js\").default>}\n * A collection of interactions to be used with the {@link module:ol/Map~Map}\n * constructor's `interactions` option.\n * @api\n */\nexport function defaults(opt_options) {\n    var options = opt_options ? opt_options : {};\n    var interactions = new Collection();\n    var kinetic = new Kinetic(-0.005, 0.05, 100);\n    var altShiftDragRotate = options.altShiftDragRotate !== undefined\n        ? options.altShiftDragRotate\n        : true;\n    if (altShiftDragRotate) {\n        interactions.push(new DragRotate());\n    }\n    var doubleClickZoom = options.doubleClickZoom !== undefined ? options.doubleClickZoom : true;\n    if (doubleClickZoom) {\n        interactions.push(new DoubleClickZoom({\n            delta: options.zoomDelta,\n            duration: options.zoomDuration,\n        }));\n    }\n    var dragPan = options.dragPan !== undefined ? options.dragPan : true;\n    if (dragPan) {\n        interactions.push(new DragPan({\n            onFocusOnly: options.onFocusOnly,\n            kinetic: kinetic,\n        }));\n    }\n    var pinchRotate = options.pinchRotate !== undefined ? options.pinchRotate : true;\n    if (pinchRotate) {\n        interactions.push(new PinchRotate());\n    }\n    var pinchZoom = options.pinchZoom !== undefined ? options.pinchZoom : true;\n    if (pinchZoom) {\n        interactions.push(new PinchZoom({\n            duration: options.zoomDuration,\n        }));\n    }\n    var keyboard = options.keyboard !== undefined ? options.keyboard : true;\n    if (keyboard) {\n        interactions.push(new KeyboardPan());\n        interactions.push(new KeyboardZoom({\n            delta: options.zoomDelta,\n            duration: options.zoomDuration,\n        }));\n    }\n    var mouseWheelZoom = options.mouseWheelZoom !== undefined ? options.mouseWheelZoom : true;\n    if (mouseWheelZoom) {\n        interactions.push(new MouseWheelZoom({\n            onFocusOnly: options.onFocusOnly,\n            duration: options.zoomDuration,\n        }));\n    }\n    var shiftDragZoom = options.shiftDragZoom !== undefined ? options.shiftDragZoom : true;\n    if (shiftDragZoom) {\n        interactions.push(new DragZoom({\n            duration: options.zoomDuration,\n        }));\n    }\n    return interactions;\n}\n//# sourceMappingURL=interaction.js.map","/**\n * @module ol/math\n */\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport var cosh = (function () {\n    // Wrapped in a iife, to save the overhead of checking for the native\n    // implementation on every invocation.\n    var cosh;\n    if ('cosh' in Math) {\n        // The environment supports the native Math.cosh function, use it\n        cosh = Math.cosh;\n    }\n    else {\n        //  else, use the reference implementation of MDN:\n        cosh = function (x) {\n            var y = /** @type {Math} */ (Math).exp(x);\n            return (y + 1 / y) / 2;\n        };\n    }\n    return cosh;\n})();\n/**\n * Return the base 2 logarithm of a given number. The method will use the\n * native `Math.log2` function if it is available, otherwise the base 2\n * logarithm will be calculated via the reference implementation of the\n * Mozilla developer network.\n *\n * @param {number} x X.\n * @return {number} Base 2 logarithm of x.\n */\nexport var log2 = (function () {\n    // Wrapped in a iife, to save the overhead of checking for the native\n    // implementation on every invocation.\n    var log2;\n    if ('log2' in Math) {\n        // The environment supports the native Math.log2 function, use it\n        log2 = Math.log2;\n    }\n    else {\n        //  else, use the reference implementation of MDN:\n        log2 = function (x) {\n            return Math.log(x) * Math.LOG2E;\n        };\n    }\n    return log2;\n})();\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    if (dx !== 0 || dy !== 0) {\n        var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n        if (t > 1) {\n            x1 = x2;\n            y1 = y2;\n        }\n        else if (t > 0) {\n            x1 += dx * t;\n            y1 += dy * t;\n        }\n    }\n    return squaredDistance(x, y, x1, y1);\n}\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    return dx * dx + dy * dy;\n}\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n    var n = mat.length;\n    for (var i = 0; i < n; i++) {\n        // Find max in the i-th column (ignoring i - 1 first rows)\n        var maxRow = i;\n        var maxEl = Math.abs(mat[i][i]);\n        for (var r = i + 1; r < n; r++) {\n            var absValue = Math.abs(mat[r][i]);\n            if (absValue > maxEl) {\n                maxEl = absValue;\n                maxRow = r;\n            }\n        }\n        if (maxEl === 0) {\n            return null; // matrix is singular\n        }\n        // Swap max row with i-th (current) row\n        var tmp = mat[maxRow];\n        mat[maxRow] = mat[i];\n        mat[i] = tmp;\n        // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n        for (var j = i + 1; j < n; j++) {\n            var coef = -mat[j][i] / mat[i][i];\n            for (var k = i; k < n + 1; k++) {\n                if (i == k) {\n                    mat[j][k] = 0;\n                }\n                else {\n                    mat[j][k] += coef * mat[i][k];\n                }\n            }\n        }\n    }\n    // Solve Ax=b for upper triangular matrix A (mat)\n    var x = new Array(n);\n    for (var l = n - 1; l >= 0; l--) {\n        x[l] = mat[l][n] / mat[l][l];\n        for (var m = l - 1; m >= 0; m--) {\n            mat[m][n] -= mat[m][l] * x[l];\n        }\n    }\n    return x;\n}\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n    return (angleInRadians * 180) / Math.PI;\n}\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n    return (angleInDegrees * Math.PI) / 180;\n}\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n    var r = a % b;\n    return r * b < 0 ? r + b : r;\n}\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n    return a + x * (b - a);\n}\n/**\n * Returns a number with a limited number of decimal digits.\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The input number with a limited number of decimal digits.\n */\nexport function toFixed(n, decimals) {\n    var factor = Math.pow(10, decimals);\n    return Math.round(n * factor) / factor;\n}\n/**\n * Rounds a number to the nearest integer value considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The nearest integer.\n */\nexport function round(n, decimals) {\n    return Math.round(toFixed(n, decimals));\n}\n/**\n * Rounds a number to the next smaller integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next smaller integer.\n */\nexport function floor(n, decimals) {\n    return Math.floor(toFixed(n, decimals));\n}\n/**\n * Rounds a number to the next bigger integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next bigger integer.\n */\nexport function ceil(n, decimals) {\n    return Math.ceil(toFixed(n, decimals));\n}\n//# sourceMappingURL=math.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport BaseObject from './Object.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport Event from './events/Event.js';\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    LENGTH: 'length',\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n */\nvar CollectionEvent = /** @class */ (function (_super) {\n    __extends(CollectionEvent, _super);\n    /**\n     * @param {import(\"./CollectionEventType.js\").default} type Type.\n     * @param {*} [opt_element] Element.\n     * @param {number} [opt_index] The index of the added or removed element.\n     */\n    function CollectionEvent(type, opt_element, opt_index) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The element that is added to or removed from the collection.\n         * @type {*}\n         * @api\n         */\n        _this.element = opt_element;\n        /**\n         * The index of the added or removed element.\n         * @type {number}\n         * @api\n         */\n        _this.index = opt_index;\n        return _this;\n    }\n    return CollectionEvent;\n}(Event));\nexport { CollectionEvent };\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:length', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").OnSignature<'add'|'remove', CollectionEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types|\n *     'change:length'|'add'|'remove',Return>} CollectionOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nvar Collection = /** @class */ (function (_super) {\n    __extends(Collection, _super);\n    /**\n     * @param {Array<T>} [opt_array] Array.\n     * @param {Options} [opt_options] Collection options.\n     */\n    function Collection(opt_array, opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {CollectionOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {CollectionOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {CollectionOnSignature<void>}\n         */\n        _this.un;\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.unique_ = !!options.unique;\n        /**\n         * @private\n         * @type {!Array<T>}\n         */\n        _this.array_ = opt_array ? opt_array : [];\n        if (_this.unique_) {\n            for (var i = 0, ii = _this.array_.length; i < ii; ++i) {\n                _this.assertUnique_(_this.array_[i], i);\n            }\n        }\n        _this.updateLength_();\n        return _this;\n    }\n    /**\n     * Remove all elements from the collection.\n     * @api\n     */\n    Collection.prototype.clear = function () {\n        while (this.getLength() > 0) {\n            this.pop();\n        }\n    };\n    /**\n     * Add elements to the collection.  This pushes each item in the provided array\n     * to the end of the collection.\n     * @param {!Array<T>} arr Array.\n     * @return {Collection<T>} This collection.\n     * @api\n     */\n    Collection.prototype.extend = function (arr) {\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            this.push(arr[i]);\n        }\n        return this;\n    };\n    /**\n     * Iterate over each element, calling the provided callback.\n     * @param {function(T, number, Array<T>): *} f The function to call\n     *     for every element. This function takes 3 arguments (the element, the\n     *     index and the array). The return value is ignored.\n     * @api\n     */\n    Collection.prototype.forEach = function (f) {\n        var array = this.array_;\n        for (var i = 0, ii = array.length; i < ii; ++i) {\n            f(array[i], i, array);\n        }\n    };\n    /**\n     * Get a reference to the underlying Array object. Warning: if the array\n     * is mutated, no events will be dispatched by the collection, and the\n     * collection's \"length\" property won't be in sync with the actual length\n     * of the array.\n     * @return {!Array<T>} Array.\n     * @api\n     */\n    Collection.prototype.getArray = function () {\n        return this.array_;\n    };\n    /**\n     * Get the element at the provided index.\n     * @param {number} index Index.\n     * @return {T} Element.\n     * @api\n     */\n    Collection.prototype.item = function (index) {\n        return this.array_[index];\n    };\n    /**\n     * Get the length of this collection.\n     * @return {number} The length of the array.\n     * @observable\n     * @api\n     */\n    Collection.prototype.getLength = function () {\n        return this.get(Property.LENGTH);\n    };\n    /**\n     * Insert an element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.insertAt = function (index, elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        this.array_.splice(index, 0, elem);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n    };\n    /**\n     * Remove the last element of the collection and return it.\n     * Return `undefined` if the collection is empty.\n     * @return {T|undefined} Element.\n     * @api\n     */\n    Collection.prototype.pop = function () {\n        return this.removeAt(this.getLength() - 1);\n    };\n    /**\n     * Insert the provided element at the end of the collection.\n     * @param {T} elem Element.\n     * @return {number} New length of the collection.\n     * @api\n     */\n    Collection.prototype.push = function (elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        var n = this.getLength();\n        this.insertAt(n, elem);\n        return this.getLength();\n    };\n    /**\n     * Remove the first occurrence of an element from the collection.\n     * @param {T} elem Element.\n     * @return {T|undefined} The removed element or undefined if none found.\n     * @api\n     */\n    Collection.prototype.remove = function (elem) {\n        var arr = this.array_;\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            if (arr[i] === elem) {\n                return this.removeAt(i);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Remove the element at the provided index and return it.\n     * Return `undefined` if the collection does not contain this index.\n     * @param {number} index Index.\n     * @return {T|undefined} Value.\n     * @api\n     */\n    Collection.prototype.removeAt = function (index) {\n        var prev = this.array_[index];\n        this.array_.splice(index, 1);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n        return prev;\n    };\n    /**\n     * Set the element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.setAt = function (index, elem) {\n        var n = this.getLength();\n        if (index < n) {\n            if (this.unique_) {\n                this.assertUnique_(elem, index);\n            }\n            var prev = this.array_[index];\n            this.array_[index] = elem;\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n        }\n        else {\n            for (var j = n; j < index; ++j) {\n                this.insertAt(j, undefined);\n            }\n            this.insertAt(index, elem);\n        }\n    };\n    /**\n     * @private\n     */\n    Collection.prototype.updateLength_ = function () {\n        this.set(Property.LENGTH, this.array_.length);\n    };\n    /**\n     * @private\n     * @param {T} elem Element.\n     * @param {number} [opt_except] Optional index to ignore.\n     */\n    Collection.prototype.assertUnique_ = function (elem, opt_except) {\n        for (var i = 0, ii = this.array_.length; i < ii; ++i) {\n            if (this.array_[i] === elem && i !== opt_except) {\n                throw new AssertionError(58);\n            }\n        }\n    };\n    return Collection;\n}(BaseObject));\nexport default Collection;\n//# sourceMappingURL=Collection.js.map","/**\n * @module ol/size\n */\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n/**\n * Returns a buffered size.\n * @param {Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {Size} [opt_size] Optional reusable size array.\n * @return {Size} The buffered size.\n */\nexport function buffer(size, num, opt_size) {\n    if (opt_size === undefined) {\n        opt_size = [0, 0];\n    }\n    opt_size[0] = size[0] + 2 * num;\n    opt_size[1] = size[1] + 2 * num;\n    return opt_size;\n}\n/**\n * Determines if a size has a positive area.\n * @param {Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n    return size[0] > 0 && size[1] > 0;\n}\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {Size} size Size.\n * @param {number} ratio Ratio.\n * @param {Size} [opt_size] Optional reusable size array.\n * @return {Size} The scaled size.\n */\nexport function scale(size, ratio, opt_size) {\n    if (opt_size === undefined) {\n        opt_size = [0, 0];\n    }\n    opt_size[0] = (size[0] * ratio + 0.5) | 0;\n    opt_size[1] = (size[1] * ratio + 0.5) | 0;\n    return opt_size;\n}\n/**\n * Returns an `Size` array for the passed in number (meaning: square) or\n * `Size` array.\n * (meaning: non-square),\n * @param {number|Size} size Width and height.\n * @param {Size} [opt_size] Optional reusable size array.\n * @return {Size} Size.\n * @api\n */\nexport function toSize(size, opt_size) {\n    if (Array.isArray(size)) {\n        return size;\n    }\n    else {\n        if (opt_size === undefined) {\n            opt_size = [size, size];\n        }\n        else {\n            opt_size[0] = size;\n            opt_size[1] = size;\n        }\n        return opt_size;\n    }\n}\n//# sourceMappingURL=size.js.map","/**\n * @module ol/ViewProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    CENTER: 'center',\n    RESOLUTION: 'resolution',\n    ROTATION: 'rotation',\n};\n//# sourceMappingURL=ViewProperty.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Interaction\n */\nimport BaseObject from '../Object.js';\nimport InteractionProperty from './Property.js';\nimport { easeOut, linear } from '../easing.js';\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active', Return>} InteractionOnSignature\n */\n/**\n * Object literal with config options for interactions.\n * @typedef {Object} InteractionOptions\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} handleEvent\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. If the function returns a falsy value, propagation of\n * the event to other interactions in the map's interactions chain will be\n * prevented (this includes functions with no explicit return). The interactions\n * are traversed in reverse order of the interactions collection of the map.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * User actions that change the state of the map. Some are similar to controls,\n * but are not associated with a DOM element.\n * For example, {@link module:ol/interaction/KeyboardZoom~KeyboardZoom} is\n * functionally the same as {@link module:ol/control/Zoom~Zoom}, but triggered\n * by a keyboard event not a button element event.\n * Although interactions do not have a DOM element, some of them do render\n * vectors and so are visible on the screen.\n * @api\n */\nvar Interaction = /** @class */ (function (_super) {\n    __extends(Interaction, _super);\n    /**\n     * @param {InteractionOptions} [opt_options] Options.\n     */\n    function Interaction(opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {InteractionOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {InteractionOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {InteractionOnSignature<void>}\n         */\n        _this.un;\n        if (opt_options && opt_options.handleEvent) {\n            _this.handleEvent = opt_options.handleEvent;\n        }\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default|null}\n         */\n        _this.map_ = null;\n        _this.setActive(true);\n        return _this;\n    }\n    /**\n     * Return whether the interaction is currently active.\n     * @return {boolean} `true` if the interaction is active, `false` otherwise.\n     * @observable\n     * @api\n     */\n    Interaction.prototype.getActive = function () {\n        return /** @type {boolean} */ (this.get(InteractionProperty.ACTIVE));\n    };\n    /**\n     * Get the map associated with this interaction.\n     * @return {import(\"../PluggableMap.js\").default|null} Map.\n     * @api\n     */\n    Interaction.prototype.getMap = function () {\n        return this.map_;\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event}.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @api\n     */\n    Interaction.prototype.handleEvent = function (mapBrowserEvent) {\n        return true;\n    };\n    /**\n     * Activate or deactivate the interaction.\n     * @param {boolean} active Active.\n     * @observable\n     * @api\n     */\n    Interaction.prototype.setActive = function (active) {\n        this.set(InteractionProperty.ACTIVE, active);\n    };\n    /**\n     * Remove the interaction from its current map and attach it to the new map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default|null} map Map.\n     */\n    Interaction.prototype.setMap = function (map) {\n        this.map_ = map;\n    };\n    return Interaction;\n}(BaseObject));\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {import(\"../coordinate.js\").Coordinate} delta Delta.\n * @param {number} [opt_duration] Duration.\n */\nexport function pan(view, delta, opt_duration) {\n    var currentCenter = view.getCenterInternal();\n    if (currentCenter) {\n        var center = [currentCenter[0] + delta[0], currentCenter[1] + delta[1]];\n        view.animateInternal({\n            duration: opt_duration !== undefined ? opt_duration : 250,\n            easing: linear,\n            center: view.getConstrainedCenter(center),\n        });\n    }\n}\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number} delta Delta from previous zoom level.\n * @param {import(\"../coordinate.js\").Coordinate} [opt_anchor] Anchor coordinate in the user projection.\n * @param {number} [opt_duration] Duration.\n */\nexport function zoomByDelta(view, delta, opt_anchor, opt_duration) {\n    var currentZoom = view.getZoom();\n    if (currentZoom === undefined) {\n        return;\n    }\n    var newZoom = view.getConstrainedZoom(currentZoom + delta);\n    var newResolution = view.getResolutionForZoom(newZoom);\n    if (view.getAnimating()) {\n        view.cancelAnimations();\n    }\n    view.animate({\n        resolution: newResolution,\n        anchor: opt_anchor,\n        duration: opt_duration !== undefined ? opt_duration : 250,\n        easing: easeOut,\n    });\n}\nexport default Interaction;\n//# sourceMappingURL=Interaction.js.map","/**\n * @module ol/pointer/EventType\n */\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n    POINTERMOVE: 'pointermove',\n    POINTERDOWN: 'pointerdown',\n    POINTERUP: 'pointerup',\n    POINTEROVER: 'pointerover',\n    POINTEROUT: 'pointerout',\n    POINTERENTER: 'pointerenter',\n    POINTERLEAVE: 'pointerleave',\n    POINTERCANCEL: 'pointercancel',\n};\n//# sourceMappingURL=EventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/AssertionError\n */\nimport { VERSION } from './util.js';\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nvar AssertionError = /** @class */ (function (_super) {\n    __extends(AssertionError, _super);\n    /**\n     * @param {number} code Error code.\n     */\n    function AssertionError(code) {\n        var _this = this;\n        var path = VERSION === 'latest' ? VERSION : 'v' + VERSION.split('-')[0];\n        var message = 'Assertion failed. See https://openlayers.org/en/' +\n            path +\n            '/doc/errors/#' +\n            code +\n            ' for details.';\n        _this = _super.call(this, message) || this;\n        /**\n         * Error code. The meaning of the code can be found on\n         * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n         * the version found in the OpenLayers script's header comment if a version\n         * other than the latest is used).\n         * @type {number}\n         * @api\n         */\n        _this.code = code;\n        /**\n         * @type {string}\n         */\n        _this.name = 'AssertionError';\n        // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n        _this.message = message;\n        return _this;\n    }\n    return AssertionError;\n}(Error));\nexport default AssertionError;\n//# sourceMappingURL=AssertionError.js.map","/**\n * @module ol/geom/flat/deflate\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinate(flatCoordinates, offset, coordinate, stride) {\n    for (var i = 0, ii = coordinate.length; i < ii; ++i) {\n        flatCoordinates[offset++] = coordinate[i];\n    }\n    return offset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinates(flatCoordinates, offset, coordinates, stride) {\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        var coordinate = coordinates[i];\n        for (var j = 0; j < stride; ++j) {\n            flatCoordinates[offset++] = coordinate[j];\n        }\n    }\n    return offset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>} coordinatess Coordinatess.\n * @param {number} stride Stride.\n * @param {Array<number>} [opt_ends] Ends.\n * @return {Array<number>} Ends.\n */\nexport function deflateCoordinatesArray(flatCoordinates, offset, coordinatess, stride, opt_ends) {\n    var ends = opt_ends ? opt_ends : [];\n    var i = 0;\n    for (var j = 0, jj = coordinatess.length; j < jj; ++j) {\n        var end = deflateCoordinates(flatCoordinates, offset, coordinatess[j], stride);\n        ends[i++] = end;\n        offset = end;\n    }\n    ends.length = i;\n    return ends;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} coordinatesss Coordinatesss.\n * @param {number} stride Stride.\n * @param {Array<Array<number>>} [opt_endss] Endss.\n * @return {Array<Array<number>>} Endss.\n */\nexport function deflateMultiCoordinatesArray(flatCoordinates, offset, coordinatesss, stride, opt_endss) {\n    var endss = opt_endss ? opt_endss : [];\n    var i = 0;\n    for (var j = 0, jj = coordinatesss.length; j < jj; ++j) {\n        var ends = deflateCoordinatesArray(flatCoordinates, offset, coordinatesss[j], stride, endss[i]);\n        endss[i++] = ends;\n        offset = ends[ends.length - 1];\n    }\n    endss.length = i;\n    return endss;\n}\n//# sourceMappingURL=deflate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/SimpleGeometry\n */\nimport Geometry from './Geometry.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport { abstract } from '../util.js';\nimport { createOrUpdateFromFlatCoordinates, getCenter } from '../extent.js';\nimport { rotate, scale, transform2D, translate } from './flat/transform.js';\n/**\n * @classdesc\n * Abstract base class; only used for creating subclasses; do not instantiate\n * in apps, as cannot be rendered.\n *\n * @abstract\n * @api\n */\nvar SimpleGeometry = /** @class */ (function (_super) {\n    __extends(SimpleGeometry, _super);\n    function SimpleGeometry() {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {import(\"./GeometryLayout.js\").default}\n         */\n        _this.layout = GeometryLayout.XY;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.stride = 2;\n        /**\n         * @protected\n         * @type {Array<number>}\n         */\n        _this.flatCoordinates = null;\n        return _this;\n    }\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @protected\n     * @return {import(\"../extent.js\").Extent} extent Extent.\n     */\n    SimpleGeometry.prototype.computeExtent = function (extent) {\n        return createOrUpdateFromFlatCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, extent);\n    };\n    /**\n     * @abstract\n     * @return {Array<*> | null} Coordinates.\n     */\n    SimpleGeometry.prototype.getCoordinates = function () {\n        return abstract();\n    };\n    /**\n     * Return the first coordinate of the geometry.\n     * @return {import(\"../coordinate.js\").Coordinate} First coordinate.\n     * @api\n     */\n    SimpleGeometry.prototype.getFirstCoordinate = function () {\n        return this.flatCoordinates.slice(0, this.stride);\n    };\n    /**\n     * @return {Array<number>} Flat coordinates.\n     */\n    SimpleGeometry.prototype.getFlatCoordinates = function () {\n        return this.flatCoordinates;\n    };\n    /**\n     * Return the last coordinate of the geometry.\n     * @return {import(\"../coordinate.js\").Coordinate} Last point.\n     * @api\n     */\n    SimpleGeometry.prototype.getLastCoordinate = function () {\n        return this.flatCoordinates.slice(this.flatCoordinates.length - this.stride);\n    };\n    /**\n     * Return the {@link module:ol/geom/GeometryLayout layout} of the geometry.\n     * @return {import(\"./GeometryLayout.js\").default} Layout.\n     * @api\n     */\n    SimpleGeometry.prototype.getLayout = function () {\n        return this.layout;\n    };\n    /**\n     * Create a simplified version of this geometry using the Douglas Peucker algorithm.\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {SimpleGeometry} Simplified geometry.\n     */\n    SimpleGeometry.prototype.getSimplifiedGeometry = function (squaredTolerance) {\n        if (this.simplifiedGeometryRevision !== this.getRevision()) {\n            this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n            this.simplifiedGeometryRevision = this.getRevision();\n        }\n        // If squaredTolerance is negative or if we know that simplification will not\n        // have any effect then just return this.\n        if (squaredTolerance < 0 ||\n            (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n                squaredTolerance <= this.simplifiedGeometryMaxMinSquaredTolerance)) {\n            return this;\n        }\n        var simplifiedGeometry = this.getSimplifiedGeometryInternal(squaredTolerance);\n        var simplifiedFlatCoordinates = simplifiedGeometry.getFlatCoordinates();\n        if (simplifiedFlatCoordinates.length < this.flatCoordinates.length) {\n            return simplifiedGeometry;\n        }\n        else {\n            // Simplification did not actually remove any coordinates.  We now know\n            // that any calls to getSimplifiedGeometry with a squaredTolerance less\n            // than or equal to the current squaredTolerance will also not have any\n            // effect.  This allows us to short circuit simplification (saving CPU\n            // cycles) and prevents the cache of simplified geometries from filling\n            // up with useless identical copies of this geometry (saving memory).\n            this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n            return this;\n        }\n    };\n    /**\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {SimpleGeometry} Simplified geometry.\n     * @protected\n     */\n    SimpleGeometry.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        return this;\n    };\n    /**\n     * @return {number} Stride.\n     */\n    SimpleGeometry.prototype.getStride = function () {\n        return this.stride;\n    };\n    /**\n     * @param {import(\"./GeometryLayout.js\").default} layout Layout.\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     */\n    SimpleGeometry.prototype.setFlatCoordinates = function (layout, flatCoordinates) {\n        this.stride = getStrideForLayout(layout);\n        this.layout = layout;\n        this.flatCoordinates = flatCoordinates;\n    };\n    /**\n     * @abstract\n     * @param {!Array<*>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     */\n    SimpleGeometry.prototype.setCoordinates = function (coordinates, opt_layout) {\n        abstract();\n    };\n    /**\n     * @param {import(\"./GeometryLayout.js\").default|undefined} layout Layout.\n     * @param {Array<*>} coordinates Coordinates.\n     * @param {number} nesting Nesting.\n     * @protected\n     */\n    SimpleGeometry.prototype.setLayout = function (layout, coordinates, nesting) {\n        /** @type {number} */\n        var stride;\n        if (layout) {\n            stride = getStrideForLayout(layout);\n        }\n        else {\n            for (var i = 0; i < nesting; ++i) {\n                if (coordinates.length === 0) {\n                    this.layout = GeometryLayout.XY;\n                    this.stride = 2;\n                    return;\n                }\n                else {\n                    coordinates = /** @type {Array} */ (coordinates[0]);\n                }\n            }\n            stride = coordinates.length;\n            layout = getLayoutForStride(stride);\n        }\n        this.layout = layout;\n        this.stride = stride;\n    };\n    /**\n     * Apply a transform function to the coordinates of the geometry.\n     * The geometry is modified in place.\n     * If you do not want the geometry modified in place, first `clone()` it and\n     * then use this function on the clone.\n     * @param {import(\"../proj.js\").TransformFunction} transformFn Transform function.\n     * Called with a flat array of geometry coordinates.\n     * @api\n     */\n    SimpleGeometry.prototype.applyTransform = function (transformFn) {\n        if (this.flatCoordinates) {\n            transformFn(this.flatCoordinates, this.flatCoordinates, this.stride);\n            this.changed();\n        }\n    };\n    /**\n     * Rotate the geometry around a given coordinate. This modifies the geometry\n     * coordinates in place.\n     * @param {number} angle Rotation angle in counter-clockwise radians.\n     * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n     * @api\n     */\n    SimpleGeometry.prototype.rotate = function (angle, anchor) {\n        var flatCoordinates = this.getFlatCoordinates();\n        if (flatCoordinates) {\n            var stride = this.getStride();\n            rotate(flatCoordinates, 0, flatCoordinates.length, stride, angle, anchor, flatCoordinates);\n            this.changed();\n        }\n    };\n    /**\n     * Scale the geometry (with an optional origin).  This modifies the geometry\n     * coordinates in place.\n     * @param {number} sx The scaling factor in the x-direction.\n     * @param {number} [opt_sy] The scaling factor in the y-direction (defaults to sx).\n     * @param {import(\"../coordinate.js\").Coordinate} [opt_anchor] The scale origin (defaults to the center\n     *     of the geometry extent).\n     * @api\n     */\n    SimpleGeometry.prototype.scale = function (sx, opt_sy, opt_anchor) {\n        var sy = opt_sy;\n        if (sy === undefined) {\n            sy = sx;\n        }\n        var anchor = opt_anchor;\n        if (!anchor) {\n            anchor = getCenter(this.getExtent());\n        }\n        var flatCoordinates = this.getFlatCoordinates();\n        if (flatCoordinates) {\n            var stride = this.getStride();\n            scale(flatCoordinates, 0, flatCoordinates.length, stride, sx, sy, anchor, flatCoordinates);\n            this.changed();\n        }\n    };\n    /**\n     * Translate the geometry.  This modifies the geometry coordinates in place.  If\n     * instead you want a new geometry, first `clone()` this geometry.\n     * @param {number} deltaX Delta X.\n     * @param {number} deltaY Delta Y.\n     * @api\n     */\n    SimpleGeometry.prototype.translate = function (deltaX, deltaY) {\n        var flatCoordinates = this.getFlatCoordinates();\n        if (flatCoordinates) {\n            var stride = this.getStride();\n            translate(flatCoordinates, 0, flatCoordinates.length, stride, deltaX, deltaY, flatCoordinates);\n            this.changed();\n        }\n    };\n    return SimpleGeometry;\n}(Geometry));\n/**\n * @param {number} stride Stride.\n * @return {import(\"./GeometryLayout.js\").default} layout Layout.\n */\nfunction getLayoutForStride(stride) {\n    var layout;\n    if (stride == 2) {\n        layout = GeometryLayout.XY;\n    }\n    else if (stride == 3) {\n        layout = GeometryLayout.XYZ;\n    }\n    else if (stride == 4) {\n        layout = GeometryLayout.XYZM;\n    }\n    return /** @type {import(\"./GeometryLayout.js\").default} */ (layout);\n}\n/**\n * @param {import(\"./GeometryLayout.js\").default} layout Layout.\n * @return {number} Stride.\n */\nexport function getStrideForLayout(layout) {\n    var stride;\n    if (layout == GeometryLayout.XY) {\n        stride = 2;\n    }\n    else if (layout == GeometryLayout.XYZ || layout == GeometryLayout.XYM) {\n        stride = 3;\n    }\n    else if (layout == GeometryLayout.XYZM) {\n        stride = 4;\n    }\n    return /** @type {number} */ (stride);\n}\n/**\n * @param {SimpleGeometry} simpleGeometry Simple geometry.\n * @param {import(\"../transform.js\").Transform} transform Transform.\n * @param {Array<number>} [opt_dest] Destination.\n * @return {Array<number>} Transformed flat coordinates.\n */\nexport function transformGeom2D(simpleGeometry, transform, opt_dest) {\n    var flatCoordinates = simpleGeometry.getFlatCoordinates();\n    if (!flatCoordinates) {\n        return null;\n    }\n    else {\n        var stride = simpleGeometry.getStride();\n        return transform2D(flatCoordinates, 0, flatCoordinates.length, stride, transform, opt_dest);\n    }\n}\nexport default SimpleGeometry;\n//# sourceMappingURL=SimpleGeometry.js.map","/**\n * @module ol/functions\n */\nimport { equals as arrayEquals } from './array.js';\n/**\n * Always returns true.\n * @return {boolean} true.\n */\nexport function TRUE() {\n    return true;\n}\n/**\n * Always returns false.\n * @return {boolean} false.\n */\nexport function FALSE() {\n    return false;\n}\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() { }\n/**\n * Wrap a function in another function that remembers the last return.  If the\n * returned function is called twice in a row with the same arguments and the same\n * this object, it will return the value from the first call in the second call.\n *\n * @param {function(...any): ReturnType} fn The function to memoize.\n * @return {function(...any): ReturnType} The memoized function.\n * @template ReturnType\n */\nexport function memoizeOne(fn) {\n    var called = false;\n    /** @type {ReturnType} */\n    var lastResult;\n    /** @type {Array<any>} */\n    var lastArgs;\n    var lastThis;\n    return function () {\n        var nextArgs = Array.prototype.slice.call(arguments);\n        if (!called || this !== lastThis || !arrayEquals(nextArgs, lastArgs)) {\n            called = true;\n            lastThis = this;\n            lastArgs = nextArgs;\n            lastResult = fn.apply(this, arguments);\n        }\n        return lastResult;\n    };\n}\n/**\n * @template T\n * @param {function(): (T | Promise<T>)} getter A function that returns a value or a promise for a value.\n * @return {Promise<T>} A promise for the value.\n */\nexport function toPromise(getter) {\n    function promiseGetter() {\n        var value;\n        try {\n            value = getter();\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n        if (value instanceof Promise) {\n            return value;\n        }\n        return Promise.resolve(value);\n    }\n    return promiseGetter();\n}\n//# sourceMappingURL=functions.js.map","/**\n * @module ol/geom/flat/area\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRing(flatCoordinates, offset, end, stride) {\n    var twiceArea = 0;\n    var x1 = flatCoordinates[end - stride];\n    var y1 = flatCoordinates[end - stride + 1];\n    for (; offset < end; offset += stride) {\n        var x2 = flatCoordinates[offset];\n        var y2 = flatCoordinates[offset + 1];\n        twiceArea += y1 * x2 - x1 * y2;\n        x1 = x2;\n        y1 = y2;\n    }\n    return twiceArea / 2;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRings(flatCoordinates, offset, ends, stride) {\n    var area = 0;\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        area += linearRing(flatCoordinates, offset, end, stride);\n        offset = end;\n    }\n    return area;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n    var area = 0;\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        area += linearRings(flatCoordinates, offset, ends, stride);\n        offset = ends[ends.length - 1];\n    }\n    return area;\n}\n//# sourceMappingURL=area.js.map","/**\n * @module ol/events/Event\n */\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nvar BaseEvent = /** @class */ (function () {\n    /**\n     * @param {string} type Type.\n     */\n    function BaseEvent(type) {\n        /**\n         * @type {boolean}\n         */\n        this.propagationStopped;\n        /**\n         * @type {boolean}\n         */\n        this.defaultPrevented;\n        /**\n         * The event type.\n         * @type {string}\n         * @api\n         */\n        this.type = type;\n        /**\n         * The event target.\n         * @type {Object}\n         * @api\n         */\n        this.target = null;\n    }\n    /**\n     * Prevent default. This means that no emulated `click`, `singleclick` or `doubleclick` events\n     * will be fired.\n     * @api\n     */\n    BaseEvent.prototype.preventDefault = function () {\n        this.defaultPrevented = true;\n    };\n    /**\n     * Stop event propagation.\n     * @api\n     */\n    BaseEvent.prototype.stopPropagation = function () {\n        this.propagationStopped = true;\n    };\n    return BaseEvent;\n}());\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n    evt.stopPropagation();\n}\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n    evt.preventDefault();\n}\nexport default BaseEvent;\n//# sourceMappingURL=Event.js.map","/**\n * @module ol/proj/transforms\n */\nimport { isEmpty } from '../obj.js';\n/**\n * @private\n * @type {!Object<string, Object<string, import(\"../proj.js\").TransformFunction>>}\n */\nvar transforms = {};\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n    transforms = {};\n}\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {import(\"./Projection.js\").default} source Source.\n * @param {import(\"./Projection.js\").default} destination Destination.\n * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n    var sourceCode = source.getCode();\n    var destinationCode = destination.getCode();\n    if (!(sourceCode in transforms)) {\n        transforms[sourceCode] = {};\n    }\n    transforms[sourceCode][destinationCode] = transformFn;\n}\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {import(\"./Projection.js\").default} source Source projection.\n * @param {import(\"./Projection.js\").default} destination Destination projection.\n * @return {import(\"../proj.js\").TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n    var sourceCode = source.getCode();\n    var destinationCode = destination.getCode();\n    var transform = transforms[sourceCode][destinationCode];\n    delete transforms[sourceCode][destinationCode];\n    if (isEmpty(transforms[sourceCode])) {\n        delete transforms[sourceCode];\n    }\n    return transform;\n}\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {import(\"../proj.js\").TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n    var transform;\n    if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n        transform = transforms[sourceCode][destinationCode];\n    }\n    return transform;\n}\n//# sourceMappingURL=transforms.js.map","/**\n * @module ol/style/IconImageCache\n */\nimport { asString } from '../color.js';\n/**\n * @classdesc\n * Singleton class. Available through {@link module:ol/style/IconImageCache.shared}.\n */\nvar IconImageCache = /** @class */ (function () {\n    function IconImageCache() {\n        /**\n         * @type {!Object<string, import(\"./IconImage.js\").default>}\n         * @private\n         */\n        this.cache_ = {};\n        /**\n         * @type {number}\n         * @private\n         */\n        this.cacheSize_ = 0;\n        /**\n         * @type {number}\n         * @private\n         */\n        this.maxCacheSize_ = 32;\n    }\n    /**\n     * FIXME empty description for jsdoc\n     */\n    IconImageCache.prototype.clear = function () {\n        this.cache_ = {};\n        this.cacheSize_ = 0;\n    };\n    /**\n     * @return {boolean} Can expire cache.\n     */\n    IconImageCache.prototype.canExpireCache = function () {\n        return this.cacheSize_ > this.maxCacheSize_;\n    };\n    /**\n     * FIXME empty description for jsdoc\n     */\n    IconImageCache.prototype.expire = function () {\n        if (this.canExpireCache()) {\n            var i = 0;\n            for (var key in this.cache_) {\n                var iconImage = this.cache_[key];\n                if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n                    delete this.cache_[key];\n                    --this.cacheSize_;\n                }\n            }\n        }\n    };\n    /**\n     * @param {string} src Src.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"../color.js\").Color} color Color.\n     * @return {import(\"./IconImage.js\").default} Icon image.\n     */\n    IconImageCache.prototype.get = function (src, crossOrigin, color) {\n        var key = getKey(src, crossOrigin, color);\n        return key in this.cache_ ? this.cache_[key] : null;\n    };\n    /**\n     * @param {string} src Src.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"../color.js\").Color} color Color.\n     * @param {import(\"./IconImage.js\").default} iconImage Icon image.\n     */\n    IconImageCache.prototype.set = function (src, crossOrigin, color, iconImage) {\n        var key = getKey(src, crossOrigin, color);\n        this.cache_[key] = iconImage;\n        ++this.cacheSize_;\n    };\n    /**\n     * Set the cache size of the icon cache. Default is `32`. Change this value when\n     * your map uses more than 32 different icon images and you are not caching icon\n     * styles on the application level.\n     * @param {number} maxCacheSize Cache max size.\n     * @api\n     */\n    IconImageCache.prototype.setSize = function (maxCacheSize) {\n        this.maxCacheSize_ = maxCacheSize;\n        this.expire();\n    };\n    return IconImageCache;\n}());\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {string} Cache key.\n */\nfunction getKey(src, crossOrigin, color) {\n    var colorString = color ? asString(color) : 'null';\n    return crossOrigin + ':' + src + ':' + colorString;\n}\nexport default IconImageCache;\n/**\n * The {@link module:ol/style/IconImageCache~IconImageCache} for\n * {@link module:ol/style/Icon~Icon} images.\n * @api\n */\nexport var shared = new IconImageCache();\n//# sourceMappingURL=IconImageCache.js.map","/**\n * @module ol/coordinate\n */\nimport { getWidth } from './extent.js';\nimport { modulo } from './math.js';\nimport { padNumber } from './string.js';\n/**\n * An array of numbers representing an xy coordinate. Example: `[16, 48]`.\n * @typedef {Array<number>} Coordinate\n * @api\n */\n/**\n * A function that takes a {@link module:ol/coordinate~Coordinate} and\n * transforms it into a `{string}`.\n *\n * @typedef {function((Coordinate|undefined)): string} CoordinateFormat\n * @api\n */\n/**\n * Add `delta` to `coordinate`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {add} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     add(coord, [-2, 4]);\n *     // coord is now [5.85, 51.983333]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {Coordinate} delta Delta.\n * @return {Coordinate} The input coordinate adjusted by\n * the given delta.\n * @api\n */\nexport function add(coordinate, delta) {\n    coordinate[0] += +delta[0];\n    coordinate[1] += +delta[1];\n    return coordinate;\n}\n/**\n * Calculates the point closest to the passed coordinate on the passed circle.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {import(\"./geom/Circle.js\").default} circle The circle.\n * @return {Coordinate} Closest point on the circumference.\n */\nexport function closestOnCircle(coordinate, circle) {\n    var r = circle.getRadius();\n    var center = circle.getCenter();\n    var x0 = center[0];\n    var y0 = center[1];\n    var x1 = coordinate[0];\n    var y1 = coordinate[1];\n    var dx = x1 - x0;\n    var dy = y1 - y0;\n    if (dx === 0 && dy === 0) {\n        dx = 1;\n    }\n    var d = Math.sqrt(dx * dx + dy * dy);\n    var x = x0 + (r * dx) / d;\n    var y = y0 + (r * dy) / d;\n    return [x, y];\n}\n/**\n * Calculates the point closest to the passed coordinate on the passed segment.\n * This is the foot of the perpendicular of the coordinate to the segment when\n * the foot is on the segment, or the closest segment coordinate when the foot\n * is outside the segment.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {Array<Coordinate>} segment The two coordinates\n * of the segment.\n * @return {Coordinate} The foot of the perpendicular of\n * the coordinate to the segment.\n */\nexport function closestOnSegment(coordinate, segment) {\n    var x0 = coordinate[0];\n    var y0 = coordinate[1];\n    var start = segment[0];\n    var end = segment[1];\n    var x1 = start[0];\n    var y1 = start[1];\n    var x2 = end[0];\n    var y2 = end[1];\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var along = dx === 0 && dy === 0\n        ? 0\n        : (dx * (x0 - x1) + dy * (y0 - y1)) / (dx * dx + dy * dy || 0);\n    var x, y;\n    if (along <= 0) {\n        x = x1;\n        y = y1;\n    }\n    else if (along >= 1) {\n        x = x2;\n        y = y2;\n    }\n    else {\n        x = x1 + along * dx;\n        y = y1 + along * dy;\n    }\n    return [x, y];\n}\n/**\n * Returns a {@link module:ol/coordinate~CoordinateFormat} function that can be\n * used to format\n * a {Coordinate} to a string.\n *\n * Example without specifying the fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY();\n *     var out = stringifyFunc(coord);\n *     // out is now '8, 48'\n *\n * Example with explicitly specifying 2 fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY(2);\n *     var out = stringifyFunc(coord);\n *     // out is now '7.85, 47.98'\n *\n * @param {number} [opt_fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {CoordinateFormat} Coordinate format.\n * @api\n */\nexport function createStringXY(opt_fractionDigits) {\n    return (\n    /**\n     * @param {Coordinate} coordinate Coordinate.\n     * @return {string} String XY.\n     */\n    function (coordinate) {\n        return toStringXY(coordinate, opt_fractionDigits);\n    });\n}\n/**\n * @param {string} hemispheres Hemispheres.\n * @param {number} degrees Degrees.\n * @param {number} [opt_fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} String.\n */\nexport function degreesToStringHDMS(hemispheres, degrees, opt_fractionDigits) {\n    var normalizedDegrees = modulo(degrees + 180, 360) - 180;\n    var x = Math.abs(3600 * normalizedDegrees);\n    var dflPrecision = opt_fractionDigits || 0;\n    var precision = Math.pow(10, dflPrecision);\n    var deg = Math.floor(x / 3600);\n    var min = Math.floor((x - deg * 3600) / 60);\n    var sec = x - deg * 3600 - min * 60;\n    sec = Math.ceil(sec * precision) / precision;\n    if (sec >= 60) {\n        sec = 0;\n        min += 1;\n    }\n    if (min >= 60) {\n        min = 0;\n        deg += 1;\n    }\n    return (deg +\n        '\\u00b0 ' +\n        padNumber(min, 2) +\n        '\\u2032 ' +\n        padNumber(sec, 2, dflPrecision) +\n        '\\u2033' +\n        (normalizedDegrees == 0\n            ? ''\n            : ' ' + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0)));\n}\n/**\n * Transforms the given {@link module:ol/coordinate~Coordinate} to a string\n * using the given string template. The strings `{x}` and `{y}` in the template\n * will be replaced with the first and second coordinate values respectively.\n *\n * Example without specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template);\n *     // out is now 'Coordinate is (8|48).'\n *\n * Example explicitly specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template, 2);\n *     // out is now 'Coordinate is (7.85|47.98).'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {string} template A template string with `{x}` and `{y}` placeholders\n *     that will be replaced by first and second coordinate values.\n * @param {number} [opt_fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Formatted coordinate.\n * @api\n */\nexport function format(coordinate, template, opt_fractionDigits) {\n    if (coordinate) {\n        return template\n            .replace('{x}', coordinate[0].toFixed(opt_fractionDigits))\n            .replace('{y}', coordinate[1].toFixed(opt_fractionDigits));\n    }\n    else {\n        return '';\n    }\n}\n/**\n * @param {Coordinate} coordinate1 First coordinate.\n * @param {Coordinate} coordinate2 Second coordinate.\n * @return {boolean} The two coordinates are equal.\n */\nexport function equals(coordinate1, coordinate2) {\n    var equals = true;\n    for (var i = coordinate1.length - 1; i >= 0; --i) {\n        if (coordinate1[i] != coordinate2[i]) {\n            equals = false;\n            break;\n        }\n    }\n    return equals;\n}\n/**\n * Rotate `coordinate` by `angle`. `coordinate` is modified in place and\n * returned by the function.\n *\n * Example:\n *\n *     import {rotate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var rotateRadians = Math.PI / 2; // 90 degrees\n *     rotate(coord, rotateRadians);\n *     // coord is now [-47.983333, 7.85]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} angle Angle in radian.\n * @return {Coordinate} Coordinate.\n * @api\n */\nexport function rotate(coordinate, angle) {\n    var cosAngle = Math.cos(angle);\n    var sinAngle = Math.sin(angle);\n    var x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n    var y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n    coordinate[0] = x;\n    coordinate[1] = y;\n    return coordinate;\n}\n/**\n * Scale `coordinate` by `scale`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {scale as scaleCoordinate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var scale = 1.2;\n *     scaleCoordinate(coord, scale);\n *     // coord is now [9.42, 57.5799996]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} scale Scale factor.\n * @return {Coordinate} Coordinate.\n */\nexport function scale(coordinate, scale) {\n    coordinate[0] *= scale;\n    coordinate[1] *= scale;\n    return coordinate;\n}\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Squared distance between coord1 and coord2.\n */\nexport function squaredDistance(coord1, coord2) {\n    var dx = coord1[0] - coord2[0];\n    var dy = coord1[1] - coord2[1];\n    return dx * dx + dy * dy;\n}\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Distance between coord1 and coord2.\n */\nexport function distance(coord1, coord2) {\n    return Math.sqrt(squaredDistance(coord1, coord2));\n}\n/**\n * Calculate the squared distance from a coordinate to a line segment.\n *\n * @param {Coordinate} coordinate Coordinate of the point.\n * @param {Array<Coordinate>} segment Line segment (2\n * coordinates).\n * @return {number} Squared distance from the point to the line segment.\n */\nexport function squaredDistanceToSegment(coordinate, segment) {\n    return squaredDistance(coordinate, closestOnSegment(coordinate, segment));\n}\n/**\n * Format a geographic coordinate with the hemisphere, degrees, minutes, and\n * seconds.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord);\n *     // out is now '47 58 60 N 7 50 60 E'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord, 1);\n *     // out is now '47 58 60.0 N 7 50 60.0 E'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} [opt_fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Hemisphere, degrees, minutes and seconds.\n * @api\n */\nexport function toStringHDMS(coordinate, opt_fractionDigits) {\n    if (coordinate) {\n        return (degreesToStringHDMS('NS', coordinate[1], opt_fractionDigits) +\n            ' ' +\n            degreesToStringHDMS('EW', coordinate[0], opt_fractionDigits));\n    }\n    else {\n        return '';\n    }\n}\n/**\n * Format a coordinate as a comma delimited string.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord);\n *     // out is now '8, 48'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord, 1);\n *     // out is now '7.8, 48.0'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} [opt_fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} XY.\n * @api\n */\nexport function toStringXY(coordinate, opt_fractionDigits) {\n    return format(coordinate, '{x}, {y}', opt_fractionDigits);\n}\n/**\n * Modifies the provided coordinate in-place to be within the real world\n * extent. The lower projection extent boundary is inclusive, the upper one\n * exclusive.\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {Coordinate} The coordinate within the real world extent.\n */\nexport function wrapX(coordinate, projection) {\n    if (projection.canWrapX()) {\n        var worldWidth = getWidth(projection.getExtent());\n        var worldsAway = getWorldsAway(coordinate, projection, worldWidth);\n        if (worldsAway) {\n            coordinate[0] -= worldsAway * worldWidth;\n        }\n    }\n    return coordinate;\n}\n/**\n * @param {Coordinate} coordinate Coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @param {number} [opt_sourceExtentWidth] Width of the source extent.\n * @return {number} Offset in world widths.\n */\nexport function getWorldsAway(coordinate, projection, opt_sourceExtentWidth) {\n    var projectionExtent = projection.getExtent();\n    var worldsAway = 0;\n    if (projection.canWrapX() &&\n        (coordinate[0] < projectionExtent[0] || coordinate[0] > projectionExtent[2])) {\n        var sourceExtentWidth = opt_sourceExtentWidth || getWidth(projectionExtent);\n        worldsAway = Math.floor((coordinate[0] - projectionExtent[0]) / sourceExtentWidth);\n    }\n    return worldsAway;\n}\n//# sourceMappingURL=coordinate.js.map","/**\n * @module ol/proj/Projection\n */\nimport { METERS_PER_UNIT } from './Units.js';\n/**\n * @typedef {Object} Options\n * @property {string} code The SRS identifier code, e.g. `EPSG:4326`.\n * @property {import(\"./Units.js\").default|string} [units] Units. Required unless a\n * proj4 projection is defined for `code`.\n * @property {import(\"../extent.js\").Extent} [extent] The validity extent for the SRS.\n * @property {string} [axisOrientation='enu'] The axis orientation as specified in Proj4.\n * @property {boolean} [global=false] Whether the projection is valid for the whole globe.\n * @property {number} [metersPerUnit] The meters per unit for the SRS.\n * If not provided, the `units` are used to get the meters per unit from the {@link module:ol/proj/Units~METERS_PER_UNIT}\n * lookup table.\n * @property {import(\"../extent.js\").Extent} [worldExtent] The world extent for the SRS.\n * @property {function(number, import(\"../coordinate.js\").Coordinate):number} [getPointResolution]\n * Function to determine resolution at a point. The function is called with a\n * `number` view resolution and a {@link module:ol/coordinate~Coordinate Coordinate} as arguments, and returns\n * the `number` resolution in projection units at the passed coordinate. If this is `undefined`,\n * the default {@link module:ol/proj.getPointResolution getPointResolution()} function will be used.\n */\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link module:ol/proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link module:ol/proj~ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link module:ol/proj.get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use [proj4js](https://github.com/proj4js/proj4js), aliases can\n * be added using `proj4.defs()`. After all required projection definitions are\n * added, call the {@link module:ol/proj/proj4.register} function.\n *\n * @api\n */\nvar Projection = /** @class */ (function () {\n    /**\n     * @param {Options} options Projection options.\n     */\n    function Projection(options) {\n        /**\n         * @private\n         * @type {string}\n         */\n        this.code_ = options.code;\n        /**\n         * Units of projected coordinates. When set to `TILE_PIXELS`, a\n         * `this.extent_` and `this.worldExtent_` must be configured properly for each\n         * tile.\n         * @private\n         * @type {import(\"./Units.js\").default}\n         */\n        this.units_ = /** @type {import(\"./Units.js\").default} */ (options.units);\n        /**\n         * Validity extent of the projection in projected coordinates. For projections\n         * with `TILE_PIXELS` units, this is the extent of the tile in\n         * tile pixel space.\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        this.extent_ = options.extent !== undefined ? options.extent : null;\n        /**\n         * Extent of the world in EPSG:4326. For projections with\n         * `TILE_PIXELS` units, this is the extent of the tile in\n         * projected coordinate space.\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        this.worldExtent_ =\n            options.worldExtent !== undefined ? options.worldExtent : null;\n        /**\n         * @private\n         * @type {string}\n         */\n        this.axisOrientation_ =\n            options.axisOrientation !== undefined ? options.axisOrientation : 'enu';\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.global_ = options.global !== undefined ? options.global : false;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.canWrapX_ = !!(this.global_ && this.extent_);\n        /**\n         * @private\n         * @type {function(number, import(\"../coordinate.js\").Coordinate):number|undefined}\n         */\n        this.getPointResolutionFunc_ = options.getPointResolution;\n        /**\n         * @private\n         * @type {import(\"../tilegrid/TileGrid.js\").default}\n         */\n        this.defaultTileGrid_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.metersPerUnit_ = options.metersPerUnit;\n    }\n    /**\n     * @return {boolean} The projection is suitable for wrapping the x-axis\n     */\n    Projection.prototype.canWrapX = function () {\n        return this.canWrapX_;\n    };\n    /**\n     * Get the code for this projection, e.g. 'EPSG:4326'.\n     * @return {string} Code.\n     * @api\n     */\n    Projection.prototype.getCode = function () {\n        return this.code_;\n    };\n    /**\n     * Get the validity extent for this projection.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    Projection.prototype.getExtent = function () {\n        return this.extent_;\n    };\n    /**\n     * Get the units of this projection.\n     * @return {import(\"./Units.js\").default} Units.\n     * @api\n     */\n    Projection.prototype.getUnits = function () {\n        return this.units_;\n    };\n    /**\n     * Get the amount of meters per unit of this projection.  If the projection is\n     * not configured with `metersPerUnit` or a units identifier, the return is\n     * `undefined`.\n     * @return {number|undefined} Meters.\n     * @api\n     */\n    Projection.prototype.getMetersPerUnit = function () {\n        return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n    };\n    /**\n     * Get the world extent for this projection.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    Projection.prototype.getWorldExtent = function () {\n        return this.worldExtent_;\n    };\n    /**\n     * Get the axis orientation of this projection.\n     * Example values are:\n     * enu - the default easting, northing, elevation.\n     * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n     *     or south orientated transverse mercator.\n     * wnu - westing, northing, up - some planetary coordinate systems have\n     *     \"west positive\" coordinate systems\n     * @return {string} Axis orientation.\n     * @api\n     */\n    Projection.prototype.getAxisOrientation = function () {\n        return this.axisOrientation_;\n    };\n    /**\n     * Is this projection a global projection which spans the whole world?\n     * @return {boolean} Whether the projection is global.\n     * @api\n     */\n    Projection.prototype.isGlobal = function () {\n        return this.global_;\n    };\n    /**\n     * Set if the projection is a global projection which spans the whole world\n     * @param {boolean} global Whether the projection is global.\n     * @api\n     */\n    Projection.prototype.setGlobal = function (global) {\n        this.global_ = global;\n        this.canWrapX_ = !!(global && this.extent_);\n    };\n    /**\n     * @return {import(\"../tilegrid/TileGrid.js\").default} The default tile grid.\n     */\n    Projection.prototype.getDefaultTileGrid = function () {\n        return this.defaultTileGrid_;\n    };\n    /**\n     * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid The default tile grid.\n     */\n    Projection.prototype.setDefaultTileGrid = function (tileGrid) {\n        this.defaultTileGrid_ = tileGrid;\n    };\n    /**\n     * Set the validity extent for this projection.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @api\n     */\n    Projection.prototype.setExtent = function (extent) {\n        this.extent_ = extent;\n        this.canWrapX_ = !!(this.global_ && extent);\n    };\n    /**\n     * Set the world extent for this projection.\n     * @param {import(\"../extent.js\").Extent} worldExtent World extent\n     *     [minlon, minlat, maxlon, maxlat].\n     * @api\n     */\n    Projection.prototype.setWorldExtent = function (worldExtent) {\n        this.worldExtent_ = worldExtent;\n    };\n    /**\n     * Set the getPointResolution function (see {@link module:ol/proj.getPointResolution}\n     * for this projection.\n     * @param {function(number, import(\"../coordinate.js\").Coordinate):number} func Function\n     * @api\n     */\n    Projection.prototype.setGetPointResolution = function (func) {\n        this.getPointResolutionFunc_ = func;\n    };\n    /**\n     * Get the custom point resolution function for this projection (if set).\n     * @return {function(number, import(\"../coordinate.js\").Coordinate):number|undefined} The custom point\n     * resolution function (if set).\n     */\n    Projection.prototype.getPointResolutionFunc = function () {\n        return this.getPointResolutionFunc_;\n    };\n    return Projection;\n}());\nexport default Projection;\n//# sourceMappingURL=Projection.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Layer\n */\nimport BaseLayer from './Base.js';\nimport EventType from '../events/EventType.js';\nimport LayerProperty from './Property.js';\nimport RenderEventType from '../render/EventType.js';\nimport { assert } from '../asserts.js';\nimport { assign } from '../obj.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @typedef {function(import(\"../PluggableMap.js\").FrameState):HTMLElement} RenderFunction\n */\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:source', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../render/EventType\").LayerRenderEventTypes, import(\"../render/Event\").default, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|'change:source'|\n *     import(\"../render/EventType\").LayerRenderEventTypes, Return>} LayerOnSignature\n */\n/**\n * @template {import(\"../source/Source.js\").default} [SourceType=import(\"../source/Source.js\").default]\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {SourceType} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer~Layer#setSource layer.setSource(source)} after\n * construction.\n * @property {import(\"../PluggableMap.js\").default|null} [map] Map.\n * @property {RenderFunction} [render] Render function. Takes the frame state as input and is expected to return an\n * HTML element. Will overwrite the default rendering for the layer.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @typedef {Object} State\n * @property {import(\"./Layer.js\").default} layer Layer.\n * @property {number} opacity Opacity, the value is rounded to two digits to appear after the decimal point.\n * @property {boolean} visible Visible.\n * @property {boolean} managed Managed.\n * @property {import(\"../extent.js\").Extent} [extent] Extent.\n * @property {number} zIndex ZIndex.\n * @property {number} maxResolution Maximum resolution.\n * @property {number} minResolution Minimum resolution.\n * @property {number} minZoom Minimum zoom.\n * @property {number} maxZoom Maximum zoom.\n */\n/**\n * @classdesc\n * Base class from which all layer types are derived. This should only be instantiated\n * in the case where a custom layer is added to the map with a custom `render` function.\n * Such a function can be specified in the `options` object, and is expected to return an HTML element.\n *\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link import(\"../PluggableMap.js\").default#addLayer map.addLayer()}. Components\n * like {@link module:ol/interaction/Draw~Draw} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * {@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * Please note that for performance reasons several layers might get rendered to\n * the same HTML element, which will cause {@link import(\"../PluggableMap.js\").default#forEachLayerAtPixel map.forEachLayerAtPixel()} to\n * give false positives. To avoid this, apply different `className` properties to the\n * layers at creation time.\n *\n * @fires import(\"../render/Event.js\").RenderEvent#prerender\n * @fires import(\"../render/Event.js\").RenderEvent#postrender\n *\n * @template {import(\"../source/Source.js\").default} [SourceType=import(\"../source/Source.js\").default]\n * @template {import(\"../renderer/Layer.js\").default} [RendererType=import(\"../renderer/Layer.js\").default]\n * @api\n */\nvar Layer = /** @class */ (function (_super) {\n    __extends(Layer, _super);\n    /**\n     * @param {Options<SourceType>} options Layer options.\n     */\n    function Layer(options) {\n        var _this = this;\n        var baseOptions = assign({}, options);\n        delete baseOptions.source;\n        _this = _super.call(this, baseOptions) || this;\n        /***\n         * @type {LayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {LayerOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {LayerOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.mapPrecomposeKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.mapRenderKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.sourceChangeKey_ = null;\n        /**\n         * @private\n         * @type {RendererType}\n         */\n        _this.renderer_ = null;\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        _this.rendered = false;\n        // Overwrite default render method with a custom one\n        if (options.render) {\n            _this.render = options.render;\n        }\n        if (options.map) {\n            _this.setMap(options.map);\n        }\n        _this.addChangeListener(LayerProperty.SOURCE, _this.handleSourcePropertyChange_);\n        var source = options.source\n            ? /** @type {SourceType} */ (options.source)\n            : null;\n        _this.setSource(source);\n        return _this;\n    }\n    /**\n     * @param {Array<import(\"./Layer.js\").default>} [opt_array] Array of layers (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n     */\n    Layer.prototype.getLayersArray = function (opt_array) {\n        var array = opt_array ? opt_array : [];\n        array.push(this);\n        return array;\n    };\n    /**\n     * @param {Array<import(\"./Layer.js\").State>} [opt_states] Optional list of layer states (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n     */\n    Layer.prototype.getLayerStatesArray = function (opt_states) {\n        var states = opt_states ? opt_states : [];\n        states.push(this.getLayerState());\n        return states;\n    };\n    /**\n     * Get the layer source.\n     * @return {SourceType|null} The layer source (or `null` if not yet set).\n     * @observable\n     * @api\n     */\n    Layer.prototype.getSource = function () {\n        return /** @type {SourceType} */ (this.get(LayerProperty.SOURCE)) || null;\n    };\n    /**\n     * @return {SourceType|null} The source being rendered.\n     */\n    Layer.prototype.getRenderSource = function () {\n        return this.getSource();\n    };\n    /**\n     * @return {import(\"../source/Source.js\").State} Source state.\n     */\n    Layer.prototype.getSourceState = function () {\n        var source = this.getSource();\n        return !source ? 'undefined' : source.getState();\n    };\n    /**\n     * @private\n     */\n    Layer.prototype.handleSourceChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Layer.prototype.handleSourcePropertyChange_ = function () {\n        if (this.sourceChangeKey_) {\n            unlistenByKey(this.sourceChangeKey_);\n            this.sourceChangeKey_ = null;\n        }\n        var source = this.getSource();\n        if (source) {\n            this.sourceChangeKey_ = listen(source, EventType.CHANGE, this.handleSourceChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * @param {import(\"../pixel\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with\n     * an array of features.\n     */\n    Layer.prototype.getFeatures = function (pixel) {\n        if (!this.renderer_) {\n            return new Promise(function (resolve) { return resolve([]); });\n        }\n        return this.renderer_.getFeatures(pixel);\n    };\n    /**\n     * @param {import(\"../pixel\").Pixel} pixel Pixel.\n     * @return {Uint8ClampedArray|Uint8Array|Float32Array|DataView|null} Pixel data.\n     */\n    Layer.prototype.getData = function (pixel) {\n        if (!this.renderer_ || !this.rendered) {\n            return null;\n        }\n        return this.renderer_.getData(pixel);\n    };\n    /**\n     * In charge to manage the rendering of the layer. One layer type is\n     * bounded with one layer renderer.\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target which the renderer may (but need not) use\n     * for rendering its content.\n     * @return {HTMLElement} The rendered element.\n     */\n    Layer.prototype.render = function (frameState, target) {\n        var layerRenderer = this.getRenderer();\n        if (layerRenderer.prepareFrame(frameState)) {\n            this.rendered = true;\n            return layerRenderer.renderFrame(frameState, target);\n        }\n    };\n    /**\n     * Called when a layer is not visible during a map render.\n     */\n    Layer.prototype.unrender = function () {\n        this.rendered = false;\n    };\n    /**\n     * For use inside the library only.\n     * @param {import(\"../PluggableMap.js\").default|null} map Map.\n     */\n    Layer.prototype.setMapInternal = function (map) {\n        if (!map) {\n            this.unrender();\n        }\n        this.set(LayerProperty.MAP, map);\n    };\n    /**\n     * For use inside the library only.\n     * @return {import(\"../PluggableMap.js\").default|null} Map.\n     */\n    Layer.prototype.getMapInternal = function () {\n        return this.get(LayerProperty.MAP);\n    };\n    /**\n     * Sets the layer to be rendered on top of other layers on a map. The map will\n     * not manage this layer in its layers collection, and the callback in\n     * {@link module:ol/Map~Map#forEachLayerAtPixel} will receive `null` as layer. This\n     * is useful for temporary layers. To remove an unmanaged layer from the map,\n     * use `#setMap(null)`.\n     *\n     * To add the layer to a map and have it managed by the map, use\n     * {@link module:ol/Map~Map#addLayer} instead.\n     * @param {import(\"../PluggableMap.js\").default|null} map Map.\n     * @api\n     */\n    Layer.prototype.setMap = function (map) {\n        if (this.mapPrecomposeKey_) {\n            unlistenByKey(this.mapPrecomposeKey_);\n            this.mapPrecomposeKey_ = null;\n        }\n        if (!map) {\n            this.changed();\n        }\n        if (this.mapRenderKey_) {\n            unlistenByKey(this.mapRenderKey_);\n            this.mapRenderKey_ = null;\n        }\n        if (map) {\n            this.mapPrecomposeKey_ = listen(map, RenderEventType.PRECOMPOSE, function (evt) {\n                var renderEvent = \n                /** @type {import(\"../render/Event.js\").default} */ (evt);\n                var layerStatesArray = renderEvent.frameState.layerStatesArray;\n                var layerState = this.getLayerState(false);\n                // A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both.\n                assert(!layerStatesArray.some(function (arrayLayerState) {\n                    return arrayLayerState.layer === layerState.layer;\n                }), 67);\n                layerStatesArray.push(layerState);\n            }, this);\n            this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n            this.changed();\n        }\n    };\n    /**\n     * Set the layer source.\n     * @param {SourceType|null} source The layer source.\n     * @observable\n     * @api\n     */\n    Layer.prototype.setSource = function (source) {\n        this.set(LayerProperty.SOURCE, source);\n    };\n    /**\n     * Get the renderer for this layer.\n     * @return {RendererType|null} The layer renderer.\n     */\n    Layer.prototype.getRenderer = function () {\n        if (!this.renderer_) {\n            this.renderer_ = this.createRenderer();\n        }\n        return this.renderer_;\n    };\n    /**\n     * @return {boolean} The layer has a renderer.\n     */\n    Layer.prototype.hasRenderer = function () {\n        return !!this.renderer_;\n    };\n    /**\n     * Create a renderer for this layer.\n     * @return {RendererType} A layer renderer.\n     * @protected\n     */\n    Layer.prototype.createRenderer = function () {\n        return null;\n    };\n    /**\n     * Clean up.\n     */\n    Layer.prototype.disposeInternal = function () {\n        if (this.renderer_) {\n            this.renderer_.dispose();\n            delete this.renderer_;\n        }\n        this.setSource(null);\n        _super.prototype.disposeInternal.call(this);\n    };\n    return Layer;\n}(BaseLayer));\n/**\n * Return `true` if the layer is visible and if the provided view state\n * has resolution and zoom levels that are in range of the layer's min/max.\n * @param {State} layerState Layer state.\n * @param {import(\"../View.js\").State} viewState View state.\n * @return {boolean} The layer is visible at the given view state.\n */\nexport function inView(layerState, viewState) {\n    if (!layerState.visible) {\n        return false;\n    }\n    var resolution = viewState.resolution;\n    if (resolution < layerState.minResolution ||\n        resolution >= layerState.maxResolution) {\n        return false;\n    }\n    var zoom = viewState.zoom;\n    return zoom > layerState.minZoom && zoom <= layerState.maxZoom;\n}\nexport default Layer;\n//# sourceMappingURL=Layer.js.map","/**\n * @module ol/css\n */\n/**\n * @typedef {Object} FontParameters\n * @property {string} style Style.\n * @property {string} variant Variant.\n * @property {string} weight Weight.\n * @property {string} size Size.\n * @property {string} lineHeight LineHeight.\n * @property {string} family Family.\n * @property {Array<string>} families Families.\n */\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_HIDDEN = 'ol-hidden';\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_SELECTABLE = 'ol-selectable';\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_UNSELECTABLE = 'ol-unselectable';\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_UNSUPPORTED = 'ol-unsupported';\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_CONTROL = 'ol-control';\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_COLLAPSED = 'ol-collapsed';\n/**\n * From https://stackoverflow.com/questions/10135697/regex-to-parse-any-css-font\n * @type {RegExp}\n */\nvar fontRegEx = new RegExp([\n    '^\\\\s*(?=(?:(?:[-a-z]+\\\\s*){0,2}(italic|oblique))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(small-caps))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)',\n    '(?:(?:normal|\\\\1|\\\\2|\\\\3)\\\\s*){0,3}((?:xx?-)?',\n    '(?:small|large)|medium|smaller|larger|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx]))',\n    '(?:\\\\s*\\\\/\\\\s*(normal|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx])?))',\n    '?\\\\s*([-,\\\\\"\\\\\\'\\\\sa-z]+?)\\\\s*$',\n].join(''), 'i');\nvar fontRegExMatchIndex = [\n    'style',\n    'variant',\n    'weight',\n    'size',\n    'lineHeight',\n    'family',\n];\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} fontSpec The CSS font property.\n * @return {FontParameters|null} The font parameters (or null if the input spec is invalid).\n */\nexport var getFontParameters = function (fontSpec) {\n    var match = fontSpec.match(fontRegEx);\n    if (!match) {\n        return null;\n    }\n    var style = /** @type {FontParameters} */ ({\n        lineHeight: 'normal',\n        size: '1.2em',\n        style: 'normal',\n        weight: 'normal',\n        variant: 'normal',\n    });\n    for (var i = 0, ii = fontRegExMatchIndex.length; i < ii; ++i) {\n        var value = match[i + 1];\n        if (value !== undefined) {\n            style[fontRegExMatchIndex[i]] = value;\n        }\n    }\n    style.families = style.family.split(/,\\s?/);\n    return style;\n};\n//# sourceMappingURL=css.js.map","/**\n * @module ol/transform\n */\nimport { WORKER_OFFSCREEN_CANVAS } from './has.js';\nimport { assert } from './asserts.js';\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array<number>} Transform\n * @api\n */\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 33 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n/**\n * @private\n * @type {Transform}\n */\nvar tmp_ = new Array(6);\n/**\n * Create an identity transform.\n * @return {!Transform} Identity transform.\n */\nexport function create() {\n    return [1, 0, 0, 1, 0, 0];\n}\n/**\n * Resets the given transform to an identity transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Transform.\n */\nexport function reset(transform) {\n    return set(transform, 1, 0, 0, 1, 0, 0);\n}\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!Transform} transform1 Transform parameters of matrix 1.\n * @param {!Transform} transform2 Transform parameters of matrix 2.\n * @return {!Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n    var a1 = transform1[0];\n    var b1 = transform1[1];\n    var c1 = transform1[2];\n    var d1 = transform1[3];\n    var e1 = transform1[4];\n    var f1 = transform1[5];\n    var a2 = transform2[0];\n    var b2 = transform2[1];\n    var c2 = transform2[2];\n    var d2 = transform2[3];\n    var e2 = transform2[4];\n    var f2 = transform2[5];\n    transform1[0] = a1 * a2 + c1 * b2;\n    transform1[1] = b1 * a2 + d1 * b2;\n    transform1[2] = a1 * c2 + c1 * d2;\n    transform1[3] = b1 * c2 + d1 * d2;\n    transform1[4] = a1 * e2 + c1 * f2 + e1;\n    transform1[5] = b1 * e2 + d1 * f2 + f1;\n    return transform1;\n}\n/**\n * Set the transform components a-f on a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n    transform[0] = a;\n    transform[1] = b;\n    transform[2] = c;\n    transform[3] = d;\n    transform[4] = e;\n    transform[5] = f;\n    return transform;\n}\n/**\n * Set transform on one matrix from another matrix.\n * @param {!Transform} transform1 Matrix to set transform to.\n * @param {!Transform} transform2 Matrix to set transform from.\n * @return {!Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n    transform1[0] = transform2[0];\n    transform1[1] = transform2[1];\n    transform1[2] = transform2[2];\n    transform1[3] = transform2[3];\n    transform1[4] = transform2[4];\n    transform1[5] = transform2[5];\n    return transform1;\n}\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {Transform} transform The transformation.\n * @param {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} coordinate The coordinate to transform.\n * @return {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n    var x = coordinate[0];\n    var y = coordinate[1];\n    coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n    coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n    return coordinate;\n}\n/**\n * Applies rotation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n/**\n * Applies scale to a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n    return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n/**\n * Creates a scale transform.\n * @param {!Transform} target Transform to overwrite.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scale transform.\n */\nexport function makeScale(target, x, y) {\n    return set(target, x, 0, 0, y, 0, 0);\n}\n/**\n * Applies translation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n    return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n    var sin = Math.sin(angle);\n    var cos = Math.cos(angle);\n    transform[0] = sx * cos;\n    transform[1] = sy * sin;\n    transform[2] = -sx * sin;\n    transform[3] = sy * cos;\n    transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n    transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n    return transform;\n}\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative). The resulting transform\n * string can be applied as `transform` property of an HTMLElement's style.\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {string} The composite css transform.\n * @api\n */\nexport function composeCssTransform(dx1, dy1, sx, sy, angle, dx2, dy2) {\n    return toString(compose(create(), dx1, dy1, sx, sy, angle, dx2, dy2));\n}\n/**\n * Invert the given transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (source) transform.\n */\nexport function invert(source) {\n    return makeInverse(source, source);\n}\n/**\n * Invert the given transform.\n * @param {!Transform} target Transform to be set as the inverse of\n *     the source transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (target) transform.\n */\nexport function makeInverse(target, source) {\n    var det = determinant(source);\n    assert(det !== 0, 32); // Transformation matrix cannot be inverted\n    var a = source[0];\n    var b = source[1];\n    var c = source[2];\n    var d = source[3];\n    var e = source[4];\n    var f = source[5];\n    target[0] = d / det;\n    target[1] = -b / det;\n    target[2] = -c / det;\n    target[3] = a / det;\n    target[4] = (c * f - d * e) / det;\n    target[5] = -(a * f - b * e) / det;\n    return target;\n}\n/**\n * Returns the determinant of the given matrix.\n * @param {!Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n    return mat[0] * mat[3] - mat[1] * mat[2];\n}\n/**\n * @type {HTMLElement}\n * @private\n */\nvar transformStringDiv;\n/**\n * A rounded string version of the transform.  This can be used\n * for CSS transforms.\n * @param {!Transform} mat Matrix.\n * @return {string} The transform as a string.\n */\nexport function toString(mat) {\n    var transformString = 'matrix(' + mat.join(', ') + ')';\n    if (WORKER_OFFSCREEN_CANVAS) {\n        return transformString;\n    }\n    var node = transformStringDiv || (transformStringDiv = document.createElement('div'));\n    node.style.transform = transformString;\n    return node.style.transform;\n}\n//# sourceMappingURL=transform.js.map","/**\n * @module ol/easing\n */\n/**\n * Start slow and speed up.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeIn(t) {\n    return Math.pow(t, 3);\n}\n/**\n * Start fast and slow down.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeOut(t) {\n    return 1 - easeIn(1 - t);\n}\n/**\n * Start slow, speed up, and then slow down again.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function inAndOut(t) {\n    return 3 * t * t - 2 * t * t * t;\n}\n/**\n * Maintain a constant speed over time.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function linear(t) {\n    return t;\n}\n/**\n * Start slow, speed up, and at the very end slow down again.  This has the\n * same general behavior as {@link module:ol/easing.inAndOut}, but the final\n * slowdown is delayed.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function upAndDown(t) {\n    if (t < 0.5) {\n        return inAndOut(2 * t);\n    }\n    else {\n        return 1 - inAndOut(2 * (t - 0.5));\n    }\n}\n//# sourceMappingURL=easing.js.map","/**\n * @module ol/sphere\n */\nimport { toDegrees, toRadians } from './math.js';\n/**\n * Object literal with options for the {@link getLength} or {@link getArea}\n * functions.\n * @typedef {Object} SphereMetricOptions\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857']\n * Projection of the  geometry.  By default, the geometry is assumed to be in\n * Web Mercator.\n * @property {number} [radius=6371008.8] Sphere radius.  By default, the\n * [mean Earth radius](https://en.wikipedia.org/wiki/Earth_radius#Mean_radius)\n * for the WGS84 ellipsoid is used.\n */\n/**\n * The mean Earth radius (1/3 * (2a + b)) for the WGS84 ellipsoid.\n * https://en.wikipedia.org/wiki/Earth_radius#Mean_radius\n * @type {number}\n */\nexport var DEFAULT_RADIUS = 6371008.8;\n/**\n * Get the great circle distance (in meters) between two geographic coordinates.\n * @param {Array} c1 Starting coordinate.\n * @param {Array} c2 Ending coordinate.\n * @param {number} [opt_radius] The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {number} The great circle distance between the points (in meters).\n * @api\n */\nexport function getDistance(c1, c2, opt_radius) {\n    var radius = opt_radius || DEFAULT_RADIUS;\n    var lat1 = toRadians(c1[1]);\n    var lat2 = toRadians(c2[1]);\n    var deltaLatBy2 = (lat2 - lat1) / 2;\n    var deltaLonBy2 = toRadians(c2[0] - c1[0]) / 2;\n    var a = Math.sin(deltaLatBy2) * Math.sin(deltaLatBy2) +\n        Math.sin(deltaLonBy2) *\n            Math.sin(deltaLonBy2) *\n            Math.cos(lat1) *\n            Math.cos(lat2);\n    return 2 * radius * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n}\n/**\n * Get the cumulative great circle length of linestring coordinates (geographic).\n * @param {Array} coordinates Linestring coordinates.\n * @param {number} radius The sphere radius to use.\n * @return {number} The length (in meters).\n */\nfunction getLengthInternal(coordinates, radius) {\n    var length = 0;\n    for (var i = 0, ii = coordinates.length; i < ii - 1; ++i) {\n        length += getDistance(coordinates[i], coordinates[i + 1], radius);\n    }\n    return length;\n}\n/**\n * Get the spherical length of a geometry.  This length is the sum of the\n * great circle distances between coordinates.  For polygons, the length is\n * the sum of all rings.  For points, the length is zero.  For multi-part\n * geometries, the length is the sum of the length of each part.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions} [opt_options] Options for the\n * length calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n * You can change this by providing a `projection` option.\n * @return {number} The spherical length (in meters).\n * @api\n */\nexport function getLength(geometry, opt_options) {\n    var options = opt_options || {};\n    var radius = options.radius || DEFAULT_RADIUS;\n    var projection = options.projection || 'EPSG:3857';\n    var type = geometry.getType();\n    if (type !== 'GeometryCollection') {\n        geometry = geometry.clone().transform(projection, 'EPSG:4326');\n    }\n    var length = 0;\n    var coordinates, coords, i, ii, j, jj;\n    switch (type) {\n        case 'Point':\n        case 'MultiPoint': {\n            break;\n        }\n        case 'LineString':\n        case 'LinearRing': {\n            coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n            length = getLengthInternal(coordinates, radius);\n            break;\n        }\n        case 'MultiLineString':\n        case 'Polygon': {\n            coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n            for (i = 0, ii = coordinates.length; i < ii; ++i) {\n                length += getLengthInternal(coordinates[i], radius);\n            }\n            break;\n        }\n        case 'MultiPolygon': {\n            coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n            for (i = 0, ii = coordinates.length; i < ii; ++i) {\n                coords = coordinates[i];\n                for (j = 0, jj = coords.length; j < jj; ++j) {\n                    length += getLengthInternal(coords[j], radius);\n                }\n            }\n            break;\n        }\n        case 'GeometryCollection': {\n            var geometries = \n            /** @type {import(\"./geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n            for (i = 0, ii = geometries.length; i < ii; ++i) {\n                length += getLength(geometries[i], opt_options);\n            }\n            break;\n        }\n        default: {\n            throw new Error('Unsupported geometry type: ' + type);\n        }\n    }\n    return length;\n}\n/**\n * Returns the spherical area for a list of coordinates.\n *\n * [Reference](https://trs.jpl.nasa.gov/handle/2014/40409)\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n * Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates List of coordinates of a linear\n * ring. If the ring is oriented clockwise, the area will be positive,\n * otherwise it will be negative.\n * @param {number} radius The sphere radius.\n * @return {number} Area (in square meters).\n */\nfunction getAreaInternal(coordinates, radius) {\n    var area = 0;\n    var len = coordinates.length;\n    var x1 = coordinates[len - 1][0];\n    var y1 = coordinates[len - 1][1];\n    for (var i = 0; i < len; i++) {\n        var x2 = coordinates[i][0];\n        var y2 = coordinates[i][1];\n        area +=\n            toRadians(x2 - x1) *\n                (2 + Math.sin(toRadians(y1)) + Math.sin(toRadians(y2)));\n        x1 = x2;\n        y1 = y2;\n    }\n    return (area * radius * radius) / 2.0;\n}\n/**\n * Get the spherical area of a geometry.  This is the area (in meters) assuming\n * that polygon edges are segments of great circles on a sphere.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions} [opt_options] Options for the area\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @return {number} The spherical area (in square meters).\n * @api\n */\nexport function getArea(geometry, opt_options) {\n    var options = opt_options || {};\n    var radius = options.radius || DEFAULT_RADIUS;\n    var projection = options.projection || 'EPSG:3857';\n    var type = geometry.getType();\n    if (type !== 'GeometryCollection') {\n        geometry = geometry.clone().transform(projection, 'EPSG:4326');\n    }\n    var area = 0;\n    var coordinates, coords, i, ii, j, jj;\n    switch (type) {\n        case 'Point':\n        case 'MultiPoint':\n        case 'LineString':\n        case 'MultiLineString':\n        case 'LinearRing': {\n            break;\n        }\n        case 'Polygon': {\n            coordinates = /** @type {import(\"./geom/Polygon.js\").default} */ (geometry).getCoordinates();\n            area = Math.abs(getAreaInternal(coordinates[0], radius));\n            for (i = 1, ii = coordinates.length; i < ii; ++i) {\n                area -= Math.abs(getAreaInternal(coordinates[i], radius));\n            }\n            break;\n        }\n        case 'MultiPolygon': {\n            coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n            for (i = 0, ii = coordinates.length; i < ii; ++i) {\n                coords = coordinates[i];\n                area += Math.abs(getAreaInternal(coords[0], radius));\n                for (j = 1, jj = coords.length; j < jj; ++j) {\n                    area -= Math.abs(getAreaInternal(coords[j], radius));\n                }\n            }\n            break;\n        }\n        case 'GeometryCollection': {\n            var geometries = \n            /** @type {import(\"./geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n            for (i = 0, ii = geometries.length; i < ii; ++i) {\n                area += getArea(geometries[i], opt_options);\n            }\n            break;\n        }\n        default: {\n            throw new Error('Unsupported geometry type: ' + type);\n        }\n    }\n    return area;\n}\n/**\n * Returns the coordinate at the given distance and bearing from `c1`.\n *\n * @param {import(\"./coordinate.js\").Coordinate} c1 The origin point (`[lon, lat]` in degrees).\n * @param {number} distance The great-circle distance between the origin\n *     point and the target point.\n * @param {number} bearing The bearing (in radians).\n * @param {number} [opt_radius] The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {import(\"./coordinate.js\").Coordinate} The target point.\n */\nexport function offset(c1, distance, bearing, opt_radius) {\n    var radius = opt_radius || DEFAULT_RADIUS;\n    var lat1 = toRadians(c1[1]);\n    var lon1 = toRadians(c1[0]);\n    var dByR = distance / radius;\n    var lat = Math.asin(Math.sin(lat1) * Math.cos(dByR) +\n        Math.cos(lat1) * Math.sin(dByR) * Math.cos(bearing));\n    var lon = lon1 +\n        Math.atan2(Math.sin(bearing) * Math.sin(dByR) * Math.cos(lat1), Math.cos(dByR) - Math.sin(lat1) * Math.sin(lat));\n    return [toDegrees(lon), toDegrees(lat)];\n}\n//# sourceMappingURL=sphere.js.map","/**\n * @module ol/reproj/common\n */\n/**\n * Default maximum allowed threshold  (in pixels) for reprojection\n * triangulation.\n * @type {number}\n */\nexport var ERROR_THRESHOLD = 0.5;\n/**\n * Enable automatic reprojection of raster sources. Default is `true`.\n * TODO: decide if we want to expose this as a build flag or remove it\n * @type {boolean}\n */\nexport var ENABLE_RASTER_REPROJECTION = true;\n//# sourceMappingURL=common.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Map\n */\nimport CompositeMapRenderer from './renderer/Composite.js';\nimport PluggableMap from './PluggableMap.js';\nimport { assign } from './obj.js';\nimport { defaults as defaultControls } from './control.js';\nimport { defaults as defaultInteractions } from './interaction.js';\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     var map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile~TileLayer} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~LayerGroup}\n * is a subclass of {@link module:ol/layer/Base~BaseLayer}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @api\n */\nvar Map = /** @class */ (function (_super) {\n    __extends(Map, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").MapOptions} options Map options.\n     */\n    function Map(options) {\n        options = assign({}, options);\n        if (!options.controls) {\n            options.controls = defaultControls();\n        }\n        if (!options.interactions) {\n            options.interactions = defaultInteractions({\n                onFocusOnly: true,\n            });\n        }\n        return _super.call(this, options) || this;\n    }\n    Map.prototype.createRenderer = function () {\n        return new CompositeMapRenderer(this);\n    };\n    return Map;\n}(PluggableMap));\nexport default Map;\n//# sourceMappingURL=Map.js.map","/**\n * @module ol/geom/flat/interiorpoint\n */\nimport { linearRingsContainsXY } from './contains.js';\nimport { numberSafeCompareFunction } from '../../array.js';\n/**\n * Calculates a point that is likely to lie in the interior of the linear rings.\n * Inspired by JTS's com.vividsolutions.jts.geom.Geometry#getInteriorPoint.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @param {number} flatCentersOffset Flat center offset.\n * @param {Array<number>} [opt_dest] Destination.\n * @return {Array<number>} Destination point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointOfArray(flatCoordinates, offset, ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n    var i, ii, x, x1, x2, y1, y2;\n    var y = flatCenters[flatCentersOffset + 1];\n    /** @type {Array<number>} */\n    var intersections = [];\n    // Calculate intersections with the horizontal line\n    for (var r = 0, rr = ends.length; r < rr; ++r) {\n        var end = ends[r];\n        x1 = flatCoordinates[end - stride];\n        y1 = flatCoordinates[end - stride + 1];\n        for (i = offset; i < end; i += stride) {\n            x2 = flatCoordinates[i];\n            y2 = flatCoordinates[i + 1];\n            if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n                x = ((y - y1) / (y2 - y1)) * (x2 - x1) + x1;\n                intersections.push(x);\n            }\n            x1 = x2;\n            y1 = y2;\n        }\n    }\n    // Find the longest segment of the horizontal line that has its center point\n    // inside the linear ring.\n    var pointX = NaN;\n    var maxSegmentLength = -Infinity;\n    intersections.sort(numberSafeCompareFunction);\n    x1 = intersections[0];\n    for (i = 1, ii = intersections.length; i < ii; ++i) {\n        x2 = intersections[i];\n        var segmentLength = Math.abs(x2 - x1);\n        if (segmentLength > maxSegmentLength) {\n            x = (x1 + x2) / 2;\n            if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n                pointX = x;\n                maxSegmentLength = segmentLength;\n            }\n        }\n        x1 = x2;\n    }\n    if (isNaN(pointX)) {\n        // There is no horizontal line that has its center point inside the linear\n        // ring.  Use the center of the the linear ring's extent.\n        pointX = flatCenters[flatCentersOffset];\n    }\n    if (opt_dest) {\n        opt_dest.push(pointX, y, maxSegmentLength);\n        return opt_dest;\n    }\n    else {\n        return [pointX, y, maxSegmentLength];\n    }\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @return {Array<number>} Interior points as XYM coordinates, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointsOfMultiArray(flatCoordinates, offset, endss, stride, flatCenters) {\n    var interiorPoints = [];\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        interiorPoints = getInteriorPointOfArray(flatCoordinates, offset, ends, stride, flatCenters, 2 * i, interiorPoints);\n        offset = ends[ends.length - 1];\n    }\n    return interiorPoints;\n}\n//# sourceMappingURL=interiorpoint.js.map","/**\n * @module ol/render/EventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered before a layer is rendered.\n     * @event module:ol/render/Event~RenderEvent#prerender\n     * @api\n     */\n    PRERENDER: 'prerender',\n    /**\n     * Triggered after a layer is rendered.\n     * @event module:ol/render/Event~RenderEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered before layers are composed.  When dispatched by the map, the event object will not have\n     * a `context` set.  When dispatched by a layer, the event object will have a `context` set.  Only\n     * WebGL layers currently dispatch this event.\n     * @event module:ol/render/Event~RenderEvent#precompose\n     * @api\n     */\n    PRECOMPOSE: 'precompose',\n    /**\n     * Triggered after layers are composed.  When dispatched by the map, the event object will not have\n     * a `context` set.  When dispatched by a layer, the event object will have a `context` set.  Only\n     * WebGL layers currently dispatch this event.\n     * @event module:ol/render/Event~RenderEvent#postcompose\n     * @api\n     */\n    POSTCOMPOSE: 'postcompose',\n    /**\n     * Triggered when rendering is complete, i.e. all sources and tiles have\n     * finished loading for the current viewport, and all tiles are faded in.\n     * The event object will not have a `context` set.\n     * @event module:ol/render/Event~RenderEvent#rendercomplete\n     * @api\n     */\n    RENDERCOMPLETE: 'rendercomplete',\n};\n/**\n * @typedef {'postrender'|'precompose'|'postcompose'|'rendercomplete'} MapRenderEventTypes\n */\n/**\n * @typedef {'postrender'|'prerender'} LayerRenderEventTypes\n */\n//# sourceMappingURL=EventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/canvas/Layer\n */\nimport LayerRenderer from '../Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport { apply as applyTransform, compose as composeTransform, create as createTransform, } from '../../transform.js';\nimport { asArray } from '../../color.js';\nimport { containsCoordinate, getBottomLeft, getBottomRight, getTopLeft, getTopRight, } from '../../extent.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { equals } from '../../array.js';\n/**\n * @type {Array<HTMLCanvasElement>}\n */\nexport var canvasPool = [];\n/**\n * @type {CanvasRenderingContext2D}\n */\nvar pixelContext = null;\nfunction createPixelContext() {\n    var canvas = document.createElement('canvas');\n    canvas.width = 1;\n    canvas.height = 1;\n    pixelContext = canvas.getContext('2d');\n}\n/**\n * @abstract\n * @template {import(\"../../layer/Layer.js\").default} LayerType\n * @extends {LayerRenderer<LayerType>}\n */\nvar CanvasLayerRenderer = /** @class */ (function (_super) {\n    __extends(CanvasLayerRenderer, _super);\n    /**\n     * @param {LayerType} layer Layer.\n     */\n    function CanvasLayerRenderer(layer) {\n        var _this = _super.call(this, layer) || this;\n        /**\n         * @protected\n         * @type {HTMLElement}\n         */\n        _this.container = null;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.renderedResolution;\n        /**\n         * A temporary transform.  The values in this transform should only be used in a\n         * function that sets the values.\n         * @protected\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.tempTransform = createTransform();\n        /**\n         * The transform for rendered pixels to viewport CSS pixels.  This transform must\n         * be set when rendering a frame and may be used by other functions after rendering.\n         * @protected\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.pixelTransform = createTransform();\n        /**\n         * The transform for viewport CSS pixels to rendered pixels.  This transform must\n         * be set when rendering a frame and may be used by other functions after rendering.\n         * @protected\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.inversePixelTransform = createTransform();\n        /**\n         * @type {CanvasRenderingContext2D}\n         */\n        _this.context = null;\n        /**\n         * @type {boolean}\n         */\n        _this.containerReused = false;\n        /**\n         * @private\n         * @type {CanvasRenderingContext2D}\n         */\n        _this.pixelContext_ = null;\n        /**\n         * @protected\n         * @type {import(\"../../PluggableMap.js\").FrameState|null}\n         */\n        _this.frameState = null;\n        return _this;\n    }\n    /**\n     * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n     * @param {number} col The column index.\n     * @param {number} row The row index.\n     * @return {Uint8ClampedArray|null} The image data.\n     */\n    CanvasLayerRenderer.prototype.getImageData = function (image, col, row) {\n        if (!pixelContext) {\n            createPixelContext();\n        }\n        pixelContext.clearRect(0, 0, 1, 1);\n        var data;\n        try {\n            pixelContext.drawImage(image, col, row, 1, 1, 0, 0, 1, 1);\n            data = pixelContext.getImageData(0, 0, 1, 1).data;\n        }\n        catch (err) {\n            pixelContext = null;\n            return null;\n        }\n        return data;\n    };\n    /**\n     * @param {import('../../PluggableMap.js').FrameState} frameState Frame state.\n     * @return {string} Background color.\n     */\n    CanvasLayerRenderer.prototype.getBackground = function (frameState) {\n        var layer = this.getLayer();\n        var background = layer.getBackground();\n        if (typeof background === 'function') {\n            background = background(frameState.viewState.resolution);\n        }\n        return background || undefined;\n    };\n    /**\n     * Get a rendering container from an existing target, if compatible.\n     * @param {HTMLElement} target Potential render target.\n     * @param {string} transform CSS Transform.\n     * @param {string} [opt_backgroundColor] Background color.\n     */\n    CanvasLayerRenderer.prototype.useContainer = function (target, transform, opt_backgroundColor) {\n        var layerClassName = this.getLayer().getClassName();\n        var container, context;\n        if (target &&\n            target.className === layerClassName &&\n            (!opt_backgroundColor ||\n                (target &&\n                    target.style.backgroundColor &&\n                    equals(asArray(target.style.backgroundColor), asArray(opt_backgroundColor))))) {\n            var canvas = target.firstElementChild;\n            if (canvas instanceof HTMLCanvasElement) {\n                context = canvas.getContext('2d');\n            }\n        }\n        if (context && context.canvas.style.transform === transform) {\n            // Container of the previous layer renderer can be used.\n            this.container = target;\n            this.context = context;\n            this.containerReused = true;\n        }\n        else if (this.containerReused) {\n            // Previously reused container cannot be used any more.\n            this.container = null;\n            this.context = null;\n            this.containerReused = false;\n        }\n        if (!this.container) {\n            container = document.createElement('div');\n            container.className = layerClassName;\n            var style = container.style;\n            style.position = 'absolute';\n            style.width = '100%';\n            style.height = '100%';\n            context = createCanvasContext2D();\n            var canvas = context.canvas;\n            container.appendChild(canvas);\n            style = canvas.style;\n            style.position = 'absolute';\n            style.left = '0';\n            style.transformOrigin = 'top left';\n            this.container = container;\n            this.context = context;\n        }\n        if (!this.containerReused &&\n            opt_backgroundColor &&\n            !this.container.style.backgroundColor) {\n            this.container.style.backgroundColor = opt_backgroundColor;\n        }\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"../../extent.js\").Extent} extent Clip extent.\n     * @protected\n     */\n    CanvasLayerRenderer.prototype.clipUnrotated = function (context, frameState, extent) {\n        var topLeft = getTopLeft(extent);\n        var topRight = getTopRight(extent);\n        var bottomRight = getBottomRight(extent);\n        var bottomLeft = getBottomLeft(extent);\n        applyTransform(frameState.coordinateToPixelTransform, topLeft);\n        applyTransform(frameState.coordinateToPixelTransform, topRight);\n        applyTransform(frameState.coordinateToPixelTransform, bottomRight);\n        applyTransform(frameState.coordinateToPixelTransform, bottomLeft);\n        var inverted = this.inversePixelTransform;\n        applyTransform(inverted, topLeft);\n        applyTransform(inverted, topRight);\n        applyTransform(inverted, bottomRight);\n        applyTransform(inverted, bottomLeft);\n        context.save();\n        context.beginPath();\n        context.moveTo(Math.round(topLeft[0]), Math.round(topLeft[1]));\n        context.lineTo(Math.round(topRight[0]), Math.round(topRight[1]));\n        context.lineTo(Math.round(bottomRight[0]), Math.round(bottomRight[1]));\n        context.lineTo(Math.round(bottomLeft[0]), Math.round(bottomLeft[1]));\n        context.clip();\n    };\n    /**\n     * @param {import(\"../../render/EventType.js\").default} type Event type.\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    CanvasLayerRenderer.prototype.dispatchRenderEvent_ = function (type, context, frameState) {\n        var layer = this.getLayer();\n        if (layer.hasListener(type)) {\n            var event_1 = new RenderEvent(type, this.inversePixelTransform, frameState, context);\n            layer.dispatchEvent(event_1);\n        }\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    CanvasLayerRenderer.prototype.preRender = function (context, frameState) {\n        this.frameState = frameState;\n        this.dispatchRenderEvent_(RenderEventType.PRERENDER, context, frameState);\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    CanvasLayerRenderer.prototype.postRender = function (context, frameState) {\n        this.dispatchRenderEvent_(RenderEventType.POSTRENDER, context, frameState);\n    };\n    /**\n     * Creates a transform for rendering to an element that will be rotated after rendering.\n     * @param {import(\"../../coordinate.js\").Coordinate} center Center.\n     * @param {number} resolution Resolution.\n     * @param {number} rotation Rotation.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {number} width Width of the rendered element (in pixels).\n     * @param {number} height Height of the rendered element (in pixels).\n     * @param {number} offsetX Offset on the x-axis in view coordinates.\n     * @protected\n     * @return {!import(\"../../transform.js\").Transform} Transform.\n     */\n    CanvasLayerRenderer.prototype.getRenderTransform = function (center, resolution, rotation, pixelRatio, width, height, offsetX) {\n        var dx1 = width / 2;\n        var dy1 = height / 2;\n        var sx = pixelRatio / resolution;\n        var sy = -sx;\n        var dx2 = -center[0] + offsetX;\n        var dy2 = -center[1];\n        return composeTransform(this.tempTransform, dx1, dy1, sx, sy, -rotation, dx2, dy2);\n    };\n    /**\n     * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @return {Uint8ClampedArray|Uint8Array} The result.  If there is no data at the pixel\n     *    location, null will be returned.  If there is data, but pixel values cannot be\n     *    returned, and empty array will be returned.\n     */\n    CanvasLayerRenderer.prototype.getDataAtPixel = function (pixel, frameState, hitTolerance) {\n        var renderPixel = applyTransform(this.inversePixelTransform, pixel.slice());\n        var context = this.context;\n        var layer = this.getLayer();\n        var layerExtent = layer.getExtent();\n        if (layerExtent) {\n            var renderCoordinate = applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n            /** get only data inside of the layer extent */\n            if (!containsCoordinate(layerExtent, renderCoordinate)) {\n                return null;\n            }\n        }\n        var x = Math.round(renderPixel[0]);\n        var y = Math.round(renderPixel[1]);\n        var pixelContext = this.pixelContext_;\n        if (!pixelContext) {\n            var pixelCanvas = document.createElement('canvas');\n            pixelCanvas.width = 1;\n            pixelCanvas.height = 1;\n            pixelContext = pixelCanvas.getContext('2d');\n            this.pixelContext_ = pixelContext;\n        }\n        pixelContext.clearRect(0, 0, 1, 1);\n        var data;\n        try {\n            pixelContext.drawImage(context.canvas, x, y, 1, 1, 0, 0, 1, 1);\n            data = pixelContext.getImageData(0, 0, 1, 1).data;\n        }\n        catch (err) {\n            if (err.name === 'SecurityError') {\n                // tainted canvas, we assume there is data at the given pixel (although there might not be)\n                this.pixelContext_ = null;\n                return new Uint8Array();\n            }\n            return data;\n        }\n        if (data[3] === 0) {\n            return null;\n        }\n        return data;\n    };\n    /**\n     * Clean up.\n     */\n    CanvasLayerRenderer.prototype.disposeInternal = function () {\n        delete this.frameState;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return CanvasLayerRenderer;\n}(LayerRenderer));\nexport default CanvasLayerRenderer;\n//# sourceMappingURL=Layer.js.map","/**\n * @module ol/reproj\n */\nimport { IMAGE_SMOOTHING_DISABLED } from './renderer/canvas/common.js';\nimport { assign } from './obj.js';\nimport { containsCoordinate, createEmpty, extend, forEachCorner, getCenter, getHeight, getTopLeft, getWidth, } from './extent.js';\nimport { createCanvasContext2D } from './dom.js';\nimport { getPointResolution, transform } from './proj.js';\nimport { solveLinearSystem } from './math.js';\nvar brokenDiagonalRendering_;\n/**\n * @type {Array<HTMLCanvasElement>}\n */\nexport var canvasPool = [];\n/**\n * This draws a small triangle into a canvas by setting the triangle as the clip region\n * and then drawing a (too large) rectangle\n *\n * @param {CanvasRenderingContext2D} ctx The context in which to draw the triangle\n * @param {number} u1 The x-coordinate of the second point. The first point is 0,0.\n * @param {number} v1 The y-coordinate of the second point.\n * @param {number} u2 The x-coordinate of the third point.\n * @param {number} v2 The y-coordinate of the third point.\n */\nfunction drawTestTriangle(ctx, u1, v1, u2, v2) {\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(u1, v1);\n    ctx.lineTo(u2, v2);\n    ctx.closePath();\n    ctx.save();\n    ctx.clip();\n    ctx.fillRect(0, 0, Math.max(u1, u2) + 1, Math.max(v1, v2));\n    ctx.restore();\n}\n/**\n * Given the data from getImageData, see if the right values appear at the provided offset.\n * Returns true if either the color or transparency is off\n *\n * @param {Uint8ClampedArray} data The data returned from getImageData\n * @param {number} offset The pixel offset from the start of data.\n * @return {boolean} true if the diagonal rendering is broken\n */\nfunction verifyBrokenDiagonalRendering(data, offset) {\n    // the values ought to be close to the rgba(210, 0, 0, 0.75)\n    return (Math.abs(data[offset * 4] - 210) > 2 ||\n        Math.abs(data[offset * 4 + 3] - 0.75 * 255) > 2);\n}\n/**\n * Determines if the current browser configuration can render triangular clip regions correctly.\n * This value is cached so the function is only expensive the first time called.\n * Firefox on Windows (as of now) does not if HWA is enabled. See https://bugzilla.mozilla.org/show_bug.cgi?id=1606976\n * IE also doesn't. Chrome works, and everything seems to work on OSX and Android. This function caches the\n * result. I suppose that it is conceivably possible that a browser might flip modes while the app is\n * running, but lets hope not.\n *\n * @return {boolean} true if the Diagonal Rendering is broken.\n */\nfunction isBrokenDiagonalRendering() {\n    if (brokenDiagonalRendering_ === undefined) {\n        var ctx = document.createElement('canvas').getContext('2d');\n        ctx.globalCompositeOperation = 'lighter';\n        ctx.fillStyle = 'rgba(210, 0, 0, 0.75)';\n        drawTestTriangle(ctx, 4, 5, 4, 0);\n        drawTestTriangle(ctx, 4, 5, 0, 5);\n        var data = ctx.getImageData(0, 0, 3, 3).data;\n        brokenDiagonalRendering_ =\n            verifyBrokenDiagonalRendering(data, 0) ||\n                verifyBrokenDiagonalRendering(data, 4) ||\n                verifyBrokenDiagonalRendering(data, 8);\n    }\n    return brokenDiagonalRendering_;\n}\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {import(\"./proj/Projection.js\").default} sourceProj Source projection.\n * @param {import(\"./proj/Projection.js\").default} targetProj Target projection.\n * @param {import(\"./coordinate.js\").Coordinate} targetCenter Target center.\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\nexport function calculateSourceResolution(sourceProj, targetProj, targetCenter, targetResolution) {\n    var sourceCenter = transform(targetCenter, targetProj, sourceProj);\n    // calculate the ideal resolution of the source data\n    var sourceResolution = getPointResolution(targetProj, targetResolution, targetCenter);\n    var targetMetersPerUnit = targetProj.getMetersPerUnit();\n    if (targetMetersPerUnit !== undefined) {\n        sourceResolution *= targetMetersPerUnit;\n    }\n    var sourceMetersPerUnit = sourceProj.getMetersPerUnit();\n    if (sourceMetersPerUnit !== undefined) {\n        sourceResolution /= sourceMetersPerUnit;\n    }\n    // Based on the projection properties, the point resolution at the specified\n    // coordinates may be slightly different. We need to reverse-compensate this\n    // in order to achieve optimal results.\n    var sourceExtent = sourceProj.getExtent();\n    if (!sourceExtent || containsCoordinate(sourceExtent, sourceCenter)) {\n        var compensationFactor = getPointResolution(sourceProj, sourceResolution, sourceCenter) /\n            sourceResolution;\n        if (isFinite(compensationFactor) && compensationFactor > 0) {\n            sourceResolution /= compensationFactor;\n        }\n    }\n    return sourceResolution;\n}\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {import(\"./proj/Projection.js\").default} sourceProj Source projection.\n * @param {import(\"./proj/Projection.js\").default} targetProj Target projection.\n * @param {import(\"./extent.js\").Extent} targetExtent Target extent\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\nexport function calculateSourceExtentResolution(sourceProj, targetProj, targetExtent, targetResolution) {\n    var targetCenter = getCenter(targetExtent);\n    var sourceResolution = calculateSourceResolution(sourceProj, targetProj, targetCenter, targetResolution);\n    if (!isFinite(sourceResolution) || sourceResolution <= 0) {\n        forEachCorner(targetExtent, function (corner) {\n            sourceResolution = calculateSourceResolution(sourceProj, targetProj, corner, targetResolution);\n            return isFinite(sourceResolution) && sourceResolution > 0;\n        });\n    }\n    return sourceResolution;\n}\n/**\n * @typedef {Object} ImageExtent\n * @property {import(\"./extent.js\").Extent} extent Extent.\n * @property {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n */\n/**\n * Renders the source data into new canvas based on the triangulation.\n *\n * @param {number} width Width of the canvas.\n * @param {number} height Height of the canvas.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} sourceResolution Source resolution.\n * @param {import(\"./extent.js\").Extent} sourceExtent Extent of the data source.\n * @param {number} targetResolution Target resolution.\n * @param {import(\"./extent.js\").Extent} targetExtent Target extent.\n * @param {import(\"./reproj/Triangulation.js\").default} triangulation Calculated triangulation.\n * @param {Array<ImageExtent>} sources Array of sources.\n * @param {number} gutter Gutter of the sources.\n * @param {boolean} [opt_renderEdges] Render reprojection edges.\n * @param {boolean} [opt_interpolate] Use linear interpolation when resampling.\n * @return {HTMLCanvasElement} Canvas with reprojected data.\n */\nexport function render(width, height, pixelRatio, sourceResolution, sourceExtent, targetResolution, targetExtent, triangulation, sources, gutter, opt_renderEdges, opt_interpolate) {\n    var context = createCanvasContext2D(Math.round(pixelRatio * width), Math.round(pixelRatio * height), canvasPool);\n    if (!opt_interpolate) {\n        assign(context, IMAGE_SMOOTHING_DISABLED);\n    }\n    if (sources.length === 0) {\n        return context.canvas;\n    }\n    context.scale(pixelRatio, pixelRatio);\n    function pixelRound(value) {\n        return Math.round(value * pixelRatio) / pixelRatio;\n    }\n    context.globalCompositeOperation = 'lighter';\n    var sourceDataExtent = createEmpty();\n    sources.forEach(function (src, i, arr) {\n        extend(sourceDataExtent, src.extent);\n    });\n    var canvasWidthInUnits = getWidth(sourceDataExtent);\n    var canvasHeightInUnits = getHeight(sourceDataExtent);\n    var stitchContext = createCanvasContext2D(Math.round((pixelRatio * canvasWidthInUnits) / sourceResolution), Math.round((pixelRatio * canvasHeightInUnits) / sourceResolution));\n    if (!opt_interpolate) {\n        assign(stitchContext, IMAGE_SMOOTHING_DISABLED);\n    }\n    var stitchScale = pixelRatio / sourceResolution;\n    sources.forEach(function (src, i, arr) {\n        var xPos = src.extent[0] - sourceDataExtent[0];\n        var yPos = -(src.extent[3] - sourceDataExtent[3]);\n        var srcWidth = getWidth(src.extent);\n        var srcHeight = getHeight(src.extent);\n        // This test should never fail -- but it does. Need to find a fix the upstream condition\n        if (src.image.width > 0 && src.image.height > 0) {\n            stitchContext.drawImage(src.image, gutter, gutter, src.image.width - 2 * gutter, src.image.height - 2 * gutter, xPos * stitchScale, yPos * stitchScale, srcWidth * stitchScale, srcHeight * stitchScale);\n        }\n    });\n    var targetTopLeft = getTopLeft(targetExtent);\n    triangulation.getTriangles().forEach(function (triangle, i, arr) {\n        /* Calculate affine transform (src -> dst)\n         * Resulting matrix can be used to transform coordinate\n         * from `sourceProjection` to destination pixels.\n         *\n         * To optimize number of context calls and increase numerical stability,\n         * we also do the following operations:\n         * trans(-topLeftExtentCorner), scale(1 / targetResolution), scale(1, -1)\n         * here before solving the linear system so [ui, vi] are pixel coordinates.\n         *\n         * Src points: xi, yi\n         * Dst points: ui, vi\n         * Affine coefficients: aij\n         *\n         * | x0 y0 1  0  0 0 |   |a00|   |u0|\n         * | x1 y1 1  0  0 0 |   |a01|   |u1|\n         * | x2 y2 1  0  0 0 | x |a02| = |u2|\n         * |  0  0 0 x0 y0 1 |   |a10|   |v0|\n         * |  0  0 0 x1 y1 1 |   |a11|   |v1|\n         * |  0  0 0 x2 y2 1 |   |a12|   |v2|\n         */\n        var source = triangle.source;\n        var target = triangle.target;\n        var x0 = source[0][0], y0 = source[0][1];\n        var x1 = source[1][0], y1 = source[1][1];\n        var x2 = source[2][0], y2 = source[2][1];\n        // Make sure that everything is on pixel boundaries\n        var u0 = pixelRound((target[0][0] - targetTopLeft[0]) / targetResolution);\n        var v0 = pixelRound(-(target[0][1] - targetTopLeft[1]) / targetResolution);\n        var u1 = pixelRound((target[1][0] - targetTopLeft[0]) / targetResolution);\n        var v1 = pixelRound(-(target[1][1] - targetTopLeft[1]) / targetResolution);\n        var u2 = pixelRound((target[2][0] - targetTopLeft[0]) / targetResolution);\n        var v2 = pixelRound(-(target[2][1] - targetTopLeft[1]) / targetResolution);\n        // Shift all the source points to improve numerical stability\n        // of all the subsequent calculations. The [x0, y0] is used here.\n        // This is also used to simplify the linear system.\n        var sourceNumericalShiftX = x0;\n        var sourceNumericalShiftY = y0;\n        x0 = 0;\n        y0 = 0;\n        x1 -= sourceNumericalShiftX;\n        y1 -= sourceNumericalShiftY;\n        x2 -= sourceNumericalShiftX;\n        y2 -= sourceNumericalShiftY;\n        var augmentedMatrix = [\n            [x1, y1, 0, 0, u1 - u0],\n            [x2, y2, 0, 0, u2 - u0],\n            [0, 0, x1, y1, v1 - v0],\n            [0, 0, x2, y2, v2 - v0],\n        ];\n        var affineCoefs = solveLinearSystem(augmentedMatrix);\n        if (!affineCoefs) {\n            return;\n        }\n        context.save();\n        context.beginPath();\n        if (isBrokenDiagonalRendering() || !opt_interpolate) {\n            // Make sure that all lines are horizontal or vertical\n            context.moveTo(u1, v1);\n            // This is the diagonal line. Do it in 4 steps\n            var steps = 4;\n            var ud = u0 - u1;\n            var vd = v0 - v1;\n            for (var step = 0; step < steps; step++) {\n                // Go horizontally\n                context.lineTo(u1 + pixelRound(((step + 1) * ud) / steps), v1 + pixelRound((step * vd) / (steps - 1)));\n                // Go vertically\n                if (step != steps - 1) {\n                    context.lineTo(u1 + pixelRound(((step + 1) * ud) / steps), v1 + pixelRound(((step + 1) * vd) / (steps - 1)));\n                }\n            }\n            // We are almost at u0r, v0r\n            context.lineTo(u2, v2);\n        }\n        else {\n            context.moveTo(u1, v1);\n            context.lineTo(u0, v0);\n            context.lineTo(u2, v2);\n        }\n        context.clip();\n        context.transform(affineCoefs[0], affineCoefs[2], affineCoefs[1], affineCoefs[3], u0, v0);\n        context.translate(sourceDataExtent[0] - sourceNumericalShiftX, sourceDataExtent[3] - sourceNumericalShiftY);\n        context.scale(sourceResolution / pixelRatio, -sourceResolution / pixelRatio);\n        context.drawImage(stitchContext.canvas, 0, 0);\n        context.restore();\n    });\n    if (opt_renderEdges) {\n        context.save();\n        context.globalCompositeOperation = 'source-over';\n        context.strokeStyle = 'black';\n        context.lineWidth = 1;\n        triangulation.getTriangles().forEach(function (triangle, i, arr) {\n            var target = triangle.target;\n            var u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n            var v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n            var u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n            var v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n            var u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n            var v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n            context.beginPath();\n            context.moveTo(u1, v1);\n            context.lineTo(u0, v0);\n            context.lineTo(u2, v2);\n            context.closePath();\n            context.stroke();\n        });\n        context.restore();\n    }\n    return context.canvas;\n}\n//# sourceMappingURL=reproj.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/Point\n */\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { containsXY, createOrUpdateFromCoordinate } from '../extent.js';\nimport { deflateCoordinate } from './flat/deflate.js';\nimport { squaredDistance as squaredDx } from '../math.js';\n/**\n * @classdesc\n * Point geometry.\n *\n * @api\n */\nvar Point = /** @class */ (function (_super) {\n    __extends(Point, _super);\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     */\n    function Point(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        _this.setCoordinates(coordinates, opt_layout);\n        return _this;\n    }\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!Point} Clone.\n     * @api\n     */\n    Point.prototype.clone = function () {\n        var point = new Point(this.flatCoordinates.slice(), this.layout);\n        point.applyProperties(this);\n        return point;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    Point.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        var flatCoordinates = this.flatCoordinates;\n        var squaredDistance = squaredDx(x, y, flatCoordinates[0], flatCoordinates[1]);\n        if (squaredDistance < minSquaredDistance) {\n            var stride = this.stride;\n            for (var i = 0; i < stride; ++i) {\n                closestPoint[i] = flatCoordinates[i];\n            }\n            closestPoint.length = stride;\n            return squaredDistance;\n        }\n        else {\n            return minSquaredDistance;\n        }\n    };\n    /**\n     * Return the coordinate of the point.\n     * @return {import(\"../coordinate.js\").Coordinate} Coordinates.\n     * @api\n     */\n    Point.prototype.getCoordinates = function () {\n        return !this.flatCoordinates ? [] : this.flatCoordinates.slice();\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @protected\n     * @return {import(\"../extent.js\").Extent} extent Extent.\n     */\n    Point.prototype.computeExtent = function (extent) {\n        return createOrUpdateFromCoordinate(this.flatCoordinates, extent);\n    };\n    /**\n     * Get the type of this geometry.\n     * @return {import(\"./Geometry.js\").Type} Geometry type.\n     * @api\n     */\n    Point.prototype.getType = function () {\n        return 'Point';\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     * @api\n     */\n    Point.prototype.intersectsExtent = function (extent) {\n        return containsXY(extent, this.flatCoordinates[0], this.flatCoordinates[1]);\n    };\n    /**\n     * @param {!Array<*>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n     * @api\n     */\n    Point.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 0);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinate(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return Point;\n}(SimpleGeometry));\nexport default Point;\n//# sourceMappingURL=Point.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Group\n */\nimport BaseLayer from './Base.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport { assert } from '../asserts.js';\nimport { assign, clear } from '../obj.js';\nimport { getIntersection } from '../extent.js';\nimport { getUid } from '../util.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @typedef {'addlayer'|'removelayer'} EventType\n */\n/**\n * @classdesc\n * A layer group triggers 'addlayer' and 'removelayer' events when layers are added to or removed from\n * the group or one of its child groups.  When a layer group is added to or removed from another layer group,\n * a single event will be triggered (instead of one per layer in the group added or removed).\n */\nvar GroupEvent = /** @class */ (function (_super) {\n    __extends(GroupEvent, _super);\n    /**\n     * @param {EventType} type The event type.\n     * @param {BaseLayer} layer The layer.\n     */\n    function GroupEvent(type, layer) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The added or removed layer.\n         * @type {BaseLayer}\n         * @api\n         */\n        _this.layer = layer;\n        return _this;\n    }\n    return GroupEvent;\n}(Event));\nexport { GroupEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:layers', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|'change:layers', Return>} GroupOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {Array<import(\"./Base.js\").default>|import(\"../Collection.js\").default<import(\"./Base.js\").default>} [layers] Child layers.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    LAYERS: 'layers',\n};\n/**\n * @classdesc\n * A {@link module:ol/Collection~Collection} of layers that are handled together.\n *\n * A generic `change` event is triggered when the group/Collection changes.\n *\n * @api\n */\nvar LayerGroup = /** @class */ (function (_super) {\n    __extends(LayerGroup, _super);\n    /**\n     * @param {Options} [opt_options] Layer options.\n     */\n    function LayerGroup(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        var baseOptions = /** @type {Options} */ (assign({}, options));\n        delete baseOptions.layers;\n        var layers = options.layers;\n        _this = _super.call(this, baseOptions) || this;\n        /***\n         * @type {GroupOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {GroupOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {GroupOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {Array<import(\"../events.js\").EventsKey>}\n         */\n        _this.layersListenerKeys_ = [];\n        /**\n         * @private\n         * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n         */\n        _this.listenerKeys_ = {};\n        _this.addChangeListener(Property.LAYERS, _this.handleLayersChanged_);\n        if (layers) {\n            if (Array.isArray(layers)) {\n                layers = new Collection(layers.slice(), { unique: true });\n            }\n            else {\n                assert(typeof ( /** @type {?} */(layers).getArray) === 'function', 43); // Expected `layers` to be an array or a `Collection`\n            }\n        }\n        else {\n            layers = new Collection(undefined, { unique: true });\n        }\n        _this.setLayers(layers);\n        return _this;\n    }\n    /**\n     * @private\n     */\n    LayerGroup.prototype.handleLayerChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    LayerGroup.prototype.handleLayersChanged_ = function () {\n        this.layersListenerKeys_.forEach(unlistenByKey);\n        this.layersListenerKeys_.length = 0;\n        var layers = this.getLayers();\n        this.layersListenerKeys_.push(listen(layers, CollectionEventType.ADD, this.handleLayersAdd_, this), listen(layers, CollectionEventType.REMOVE, this.handleLayersRemove_, this));\n        for (var id in this.listenerKeys_) {\n            this.listenerKeys_[id].forEach(unlistenByKey);\n        }\n        clear(this.listenerKeys_);\n        var layersArray = layers.getArray();\n        for (var i = 0, ii = layersArray.length; i < ii; i++) {\n            var layer = layersArray[i];\n            this.registerLayerListeners_(layer);\n            this.dispatchEvent(new GroupEvent('addlayer', layer));\n        }\n        this.changed();\n    };\n    /**\n     * @param {BaseLayer} layer The layer.\n     */\n    LayerGroup.prototype.registerLayerListeners_ = function (layer) {\n        var listenerKeys = [\n            listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n            listen(layer, EventType.CHANGE, this.handleLayerChange_, this),\n        ];\n        if (layer instanceof LayerGroup) {\n            listenerKeys.push(listen(layer, 'addlayer', this.handleLayerGroupAdd_, this), listen(layer, 'removelayer', this.handleLayerGroupRemove_, this));\n        }\n        this.listenerKeys_[getUid(layer)] = listenerKeys;\n    };\n    /**\n     * @param {GroupEvent} event The layer group event.\n     */\n    LayerGroup.prototype.handleLayerGroupAdd_ = function (event) {\n        this.dispatchEvent(new GroupEvent('addlayer', event.layer));\n    };\n    /**\n     * @param {GroupEvent} event The layer group event.\n     */\n    LayerGroup.prototype.handleLayerGroupRemove_ = function (event) {\n        this.dispatchEvent(new GroupEvent('removelayer', event.layer));\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n     * @private\n     */\n    LayerGroup.prototype.handleLayersAdd_ = function (collectionEvent) {\n        var layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n        this.registerLayerListeners_(layer);\n        this.dispatchEvent(new GroupEvent('addlayer', layer));\n        this.changed();\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n     * @private\n     */\n    LayerGroup.prototype.handleLayersRemove_ = function (collectionEvent) {\n        var layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n        var key = getUid(layer);\n        this.listenerKeys_[key].forEach(unlistenByKey);\n        delete this.listenerKeys_[key];\n        this.dispatchEvent(new GroupEvent('removelayer', layer));\n        this.changed();\n    };\n    /**\n     * Returns the {@link module:ol/Collection~Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n     * in this group.\n     * @return {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} Collection of\n     *   {@link module:ol/layer/Base~BaseLayer layers} that are part of this group.\n     * @observable\n     * @api\n     */\n    LayerGroup.prototype.getLayers = function () {\n        return /** @type {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} */ (this.get(Property.LAYERS));\n    };\n    /**\n     * Set the {@link module:ol/Collection~Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n     * in this group.\n     * @param {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} layers Collection of\n     *   {@link module:ol/layer/Base~BaseLayer layers} that are part of this group.\n     * @observable\n     * @api\n     */\n    LayerGroup.prototype.setLayers = function (layers) {\n        var collection = this.getLayers();\n        if (collection) {\n            var currentLayers = collection.getArray();\n            for (var i = 0, ii = currentLayers.length; i < ii; ++i) {\n                this.dispatchEvent(new GroupEvent('removelayer', currentLayers[i]));\n            }\n        }\n        this.set(Property.LAYERS, layers);\n    };\n    /**\n     * @param {Array<import(\"./Layer.js\").default>} [opt_array] Array of layers (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n     */\n    LayerGroup.prototype.getLayersArray = function (opt_array) {\n        var array = opt_array !== undefined ? opt_array : [];\n        this.getLayers().forEach(function (layer) {\n            layer.getLayersArray(array);\n        });\n        return array;\n    };\n    /**\n     * Get the layer states list and use this groups z-index as the default\n     * for all layers in this and nested groups, if it is unset at this point.\n     * If opt_states is not provided and this group's z-index is undefined\n     * 0 is used a the default z-index.\n     * @param {Array<import(\"./Layer.js\").State>} [opt_states] Optional list\n     * of layer states (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n     */\n    LayerGroup.prototype.getLayerStatesArray = function (opt_states) {\n        var states = opt_states !== undefined ? opt_states : [];\n        var pos = states.length;\n        this.getLayers().forEach(function (layer) {\n            layer.getLayerStatesArray(states);\n        });\n        var ownLayerState = this.getLayerState();\n        var defaultZIndex = ownLayerState.zIndex;\n        if (!opt_states && ownLayerState.zIndex === undefined) {\n            defaultZIndex = 0;\n        }\n        for (var i = pos, ii = states.length; i < ii; i++) {\n            var layerState = states[i];\n            layerState.opacity *= ownLayerState.opacity;\n            layerState.visible = layerState.visible && ownLayerState.visible;\n            layerState.maxResolution = Math.min(layerState.maxResolution, ownLayerState.maxResolution);\n            layerState.minResolution = Math.max(layerState.minResolution, ownLayerState.minResolution);\n            layerState.minZoom = Math.max(layerState.minZoom, ownLayerState.minZoom);\n            layerState.maxZoom = Math.min(layerState.maxZoom, ownLayerState.maxZoom);\n            if (ownLayerState.extent !== undefined) {\n                if (layerState.extent !== undefined) {\n                    layerState.extent = getIntersection(layerState.extent, ownLayerState.extent);\n                }\n                else {\n                    layerState.extent = ownLayerState.extent;\n                }\n            }\n            if (layerState.zIndex === undefined) {\n                layerState.zIndex = defaultZIndex;\n            }\n        }\n        return states;\n    };\n    /**\n     * @return {import(\"../source/Source.js\").State} Source state.\n     */\n    LayerGroup.prototype.getSourceState = function () {\n        return 'ready';\n    };\n    return LayerGroup;\n}(BaseLayer));\nexport default LayerGroup;\n//# sourceMappingURL=Group.js.map","/**\n * @module ol/MapBrowserEventHandler\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport EventType from './events/EventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport Target from './events/Target.js';\nimport { PASSIVE_EVENT_LISTENERS } from './has.js';\nimport { VOID } from './functions.js';\nimport { getValues } from './obj.js';\nimport { listen, unlistenByKey } from './events.js';\nvar MapBrowserEventHandler = /** @class */ (function (_super) {\n    __extends(MapBrowserEventHandler, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").default} map The map with the viewport to listen to events on.\n     * @param {number} [moveTolerance] The minimal distance the pointer must travel to trigger a move.\n     */\n    function MapBrowserEventHandler(map, moveTolerance) {\n        var _this = _super.call(this, map) || this;\n        /**\n         * This is the element that we will listen to the real events on.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @private\n         */\n        _this.map_ = map;\n        /**\n         * @type {any}\n         * @private\n         */\n        _this.clickTimeoutId_;\n        /**\n         * Emulate dblclick and singleclick. Will be true when only one pointer is active.\n         * @type {boolean}\n         */\n        _this.emulateClicks_ = false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.dragging_ = false;\n        /**\n         * @type {!Array<import(\"./events.js\").EventsKey>}\n         * @private\n         */\n        _this.dragListenerKeys_ = [];\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.moveTolerance_ = moveTolerance === undefined ? 1 : moveTolerance;\n        /**\n         * The most recent \"down\" type event (or null if none have occurred).\n         * Set on pointerdown.\n         * @type {PointerEvent|null}\n         * @private\n         */\n        _this.down_ = null;\n        var element = _this.map_.getViewport();\n        /**\n         * @type {Array<PointerEvent>}\n         * @private\n         */\n        _this.activePointers_ = [];\n        /**\n         * @type {!Object<number, Event>}\n         * @private\n         */\n        _this.trackedTouches_ = {};\n        _this.element_ = element;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.pointerdownListenerKey_ = listen(element, PointerEventType.POINTERDOWN, _this.handlePointerDown_, _this);\n        /**\n         * @type {PointerEvent}\n         * @private\n         */\n        _this.originalPointerMoveEvent_;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.relayedListenerKey_ = listen(element, PointerEventType.POINTERMOVE, _this.relayMoveEvent_, _this);\n        /**\n         * @private\n         */\n        _this.boundHandleTouchMove_ = _this.handleTouchMove_.bind(_this);\n        _this.element_.addEventListener(EventType.TOUCHMOVE, _this.boundHandleTouchMove_, PASSIVE_EVENT_LISTENERS ? { passive: false } : false);\n        return _this;\n    }\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.emulateClick_ = function (pointerEvent) {\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.CLICK, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        if (this.clickTimeoutId_ !== undefined) {\n            // double-click\n            clearTimeout(this.clickTimeoutId_);\n            this.clickTimeoutId_ = undefined;\n            newEvent = new MapBrowserEvent(MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n            this.dispatchEvent(newEvent);\n        }\n        else {\n            // click\n            this.clickTimeoutId_ = setTimeout(\n            /** @this {MapBrowserEventHandler} */\n            function () {\n                this.clickTimeoutId_ = undefined;\n                var newEvent = new MapBrowserEvent(MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n                this.dispatchEvent(newEvent);\n            }.bind(this), 250);\n        }\n    };\n    /**\n     * Keeps track on how many pointers are currently active.\n     *\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.updateActivePointers_ = function (pointerEvent) {\n        var event = pointerEvent;\n        var id = event.pointerId;\n        if (event.type == MapBrowserEventType.POINTERUP ||\n            event.type == MapBrowserEventType.POINTERCANCEL) {\n            delete this.trackedTouches_[id];\n            for (var pointerId in this.trackedTouches_) {\n                if (this.trackedTouches_[pointerId].target !== event.target) {\n                    // Some platforms assign a new pointerId when the target changes.\n                    // If this happens, delete one tracked pointer. If there is more\n                    // than one tracked pointer for the old target, it will be cleared\n                    // by subsequent POINTERUP events from other pointers.\n                    delete this.trackedTouches_[pointerId];\n                    break;\n                }\n            }\n        }\n        else if (event.type == MapBrowserEventType.POINTERDOWN ||\n            event.type == MapBrowserEventType.POINTERMOVE) {\n            this.trackedTouches_[id] = event;\n        }\n        this.activePointers_ = getValues(this.trackedTouches_);\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerUp_ = function (pointerEvent) {\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERUP, this.map_, pointerEvent, undefined, undefined, this.activePointers_);\n        this.dispatchEvent(newEvent);\n        // We emulate click events on left mouse button click, touch contact, and pen\n        // contact. isMouseActionButton returns true in these cases (evt.button is set\n        // to 0).\n        // See http://www.w3.org/TR/pointerevents/#button-states\n        // We only fire click, singleclick, and doubleclick if nobody has called\n        // event.preventDefault().\n        if (this.emulateClicks_ &&\n            !newEvent.defaultPrevented &&\n            !this.dragging_ &&\n            this.isMouseActionButton_(pointerEvent)) {\n            this.emulateClick_(this.down_);\n        }\n        if (this.activePointers_.length === 0) {\n            this.dragListenerKeys_.forEach(unlistenByKey);\n            this.dragListenerKeys_.length = 0;\n            this.dragging_ = false;\n            this.down_ = null;\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} If the left mouse button was pressed.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMouseActionButton_ = function (pointerEvent) {\n        return pointerEvent.button === 0;\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerDown_ = function (pointerEvent) {\n        this.emulateClicks_ = this.activePointers_.length === 0;\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent, undefined, undefined, this.activePointers_);\n        this.dispatchEvent(newEvent);\n        // Store a copy of the down event\n        this.down_ = /** @type {PointerEvent} */ ({});\n        for (var property in pointerEvent) {\n            var value = pointerEvent[property];\n            this.down_[property] = typeof value === 'function' ? VOID : value;\n        }\n        if (this.dragListenerKeys_.length === 0) {\n            var doc = this.map_.getOwnerDocument();\n            this.dragListenerKeys_.push(listen(doc, MapBrowserEventType.POINTERMOVE, this.handlePointerMove_, this), listen(doc, MapBrowserEventType.POINTERUP, this.handlePointerUp_, this), \n            /* Note that the listener for `pointercancel is set up on\n             * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n             * the `pointerup` and `pointermove` listeners.\n             *\n             * The reason for this is the following: `TouchSource.vacuumTouches_()`\n             * issues `pointercancel` events, when there was no `touchend` for a\n             * `touchstart`. Now, let's say a first `touchstart` is registered on\n             * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n             * But `documentPointerEventHandler_` doesn't know about the first\n             * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n             * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n             * only registered there.\n             */\n            listen(this.element_, MapBrowserEventType.POINTERCANCEL, this.handlePointerUp_, this));\n            if (this.element_.getRootNode && this.element_.getRootNode() !== doc) {\n                this.dragListenerKeys_.push(listen(this.element_.getRootNode(), MapBrowserEventType.POINTERUP, this.handlePointerUp_, this));\n            }\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerMove_ = function (pointerEvent) {\n        // Between pointerdown and pointerup, pointermove events are triggered.\n        // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n        // moved a significant distance.\n        if (this.isMoving_(pointerEvent)) {\n            this.updateActivePointers_(pointerEvent);\n            this.dragging_ = true;\n            var newEvent = new MapBrowserEvent(MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent, this.dragging_, undefined, this.activePointers_);\n            this.dispatchEvent(newEvent);\n        }\n    };\n    /**\n     * Wrap and relay a pointermove event.\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.relayMoveEvent_ = function (pointerEvent) {\n        this.originalPointerMoveEvent_ = pointerEvent;\n        var dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n        this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE, this.map_, pointerEvent, dragging));\n    };\n    /**\n     * Flexible handling of a `touch-action: none` css equivalent: because calling\n     * `preventDefault()` on a `pointermove` event does not stop native page scrolling\n     * and zooming, we also listen for `touchmove` and call `preventDefault()` on it\n     * when an interaction (currently `DragPan` handles the event.\n     * @param {TouchEvent} event Event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handleTouchMove_ = function (event) {\n        // Due to https://github.com/mpizenberg/elm-pep/issues/2, `this.originalPointerMoveEvent_`\n        // may not be initialized yet when we get here on a platform without native pointer events.\n        var originalEvent = this.originalPointerMoveEvent_;\n        if ((!originalEvent || originalEvent.defaultPrevented) &&\n            (typeof event.cancelable !== 'boolean' || event.cancelable === true)) {\n            event.preventDefault();\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} Is moving.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMoving_ = function (pointerEvent) {\n        return (this.dragging_ ||\n            Math.abs(pointerEvent.clientX - this.down_.clientX) >\n                this.moveTolerance_ ||\n            Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_);\n    };\n    /**\n     * Clean up.\n     */\n    MapBrowserEventHandler.prototype.disposeInternal = function () {\n        if (this.relayedListenerKey_) {\n            unlistenByKey(this.relayedListenerKey_);\n            this.relayedListenerKey_ = null;\n        }\n        this.element_.removeEventListener(EventType.TOUCHMOVE, this.boundHandleTouchMove_);\n        if (this.pointerdownListenerKey_) {\n            unlistenByKey(this.pointerdownListenerKey_);\n            this.pointerdownListenerKey_ = null;\n        }\n        this.dragListenerKeys_.forEach(unlistenByKey);\n        this.dragListenerKeys_.length = 0;\n        this.element_ = null;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return MapBrowserEventHandler;\n}(Target));\nexport default MapBrowserEventHandler;\n//# sourceMappingURL=MapBrowserEventHandler.js.map","/**\n * @module ol/structs/PriorityQueue\n */\nimport { assert } from '../asserts.js';\nimport { clear } from '../obj.js';\n/**\n * @type {number}\n */\nexport var DROP = Infinity;\n/**\n * @classdesc\n * Priority queue.\n *\n * The implementation is inspired from the Closure Library's Heap class and\n * Python's heapq module.\n *\n * See https://github.com/google/closure-library/blob/master/closure/goog/structs/heap.js\n * and https://hg.python.org/cpython/file/2.7/Lib/heapq.py.\n *\n * @template T\n */\nvar PriorityQueue = /** @class */ (function () {\n    /**\n     * @param {function(T): number} priorityFunction Priority function.\n     * @param {function(T): string} keyFunction Key function.\n     */\n    function PriorityQueue(priorityFunction, keyFunction) {\n        /**\n         * @type {function(T): number}\n         * @private\n         */\n        this.priorityFunction_ = priorityFunction;\n        /**\n         * @type {function(T): string}\n         * @private\n         */\n        this.keyFunction_ = keyFunction;\n        /**\n         * @type {Array<T>}\n         * @private\n         */\n        this.elements_ = [];\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        this.priorities_ = [];\n        /**\n         * @type {!Object<string, boolean>}\n         * @private\n         */\n        this.queuedElements_ = {};\n    }\n    /**\n     * FIXME empty description for jsdoc\n     */\n    PriorityQueue.prototype.clear = function () {\n        this.elements_.length = 0;\n        this.priorities_.length = 0;\n        clear(this.queuedElements_);\n    };\n    /**\n     * Remove and return the highest-priority element. O(log N).\n     * @return {T} Element.\n     */\n    PriorityQueue.prototype.dequeue = function () {\n        var elements = this.elements_;\n        var priorities = this.priorities_;\n        var element = elements[0];\n        if (elements.length == 1) {\n            elements.length = 0;\n            priorities.length = 0;\n        }\n        else {\n            elements[0] = elements.pop();\n            priorities[0] = priorities.pop();\n            this.siftUp_(0);\n        }\n        var elementKey = this.keyFunction_(element);\n        delete this.queuedElements_[elementKey];\n        return element;\n    };\n    /**\n     * Enqueue an element. O(log N).\n     * @param {T} element Element.\n     * @return {boolean} The element was added to the queue.\n     */\n    PriorityQueue.prototype.enqueue = function (element) {\n        assert(!(this.keyFunction_(element) in this.queuedElements_), 31); // Tried to enqueue an `element` that was already added to the queue\n        var priority = this.priorityFunction_(element);\n        if (priority != DROP) {\n            this.elements_.push(element);\n            this.priorities_.push(priority);\n            this.queuedElements_[this.keyFunction_(element)] = true;\n            this.siftDown_(0, this.elements_.length - 1);\n            return true;\n        }\n        return false;\n    };\n    /**\n     * @return {number} Count.\n     */\n    PriorityQueue.prototype.getCount = function () {\n        return this.elements_.length;\n    };\n    /**\n     * Gets the index of the left child of the node at the given index.\n     * @param {number} index The index of the node to get the left child for.\n     * @return {number} The index of the left child.\n     * @private\n     */\n    PriorityQueue.prototype.getLeftChildIndex_ = function (index) {\n        return index * 2 + 1;\n    };\n    /**\n     * Gets the index of the right child of the node at the given index.\n     * @param {number} index The index of the node to get the right child for.\n     * @return {number} The index of the right child.\n     * @private\n     */\n    PriorityQueue.prototype.getRightChildIndex_ = function (index) {\n        return index * 2 + 2;\n    };\n    /**\n     * Gets the index of the parent of the node at the given index.\n     * @param {number} index The index of the node to get the parent for.\n     * @return {number} The index of the parent.\n     * @private\n     */\n    PriorityQueue.prototype.getParentIndex_ = function (index) {\n        return (index - 1) >> 1;\n    };\n    /**\n     * Make this a heap. O(N).\n     * @private\n     */\n    PriorityQueue.prototype.heapify_ = function () {\n        var i;\n        for (i = (this.elements_.length >> 1) - 1; i >= 0; i--) {\n            this.siftUp_(i);\n        }\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    PriorityQueue.prototype.isEmpty = function () {\n        return this.elements_.length === 0;\n    };\n    /**\n     * @param {string} key Key.\n     * @return {boolean} Is key queued.\n     */\n    PriorityQueue.prototype.isKeyQueued = function (key) {\n        return key in this.queuedElements_;\n    };\n    /**\n     * @param {T} element Element.\n     * @return {boolean} Is queued.\n     */\n    PriorityQueue.prototype.isQueued = function (element) {\n        return this.isKeyQueued(this.keyFunction_(element));\n    };\n    /**\n     * @param {number} index The index of the node to move down.\n     * @private\n     */\n    PriorityQueue.prototype.siftUp_ = function (index) {\n        var elements = this.elements_;\n        var priorities = this.priorities_;\n        var count = elements.length;\n        var element = elements[index];\n        var priority = priorities[index];\n        var startIndex = index;\n        while (index < count >> 1) {\n            var lIndex = this.getLeftChildIndex_(index);\n            var rIndex = this.getRightChildIndex_(index);\n            var smallerChildIndex = rIndex < count && priorities[rIndex] < priorities[lIndex]\n                ? rIndex\n                : lIndex;\n            elements[index] = elements[smallerChildIndex];\n            priorities[index] = priorities[smallerChildIndex];\n            index = smallerChildIndex;\n        }\n        elements[index] = element;\n        priorities[index] = priority;\n        this.siftDown_(startIndex, index);\n    };\n    /**\n     * @param {number} startIndex The index of the root.\n     * @param {number} index The index of the node to move up.\n     * @private\n     */\n    PriorityQueue.prototype.siftDown_ = function (startIndex, index) {\n        var elements = this.elements_;\n        var priorities = this.priorities_;\n        var element = elements[index];\n        var priority = priorities[index];\n        while (index > startIndex) {\n            var parentIndex = this.getParentIndex_(index);\n            if (priorities[parentIndex] > priority) {\n                elements[index] = elements[parentIndex];\n                priorities[index] = priorities[parentIndex];\n                index = parentIndex;\n            }\n            else {\n                break;\n            }\n        }\n        elements[index] = element;\n        priorities[index] = priority;\n    };\n    /**\n     * FIXME empty description for jsdoc\n     */\n    PriorityQueue.prototype.reprioritize = function () {\n        var priorityFunction = this.priorityFunction_;\n        var elements = this.elements_;\n        var priorities = this.priorities_;\n        var index = 0;\n        var n = elements.length;\n        var element, i, priority;\n        for (i = 0; i < n; ++i) {\n            element = elements[i];\n            priority = priorityFunction(element);\n            if (priority == DROP) {\n                delete this.queuedElements_[this.keyFunction_(element)];\n            }\n            else {\n                priorities[index] = priority;\n                elements[index++] = element;\n            }\n        }\n        elements.length = index;\n        priorities.length = index;\n        this.heapify_();\n    };\n    return PriorityQueue;\n}());\nexport default PriorityQueue;\n//# sourceMappingURL=PriorityQueue.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/TileQueue\n */\nimport EventType from './events/EventType.js';\nimport PriorityQueue, { DROP } from './structs/PriorityQueue.js';\nimport TileState from './TileState.js';\n/**\n * @typedef {function(import(\"./Tile.js\").default, string, import(\"./coordinate.js\").Coordinate, number): number} PriorityFunction\n */\nvar TileQueue = /** @class */ (function (_super) {\n    __extends(TileQueue, _super);\n    /**\n     * @param {PriorityFunction} tilePriorityFunction Tile priority function.\n     * @param {function(): ?} tileChangeCallback Function called on each tile change event.\n     */\n    function TileQueue(tilePriorityFunction, tileChangeCallback) {\n        var _this = _super.call(this, \n        /**\n         * @param {Array} element Element.\n         * @return {number} Priority.\n         */\n        function (element) {\n            return tilePriorityFunction.apply(null, element);\n        }, \n        /**\n         * @param {Array} element Element.\n         * @return {string} Key.\n         */\n        function (element) {\n            return /** @type {import(\"./Tile.js\").default} */ (element[0]).getKey();\n        }) || this;\n        /** @private */\n        _this.boundHandleTileChange_ = _this.handleTileChange.bind(_this);\n        /**\n         * @private\n         * @type {function(): ?}\n         */\n        _this.tileChangeCallback_ = tileChangeCallback;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.tilesLoading_ = 0;\n        /**\n         * @private\n         * @type {!Object<string,boolean>}\n         */\n        _this.tilesLoadingKeys_ = {};\n        return _this;\n    }\n    /**\n     * @param {Array} element Element.\n     * @return {boolean} The element was added to the queue.\n     */\n    TileQueue.prototype.enqueue = function (element) {\n        var added = _super.prototype.enqueue.call(this, element);\n        if (added) {\n            var tile = element[0];\n            tile.addEventListener(EventType.CHANGE, this.boundHandleTileChange_);\n        }\n        return added;\n    };\n    /**\n     * @return {number} Number of tiles loading.\n     */\n    TileQueue.prototype.getTilesLoading = function () {\n        return this.tilesLoading_;\n    };\n    /**\n     * @param {import(\"./events/Event.js\").default} event Event.\n     * @protected\n     */\n    TileQueue.prototype.handleTileChange = function (event) {\n        var tile = /** @type {import(\"./Tile.js\").default} */ (event.target);\n        var state = tile.getState();\n        if (state === TileState.LOADED ||\n            state === TileState.ERROR ||\n            state === TileState.EMPTY) {\n            tile.removeEventListener(EventType.CHANGE, this.boundHandleTileChange_);\n            var tileKey = tile.getKey();\n            if (tileKey in this.tilesLoadingKeys_) {\n                delete this.tilesLoadingKeys_[tileKey];\n                --this.tilesLoading_;\n            }\n            this.tileChangeCallback_();\n        }\n    };\n    /**\n     * @param {number} maxTotalLoading Maximum number tiles to load simultaneously.\n     * @param {number} maxNewLoads Maximum number of new tiles to load.\n     */\n    TileQueue.prototype.loadMoreTiles = function (maxTotalLoading, maxNewLoads) {\n        var newLoads = 0;\n        var state, tile, tileKey;\n        while (this.tilesLoading_ < maxTotalLoading &&\n            newLoads < maxNewLoads &&\n            this.getCount() > 0) {\n            tile = /** @type {import(\"./Tile.js\").default} */ (this.dequeue()[0]);\n            tileKey = tile.getKey();\n            state = tile.getState();\n            if (state === TileState.IDLE && !(tileKey in this.tilesLoadingKeys_)) {\n                this.tilesLoadingKeys_[tileKey] = true;\n                ++this.tilesLoading_;\n                ++newLoads;\n                tile.load();\n            }\n        }\n    };\n    return TileQueue;\n}(PriorityQueue));\nexport default TileQueue;\n/**\n * @param {import('./PluggableMap.js').FrameState} frameState Frame state.\n * @param {import(\"./Tile.js\").default} tile Tile.\n * @param {string} tileSourceKey Tile source key.\n * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n * @param {number} tileResolution Tile resolution.\n * @return {number} Tile priority.\n */\nexport function getTilePriority(frameState, tile, tileSourceKey, tileCenter, tileResolution) {\n    // Filter out tiles at higher zoom levels than the current zoom level, or that\n    // are outside the visible extent.\n    if (!frameState || !(tileSourceKey in frameState.wantedTiles)) {\n        return DROP;\n    }\n    if (!frameState.wantedTiles[tileSourceKey][tile.getKey()]) {\n        return DROP;\n    }\n    // Prioritize the highest zoom level tiles closest to the focus.\n    // Tiles at higher zoom levels are prioritized using Math.log(tileResolution).\n    // Within a zoom level, tiles are prioritized by the distance in pixels between\n    // the center of the tile and the center of the viewport.  The factor of 65536\n    // means that the prioritization should behave as desired for tiles up to\n    // 65536 * Math.log(2) = 45426 pixels from the focus.\n    var center = frameState.viewState.center;\n    var deltaX = tileCenter[0] - center[0];\n    var deltaY = tileCenter[1] - center[1];\n    return (65536 * Math.log(tileResolution) +\n        Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution);\n}\n//# sourceMappingURL=TileQueue.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/PluggableMap\n */\nimport BaseObject from './Object.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport EventType from './events/EventType.js';\nimport Layer from './layer/Layer.js';\nimport LayerGroup, { GroupEvent } from './layer/Group.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport RenderEventType from './render/EventType.js';\nimport TileQueue, { getTilePriority } from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport { DEVICE_PIXEL_RATIO, PASSIVE_EVENT_LISTENERS } from './has.js';\nimport { TRUE } from './functions.js';\nimport { apply as applyTransform, create as createTransform, } from './transform.js';\nimport { assert } from './asserts.js';\nimport { clone, createOrUpdateEmpty, equals, getForViewAndSize, isEmpty, } from './extent.js';\nimport { fromUserCoordinate, toUserCoordinate } from './proj.js';\nimport { getUid } from './util.js';\nimport { hasArea } from './size.js';\nimport { listen, unlistenByKey } from './events.js';\nimport { removeNode } from './dom.js';\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {import(\"./View.js\").State} viewState The state of the current view.\n * @property {boolean} animate Animate.\n * @property {import(\"./transform.js\").Transform} coordinateToPixelTransform CoordinateToPixelTransform.\n * @property {import(\"rbush\").default} declutterTree DeclutterTree.\n * @property {null|import(\"./extent.js\").Extent} extent Extent.\n * @property {import(\"./extent.js\").Extent} [nextExtent] Next extent during an animation series.\n * @property {number} index Index.\n * @property {Array<import(\"./layer/Layer.js\").State>} layerStatesArray LayerStatesArray.\n * @property {number} layerIndex LayerIndex.\n * @property {import(\"./transform.js\").Transform} pixelToCoordinateTransform PixelToCoordinateTransform.\n * @property {Array<PostRenderFunction>} postRenderFunctions PostRenderFunctions.\n * @property {import(\"./size.js\").Size} size Size.\n * @property {TileQueue} tileQueue TileQueue.\n * @property {!Object<string, Object<string, boolean>>} usedTiles UsedTiles.\n * @property {Array<number>} viewHints ViewHints.\n * @property {!Object<string, Object<string, boolean>>} wantedTiles WantedTiles.\n * @property {string} mapId The id of the map.\n * @property {Object<string, boolean>} renderTargets Identifiers of previously rendered elements.\n */\n/**\n * @typedef {function(PluggableMap, ?FrameState): any} PostRenderFunction\n */\n/**\n * @typedef {Object} AtPixelOptions\n * @property {undefined|function(import(\"./layer/Layer.js\").default<import(\"./source/Source\").default>): boolean} [layerFilter] Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer~Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in css pixels. Pixels\n * inside the radius around the given position will be checked for features.\n * @property {boolean} [checkWrapped=true] Check-Wrapped Will check for for wrapped geometries inside the range of\n *   +/- 1 world width. Works only if a projection is used that can be wrapped.\n */\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {Collection<import(\"./control/Control.js\").default>} [controls] Controls.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>} [interactions] Interactions.\n * @property {HTMLElement|Document} keyboardEventTarget KeyboardEventTarget.\n * @property {Collection<import(\"./Overlay.js\").default>} overlays Overlays.\n * @property {Object<string, *>} values Values.\n */\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:layergroup'|'change:size'|'change:target'|'change:view'} MapObjectEventTypes\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<MapObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./MapBrowserEventType\").Types, import(\"./MapBrowserEvent\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./MapEventType\").Types, import(\"./MapEvent\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./render/EventType\").MapRenderEventTypes, import(\"./render/Event\").default, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|MapObjectEventTypes|\n *      import(\"./MapBrowserEventType\").Types|import(\"./MapEventType\").Types|\n *      import(\"./render/EventType\").MapRenderEventTypes, Return>} PluggableMapOnSignature\n */\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {Collection<import(\"./control/Control.js\").default>|Array<import(\"./control/Control.js\").default>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control.defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>|Array<import(\"./interaction/Interaction.js\").default>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction.defaults} is used.\n * @property {HTMLElement|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>|LayerGroup} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {Collection<import(\"./Overlay.js\").default>|Array<import(\"./Overlay.js\").default>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {HTMLElement|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered. If passed by element, the container can be in a secondary document.\n * @property {View|Promise<import(\"./View.js\").ViewOptions>} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n/**\n * @param {import(\"./layer/Base.js\").default} layer Layer.\n */\nfunction removeLayerMapProperty(layer) {\n    if (layer instanceof Layer) {\n        layer.setMapInternal(null);\n        return;\n    }\n    if (layer instanceof LayerGroup) {\n        layer.getLayers().forEach(removeLayerMapProperty);\n    }\n}\n/**\n * @param {import(\"./layer/Base.js\").default} layer Layer.\n * @param {PluggableMap} map Map.\n */\nfunction setLayerMapProperty(layer, map) {\n    if (layer instanceof Layer) {\n        layer.setMapInternal(map);\n        return;\n    }\n    if (layer instanceof LayerGroup) {\n        var layers = layer.getLayers().getArray();\n        for (var i = 0, ii = layers.length; i < ii; ++i) {\n            setLayerMapProperty(layers[i], map);\n        }\n    }\n}\n/**\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires import(\"./render/Event.js\").default#precompose\n * @fires import(\"./render/Event.js\").default#postcompose\n * @fires import(\"./render/Event.js\").default#rendercomplete\n * @api\n */\nvar PluggableMap = /** @class */ (function (_super) {\n    __extends(PluggableMap, _super);\n    /**\n     * @param {MapOptions} options Map options.\n     */\n    function PluggableMap(options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {PluggableMapOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {PluggableMapOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {PluggableMapOnSignature<void>}\n         */\n        _this.un;\n        var optionsInternal = createOptionsInternal(options);\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        _this.renderComplete_;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.loaded_ = true;\n        /** @private */\n        _this.boundHandleBrowserEvent_ = _this.handleBrowserEvent.bind(_this);\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.maxTilesLoading_ =\n            options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ =\n            options.pixelRatio !== undefined\n                ? options.pixelRatio\n                : DEVICE_PIXEL_RATIO;\n        /**\n         * @private\n         * @type {*}\n         */\n        _this.postRenderTimeoutHandle_;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.animationDelayKey_;\n        /**\n         * @private\n         */\n        _this.animationDelay_ = /** @this {PluggableMap} */ function () {\n            this.animationDelayKey_ = undefined;\n            this.renderFrame_(Date.now());\n        }.bind(_this);\n        /**\n         * @private\n         * @type {import(\"./transform.js\").Transform}\n         */\n        _this.coordinateToPixelTransform_ = createTransform();\n        /**\n         * @private\n         * @type {import(\"./transform.js\").Transform}\n         */\n        _this.pixelToCoordinateTransform_ = createTransform();\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.frameIndex_ = 0;\n        /**\n         * @private\n         * @type {?FrameState}\n         */\n        _this.frameState_ = null;\n        /**\n         * The extent at the previous 'moveend' event.\n         * @private\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.previousExtent_ = null;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.viewPropertyListenerKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.viewChangeListenerKey_ = null;\n        /**\n         * @private\n         * @type {?Array<import(\"./events.js\").EventsKey>}\n         */\n        _this.layerGroupPropertyListenerKeys_ = null;\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.viewport_ = document.createElement('div');\n        _this.viewport_.className =\n            'ol-viewport' + ('ontouchstart' in window ? ' ol-touch' : '');\n        _this.viewport_.style.position = 'relative';\n        _this.viewport_.style.overflow = 'hidden';\n        _this.viewport_.style.width = '100%';\n        _this.viewport_.style.height = '100%';\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.overlayContainer_ = document.createElement('div');\n        _this.overlayContainer_.style.position = 'absolute';\n        _this.overlayContainer_.style.zIndex = '0';\n        _this.overlayContainer_.style.width = '100%';\n        _this.overlayContainer_.style.height = '100%';\n        _this.overlayContainer_.style.pointerEvents = 'none';\n        _this.overlayContainer_.className = 'ol-overlaycontainer';\n        _this.viewport_.appendChild(_this.overlayContainer_);\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.overlayContainerStopEvent_ = document.createElement('div');\n        _this.overlayContainerStopEvent_.style.position = 'absolute';\n        _this.overlayContainerStopEvent_.style.zIndex = '0';\n        _this.overlayContainerStopEvent_.style.width = '100%';\n        _this.overlayContainerStopEvent_.style.height = '100%';\n        _this.overlayContainerStopEvent_.style.pointerEvents = 'none';\n        _this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n        _this.viewport_.appendChild(_this.overlayContainerStopEvent_);\n        /**\n         * @private\n         * @type {MapBrowserEventHandler}\n         */\n        _this.mapBrowserEventHandler_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.moveTolerance_ = options.moveTolerance;\n        /**\n         * @private\n         * @type {HTMLElement|Document}\n         */\n        _this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n        /**\n         * @private\n         * @type {?Array<import(\"./events.js\").EventsKey>}\n         */\n        _this.targetChangeHandlerKeys_ = null;\n        /**\n         * @type {Collection<import(\"./control/Control.js\").default>}\n         * @protected\n         */\n        _this.controls = optionsInternal.controls || new Collection();\n        /**\n         * @type {Collection<import(\"./interaction/Interaction.js\").default>}\n         * @protected\n         */\n        _this.interactions = optionsInternal.interactions || new Collection();\n        /**\n         * @type {Collection<import(\"./Overlay.js\").default>}\n         * @private\n         */\n        _this.overlays_ = optionsInternal.overlays;\n        /**\n         * A lookup of overlays by id.\n         * @private\n         * @type {Object<string, import(\"./Overlay.js\").default>}\n         */\n        _this.overlayIdIndex_ = {};\n        /**\n         * @type {import(\"./renderer/Map.js\").default|null}\n         * @private\n         */\n        _this.renderer_ = null;\n        /**\n         * @private\n         * @type {!Array<PostRenderFunction>}\n         */\n        _this.postRenderFunctions_ = [];\n        /**\n         * @private\n         * @type {TileQueue}\n         */\n        _this.tileQueue_ = new TileQueue(_this.getTilePriority.bind(_this), _this.handleTileChange_.bind(_this));\n        _this.addChangeListener(MapProperty.LAYERGROUP, _this.handleLayerGroupChanged_);\n        _this.addChangeListener(MapProperty.VIEW, _this.handleViewChanged_);\n        _this.addChangeListener(MapProperty.SIZE, _this.handleSizeChanged_);\n        _this.addChangeListener(MapProperty.TARGET, _this.handleTargetChanged_);\n        // setProperties will trigger the rendering of the map if the map\n        // is \"defined\" already.\n        _this.setProperties(optionsInternal.values);\n        var map = _this;\n        if (options.view && !(options.view instanceof View)) {\n            options.view.then(function (viewOptions) {\n                map.setView(new View(viewOptions));\n            });\n        }\n        _this.controls.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(this);\n        }.bind(_this));\n        _this.controls.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.interactions.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(this);\n        }.bind(_this));\n        _this.interactions.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.overlays_.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            this.addOverlayInternal_(\n            /** @type {import(\"./Overlay.js\").default} */ (event.element));\n        }.bind(_this));\n        _this.overlays_.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            var overlay = /** @type {import(\"./Overlay.js\").default} */ (event.element);\n            var id = overlay.getId();\n            if (id !== undefined) {\n                delete this.overlayIdIndex_[id.toString()];\n            }\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.controls.forEach(\n        /**\n         * @param {import(\"./control/Control.js\").default} control Control.\n         * @this {PluggableMap}\n         */\n        function (control) {\n            control.setMap(this);\n        }.bind(_this));\n        _this.interactions.forEach(\n        /**\n         * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction.\n         * @this {PluggableMap}\n         */\n        function (interaction) {\n            interaction.setMap(this);\n        }.bind(_this));\n        _this.overlays_.forEach(_this.addOverlayInternal_.bind(_this));\n        return _this;\n    }\n    /**\n     * @abstract\n     * @return {import(\"./renderer/Map.js\").default} The map renderer\n     */\n    PluggableMap.prototype.createRenderer = function () {\n        throw new Error('Use a map type that has a createRenderer method');\n    };\n    /**\n     * Add the given control to the map.\n     * @param {import(\"./control/Control.js\").default} control Control.\n     * @api\n     */\n    PluggableMap.prototype.addControl = function (control) {\n        this.getControls().push(control);\n    };\n    /**\n     * Add the given interaction to the map. If you want to add an interaction\n     * at another point of the collection use `getInteractions()` and the methods\n     * available on {@link module:ol/Collection~Collection}. This can be used to\n     * stop the event propagation from the handleEvent function. The interactions\n     * get to handle the events in the reverse order of this collection.\n     * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to add.\n     * @api\n     */\n    PluggableMap.prototype.addInteraction = function (interaction) {\n        this.getInteractions().push(interaction);\n    };\n    /**\n     * Adds the given layer to the top of this map. If you want to add a layer\n     * elsewhere in the stack, use `getLayers()` and the methods available on\n     * {@link module:ol/Collection~Collection}.\n     * @param {import(\"./layer/Base.js\").default} layer Layer.\n     * @api\n     */\n    PluggableMap.prototype.addLayer = function (layer) {\n        var layers = this.getLayerGroup().getLayers();\n        layers.push(layer);\n    };\n    /**\n     * @param {import(\"./layer/Group.js\").GroupEvent} event The layer add event.\n     * @private\n     */\n    PluggableMap.prototype.handleLayerAdd_ = function (event) {\n        setLayerMapProperty(event.layer, this);\n    };\n    /**\n     * Add the given overlay to the map.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @api\n     */\n    PluggableMap.prototype.addOverlay = function (overlay) {\n        this.getOverlays().push(overlay);\n    };\n    /**\n     * This deals with map's overlay collection changes.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @private\n     */\n    PluggableMap.prototype.addOverlayInternal_ = function (overlay) {\n        var id = overlay.getId();\n        if (id !== undefined) {\n            this.overlayIdIndex_[id.toString()] = overlay;\n        }\n        overlay.setMap(this);\n    };\n    /**\n     *\n     * Clean up.\n     */\n    PluggableMap.prototype.disposeInternal = function () {\n        this.controls.clear();\n        this.interactions.clear();\n        this.overlays_.clear();\n        this.setTarget(null);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Detect features that intersect a pixel on the viewport, and execute a\n     * callback with each intersecting feature. Layers included in the detection can\n     * be configured through the `layerFilter` option in `opt_options`.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {function(import(\"./Feature.js\").FeatureLike, import(\"./layer/Layer.js\").default<import(\"./source/Source\").default>, import(\"./geom/SimpleGeometry.js\").default): T} callback Feature callback. The callback will be\n     *     called with two arguments. The first argument is one\n     *     {@link module:ol/Feature~Feature feature} or\n     *     {@link module:ol/render/Feature~RenderFeature render feature} at the pixel, the second is\n     *     the {@link module:ol/layer/Layer~Layer layer} of the feature and will be null for\n     *     unmanaged layers. To stop detection, callback functions can return a\n     *     truthy value.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {T|undefined} Callback result, i.e. the return value of last\n     * callback execution, or the first truthy callback return value.\n     * @template T\n     * @api\n     */\n    PluggableMap.prototype.forEachFeatureAtPixel = function (pixel, callback, opt_options) {\n        if (!this.frameState_ || !this.renderer_) {\n            return;\n        }\n        var coordinate = this.getCoordinateFromPixelInternal(pixel);\n        opt_options = opt_options !== undefined ? opt_options : {};\n        var hitTolerance = opt_options.hitTolerance !== undefined ? opt_options.hitTolerance : 0;\n        var layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n        var checkWrapped = opt_options.checkWrapped !== false;\n        return this.renderer_.forEachFeatureAtCoordinate(coordinate, this.frameState_, hitTolerance, checkWrapped, callback, null, layerFilter, null);\n    };\n    /**\n     * Get all features that intersect a pixel on the viewport.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {Array<import(\"./Feature.js\").FeatureLike>} The detected features or\n     * an empty array if none were found.\n     * @api\n     */\n    PluggableMap.prototype.getFeaturesAtPixel = function (pixel, opt_options) {\n        var features = [];\n        this.forEachFeatureAtPixel(pixel, function (feature) {\n            features.push(feature);\n        }, opt_options);\n        return features;\n    };\n    /**\n     * Get all layers from all layer groups.\n     * @return {Array<import(\"./layer/Layer.js\").default>} Layers.\n     * @api\n     */\n    PluggableMap.prototype.getAllLayers = function () {\n        var layers = [];\n        function addLayersFrom(layerGroup) {\n            layerGroup.forEach(function (layer) {\n                if (layer instanceof LayerGroup) {\n                    addLayersFrom(layer.getLayers());\n                }\n                else {\n                    layers.push(layer);\n                }\n            });\n        }\n        addLayersFrom(this.getLayers());\n        return layers;\n    };\n    /**\n     * Please the `layer.getData()` method for {@link module:ol/layer/Tile~TileLayer#getData tile layers} or\n     * {@link module:ol/layer/Image~ImageLayer#getData image layers} instead of using this method.\n     *\n     * Detect layers that have a color value at a pixel on the viewport, and\n     * execute a callback with each matching layer. Layers included in the\n     * detection can be configured through `opt_layerFilter`.\n     *\n     * Note: In maps with more than one layer, this method will typically return pixel data\n     * representing the composed image of all layers visible at the given pixel  because layers\n     * will generally share the same rendering context.  To force layers to render separately, and\n     * to get pixel data representing only one layer at a time, you can assign each layer a unique\n     * `className` in its constructor.\n     *\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {function(this: S, import(\"./layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback\n     *     Layer callback. This callback will receive two arguments: first is the\n     *     {@link module:ol/layer/Layer~Layer layer}, second argument is an array representing\n     *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n     *     that do not currently support this argument. To stop detection, callback\n     *     functions can return a truthy value.\n     * @param {AtPixelOptions} [opt_options] Configuration options.\n     * @return {T|undefined} Callback result, i.e. the return value of last\n     * callback execution, or the first truthy callback return value.\n     * @template S,T\n     * @api\n     * @deprecated\n     */\n    PluggableMap.prototype.forEachLayerAtPixel = function (pixel, callback, opt_options) {\n        if (!this.frameState_ || !this.renderer_) {\n            return;\n        }\n        var options = opt_options || {};\n        var hitTolerance = options.hitTolerance !== undefined ? options.hitTolerance : 0;\n        var layerFilter = options.layerFilter || TRUE;\n        return this.renderer_.forEachLayerAtPixel(pixel, this.frameState_, hitTolerance, callback, layerFilter);\n    };\n    /**\n     * Detect if features intersect a pixel on the viewport. Layers included in the\n     * detection can be configured through `opt_layerFilter`.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {AtPixelOptions} [opt_options] Optional options.\n     * @return {boolean} Is there a feature at the given pixel?\n     * @api\n     */\n    PluggableMap.prototype.hasFeatureAtPixel = function (pixel, opt_options) {\n        if (!this.frameState_ || !this.renderer_) {\n            return false;\n        }\n        var coordinate = this.getCoordinateFromPixelInternal(pixel);\n        opt_options = opt_options !== undefined ? opt_options : {};\n        var layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n        var hitTolerance = opt_options.hitTolerance !== undefined ? opt_options.hitTolerance : 0;\n        var checkWrapped = opt_options.checkWrapped !== false;\n        return this.renderer_.hasFeatureAtCoordinate(coordinate, this.frameState_, hitTolerance, checkWrapped, layerFilter, null);\n    };\n    /**\n     * Returns the coordinate in user projection for a browser event.\n     * @param {MouseEvent} event Event.\n     * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n     * @api\n     */\n    PluggableMap.prototype.getEventCoordinate = function (event) {\n        return this.getCoordinateFromPixel(this.getEventPixel(event));\n    };\n    /**\n     * Returns the coordinate in view projection for a browser event.\n     * @param {MouseEvent} event Event.\n     * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n     */\n    PluggableMap.prototype.getEventCoordinateInternal = function (event) {\n        return this.getCoordinateFromPixelInternal(this.getEventPixel(event));\n    };\n    /**\n     * Returns the map pixel position for a browser event relative to the viewport.\n     * @param {UIEvent} event Event.\n     * @return {import(\"./pixel.js\").Pixel} Pixel.\n     * @api\n     */\n    PluggableMap.prototype.getEventPixel = function (event) {\n        var viewportPosition = this.viewport_.getBoundingClientRect();\n        var eventPosition = \n        //FIXME Are we really calling this with a TouchEvent anywhere?\n        'changedTouches' in event\n            ? /** @type {TouchEvent} */ (event).changedTouches[0]\n            : /** @type {MouseEvent} */ (event);\n        return [\n            eventPosition.clientX - viewportPosition.left,\n            eventPosition.clientY - viewportPosition.top,\n        ];\n    };\n    /**\n     * Get the target in which this map is rendered.\n     * Note that this returns what is entered as an option or in setTarget:\n     * if that was an element, it returns an element; if a string, it returns that.\n     * @return {HTMLElement|string|undefined} The Element or id of the Element that the\n     *     map is rendered in.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getTarget = function () {\n        return /** @type {HTMLElement|string|undefined} */ (this.get(MapProperty.TARGET));\n    };\n    /**\n     * Get the DOM element into which this map is rendered. In contrast to\n     * `getTarget` this method always return an `Element`, or `null` if the\n     * map has no target.\n     * @return {HTMLElement} The element that the map is rendered in.\n     * @api\n     */\n    PluggableMap.prototype.getTargetElement = function () {\n        var target = this.getTarget();\n        if (target !== undefined) {\n            return typeof target === 'string'\n                ? document.getElementById(target)\n                : target;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * Get the coordinate for a given pixel.  This returns a coordinate in the\n     * user projection.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n     * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n     * @api\n     */\n    PluggableMap.prototype.getCoordinateFromPixel = function (pixel) {\n        return toUserCoordinate(this.getCoordinateFromPixelInternal(pixel), this.getView().getProjection());\n    };\n    /**\n     * Get the coordinate for a given pixel.  This returns a coordinate in the\n     * map view projection.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n     * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n     */\n    PluggableMap.prototype.getCoordinateFromPixelInternal = function (pixel) {\n        var frameState = this.frameState_;\n        if (!frameState) {\n            return null;\n        }\n        else {\n            return applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n        }\n    };\n    /**\n     * Get the map controls. Modifying this collection changes the controls\n     * associated with the map.\n     * @return {Collection<import(\"./control/Control.js\").default>} Controls.\n     * @api\n     */\n    PluggableMap.prototype.getControls = function () {\n        return this.controls;\n    };\n    /**\n     * Get the map overlays. Modifying this collection changes the overlays\n     * associated with the map.\n     * @return {Collection<import(\"./Overlay.js\").default>} Overlays.\n     * @api\n     */\n    PluggableMap.prototype.getOverlays = function () {\n        return this.overlays_;\n    };\n    /**\n     * Get an overlay by its identifier (the value returned by overlay.getId()).\n     * Note that the index treats string and numeric identifiers as the same. So\n     * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n     * @param {string|number} id Overlay identifier.\n     * @return {import(\"./Overlay.js\").default} Overlay.\n     * @api\n     */\n    PluggableMap.prototype.getOverlayById = function (id) {\n        var overlay = this.overlayIdIndex_[id.toString()];\n        return overlay !== undefined ? overlay : null;\n    };\n    /**\n     * Get the map interactions. Modifying this collection changes the interactions\n     * associated with the map.\n     *\n     * Interactions are used for e.g. pan, zoom and rotate.\n     * @return {Collection<import(\"./interaction/Interaction.js\").default>} Interactions.\n     * @api\n     */\n    PluggableMap.prototype.getInteractions = function () {\n        return this.interactions;\n    };\n    /**\n     * Get the layergroup associated with this map.\n     * @return {LayerGroup} A layer group containing the layers in this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getLayerGroup = function () {\n        return /** @type {LayerGroup} */ (this.get(MapProperty.LAYERGROUP));\n    };\n    /**\n     * Clear any existing layers and add layers to the map.\n     * @param {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>} layers The layers to be added to the map.\n     * @api\n     */\n    PluggableMap.prototype.setLayers = function (layers) {\n        var group = this.getLayerGroup();\n        if (layers instanceof Collection) {\n            group.setLayers(layers);\n            return;\n        }\n        var collection = group.getLayers();\n        collection.clear();\n        collection.extend(layers);\n    };\n    /**\n     * Get the collection of layers associated with this map.\n     * @return {!Collection<import(\"./layer/Base.js\").default>} Layers.\n     * @api\n     */\n    PluggableMap.prototype.getLayers = function () {\n        var layers = this.getLayerGroup().getLayers();\n        return layers;\n    };\n    /**\n     * @return {boolean} Layers have sources that are still loading.\n     */\n    PluggableMap.prototype.getLoadingOrNotReady = function () {\n        var layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n        for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n            var state = layerStatesArray[i];\n            if (!state.visible) {\n                continue;\n            }\n            var renderer = state.layer.getRenderer();\n            if (renderer && !renderer.ready) {\n                return true;\n            }\n            var source = /** @type {import(\"./layer/Layer.js\").default} */ (state.layer).getSource();\n            if (source && source.loading) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * Get the pixel for a coordinate.  This takes a coordinate in the user\n     * projection and returns the corresponding pixel.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n     * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n     * @api\n     */\n    PluggableMap.prototype.getPixelFromCoordinate = function (coordinate) {\n        var viewCoordinate = fromUserCoordinate(coordinate, this.getView().getProjection());\n        return this.getPixelFromCoordinateInternal(viewCoordinate);\n    };\n    /**\n     * Get the pixel for a coordinate.  This takes a coordinate in the map view\n     * projection and returns the corresponding pixel.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n     * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n     */\n    PluggableMap.prototype.getPixelFromCoordinateInternal = function (coordinate) {\n        var frameState = this.frameState_;\n        if (!frameState) {\n            return null;\n        }\n        else {\n            return applyTransform(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));\n        }\n    };\n    /**\n     * Get the map renderer.\n     * @return {import(\"./renderer/Map.js\").default|null} Renderer\n     */\n    PluggableMap.prototype.getRenderer = function () {\n        return this.renderer_;\n    };\n    /**\n     * Get the size of this map.\n     * @return {import(\"./size.js\").Size|undefined} The size in pixels of the map in the DOM.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getSize = function () {\n        return /** @type {import(\"./size.js\").Size|undefined} */ (this.get(MapProperty.SIZE));\n    };\n    /**\n     * Get the view associated with this map. A view manages properties such as\n     * center and resolution.\n     * @return {View} The view that controls this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getView = function () {\n        return /** @type {View} */ (this.get(MapProperty.VIEW));\n    };\n    /**\n     * Get the element that serves as the map viewport.\n     * @return {HTMLElement} Viewport.\n     * @api\n     */\n    PluggableMap.prototype.getViewport = function () {\n        return this.viewport_;\n    };\n    /**\n     * Get the element that serves as the container for overlays.  Elements added to\n     * this container will let mousedown and touchstart events through to the map,\n     * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n     * events.\n     * @return {!HTMLElement} The map's overlay container.\n     */\n    PluggableMap.prototype.getOverlayContainer = function () {\n        return this.overlayContainer_;\n    };\n    /**\n     * Get the element that serves as a container for overlays that don't allow\n     * event propagation. Elements added to this container won't let mousedown and\n     * touchstart events through to the map, so clicks and gestures on an overlay\n     * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n     * @return {!HTMLElement} The map's overlay container that stops events.\n     */\n    PluggableMap.prototype.getOverlayContainerStopEvent = function () {\n        return this.overlayContainerStopEvent_;\n    };\n    /**\n     * @return {!Document} The document where the map is displayed.\n     */\n    PluggableMap.prototype.getOwnerDocument = function () {\n        var targetElement = this.getTargetElement();\n        return targetElement ? targetElement.ownerDocument : document;\n    };\n    /**\n     * @param {import(\"./Tile.js\").default} tile Tile.\n     * @param {string} tileSourceKey Tile source key.\n     * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n     * @param {number} tileResolution Tile resolution.\n     * @return {number} Tile priority.\n     */\n    PluggableMap.prototype.getTilePriority = function (tile, tileSourceKey, tileCenter, tileResolution) {\n        return getTilePriority(this.frameState_, tile, tileSourceKey, tileCenter, tileResolution);\n    };\n    /**\n     * @param {UIEvent} browserEvent Browser event.\n     * @param {string} [opt_type] Type.\n     */\n    PluggableMap.prototype.handleBrowserEvent = function (browserEvent, opt_type) {\n        var type = opt_type || browserEvent.type;\n        var mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n        this.handleMapBrowserEvent(mapBrowserEvent);\n    };\n    /**\n     * @param {MapBrowserEvent} mapBrowserEvent The event to handle.\n     */\n    PluggableMap.prototype.handleMapBrowserEvent = function (mapBrowserEvent) {\n        if (!this.frameState_) {\n            // With no view defined, we cannot translate pixels into geographical\n            // coordinates so interactions cannot be used.\n            return;\n        }\n        var originalEvent = /** @type {PointerEvent} */ (mapBrowserEvent.originalEvent);\n        var eventType = originalEvent.type;\n        if (eventType === PointerEventType.POINTERDOWN ||\n            eventType === EventType.WHEEL ||\n            eventType === EventType.KEYDOWN) {\n            var doc = this.getOwnerDocument();\n            var rootNode = this.viewport_.getRootNode\n                ? this.viewport_.getRootNode()\n                : doc;\n            var target = /** @type {Node} */ (originalEvent.target);\n            if (\n            // Abort if the target is a child of the container for elements whose events are not meant\n            // to be handled by map interactions.\n            this.overlayContainerStopEvent_.contains(target) ||\n                // Abort if the event target is a child of the container that is no longer in the page.\n                // It's possible for the target to no longer be in the page if it has been removed in an\n                // event listener, this might happen in a Control that recreates it's content based on\n                // user interaction either manually or via a render in something like https://reactjs.org/\n                !(rootNode === doc ? doc.documentElement : rootNode).contains(target)) {\n                return;\n            }\n        }\n        mapBrowserEvent.frameState = this.frameState_;\n        if (this.dispatchEvent(mapBrowserEvent) !== false) {\n            var interactionsArray = this.getInteractions().getArray().slice();\n            for (var i = interactionsArray.length - 1; i >= 0; i--) {\n                var interaction = interactionsArray[i];\n                if (interaction.getMap() !== this ||\n                    !interaction.getActive() ||\n                    !this.getTargetElement()) {\n                    continue;\n                }\n                var cont = interaction.handleEvent(mapBrowserEvent);\n                if (!cont || mapBrowserEvent.propagationStopped) {\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * @protected\n     */\n    PluggableMap.prototype.handlePostRender = function () {\n        var frameState = this.frameState_;\n        // Manage the tile queue\n        // Image loads are expensive and a limited resource, so try to use them\n        // efficiently:\n        // * When the view is static we allow a large number of parallel tile loads\n        //   to complete the frame as quickly as possible.\n        // * When animating or interacting, image loads can cause janks, so we reduce\n        //   the maximum number of loads per frame and limit the number of parallel\n        //   tile loads to remain reactive to view changes and to reduce the chance of\n        //   loading tiles that will quickly disappear from view.\n        var tileQueue = this.tileQueue_;\n        if (!tileQueue.isEmpty()) {\n            var maxTotalLoading = this.maxTilesLoading_;\n            var maxNewLoads = maxTotalLoading;\n            if (frameState) {\n                var hints = frameState.viewHints;\n                if (hints[ViewHint.ANIMATING] || hints[ViewHint.INTERACTING]) {\n                    var lowOnFrameBudget = Date.now() - frameState.time > 8;\n                    maxTotalLoading = lowOnFrameBudget ? 0 : 8;\n                    maxNewLoads = lowOnFrameBudget ? 0 : 2;\n                }\n            }\n            if (tileQueue.getTilesLoading() < maxTotalLoading) {\n                tileQueue.reprioritize(); // FIXME only call if view has changed\n                tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n            }\n        }\n        if (frameState && this.renderer_ && !frameState.animate) {\n            if (this.renderComplete_ === true) {\n                if (this.hasListener(RenderEventType.RENDERCOMPLETE)) {\n                    this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE, frameState);\n                }\n                if (this.loaded_ === false) {\n                    this.loaded_ = true;\n                    this.dispatchEvent(new MapEvent(MapEventType.LOADEND, this, frameState));\n                }\n            }\n            else if (this.loaded_ === true) {\n                this.loaded_ = false;\n                this.dispatchEvent(new MapEvent(MapEventType.LOADSTART, this, frameState));\n            }\n        }\n        var postRenderFunctions = this.postRenderFunctions_;\n        for (var i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n            postRenderFunctions[i](this, frameState);\n        }\n        postRenderFunctions.length = 0;\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleSizeChanged_ = function () {\n        if (this.getView() && !this.getView().getAnimating()) {\n            this.getView().resolveConstraints(0);\n        }\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleTargetChanged_ = function () {\n        if (this.mapBrowserEventHandler_) {\n            for (var i = 0, ii = this.targetChangeHandlerKeys_.length; i < ii; ++i) {\n                unlistenByKey(this.targetChangeHandlerKeys_[i]);\n            }\n            this.targetChangeHandlerKeys_ = null;\n            this.viewport_.removeEventListener(EventType.CONTEXTMENU, this.boundHandleBrowserEvent_);\n            this.viewport_.removeEventListener(EventType.WHEEL, this.boundHandleBrowserEvent_);\n            this.mapBrowserEventHandler_.dispose();\n            this.mapBrowserEventHandler_ = null;\n            removeNode(this.viewport_);\n        }\n        // target may be undefined, null, a string or an Element.\n        // If it's a string we convert it to an Element before proceeding.\n        // If it's not now an Element we remove the viewport from the DOM.\n        // If it's an Element we append the viewport element to it.\n        var targetElement = this.getTargetElement();\n        if (!targetElement) {\n            if (this.renderer_) {\n                clearTimeout(this.postRenderTimeoutHandle_);\n                this.postRenderTimeoutHandle_ = undefined;\n                this.postRenderFunctions_.length = 0;\n                this.renderer_.dispose();\n                this.renderer_ = null;\n            }\n            if (this.animationDelayKey_) {\n                cancelAnimationFrame(this.animationDelayKey_);\n                this.animationDelayKey_ = undefined;\n            }\n        }\n        else {\n            targetElement.appendChild(this.viewport_);\n            if (!this.renderer_) {\n                this.renderer_ = this.createRenderer();\n            }\n            this.mapBrowserEventHandler_ = new MapBrowserEventHandler(this, this.moveTolerance_);\n            for (var key in MapBrowserEventType) {\n                this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[key], this.handleMapBrowserEvent.bind(this));\n            }\n            this.viewport_.addEventListener(EventType.CONTEXTMENU, this.boundHandleBrowserEvent_, false);\n            this.viewport_.addEventListener(EventType.WHEEL, this.boundHandleBrowserEvent_, PASSIVE_EVENT_LISTENERS ? { passive: false } : false);\n            var defaultView = this.getOwnerDocument().defaultView;\n            var keyboardEventTarget = !this.keyboardEventTarget_\n                ? targetElement\n                : this.keyboardEventTarget_;\n            this.targetChangeHandlerKeys_ = [\n                listen(keyboardEventTarget, EventType.KEYDOWN, this.handleBrowserEvent, this),\n                listen(keyboardEventTarget, EventType.KEYPRESS, this.handleBrowserEvent, this),\n                listen(defaultView, EventType.RESIZE, this.updateSize, this),\n            ];\n        }\n        this.updateSize();\n        // updateSize calls setSize, so no need to call this.render\n        // ourselves here.\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleTileChange_ = function () {\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleViewPropertyChanged_ = function () {\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleViewChanged_ = function () {\n        if (this.viewPropertyListenerKey_) {\n            unlistenByKey(this.viewPropertyListenerKey_);\n            this.viewPropertyListenerKey_ = null;\n        }\n        if (this.viewChangeListenerKey_) {\n            unlistenByKey(this.viewChangeListenerKey_);\n            this.viewChangeListenerKey_ = null;\n        }\n        var view = this.getView();\n        if (view) {\n            this.updateViewportSize_();\n            this.viewPropertyListenerKey_ = listen(view, ObjectEventType.PROPERTYCHANGE, this.handleViewPropertyChanged_, this);\n            this.viewChangeListenerKey_ = listen(view, EventType.CHANGE, this.handleViewPropertyChanged_, this);\n            view.resolveConstraints(0);\n        }\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleLayerGroupChanged_ = function () {\n        if (this.layerGroupPropertyListenerKeys_) {\n            this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n            this.layerGroupPropertyListenerKeys_ = null;\n        }\n        var layerGroup = this.getLayerGroup();\n        if (layerGroup) {\n            this.handleLayerAdd_(new GroupEvent('addlayer', layerGroup));\n            this.layerGroupPropertyListenerKeys_ = [\n                listen(layerGroup, ObjectEventType.PROPERTYCHANGE, this.render, this),\n                listen(layerGroup, EventType.CHANGE, this.render, this),\n                listen(layerGroup, 'addlayer', this.handleLayerAdd_, this),\n                listen(layerGroup, 'removelayer', this.handleLayerRemove_, this),\n            ];\n        }\n        this.render();\n    };\n    /**\n     * @return {boolean} Is rendered.\n     */\n    PluggableMap.prototype.isRendered = function () {\n        return !!this.frameState_;\n    };\n    /**\n     * Requests an immediate render in a synchronous manner.\n     * @api\n     */\n    PluggableMap.prototype.renderSync = function () {\n        if (this.animationDelayKey_) {\n            cancelAnimationFrame(this.animationDelayKey_);\n        }\n        this.animationDelay_();\n    };\n    /**\n     * Redraws all text after new fonts have loaded\n     */\n    PluggableMap.prototype.redrawText = function () {\n        var layerStates = this.getLayerGroup().getLayerStatesArray();\n        for (var i = 0, ii = layerStates.length; i < ii; ++i) {\n            var layer = layerStates[i].layer;\n            if (layer.hasRenderer()) {\n                layer.getRenderer().handleFontsChanged();\n            }\n        }\n    };\n    /**\n     * Request a map rendering (at the next animation frame).\n     * @api\n     */\n    PluggableMap.prototype.render = function () {\n        if (this.renderer_ && this.animationDelayKey_ === undefined) {\n            this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n        }\n    };\n    /**\n     * Remove the given control from the map.\n     * @param {import(\"./control/Control.js\").default} control Control.\n     * @return {import(\"./control/Control.js\").default|undefined} The removed control (or undefined\n     *     if the control was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeControl = function (control) {\n        return this.getControls().remove(control);\n    };\n    /**\n     * Remove the given interaction from the map.\n     * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to remove.\n     * @return {import(\"./interaction/Interaction.js\").default|undefined} The removed interaction (or\n     *     undefined if the interaction was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeInteraction = function (interaction) {\n        return this.getInteractions().remove(interaction);\n    };\n    /**\n     * Removes the given layer from the map.\n     * @param {import(\"./layer/Base.js\").default} layer Layer.\n     * @return {import(\"./layer/Base.js\").default|undefined} The removed layer (or undefined if the\n     *     layer was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeLayer = function (layer) {\n        var layers = this.getLayerGroup().getLayers();\n        return layers.remove(layer);\n    };\n    /**\n     * @param {import(\"./layer/Group.js\").GroupEvent} event The layer remove event.\n     * @private\n     */\n    PluggableMap.prototype.handleLayerRemove_ = function (event) {\n        removeLayerMapProperty(event.layer);\n    };\n    /**\n     * Remove the given overlay from the map.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @return {import(\"./Overlay.js\").default|undefined} The removed overlay (or undefined\n     *     if the overlay was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeOverlay = function (overlay) {\n        return this.getOverlays().remove(overlay);\n    };\n    /**\n     * @param {number} time Time.\n     * @private\n     */\n    PluggableMap.prototype.renderFrame_ = function (time) {\n        var _this = this;\n        var size = this.getSize();\n        var view = this.getView();\n        var previousFrameState = this.frameState_;\n        /** @type {?FrameState} */\n        var frameState = null;\n        if (size !== undefined && hasArea(size) && view && view.isDef()) {\n            var viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n            var viewState = view.getState();\n            frameState = {\n                animate: false,\n                coordinateToPixelTransform: this.coordinateToPixelTransform_,\n                declutterTree: null,\n                extent: getForViewAndSize(viewState.center, viewState.resolution, viewState.rotation, size),\n                index: this.frameIndex_++,\n                layerIndex: 0,\n                layerStatesArray: this.getLayerGroup().getLayerStatesArray(),\n                pixelRatio: this.pixelRatio_,\n                pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n                postRenderFunctions: [],\n                size: size,\n                tileQueue: this.tileQueue_,\n                time: time,\n                usedTiles: {},\n                viewState: viewState,\n                viewHints: viewHints,\n                wantedTiles: {},\n                mapId: getUid(this),\n                renderTargets: {},\n            };\n            if (viewState.nextCenter && viewState.nextResolution) {\n                var rotation = isNaN(viewState.nextRotation)\n                    ? viewState.rotation\n                    : viewState.nextRotation;\n                frameState.nextExtent = getForViewAndSize(viewState.nextCenter, viewState.nextResolution, rotation, size);\n            }\n        }\n        this.frameState_ = frameState;\n        /** @type {import(\"./renderer/Map.js\").default} */ (this.renderer_).renderFrame(frameState);\n        if (frameState) {\n            if (frameState.animate) {\n                this.render();\n            }\n            Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);\n            if (previousFrameState) {\n                var moveStart = !this.previousExtent_ ||\n                    (!isEmpty(this.previousExtent_) &&\n                        !equals(frameState.extent, this.previousExtent_));\n                if (moveStart) {\n                    this.dispatchEvent(new MapEvent(MapEventType.MOVESTART, this, previousFrameState));\n                    this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n                }\n            }\n            var idle = this.previousExtent_ &&\n                !frameState.viewHints[ViewHint.ANIMATING] &&\n                !frameState.viewHints[ViewHint.INTERACTING] &&\n                !equals(frameState.extent, this.previousExtent_);\n            if (idle) {\n                this.dispatchEvent(new MapEvent(MapEventType.MOVEEND, this, frameState));\n                clone(frameState.extent, this.previousExtent_);\n            }\n        }\n        this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n        this.renderComplete_ =\n            this.hasListener(MapEventType.LOADSTART) ||\n                this.hasListener(MapEventType.LOADEND) ||\n                this.hasListener(RenderEventType.RENDERCOMPLETE)\n                ? !this.tileQueue_.getTilesLoading() &&\n                    !this.tileQueue_.getCount() &&\n                    !this.getLoadingOrNotReady()\n                : undefined;\n        if (!this.postRenderTimeoutHandle_) {\n            this.postRenderTimeoutHandle_ = setTimeout(function () {\n                _this.postRenderTimeoutHandle_ = undefined;\n                _this.handlePostRender();\n            }, 0);\n        }\n    };\n    /**\n     * Sets the layergroup of this map.\n     * @param {LayerGroup} layerGroup A layer group containing the layers in this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setLayerGroup = function (layerGroup) {\n        var oldLayerGroup = this.getLayerGroup();\n        if (oldLayerGroup) {\n            this.handleLayerRemove_(new GroupEvent('removelayer', oldLayerGroup));\n        }\n        this.set(MapProperty.LAYERGROUP, layerGroup);\n    };\n    /**\n     * Set the size of this map.\n     * @param {import(\"./size.js\").Size|undefined} size The size in pixels of the map in the DOM.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setSize = function (size) {\n        this.set(MapProperty.SIZE, size);\n    };\n    /**\n     * Set the target element to render this map into.\n     * @param {HTMLElement|string} [target] The Element or id of the Element\n     *     that the map is rendered in.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setTarget = function (target) {\n        this.set(MapProperty.TARGET, target);\n    };\n    /**\n     * Set the view for this map.\n     * @param {View|Promise<import(\"./View.js\").ViewOptions>} view The view that controls this map.\n     * It is also possible to pass a promise that resolves to options for constructing a view.  This\n     * alternative allows view properties to be resolved by sources or other components that load\n     * view-related metadata.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setView = function (view) {\n        if (!view || view instanceof View) {\n            this.set(MapProperty.VIEW, view);\n            return;\n        }\n        this.set(MapProperty.VIEW, new View());\n        var map = this;\n        view.then(function (viewOptions) {\n            map.setView(new View(viewOptions));\n        });\n    };\n    /**\n     * Force a recalculation of the map viewport size.  This should be called when\n     * third-party code changes the size of the map viewport.\n     * @api\n     */\n    PluggableMap.prototype.updateSize = function () {\n        var targetElement = this.getTargetElement();\n        var size = undefined;\n        if (targetElement) {\n            var computedStyle = getComputedStyle(targetElement);\n            var width = targetElement.offsetWidth -\n                parseFloat(computedStyle['borderLeftWidth']) -\n                parseFloat(computedStyle['paddingLeft']) -\n                parseFloat(computedStyle['paddingRight']) -\n                parseFloat(computedStyle['borderRightWidth']);\n            var height = targetElement.offsetHeight -\n                parseFloat(computedStyle['borderTopWidth']) -\n                parseFloat(computedStyle['paddingTop']) -\n                parseFloat(computedStyle['paddingBottom']) -\n                parseFloat(computedStyle['borderBottomWidth']);\n            if (!isNaN(width) && !isNaN(height)) {\n                size = [width, height];\n                if (!hasArea(size) &&\n                    !!(targetElement.offsetWidth ||\n                        targetElement.offsetHeight ||\n                        targetElement.getClientRects().length)) {\n                    // eslint-disable-next-line\n                    console.warn(\"No map visible because the map container's width or height are 0.\");\n                }\n            }\n        }\n        this.setSize(size);\n        this.updateViewportSize_();\n    };\n    /**\n     * Recomputes the viewport size and save it on the view object (if any)\n     * @private\n     */\n    PluggableMap.prototype.updateViewportSize_ = function () {\n        var view = this.getView();\n        if (view) {\n            var size = undefined;\n            var computedStyle = getComputedStyle(this.viewport_);\n            if (computedStyle.width && computedStyle.height) {\n                size = [\n                    parseInt(computedStyle.width, 10),\n                    parseInt(computedStyle.height, 10),\n                ];\n            }\n            view.setViewportSize(size);\n        }\n    };\n    return PluggableMap;\n}(BaseObject));\n/**\n * @param {MapOptions} options Map options.\n * @return {MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n    /**\n     * @type {HTMLElement|Document}\n     */\n    var keyboardEventTarget = null;\n    if (options.keyboardEventTarget !== undefined) {\n        keyboardEventTarget =\n            typeof options.keyboardEventTarget === 'string'\n                ? document.getElementById(options.keyboardEventTarget)\n                : options.keyboardEventTarget;\n    }\n    /**\n     * @type {Object<string, *>}\n     */\n    var values = {};\n    var layerGroup = options.layers &&\n        typeof ( /** @type {?} */(options.layers).getLayers) === 'function'\n        ? /** @type {LayerGroup} */ (options.layers)\n        : new LayerGroup({ layers: /** @type {Collection} */ (options.layers) });\n    values[MapProperty.LAYERGROUP] = layerGroup;\n    values[MapProperty.TARGET] = options.target;\n    values[MapProperty.VIEW] =\n        options.view instanceof View ? options.view : new View();\n    var controls;\n    if (options.controls !== undefined) {\n        if (Array.isArray(options.controls)) {\n            controls = new Collection(options.controls.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.controls).getArray) === 'function', 47); // Expected `controls` to be an array or an `import(\"./Collection.js\").Collection`\n            controls = /** @type {Collection} */ (options.controls);\n        }\n    }\n    var interactions;\n    if (options.interactions !== undefined) {\n        if (Array.isArray(options.interactions)) {\n            interactions = new Collection(options.interactions.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.interactions).getArray) ===\n                'function', 48); // Expected `interactions` to be an array or an `import(\"./Collection.js\").Collection`\n            interactions = /** @type {Collection} */ (options.interactions);\n        }\n    }\n    var overlays;\n    if (options.overlays !== undefined) {\n        if (Array.isArray(options.overlays)) {\n            overlays = new Collection(options.overlays.slice());\n        }\n        else {\n            assert(typeof ( /** @type {?} */(options.overlays).getArray) === 'function', 49); // Expected `overlays` to be an array or an `import(\"./Collection.js\").Collection`\n            overlays = options.overlays;\n        }\n    }\n    else {\n        overlays = new Collection();\n    }\n    return {\n        controls: controls,\n        interactions: interactions,\n        keyboardEventTarget: keyboardEventTarget,\n        overlays: overlays,\n        values: values,\n    };\n}\nexport default PluggableMap;\n//# sourceMappingURL=PluggableMap.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Observable\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport { listen, listenOnce, unlistenByKey } from './events.js';\n/***\n * @template {string} Type\n * @template {Event|import(\"./events/Event.js\").default} EventClass\n * @template Return\n * @typedef {(type: Type, listener: (event: EventClass) => ?) => Return} OnSignature\n */\n/***\n * @template {string} Type\n * @template Return\n * @typedef {(type: Type[], listener: (event: Event|import(\"./events/Event\").default) => ?) => Return extends void ? void : Return[]} CombinedOnSignature\n */\n/**\n * @typedef {'change'|'error'} EventTypes\n */\n/***\n * @template Return\n * @typedef {OnSignature<EventTypes, import(\"./events/Event.js\").default, Return> & CombinedOnSignature<EventTypes, Return>} ObservableOnSignature\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nvar Observable = /** @class */ (function (_super) {\n    __extends(Observable, _super);\n    function Observable() {\n        var _this = _super.call(this) || this;\n        _this.on =\n            /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (_this.onInternal);\n        _this.once =\n            /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (_this.onceInternal);\n        _this.un = /** @type {ObservableOnSignature<void>} */ (_this.unInternal);\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.revision_ = 0;\n        return _this;\n    }\n    /**\n     * Increases the revision counter and dispatches a 'change' event.\n     * @api\n     */\n    Observable.prototype.changed = function () {\n        ++this.revision_;\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * Get the version number for this object.  Each time the object is modified,\n     * its version number will be incremented.\n     * @return {number} Revision.\n     * @api\n     */\n    Observable.prototype.getRevision = function () {\n        return this.revision_;\n    };\n    /**\n     * @param {string|Array<string>} type Type.\n     * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n     * @protected\n     */\n    Observable.prototype.onInternal = function (type, listener) {\n        if (Array.isArray(type)) {\n            var len = type.length;\n            var keys = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                keys[i] = listen(this, type[i], listener);\n            }\n            return keys;\n        }\n        else {\n            return listen(this, /** @type {string} */ (type), listener);\n        }\n    };\n    /**\n     * @param {string|Array<string>} type Type.\n     * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n     * @protected\n     */\n    Observable.prototype.onceInternal = function (type, listener) {\n        var key;\n        if (Array.isArray(type)) {\n            var len = type.length;\n            key = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                key[i] = listenOnce(this, type[i], listener);\n            }\n        }\n        else {\n            key = listenOnce(this, /** @type {string} */ (type), listener);\n        }\n        /** @type {Object} */ (listener).ol_key = key;\n        return key;\n    };\n    /**\n     * Unlisten for a certain type of event.\n     * @param {string|Array<string>} type Type.\n     * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n     * @protected\n     */\n    Observable.prototype.unInternal = function (type, listener) {\n        var key = /** @type {Object} */ (listener).ol_key;\n        if (key) {\n            unByKey(key);\n        }\n        else if (Array.isArray(type)) {\n            for (var i = 0, ii = type.length; i < ii; ++i) {\n                this.removeEventListener(type[i], listener);\n            }\n        }\n        else {\n            this.removeEventListener(type, listener);\n        }\n    };\n    return Observable;\n}(EventTarget));\n/**\n * Listen for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.on;\n/**\n * Listen once for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.once;\n/**\n * Unlisten for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @api\n */\nObservable.prototype.un;\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n    if (Array.isArray(key)) {\n        for (var i = 0, ii = key.length; i < ii; ++i) {\n            unlistenByKey(key[i]);\n        }\n    }\n    else {\n        unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n    }\n}\nexport default Observable;\n//# sourceMappingURL=Observable.js.map","/**\n * @module ol/MapProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    LAYERGROUP: 'layergroup',\n    SIZE: 'size',\n    TARGET: 'target',\n    VIEW: 'view',\n};\n//# sourceMappingURL=MapProperty.js.map","/**\n * @module ol/util\n */\n/**\n * @return {?} Any return.\n */\nexport function abstract() {\n    return /** @type {?} */ ((function () {\n        throw new Error('Unimplemented abstract method.');\n    })());\n}\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nvar uidCounter_ = 0;\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n    return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport var VERSION = '6.15.1';\n//# sourceMappingURL=util.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/Attribution\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport { CLASS_COLLAPSED, CLASS_CONTROL, CLASS_UNSELECTABLE } from '../css.js';\nimport { equals } from '../array.js';\nimport { inView } from '../layer/Layer.js';\nimport { removeChildren, replaceNode } from '../dom.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-attribution'] CSS class name.\n * @property {HTMLElement|string} [target] Specify a target if you\n * want the control to be rendered outside of the map's\n * viewport.\n * @property {boolean} [collapsible] Specify if attributions can\n * be collapsed. If not specified, sources control this behavior with their\n * `attributionsCollapsible` setting.\n * @property {boolean} [collapsed=true] Specify if attributions should\n * be collapsed at startup.\n * @property {string} [tipLabel='Attributions'] Text label to use for the button tip.\n * @property {string|HTMLElement} [label='i'] Text label to use for the\n * collapsed attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [expandClassName=className + '-expand'] CSS class name for the\n * collapsed attributions button.\n * @property {string|HTMLElement} [collapseLabel=''] Text label to use\n * for the expanded attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [collapseClassName=className + '-collapse'] CSS class name for the\n * expanded attributions button.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n */\n/**\n * @classdesc\n * Control to show all the attributions associated with the layer sources\n * in the map. This control is one of the default controls included in maps.\n * By default it will show in the bottom right portion of the map, but this can\n * be changed by using a css selector for `.ol-attribution`.\n *\n * @api\n */\nvar Attribution = /** @class */ (function (_super) {\n    __extends(Attribution, _super);\n    /**\n     * @param {Options} [opt_options] Attribution options.\n     */\n    function Attribution(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            render: options.render,\n            target: options.target,\n        }) || this;\n        /**\n         * @private\n         * @type {HTMLElement}\n         */\n        _this.ulElement_ = document.createElement('ul');\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.collapsed_ =\n            options.collapsed !== undefined ? options.collapsed : true;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.userCollapsed_ = _this.collapsed_;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.overrideCollapsible_ = options.collapsible !== undefined;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.collapsible_ =\n            options.collapsible !== undefined ? options.collapsible : true;\n        if (!_this.collapsible_) {\n            _this.collapsed_ = false;\n        }\n        var className = options.className !== undefined ? options.className : 'ol-attribution';\n        var tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Attributions';\n        var expandClassName = options.expandClassName !== undefined\n            ? options.expandClassName\n            : className + '-expand';\n        var collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u203A';\n        var collapseClassName = options.collapseClassName !== undefined\n            ? options.collapseClassName\n            : className + '-collapse';\n        if (typeof collapseLabel === 'string') {\n            /**\n             * @private\n             * @type {HTMLElement}\n             */\n            _this.collapseLabel_ = document.createElement('span');\n            _this.collapseLabel_.textContent = collapseLabel;\n            _this.collapseLabel_.className = collapseClassName;\n        }\n        else {\n            _this.collapseLabel_ = collapseLabel;\n        }\n        var label = options.label !== undefined ? options.label : 'i';\n        if (typeof label === 'string') {\n            /**\n             * @private\n             * @type {HTMLElement}\n             */\n            _this.label_ = document.createElement('span');\n            _this.label_.textContent = label;\n            _this.label_.className = expandClassName;\n        }\n        else {\n            _this.label_ = label;\n        }\n        var activeLabel = _this.collapsible_ && !_this.collapsed_ ? _this.collapseLabel_ : _this.label_;\n        /**\n         * @private\n         * @type {HTMLElement}\n         */\n        _this.toggleButton_ = document.createElement('button');\n        _this.toggleButton_.setAttribute('type', 'button');\n        _this.toggleButton_.setAttribute('aria-expanded', String(!_this.collapsed_));\n        _this.toggleButton_.title = tipLabel;\n        _this.toggleButton_.appendChild(activeLabel);\n        _this.toggleButton_.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this), false);\n        var cssClasses = className +\n            ' ' +\n            CLASS_UNSELECTABLE +\n            ' ' +\n            CLASS_CONTROL +\n            (_this.collapsed_ && _this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n            (_this.collapsible_ ? '' : ' ol-uncollapsible');\n        var element = _this.element;\n        element.className = cssClasses;\n        element.appendChild(_this.toggleButton_);\n        element.appendChild(_this.ulElement_);\n        /**\n         * A list of currently rendered resolutions.\n         * @type {Array<string>}\n         * @private\n         */\n        _this.renderedAttributions_ = [];\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderedVisible_ = true;\n        return _this;\n    }\n    /**\n     * Collect a list of visible attributions and set the collapsible state.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {Array<string>} Attributions.\n     * @private\n     */\n    Attribution.prototype.collectSourceAttributions_ = function (frameState) {\n        /**\n         * Used to determine if an attribution already exists.\n         * @type {!Object<string, boolean>}\n         */\n        var lookup = {};\n        /**\n         * A list of visible attributions.\n         * @type {Array<string>}\n         */\n        var visibleAttributions = [];\n        var collapsible = true;\n        var layerStatesArray = frameState.layerStatesArray;\n        for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n            var layerState = layerStatesArray[i];\n            if (!inView(layerState, frameState.viewState)) {\n                continue;\n            }\n            var source = /** @type {import(\"../layer/Layer.js\").default} */ (layerState.layer).getSource();\n            if (!source) {\n                continue;\n            }\n            var attributionGetter = source.getAttributions();\n            if (!attributionGetter) {\n                continue;\n            }\n            var attributions = attributionGetter(frameState);\n            if (!attributions) {\n                continue;\n            }\n            collapsible =\n                collapsible && source.getAttributionsCollapsible() !== false;\n            if (Array.isArray(attributions)) {\n                for (var j = 0, jj = attributions.length; j < jj; ++j) {\n                    if (!(attributions[j] in lookup)) {\n                        visibleAttributions.push(attributions[j]);\n                        lookup[attributions[j]] = true;\n                    }\n                }\n            }\n            else {\n                if (!(attributions in lookup)) {\n                    visibleAttributions.push(attributions);\n                    lookup[attributions] = true;\n                }\n            }\n        }\n        if (!this.overrideCollapsible_) {\n            this.setCollapsible(collapsible);\n        }\n        return visibleAttributions;\n    };\n    /**\n     * @private\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    Attribution.prototype.updateElement_ = function (frameState) {\n        if (!frameState) {\n            if (this.renderedVisible_) {\n                this.element.style.display = 'none';\n                this.renderedVisible_ = false;\n            }\n            return;\n        }\n        var attributions = this.collectSourceAttributions_(frameState);\n        var visible = attributions.length > 0;\n        if (this.renderedVisible_ != visible) {\n            this.element.style.display = visible ? '' : 'none';\n            this.renderedVisible_ = visible;\n        }\n        if (equals(attributions, this.renderedAttributions_)) {\n            return;\n        }\n        removeChildren(this.ulElement_);\n        // append the attributions\n        for (var i = 0, ii = attributions.length; i < ii; ++i) {\n            var element = document.createElement('li');\n            element.innerHTML = attributions[i];\n            this.ulElement_.appendChild(element);\n        }\n        this.renderedAttributions_ = attributions;\n    };\n    /**\n     * @param {MouseEvent} event The event to handle\n     * @private\n     */\n    Attribution.prototype.handleClick_ = function (event) {\n        event.preventDefault();\n        this.handleToggle_();\n        this.userCollapsed_ = this.collapsed_;\n    };\n    /**\n     * @private\n     */\n    Attribution.prototype.handleToggle_ = function () {\n        this.element.classList.toggle(CLASS_COLLAPSED);\n        if (this.collapsed_) {\n            replaceNode(this.collapseLabel_, this.label_);\n        }\n        else {\n            replaceNode(this.label_, this.collapseLabel_);\n        }\n        this.collapsed_ = !this.collapsed_;\n        this.toggleButton_.setAttribute('aria-expanded', String(!this.collapsed_));\n    };\n    /**\n     * Return `true` if the attribution is collapsible, `false` otherwise.\n     * @return {boolean} True if the widget is collapsible.\n     * @api\n     */\n    Attribution.prototype.getCollapsible = function () {\n        return this.collapsible_;\n    };\n    /**\n     * Set whether the attribution should be collapsible.\n     * @param {boolean} collapsible True if the widget is collapsible.\n     * @api\n     */\n    Attribution.prototype.setCollapsible = function (collapsible) {\n        if (this.collapsible_ === collapsible) {\n            return;\n        }\n        this.collapsible_ = collapsible;\n        this.element.classList.toggle('ol-uncollapsible');\n        if (this.userCollapsed_) {\n            this.handleToggle_();\n        }\n    };\n    /**\n     * Collapse or expand the attribution according to the passed parameter. Will\n     * not do anything if the attribution isn't collapsible or if the current\n     * collapsed state is already the one requested.\n     * @param {boolean} collapsed True if the widget is collapsed.\n     * @api\n     */\n    Attribution.prototype.setCollapsed = function (collapsed) {\n        this.userCollapsed_ = collapsed;\n        if (!this.collapsible_ || this.collapsed_ === collapsed) {\n            return;\n        }\n        this.handleToggle_();\n    };\n    /**\n     * Return `true` when the attribution is currently collapsed or `false`\n     * otherwise.\n     * @return {boolean} True if the widget is collapsed.\n     * @api\n     */\n    Attribution.prototype.getCollapsed = function () {\n        return this.collapsed_;\n    };\n    /**\n     * Update the attribution element.\n     * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n     * @override\n     */\n    Attribution.prototype.render = function (mapEvent) {\n        this.updateElement_(mapEvent.frameState);\n    };\n    return Attribution;\n}(Control));\nexport default Attribution;\n//# sourceMappingURL=Attribution.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/Rotate\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport { CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE } from '../css.js';\nimport { easeOut } from '../easing.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label=''] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {string} [compassClassName='ol-compass'] CSS class name for the compass.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function():void} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\nvar Rotate = /** @class */ (function (_super) {\n    __extends(Rotate, _super);\n    /**\n     * @param {Options} [opt_options] Rotate options.\n     */\n    function Rotate(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            render: options.render,\n            target: options.target,\n        }) || this;\n        var className = options.className !== undefined ? options.className : 'ol-rotate';\n        var label = options.label !== undefined ? options.label : '\\u21E7';\n        var compassClassName = options.compassClassName !== undefined\n            ? options.compassClassName\n            : 'ol-compass';\n        /**\n         * @type {HTMLElement}\n         * @private\n         */\n        _this.label_ = null;\n        if (typeof label === 'string') {\n            _this.label_ = document.createElement('span');\n            _this.label_.className = compassClassName;\n            _this.label_.textContent = label;\n        }\n        else {\n            _this.label_ = label;\n            _this.label_.classList.add(compassClassName);\n        }\n        var tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n        var button = document.createElement('button');\n        button.className = className + '-reset';\n        button.setAttribute('type', 'button');\n        button.title = tipLabel;\n        button.appendChild(_this.label_);\n        button.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this), false);\n        var cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n        var element = _this.element;\n        element.className = cssClasses;\n        element.appendChild(button);\n        _this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.rotation_ = undefined;\n        if (_this.autoHide_) {\n            _this.element.classList.add(CLASS_HIDDEN);\n        }\n        return _this;\n    }\n    /**\n     * @param {MouseEvent} event The event to handle\n     * @private\n     */\n    Rotate.prototype.handleClick_ = function (event) {\n        event.preventDefault();\n        if (this.callResetNorth_ !== undefined) {\n            this.callResetNorth_();\n        }\n        else {\n            this.resetNorth_();\n        }\n    };\n    /**\n     * @private\n     */\n    Rotate.prototype.resetNorth_ = function () {\n        var map = this.getMap();\n        var view = map.getView();\n        if (!view) {\n            // the map does not have a view, so we can't act\n            // upon it\n            return;\n        }\n        var rotation = view.getRotation();\n        if (rotation !== undefined) {\n            if (this.duration_ > 0 && rotation % (2 * Math.PI) !== 0) {\n                view.animate({\n                    rotation: 0,\n                    duration: this.duration_,\n                    easing: easeOut,\n                });\n            }\n            else {\n                view.setRotation(0);\n            }\n        }\n    };\n    /**\n     * Update the rotate control element.\n     * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n     * @override\n     */\n    Rotate.prototype.render = function (mapEvent) {\n        var frameState = mapEvent.frameState;\n        if (!frameState) {\n            return;\n        }\n        var rotation = frameState.viewState.rotation;\n        if (rotation != this.rotation_) {\n            var transform = 'rotate(' + rotation + 'rad)';\n            if (this.autoHide_) {\n                var contains = this.element.classList.contains(CLASS_HIDDEN);\n                if (!contains && rotation === 0) {\n                    this.element.classList.add(CLASS_HIDDEN);\n                }\n                else if (contains && rotation !== 0) {\n                    this.element.classList.remove(CLASS_HIDDEN);\n                }\n            }\n            this.label_.style.transform = transform;\n        }\n        this.rotation_ = rotation;\n    };\n    return Rotate;\n}(Control));\nexport default Rotate;\n//# sourceMappingURL=Rotate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/Zoom\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport { CLASS_CONTROL, CLASS_UNSELECTABLE } from '../css.js';\nimport { easeOut } from '../easing.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {string} [className='ol-zoom'] CSS class name.\n * @property {string} [zoomInClassName=className + '-in'] CSS class name for the zoom-in button.\n * @property {string} [zoomOutClassName=className + '-out'] CSS class name for the zoom-out button.\n * @property {string|HTMLElement} [zoomInLabel='+'] Text label to use for the zoom-in\n * button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [zoomOutLabel=''] Text label to use for the zoom-out button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [zoomInTipLabel='Zoom in'] Text label to use for the button tip.\n * @property {string} [zoomOutTipLabel='Zoom out'] Text label to use for the button tip.\n * @property {number} [delta=1] The zoom delta applied on each click.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n/**\n * @classdesc\n * A control with 2 buttons, one for zoom in and one for zoom out.\n * This control is one of the default controls of a map. To style this control\n * use css selectors `.ol-zoom-in` and `.ol-zoom-out`.\n *\n * @api\n */\nvar Zoom = /** @class */ (function (_super) {\n    __extends(Zoom, _super);\n    /**\n     * @param {Options} [opt_options] Zoom options.\n     */\n    function Zoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            target: options.target,\n        }) || this;\n        var className = options.className !== undefined ? options.className : 'ol-zoom';\n        var delta = options.delta !== undefined ? options.delta : 1;\n        var zoomInClassName = options.zoomInClassName !== undefined\n            ? options.zoomInClassName\n            : className + '-in';\n        var zoomOutClassName = options.zoomOutClassName !== undefined\n            ? options.zoomOutClassName\n            : className + '-out';\n        var zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n        var zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2013';\n        var zoomInTipLabel = options.zoomInTipLabel !== undefined ? options.zoomInTipLabel : 'Zoom in';\n        var zoomOutTipLabel = options.zoomOutTipLabel !== undefined\n            ? options.zoomOutTipLabel\n            : 'Zoom out';\n        var inElement = document.createElement('button');\n        inElement.className = zoomInClassName;\n        inElement.setAttribute('type', 'button');\n        inElement.title = zoomInTipLabel;\n        inElement.appendChild(typeof zoomInLabel === 'string'\n            ? document.createTextNode(zoomInLabel)\n            : zoomInLabel);\n        inElement.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this, delta), false);\n        var outElement = document.createElement('button');\n        outElement.className = zoomOutClassName;\n        outElement.setAttribute('type', 'button');\n        outElement.title = zoomOutTipLabel;\n        outElement.appendChild(typeof zoomOutLabel === 'string'\n            ? document.createTextNode(zoomOutLabel)\n            : zoomOutLabel);\n        outElement.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this, -delta), false);\n        var cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n        var element = _this.element;\n        element.className = cssClasses;\n        element.appendChild(inElement);\n        element.appendChild(outElement);\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * @param {number} delta Zoom delta.\n     * @param {MouseEvent} event The event to handle\n     * @private\n     */\n    Zoom.prototype.handleClick_ = function (delta, event) {\n        event.preventDefault();\n        this.zoomByDelta_(delta);\n    };\n    /**\n     * @param {number} delta Zoom delta.\n     * @private\n     */\n    Zoom.prototype.zoomByDelta_ = function (delta) {\n        var map = this.getMap();\n        var view = map.getView();\n        if (!view) {\n            // the map does not have a view, so we can't act\n            // upon it\n            return;\n        }\n        var currentZoom = view.getZoom();\n        if (currentZoom !== undefined) {\n            var newZoom = view.getConstrainedZoom(currentZoom + delta);\n            if (this.duration_ > 0) {\n                if (view.getAnimating()) {\n                    view.cancelAnimations();\n                }\n                view.animate({\n                    zoom: newZoom,\n                    duration: this.duration_,\n                    easing: easeOut,\n                });\n            }\n            else {\n                view.setZoom(newZoom);\n            }\n        }\n    };\n    return Zoom;\n}(Control));\nexport default Zoom;\n//# sourceMappingURL=Zoom.js.map","/**\n * @module ol/control\n */\nimport Attribution from './control/Attribution.js';\nimport Collection from './Collection.js';\nimport Rotate from './control/Rotate.js';\nimport Zoom from './control/Zoom.js';\nexport { default as Attribution } from './control/Attribution.js';\nexport { default as Control } from './control/Control.js';\nexport { default as FullScreen } from './control/FullScreen.js';\nexport { default as MousePosition } from './control/MousePosition.js';\nexport { default as OverviewMap } from './control/OverviewMap.js';\nexport { default as Rotate } from './control/Rotate.js';\nexport { default as ScaleLine } from './control/ScaleLine.js';\nexport { default as Zoom } from './control/Zoom.js';\nexport { default as ZoomSlider } from './control/ZoomSlider.js';\nexport { default as ZoomToExtent } from './control/ZoomToExtent.js';\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [attribution=true] Include\n * {@link module:ol/control/Attribution~Attribution}.\n * @property {import(\"./control/Attribution.js\").Options} [attributionOptions]\n * Options for {@link module:ol/control/Attribution~Attribution}.\n * @property {boolean} [rotate=true] Include\n * {@link module:ol/control/Rotate~Rotate}.\n * @property {import(\"./control/Rotate.js\").Options} [rotateOptions] Options\n * for {@link module:ol/control/Rotate~Rotate}.\n * @property {boolean} [zoom] Include {@link module:ol/control/Zoom~Zoom}.\n * @property {import(\"./control/Zoom.js\").Options} [zoomOptions] Options for\n * {@link module:ol/control/Zoom~Zoom}.\n * @api\n */\n/**\n * Set of controls included in maps by default. Unless configured otherwise,\n * this returns a collection containing an instance of each of the following\n * controls:\n * * {@link module:ol/control/Zoom~Zoom}\n * * {@link module:ol/control/Rotate~Rotate}\n * * {@link module:ol/control/Attribution~Attribution}\n *\n * @param {DefaultsOptions} [opt_options]\n * Defaults options.\n * @return {Collection<import(\"./control/Control.js\").default>}\n * Controls.\n * @api\n */\nexport function defaults(opt_options) {\n    var options = opt_options ? opt_options : {};\n    var controls = new Collection();\n    var zoomControl = options.zoom !== undefined ? options.zoom : true;\n    if (zoomControl) {\n        controls.push(new Zoom(options.zoomOptions));\n    }\n    var rotateControl = options.rotate !== undefined ? options.rotate : true;\n    if (rotateControl) {\n        controls.push(new Rotate(options.rotateOptions));\n    }\n    var attributionControl = options.attribution !== undefined ? options.attribution : true;\n    if (attributionControl) {\n        controls.push(new Attribution(options.attributionOptions));\n    }\n    return controls;\n}\n//# sourceMappingURL=control.js.map","/**\n * @module ol/interaction/Property\n */\n/**\n * @enum {string}\n */\nexport default {\n    ACTIVE: 'active',\n};\n//# sourceMappingURL=Property.js.map","/**\n * @module ol/ViewHint\n */\n/**\n * @enum {number}\n */\nexport default {\n    ANIMATING: 0,\n    INTERACTING: 1,\n};\n//# sourceMappingURL=ViewHint.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport Event from './Event.js';\nimport { VOID } from '../functions.js';\nimport { clear } from '../obj.js';\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nvar Target = /** @class */ (function (_super) {\n    __extends(Target, _super);\n    /**\n     * @param {*} [opt_target] Default event target for dispatched events.\n     */\n    function Target(opt_target) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {*}\n         */\n        _this.eventTarget_ = opt_target;\n        /**\n         * @private\n         * @type {Object<string, number>}\n         */\n        _this.pendingRemovals_ = null;\n        /**\n         * @private\n         * @type {Object<string, number>}\n         */\n        _this.dispatching_ = null;\n        /**\n         * @private\n         * @type {Object<string, Array<import(\"../events.js\").Listener>>}\n         */\n        _this.listeners_ = null;\n        return _this;\n    }\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../events.js\").Listener} listener Listener.\n     */\n    Target.prototype.addEventListener = function (type, listener) {\n        if (!type || !listener) {\n            return;\n        }\n        var listeners = this.listeners_ || (this.listeners_ = {});\n        var listenersForType = listeners[type] || (listeners[type] = []);\n        if (listenersForType.indexOf(listener) === -1) {\n            listenersForType.push(listener);\n        }\n    };\n    /**\n     * Dispatches an event and calls all listeners listening for events\n     * of this type. The event parameter can either be a string or an\n     * Object with a `type` property.\n     *\n     * @param {import(\"./Event.js\").default|string} event Event object.\n     * @return {boolean|undefined} `false` if anyone called preventDefault on the\n     *     event object or if any of the listeners returned false.\n     * @api\n     */\n    Target.prototype.dispatchEvent = function (event) {\n        var isString = typeof event === 'string';\n        var type = isString ? event : event.type;\n        var listeners = this.listeners_ && this.listeners_[type];\n        if (!listeners) {\n            return;\n        }\n        var evt = isString ? new Event(event) : /** @type {Event} */ (event);\n        if (!evt.target) {\n            evt.target = this.eventTarget_ || this;\n        }\n        var dispatching = this.dispatching_ || (this.dispatching_ = {});\n        var pendingRemovals = this.pendingRemovals_ || (this.pendingRemovals_ = {});\n        if (!(type in dispatching)) {\n            dispatching[type] = 0;\n            pendingRemovals[type] = 0;\n        }\n        ++dispatching[type];\n        var propagate;\n        for (var i = 0, ii = listeners.length; i < ii; ++i) {\n            if ('handleEvent' in listeners[i]) {\n                propagate = /** @type {import(\"../events.js\").ListenerObject} */ (listeners[i]).handleEvent(evt);\n            }\n            else {\n                propagate = /** @type {import(\"../events.js\").ListenerFunction} */ (listeners[i]).call(this, evt);\n            }\n            if (propagate === false || evt.propagationStopped) {\n                propagate = false;\n                break;\n            }\n        }\n        if (--dispatching[type] === 0) {\n            var pr = pendingRemovals[type];\n            delete pendingRemovals[type];\n            while (pr--) {\n                this.removeEventListener(type, VOID);\n            }\n            delete dispatching[type];\n        }\n        return propagate;\n    };\n    /**\n     * Clean up.\n     */\n    Target.prototype.disposeInternal = function () {\n        this.listeners_ && clear(this.listeners_);\n    };\n    /**\n     * Get the listeners for a specified event type. Listeners are returned in the\n     * order that they will be called in.\n     *\n     * @param {string} type Type.\n     * @return {Array<import(\"../events.js\").Listener>|undefined} Listeners.\n     */\n    Target.prototype.getListeners = function (type) {\n        return (this.listeners_ && this.listeners_[type]) || undefined;\n    };\n    /**\n     * @param {string} [opt_type] Type. If not provided,\n     *     `true` will be returned if this event target has any listeners.\n     * @return {boolean} Has listeners.\n     */\n    Target.prototype.hasListener = function (opt_type) {\n        if (!this.listeners_) {\n            return false;\n        }\n        return opt_type\n            ? opt_type in this.listeners_\n            : Object.keys(this.listeners_).length > 0;\n    };\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../events.js\").Listener} listener Listener.\n     */\n    Target.prototype.removeEventListener = function (type, listener) {\n        var listeners = this.listeners_ && this.listeners_[type];\n        if (listeners) {\n            var index = listeners.indexOf(listener);\n            if (index !== -1) {\n                if (this.pendingRemovals_ && type in this.pendingRemovals_) {\n                    // make listener a no-op, and remove later in #dispatchEvent()\n                    listeners[index] = VOID;\n                    ++this.pendingRemovals_[type];\n                }\n                else {\n                    listeners.splice(index, 1);\n                    if (listeners.length === 0) {\n                        delete this.listeners_[type];\n                    }\n                }\n            }\n        }\n    };\n    return Target;\n}(Disposable));\nexport default Target;\n//# sourceMappingURL=Target.js.map"],"sourceRoot":""}