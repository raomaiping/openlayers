{"version":3,"sources":["webpack:///./src/hooks/updateMapSize.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/net.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/source/BingMaps.js","webpack:///./src/views/third-party-map-display/bing/index.vue","webpack:///./src/views/third-party-map-display/bing/index.vue?8145","webpack:///./src/views/third-party-map-display/bing/index.vue?1afc"],"names":["map","targetNode","document","querySelector","observer","MutationObserver","mutationsList","mutation","type","attributeName","i","length","updateSize","observe","attributes","childList","subtree","onBeforeUnmount","disconnect","extendStatics","__extends","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","jsonp","url","callback","opt_errback","opt_callbackParam","script","createElement","key","cleanup","window","parentNode","removeChild","async","src","indexOf","timer","setTimeout","data","clearTimeout","head","appendChild","_super","ResponseError","response","_this","message","status","name","Error","ClientError","client","BingMaps","options","hidpi","undefined","interpolate","imageSmoothing","cacheSize","crossOrigin","opaque","projection","reprojectionErrorThreshold","state","tileLoadFunction","tilePixelRatio","wrapX","transition","zDirection","hidpi_","culture_","culture","maxZoom_","maxZoom","apiKey_","imagerySet_","imagerySet","handleImageryMetadataResponse","bind","getApiKey","getImagerySet","statusCode","statusDescription","authenticationResultCode","resourceSets","resources","resource","zoomMax","sourceProjection","getProjection","extent","scale","tileSize","imageWidth","imageHeight","tileGrid","minZoom","zoomMin","tileUrlFunction","imageUrlSubdomains","subdomain","quadKeyTileCoord","imageUrl","replace","tileCoord","pixelRatio","charCode","z","digits","mask","fromCharCode","join","quadKey","imageryProviders","transform_1","setAttributions","frameState","attributions","viewState","getTileGrid","getZForResolution","resolution","zoom","getTileCoordForCoordAndZ","center","imageryProvider","intersecting","coverageAreas","ii","coverageArea","bbox","epsg4326Extent","extent_1","push","attribution","setState","TileImage","onMounted","Map","target","layers","TileLayer","source","view","View","updateMapSize","__exports__"],"mappings":"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","file":"js/chunk-227fed22.1c0cc3f4.js","sourcesContent":["import { onBeforeUnmount } from \"vue\";\n\n/**\n * 监听侧边栏，侧边栏发生变化更新地图\n * @param {ol.Map} map 地图实例\n */\nexport default (...map) => {\n  // 选择需要观察变动的节点\n  const targetNode = document.querySelector(\n    \".el-aside .menu .el-scrollbar__view\"\n  );\n  // 观察器的配置（需要观察什么变动）\n  const config = { attributes: true, childList: true, subtree: true };\n  // 当观察到变动时执行的回调函数\n  const callback = function (mutationsList) {\n    // Use traditional 'for loops' for IE 11\n    for (let mutation of mutationsList) {\n      if (mutation.type === \"childList\") {\n        // console.log(\"已添加或删除子节点。\");\n      } else if (\n        mutation.type === \"attributes\" &&\n        mutation.attributeName === \"style\"\n      ) {\n        for (let i = 0; i < map.length; i++) {\n          map[i].updateSize();\n        }\n\n        // console.log(\"这个 \" + mutation.attributeName + \" 属性被修改。\");\n      }\n    }\n  };\n  // 创建一个观察器实例并传入回调函数\n  const observer = new MutationObserver(callback);\n\n  // 以上述配置开始观察目标节点\n  observer.observe(targetNode, config);\n\n  //卸载前\n  onBeforeUnmount(() => {\n    observer.disconnect();\n  });\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/net\n */\nimport { getUid } from './util.js';\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {Function} [opt_errback] Callback on error.\n * @param {string} [opt_callbackParam] Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, opt_errback, opt_callbackParam) {\n    var script = document.createElement('script');\n    var key = 'olc_' + getUid(callback);\n    function cleanup() {\n        delete window[key];\n        script.parentNode.removeChild(script);\n    }\n    script.async = true;\n    script.src =\n        url +\n            (url.indexOf('?') == -1 ? '?' : '&') +\n            (opt_callbackParam || 'callback') +\n            '=' +\n            key;\n    var timer = setTimeout(function () {\n        cleanup();\n        if (opt_errback) {\n            opt_errback();\n        }\n    }, 10000);\n    window[key] = function (data) {\n        clearTimeout(timer);\n        cleanup();\n        callback(data);\n    };\n    document.head.appendChild(script);\n}\nvar ResponseError = /** @class */ (function (_super) {\n    __extends(ResponseError, _super);\n    /**\n     * @param {XMLHttpRequest} response The XHR object.\n     */\n    function ResponseError(response) {\n        var _this = this;\n        var message = 'Unexpected response status: ' + response.status;\n        _this = _super.call(this, message) || this;\n        /**\n         * @type {string}\n         */\n        _this.name = 'ResponseError';\n        /**\n         * @type {XMLHttpRequest}\n         */\n        _this.response = response;\n        return _this;\n    }\n    return ResponseError;\n}(Error));\nexport { ResponseError };\nvar ClientError = /** @class */ (function (_super) {\n    __extends(ClientError, _super);\n    /**\n     * @param {XMLHttpRequest} client The XHR object.\n     */\n    function ClientError(client) {\n        var _this = _super.call(this, 'Failed to issue request') || this;\n        /**\n         * @type {string}\n         */\n        _this.name = 'ClientError';\n        /**\n         * @type {XMLHttpRequest}\n         */\n        _this.client = client;\n        return _this;\n    }\n    return ClientError;\n}(Error));\nexport { ClientError };\n/**\n * @param {string} url The URL.\n * @return {Promise<Object>} A promise that resolves to the JSON response.\n */\nexport function getJSON(url) {\n    return new Promise(function (resolve, reject) {\n        /**\n         * @param {ProgressEvent<XMLHttpRequest>} event The load event.\n         */\n        function onLoad(event) {\n            var client = event.target;\n            // status will be 0 for file:// urls\n            if (!client.status || (client.status >= 200 && client.status < 300)) {\n                var data = void 0;\n                try {\n                    data = JSON.parse(client.responseText);\n                }\n                catch (err) {\n                    var message = 'Error parsing response text as JSON: ' + err.message;\n                    reject(new Error(message));\n                    return;\n                }\n                resolve(data);\n                return;\n            }\n            reject(new ResponseError(client));\n        }\n        /**\n         * @param {ProgressEvent<XMLHttpRequest>} event The error event.\n         */\n        function onError(event) {\n            reject(new ClientError(event.target));\n        }\n        var client = new XMLHttpRequest();\n        client.addEventListener('load', onLoad);\n        client.addEventListener('error', onError);\n        client.open('GET', url);\n        client.setRequestHeader('Accept', 'application/json');\n        client.send();\n    });\n}\n/**\n * @param {string} base The base URL.\n * @param {string} url The potentially relative URL.\n * @return {string} The full URL.\n */\nexport function resolveUrl(base, url) {\n    if (url.indexOf('://') >= 0) {\n        return url;\n    }\n    return new URL(url, base).href;\n}\nvar originalXHR;\nexport function overrideXHR(xhr) {\n    if (typeof XMLHttpRequest !== 'undefined') {\n        originalXHR = XMLHttpRequest;\n    }\n    global.XMLHttpRequest = xhr;\n}\nexport function restoreXHR() {\n    global.XMLHttpRequest = originalXHR;\n}\n//# sourceMappingURL=net.js.map","/**\n * @module ol/source/BingMaps\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport TileImage from './TileImage.js';\nimport { applyTransform, intersects } from '../extent.js';\nimport { createFromTileUrlFunctions } from '../tileurlfunction.js';\nimport { createOrUpdate } from '../tilecoord.js';\nimport { createXYZ, extentFromProjection } from '../tilegrid.js';\nimport { get as getProjection, getTransformFromProjections } from '../proj.js';\nimport { jsonp as requestJSONP } from '../net.js';\n/**\n * @param {import('../tilecoord.js').TileCoord} tileCoord Tile coord.\n * @return {string} Quad key.\n */\nexport function quadKey(tileCoord) {\n    var z = tileCoord[0];\n    var digits = new Array(z);\n    var mask = 1 << (z - 1);\n    var i, charCode;\n    for (i = 0; i < z; ++i) {\n        // 48 is charCode for 0 - '0'.charCodeAt(0)\n        charCode = 48;\n        if (tileCoord[1] & mask) {\n            charCode += 1;\n        }\n        if (tileCoord[2] & mask) {\n            charCode += 2;\n        }\n        digits[i] = String.fromCharCode(charCode);\n        mask >>= 1;\n    }\n    return digits.join('');\n}\n/**\n * The attribution containing a link to the Microsoft® Bing™ Maps Platform APIs’\n * Terms Of Use.\n * @const\n * @type {string}\n */\nvar TOS_ATTRIBUTION = '<a class=\"ol-attribution-bing-tos\" ' +\n    'href=\"https://www.microsoft.com/maps/product/terms.html\" target=\"_blank\">' +\n    'Terms of Use</a>';\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize] Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.\n * @property {boolean} [hidpi=false] If `true` hidpi tiles will be requested.\n * @property {string} [culture='en-us'] Culture code.\n * @property {string} key Bing Maps API key. Get yours at https://www.bingmapsportal.com/.\n * @property {string} imagerySet Type of imagery.\n * @property {boolean} [imageSmoothing=true] Deprecated.  Use the `interpolate` option instead.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {number} [maxZoom=21] Max zoom. Default is what's advertized by the BingMaps service.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n */\n/**\n * @typedef {Object} BingMapsImageryMetadataResponse\n * @property {number} statusCode The response status code\n * @property {string} statusDescription The response status description\n * @property {string} authenticationResultCode The authentication result code\n * @property {Array<ResourceSet>} resourceSets The array of resource sets\n */\n/**\n * @typedef {Object} ResourceSet\n * @property {Array<Resource>} resources Resources.\n */\n/**\n * @typedef {Object} Resource\n * @property {number} imageHeight The image height\n * @property {number} imageWidth The image width\n * @property {number} zoomMin The minimum zoom level\n * @property {number} zoomMax The maximum zoom level\n * @property {string} imageUrl The image URL\n * @property {Array<string>} imageUrlSubdomains The image URL subdomains for rotation\n * @property {Array<ImageryProvider>} [imageryProviders] The array of ImageryProviders\n */\n/**\n * @typedef {Object} ImageryProvider\n * @property {Array<CoverageArea>} coverageAreas The coverage areas\n * @property {string} [attribution] The attribution\n */\n/**\n * @typedef {Object} CoverageArea\n * @property {number} zoomMin The minimum zoom\n * @property {number} zoomMax The maximum zoom\n * @property {Array<number>} bbox The coverage bounding box\n */\n/**\n * @classdesc\n * Layer source for Bing Maps tile data.\n * @api\n */\nvar BingMaps = /** @class */ (function (_super) {\n    __extends(BingMaps, _super);\n    /**\n     * @param {Options} options Bing Maps options.\n     */\n    function BingMaps(options) {\n        var _this = this;\n        var hidpi = options.hidpi !== undefined ? options.hidpi : false;\n        var interpolate = options.imageSmoothing !== undefined ? options.imageSmoothing : true;\n        if (options.interpolate !== undefined) {\n            interpolate = options.interpolate;\n        }\n        _this = _super.call(this, {\n            cacheSize: options.cacheSize,\n            crossOrigin: 'anonymous',\n            interpolate: interpolate,\n            opaque: true,\n            projection: getProjection('EPSG:3857'),\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            state: 'loading',\n            tileLoadFunction: options.tileLoadFunction,\n            tilePixelRatio: hidpi ? 2 : 1,\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n            transition: options.transition,\n            zDirection: options.zDirection,\n        }) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.hidpi_ = hidpi;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.culture_ = options.culture !== undefined ? options.culture : 'en-us';\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxZoom_ = options.maxZoom !== undefined ? options.maxZoom : -1;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.apiKey_ = options.key;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.imagerySet_ = options.imagerySet;\n        var url = 'https://dev.virtualearth.net/REST/v1/Imagery/Metadata/' +\n            _this.imagerySet_ +\n            '?uriScheme=https&include=ImageryProviders&key=' +\n            _this.apiKey_ +\n            '&c=' +\n            _this.culture_;\n        requestJSONP(url, _this.handleImageryMetadataResponse.bind(_this), undefined, 'jsonp');\n        return _this;\n    }\n    /**\n     * Get the api key used for this source.\n     *\n     * @return {string} The api key.\n     * @api\n     */\n    BingMaps.prototype.getApiKey = function () {\n        return this.apiKey_;\n    };\n    /**\n     * Get the imagery set associated with this source.\n     *\n     * @return {string} The imagery set.\n     * @api\n     */\n    BingMaps.prototype.getImagerySet = function () {\n        return this.imagerySet_;\n    };\n    /**\n     * @param {BingMapsImageryMetadataResponse} response Response.\n     */\n    BingMaps.prototype.handleImageryMetadataResponse = function (response) {\n        if (response.statusCode != 200 ||\n            response.statusDescription != 'OK' ||\n            response.authenticationResultCode != 'ValidCredentials' ||\n            response.resourceSets.length != 1 ||\n            response.resourceSets[0].resources.length != 1) {\n            this.setState('error');\n            return;\n        }\n        var resource = response.resourceSets[0].resources[0];\n        var maxZoom = this.maxZoom_ == -1 ? resource.zoomMax : this.maxZoom_;\n        var sourceProjection = this.getProjection();\n        var extent = extentFromProjection(sourceProjection);\n        var scale = this.hidpi_ ? 2 : 1;\n        var tileSize = resource.imageWidth == resource.imageHeight\n            ? resource.imageWidth / scale\n            : [resource.imageWidth / scale, resource.imageHeight / scale];\n        var tileGrid = createXYZ({\n            extent: extent,\n            minZoom: resource.zoomMin,\n            maxZoom: maxZoom,\n            tileSize: tileSize,\n        });\n        this.tileGrid = tileGrid;\n        var culture = this.culture_;\n        var hidpi = this.hidpi_;\n        this.tileUrlFunction = createFromTileUrlFunctions(resource.imageUrlSubdomains.map(function (subdomain) {\n            /** @type {import('../tilecoord.js').TileCoord} */\n            var quadKeyTileCoord = [0, 0, 0];\n            var imageUrl = resource.imageUrl\n                .replace('{subdomain}', subdomain)\n                .replace('{culture}', culture);\n            return (\n            /**\n             * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n             * @param {number} pixelRatio Pixel ratio.\n             * @param {import(\"../proj/Projection.js\").default} projection Projection.\n             * @return {string|undefined} Tile URL.\n             */\n            function (tileCoord, pixelRatio, projection) {\n                if (!tileCoord) {\n                    return undefined;\n                }\n                else {\n                    createOrUpdate(tileCoord[0], tileCoord[1], tileCoord[2], quadKeyTileCoord);\n                    var url = imageUrl;\n                    if (hidpi) {\n                        url += '&dpi=d1&device=mobile';\n                    }\n                    return url.replace('{quadkey}', quadKey(quadKeyTileCoord));\n                }\n            });\n        }));\n        if (resource.imageryProviders) {\n            var transform_1 = getTransformFromProjections(getProjection('EPSG:4326'), this.getProjection());\n            this.setAttributions(function (frameState) {\n                var attributions = [];\n                var viewState = frameState.viewState;\n                var tileGrid = this.getTileGrid();\n                var z = tileGrid.getZForResolution(viewState.resolution, this.zDirection);\n                var tileCoord = tileGrid.getTileCoordForCoordAndZ(viewState.center, z);\n                var zoom = tileCoord[0];\n                resource.imageryProviders.map(function (imageryProvider) {\n                    var intersecting = false;\n                    var coverageAreas = imageryProvider.coverageAreas;\n                    for (var i = 0, ii = coverageAreas.length; i < ii; ++i) {\n                        var coverageArea = coverageAreas[i];\n                        if (zoom >= coverageArea.zoomMin &&\n                            zoom <= coverageArea.zoomMax) {\n                            var bbox = coverageArea.bbox;\n                            var epsg4326Extent = [bbox[1], bbox[0], bbox[3], bbox[2]];\n                            var extent_1 = applyTransform(epsg4326Extent, transform_1);\n                            if (intersects(extent_1, frameState.extent)) {\n                                intersecting = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (intersecting) {\n                        attributions.push(imageryProvider.attribution);\n                    }\n                });\n                attributions.push(TOS_ATTRIBUTION);\n                return attributions;\n            }.bind(this));\n        }\n        this.setState('ready');\n    };\n    return BingMaps;\n}(TileImage));\nexport default BingMaps;\n//# sourceMappingURL=BingMaps.js.map","<template>\n  <div id=\"map\"></div>\n</template>\n\n<script setup>\n  import \"ol/ol.css\";\n  import { Map, View } from \"ol\";\n  import { BingMaps } from \"ol/source\";\n  import { Tile as TileLayer } from \"ol/layer\";\n  import { onMounted } from \"vue\";\n  import updateMapSize from \"@/hooks/updateMapSize\";\n\n  const key =\n    \"Q57tupj2UBsQNQdju4xL~xBceblfTd6icjljunbuaCw~AhwA-whmGMsfIpVhslZyknWhFYq-GvWJZqBnqV8Zq1uRlI5YM_qr7_hxvdgnU7nH\";\n  onMounted(() => {\n    const map = new Map({\n      //地图容器div的ID\n      target: \"map\",\n      //地图容器中加载的图层\n      layers: [\n        //加载瓦片图层数据\n        new TileLayer({\n          source: new BingMaps({ key: key, imagerySet: \"Road\" }),\n        }),\n      ],\n      //地图视图设置\n      view: new View({\n        //地图初始中心点\n        center: [0, 0],\n        //地图初始显示级别\n        zoom: 2,\n      }),\n    });\n    // 侧边栏变化更新地图\n    updateMapSize(map);\n  });\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  #map {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  }\n</style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=96aef946&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/openlayers/openlayers/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-96aef946\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=96aef946&scoped=true&lang=css\""],"sourceRoot":""}