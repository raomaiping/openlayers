{"version":3,"sources":["webpack:///./src/hooks/updateMapSize.js","webpack:///./src/views/map-controls/overview-map/index.vue?786a","webpack:///./src/views/map-controls/overview-map/index.vue","webpack:///./src/views/map-controls/overview-map/index.vue?5008"],"names":["map","targetNode","document","querySelector","observer","MutationObserver","mutationsList","mutation","type","attributeName","i","length","updateSize","observe","attributes","childList","subtree","onBeforeUnmount","disconnect","raster","TileLayer","source","XYZ","attributions","ATTRIBUTIONS","url","MAPURL","maxZoom","onMounted","initMap","Map","target","layers","view","View","projection","center","zoom","controls","defaults","extend","OverviewMap","className","OSM","collapseLabel","label","collapsed","updateMapSize","__exports__"],"mappings":"4GAAA,gBAMe,QAAIA,KAEjB,MAAMC,EAAaC,SAASC,cAC1B,uCAuBIC,EAAW,IAAIC,kBAlBJ,SAAUC,GAEzB,IAAK,IAAIC,KAAYD,EACnB,GAAsB,cAAlBC,EAASC,WAEN,GACa,eAAlBD,EAASC,MACkB,UAA3BD,EAASE,cAET,IAAK,IAAIC,EAAI,EAAGA,EAAIV,EAAIW,OAAQD,IAC9BV,EAAIU,GAAGE,YAMf,IAKAR,EAASS,QAAQZ,EAvBF,CAAEa,YAAY,EAAMC,WAAW,EAAMC,SAAS,IA0B7DC,2BAAgB,KACdb,EAASc,YAAY,GAExB,C,2DCzCD,S,qOCeE,MAAMC,EAAS,IAAIC,IAAU,CAC3BC,OAAQ,IAAIC,IAAI,CACdC,aAAcC,IACdC,IAAKC,IACLC,QAAS,O,OAyCbC,qBAAU,KAtCMC,MACd,MAAM7B,EAAM,IAAI8B,IAAI,CAElBC,OAAQ,MAERC,OAAQ,CAENb,GAEFc,KAAM,IAAIC,IAAK,CACbC,WAAY,YACZC,OAAQ,CAAC,EAAG,GAEZC,KAAM,IAGRC,SAAUC,cAAWC,OAAO,CAC1B,IAAIC,IAAY,CACdC,UAAW,uCACXV,OAAQ,CACN,IAAIZ,IAAU,CACZC,OAAQ,IAAIsB,IAAI,CAEdlB,IACE,0GAKRmB,cAAe,IACfC,MAAO,IACPC,WAAW,QAKjBC,YAAc/C,EAAI,EAGlB6B,EAAS,I,+FCvDb,MAAMmB,E,MAA2B,GAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD,W","file":"js/chunk-44efde54.5cc3842c.js","sourcesContent":["import { onBeforeUnmount } from \"vue\";\n\n/**\n * 监听侧边栏，侧边栏发生变化更新地图\n * @param {ol.Map} map 地图实例\n */\nexport default (...map) => {\n  // 选择需要观察变动的节点\n  const targetNode = document.querySelector(\n    \".el-aside .menu .el-scrollbar__view\"\n  );\n  // 观察器的配置（需要观察什么变动）\n  const config = { attributes: true, childList: true, subtree: true };\n  // 当观察到变动时执行的回调函数\n  const callback = function (mutationsList) {\n    // Use traditional 'for loops' for IE 11\n    for (let mutation of mutationsList) {\n      if (mutation.type === \"childList\") {\n        // console.log(\"已添加或删除子节点。\");\n      } else if (\n        mutation.type === \"attributes\" &&\n        mutation.attributeName === \"style\"\n      ) {\n        for (let i = 0; i < map.length; i++) {\n          map[i].updateSize();\n        }\n\n        // console.log(\"这个 \" + mutation.attributeName + \" 属性被修改。\");\n      }\n    }\n  };\n  // 创建一个观察器实例并传入回调函数\n  const observer = new MutationObserver(callback);\n\n  // 以上述配置开始观察目标节点\n  observer.observe(targetNode, config);\n\n  //卸载前\n  onBeforeUnmount(() => {\n    observer.disconnect();\n  });\n};\n","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=026159d2&scoped=true&lang=css\"","<template>\n  <div id=\"map\"></div>\n</template>\n\n<script setup>\n  import \"ol/ol.css\";\n  import { onMounted } from \"vue\";\n  import { Map, View } from \"ol\";\n  import { Tile as TileLayer } from \"ol/layer\";\n  import { OSM } from \"ol/source\";\n  import { defaults, OverviewMap } from \"ol/control\";\n  import { XYZ } from \"ol/source\";\n  import { MAPURL, ATTRIBUTIONS } from \"@/constants\";\n  import updateMapSize from \"@/hooks/updateMapSize\";\n\n  const raster = new TileLayer({\n    source: new XYZ({\n      attributions: ATTRIBUTIONS,\n      url: MAPURL,\n      maxZoom: 20,\n    }),\n  });\n  const initMap = () => {\n    const map = new Map({\n      //初始化map\n      target: \"map\",\n      //地图容器中加载的图层\n      layers: [\n        //加载瓦片图层数据\n        raster,\n      ],\n      view: new View({\n        projection: \"EPSG:4326\", // 坐标系，有EPSG:4326和EPSG:3 857\n        center: [0, 0], // 深圳坐标\n        //地图初始显示级别\n        zoom: 5,\n      }),\n      //加载控件到地图容器中\n      controls: defaults().extend([\n        new OverviewMap({\n          className: \"ol-overviewmap ol-custom-overviewmap\",\n          layers: [\n            new TileLayer({\n              source: new OSM({\n                // 使用不同样式的底图\n                url:\n                  \"https://{a-c}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png\" +\n                  \"?apikey=0e6fc415256d4fbb9b5166a718591d71\",\n              }),\n            }),\n          ],\n          collapseLabel: \"\\u00BB\",\n          label: \"\\u00AB\",\n          collapsed: false,\n        }),\n      ]),\n    });\n    // 侧边栏变化更新地图\n    updateMapSize(map);\n  };\n  onMounted(() => {\n    initMap();\n  });\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  #map {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  }\n  /* 控制插件的样式和位置 */\n  :deep(.ol-custom-overviewmap),\n  :deep(.ol-custom-overviewmap.ol-uncollapsible) {\n    bottom: auto;\n    left: auto;\n    right: 0;\n    top: 0;\n  }\n\n  :deep(.ol-custom-overviewmap:not(.ol-collapsed)) {\n    border: 1px solid black;\n  }\n\n  :deep(.ol-custom-overviewmap .ol-overviewmap-map) {\n    border: none;\n    width: 300px;\n  }\n\n  :deep(.ol-custom-overviewmap .ol-overviewmap-box) {\n    border: 2px solid red;\n  }\n\n  :deep(.ol-custom-overviewmap:not(.ol-collapsed) button) {\n    bottom: auto;\n    left: auto;\n    right: 1px;\n    top: 1px;\n  }\n\n  :deep(.ol-rotate) {\n    top: 170px;\n    right: 0;\n  }\n</style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=026159d2&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/openlayers/openlayers/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-026159d2\"]])\n\nexport default __exports__"],"sourceRoot":""}