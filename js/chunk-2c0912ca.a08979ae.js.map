{"version":3,"sources":["webpack:///./src/hooks/updateMapSize.js","webpack:///./src/views/third-party-map-display/baidu-map/index.vue?975a","webpack:///./src/views/third-party-map-display/baidu-map/index.vue","webpack:///./src/views/third-party-map-display/baidu-map/index.vue?9232"],"names":["map","targetNode","document","querySelector","observer","MutationObserver","mutationsList","mutation","type","attributeName","i","length","updateSize","observe","attributes","childList","subtree","onBeforeUnmount","disconnect","projection","get","resolutions","Math","pow","tilegrid","TileGrid","origin","baidu_source","TileImage","tileGrid","attributions","ATTRIBUTIONS","tileUrlFunction","tileCoord","z","x","y","baidu_layer","TileLayer","source","onMounted","Map","target","layers","view","View","center","zoom","updateMapSize","__exports__"],"mappings":"4GAAA,gBAMe,QAAIA,KAEjB,MAAMC,EAAaC,SAASC,cAC1B,uCAuBIC,EAAW,IAAIC,kBAlBJ,SAAUC,GAEzB,IAAK,IAAIC,KAAYD,EACnB,GAAsB,cAAlBC,EAASC,WAEN,GACa,eAAlBD,EAASC,MACkB,UAA3BD,EAASE,cAET,IAAK,IAAIC,EAAI,EAAGA,EAAIV,EAAIW,OAAQD,IAC9BV,EAAIU,GAAGE,YAMf,IAKAR,EAASS,QAAQZ,EAvBF,CAAEa,YAAY,EAAMC,WAAW,EAAMC,SAAS,IA0B7DC,2BAAgB,KACdb,EAASc,YAAY,GAExB,C,6DCzCD,S,yNCeE,MAAMC,EAAaC,YAAI,aAEjBC,EAAc,GACpB,IAAK,IAAIX,EAAI,EAAGA,EAAI,GAAIA,GAAK,EAC3BW,EAAYX,GAAKY,KAAKC,IAAI,EAAG,GAAKb,GAEpC,MAAMc,EAAW,IAAIC,IAAS,CAC5BC,OAAQ,CAAC,EAAG,GACZL,YAAaA,IAITM,EAAe,IAAIC,IAAU,CAEjCT,WAAYA,EAEZU,SAAUL,EACVM,aAAcC,IAEdC,gBAAkBC,IAChB,IAAKA,EACH,MAAO,GAET,MAAMC,EAAID,EAAU,GACpB,IAAIE,EAAIF,EAAU,GACdG,EAAIH,EAAU,GAQlB,OANIE,EAAI,IACNA,EAAI,KAAOA,GAETC,EAAI,IACNA,EAAI,KAAOA,GAGX,uDACAD,EACA,MACAC,EACA,MACAF,EACA,sCAAsC,IAKtCG,EAAc,IAAIC,IAAU,CAChCC,OAAQZ,I,OAGVa,qBAAU,KACR,MAAMxC,EAAM,IAAIyC,IAAI,CAElBC,OAAQ,MAERC,OAAQ,CAENN,GAGFO,KAAM,IAAIC,IAAK,CAEbC,OAAQ,CAAC,EAAG,GAEZC,KAAM,MAIVC,YAAchD,EAAI,I,+FC5EtB,MAAMiD,E,MAA2B,GAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD,W","file":"js/chunk-2c0912ca.a08979ae.js","sourcesContent":["import { onBeforeUnmount } from \"vue\";\n\n/**\n * 监听侧边栏，侧边栏发生变化更新地图\n * @param {ol.Map} map 地图实例\n */\nexport default (...map) => {\n  // 选择需要观察变动的节点\n  const targetNode = document.querySelector(\n    \".el-aside .menu .el-scrollbar__view\"\n  );\n  // 观察器的配置（需要观察什么变动）\n  const config = { attributes: true, childList: true, subtree: true };\n  // 当观察到变动时执行的回调函数\n  const callback = function (mutationsList) {\n    // Use traditional 'for loops' for IE 11\n    for (let mutation of mutationsList) {\n      if (mutation.type === \"childList\") {\n        // console.log(\"已添加或删除子节点。\");\n      } else if (\n        mutation.type === \"attributes\" &&\n        mutation.attributeName === \"style\"\n      ) {\n        for (let i = 0; i < map.length; i++) {\n          map[i].updateSize();\n        }\n\n        // console.log(\"这个 \" + mutation.attributeName + \" 属性被修改。\");\n      }\n    }\n  };\n  // 创建一个观察器实例并传入回调函数\n  const observer = new MutationObserver(callback);\n\n  // 以上述配置开始观察目标节点\n  observer.observe(targetNode, config);\n\n  //卸载前\n  onBeforeUnmount(() => {\n    observer.disconnect();\n  });\n};\n","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=273faa8e&scoped=true&lang=css\"","<template>\n  <div id=\"map\"></div>\n</template>\n\n<script setup>\n  import \"ol/ol.css\";\n  import { Map, View } from \"ol\";\n  import { TileImage } from \"ol/source\";\n  import { Tile as TileLayer } from \"ol/layer\";\n  import { onMounted } from \"vue\";\n  import { get } from \"ol/proj\";\n  import TileGrid from \"ol/tilegrid/TileGrid\";\n  import updateMapSize from \"@/hooks/updateMapSize\";\n  import { ATTRIBUTIONS } from \"@/constants\";\n  //坐标参考系\n  const projection = get(\"EPSG:3857\");\n  //分辨率\n  const resolutions = [];\n  for (let i = 0; i < 19; i += 1) {\n    resolutions[i] = Math.pow(2, 18 - i);\n  }\n  const tilegrid = new TileGrid({\n    origin: [0, 0],\n    resolutions: resolutions,\n  });\n\n  //拼接百度地图出图地址\n  const baidu_source = new TileImage({\n    //设置坐标参考系\n    projection: projection,\n    //设置分辨率\n    tileGrid: tilegrid,\n    attributions: ATTRIBUTIONS,\n    //出图基地址\n    tileUrlFunction: (tileCoord) => {\n      if (!tileCoord) {\n        return \"\";\n      }\n      const z = tileCoord[0];\n      let x = tileCoord[1];\n      let y = tileCoord[2];\n\n      if (x < 0) {\n        x = \"M\" + -x;\n      }\n      if (y < 0) {\n        y = \"M\" + -y;\n      }\n      return (\n        \"http://online3.map.bdimg.com/onlinelabel/?qt=tile&x=\" +\n        x +\n        \"&y=\" +\n        y +\n        \"&z=\" +\n        z +\n        \"&styles=pl&udt=20151021&scaler=1&p=1\"\n      );\n    },\n  });\n  //百度地图\n  const baidu_layer = new TileLayer({\n    source: baidu_source,\n  });\n\n  onMounted(() => {\n    const map = new Map({\n      //地图容器div的ID\n      target: \"map\",\n      //地图容器中加载的图层\n      layers: [\n        //加载瓦片图层数据\n        baidu_layer,\n      ],\n      //地图视图设置\n      view: new View({\n        //地图初始中心点\n        center: [0, 0],\n        //地图初始显示级别\n        zoom: 2,\n      }),\n    });\n    // 侧边栏变化更新地图\n    updateMapSize(map);\n  });\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  #map {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  }\n</style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=273faa8e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/openlayers/openlayers/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-273faa8e\"]])\n\nexport default __exports__"],"sourceRoot":""}