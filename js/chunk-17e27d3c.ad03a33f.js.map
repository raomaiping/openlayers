{"version":3,"sources":["webpack:///./src/hooks/updateMapSize.js","webpack:///./src/views/map-controls/scale-line/index.vue?0bc6","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/source/XYZ.js","webpack:///./node_modules/.pnpm/ol@6.15.1/node_modules/ol/control/ScaleLine.js","webpack:///./src/views/map-controls/scale-line/index.vue","webpack:///./src/views/map-controls/scale-line/index.vue?5ed5"],"names":["map","targetNode","document","querySelector","observer","MutationObserver","mutationsList","mutation","type","attributeName","i","length","updateSize","observe","attributes","childList","subtree","onBeforeUnmount","disconnect","extendStatics","__extends","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","XYZ","_super","opt_options","_this","options","interpolate","undefined","imageSmoothing","projection","tileGrid","extent","maxResolution","maxZoom","minZoom","tileSize","attributions","cacheSize","crossOrigin","opaque","reprojectionErrorThreshold","tileLoadFunction","tilePixelRatio","tileUrlFunction","url","urls","wrapX","transition","attributionsCollapsible","zDirection","gutter_","gutter","getGutter","UNITS_PROP","Units","LEADING_DIGITS","DEFAULT_DPI","ScaleLine","className","bar","element","createElement","render","target","on","once","un","innerElement_","appendChild","viewState_","minWidth_","minWidth","maxWidth_","maxWidth","renderedVisible_","renderedWidth_","renderedHTML_","addChangeListener","handleUnitsChanged_","setUnits","units","scaleBar_","scaleBarSteps_","steps","scaleBarText_","text","dpi_","dpi","getUnits","get","updateElement_","set","setDpi","viewState","center","pointResolutionUnits","DEGREES","METERS","pointResolution","resolution","nominalCount","suffix","metersPerDegree","count","width","decimalCount","previousCount","previousWidth","previousDecimalCount","html","Math","floor","log","decimal","pow","round","isNaN","style","display","createScaleBar","toFixed","innerHTML","scale","mapScale","getScaleForResolution","toLocaleString","scaleSteps","stepWidth","backgroundColor","push","createMarker","createStepText","join","position","isLast","lengthString","parseFloat","toString","mapEvent","frameState","raster","TileLayer","source","ATTRIBUTIONS","MAPURL","scaleLineControl","onMounted","initMap","Map","layers","view","View","zoom","controls","defaults","extend","updateMapSize","__exports__"],"mappings":"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","file":"js/chunk-17e27d3c.ad03a33f.js","sourcesContent":["import { onBeforeUnmount } from \"vue\";\n\n/**\n * 监听侧边栏，侧边栏发生变化更新地图\n * @param {ol.Map} map 地图实例\n */\nexport default (...map) => {\n  // 选择需要观察变动的节点\n  const targetNode = document.querySelector(\n    \".el-aside .menu .el-scrollbar__view\"\n  );\n  // 观察器的配置（需要观察什么变动）\n  const config = { attributes: true, childList: true, subtree: true };\n  // 当观察到变动时执行的回调函数\n  const callback = function (mutationsList) {\n    // Use traditional 'for loops' for IE 11\n    for (let mutation of mutationsList) {\n      if (mutation.type === \"childList\") {\n        // console.log(\"已添加或删除子节点。\");\n      } else if (\n        mutation.type === \"attributes\" &&\n        mutation.attributeName === \"style\"\n      ) {\n        for (let i = 0; i < map.length; i++) {\n          map[i].updateSize();\n        }\n\n        // console.log(\"这个 \" + mutation.attributeName + \" 属性被修改。\");\n      }\n    }\n  };\n  // 创建一个观察器实例并传入回调函数\n  const observer = new MutationObserver(callback);\n\n  // 以上述配置开始观察目标节点\n  observer.observe(targetNode, config);\n\n  //卸载前\n  onBeforeUnmount(() => {\n    observer.disconnect();\n  });\n};\n","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=b2c7d636&scoped=true&lang=css\"","/**\n * @module ol/source/XYZ\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport TileImage from './TileImage.js';\nimport { createXYZ, extentFromProjection } from '../tilegrid.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [imageSmoothing=true] Deprecated.  Use the `interpolate` option instead.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection='EPSG:3857'] Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {number} [maxZoom=42] Optional max zoom level. Not used if `tileGrid` is provided.\n * @property {number} [minZoom=0] Optional min zoom level. Not used if `tileGrid` is provided.\n * @property {number} [maxResolution] Optional tile grid resolution at level zero. Not used if `tileGrid` is provided.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {number|import(\"../size.js\").Size} [tileSize=[256, 256]] The tile size used by the tile service.\n * Not used if `tileGrid` is provided.\n * @property {number} [gutter=0] The size in pixels of the gutter around image tiles to ignore.\n * This allows artifacts of rendering at tile edges to be ignored.\n * Supported images should be wider and taller than the tile size by a value of `2 x gutter`.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get\n * tile URL given a tile coordinate and the projection.\n * Required if `url` or `urls` are not provided.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`,\n * and `{z}` placeholders. A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`,\n * may be used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition=250] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n */\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case\n * a `tileUrlFunction` can be used, such as:\n * ```js\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *      coordinate[1] + '/' + (-coordinate[2] - 1) + '.png';\n *  }\n * ```\n * @api\n */\nvar XYZ = /** @class */ (function (_super) {\n    __extends(XYZ, _super);\n    /**\n     * @param {Options} [opt_options] XYZ options.\n     */\n    function XYZ(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        var interpolate = options.imageSmoothing !== undefined ? options.imageSmoothing : true;\n        if (options.interpolate !== undefined) {\n            interpolate = options.interpolate;\n        }\n        var projection = options.projection !== undefined ? options.projection : 'EPSG:3857';\n        var tileGrid = options.tileGrid !== undefined\n            ? options.tileGrid\n            : createXYZ({\n                extent: extentFromProjection(projection),\n                maxResolution: options.maxResolution,\n                maxZoom: options.maxZoom,\n                minZoom: options.minZoom,\n                tileSize: options.tileSize,\n            });\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            crossOrigin: options.crossOrigin,\n            interpolate: interpolate,\n            opaque: options.opaque,\n            projection: projection,\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            tileGrid: tileGrid,\n            tileLoadFunction: options.tileLoadFunction,\n            tilePixelRatio: options.tilePixelRatio,\n            tileUrlFunction: options.tileUrlFunction,\n            url: options.url,\n            urls: options.urls,\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n            transition: options.transition,\n            attributionsCollapsible: options.attributionsCollapsible,\n            zDirection: options.zDirection,\n        }) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n        return _this;\n    }\n    /**\n     * @return {number} Gutter.\n     */\n    XYZ.prototype.getGutter = function () {\n        return this.gutter_;\n    };\n    return XYZ;\n}(TileImage));\nexport default XYZ;\n//# sourceMappingURL=XYZ.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/ScaleLine\n */\nimport Control from './Control.js';\nimport ProjUnits from '../proj/Units.js';\nimport { CLASS_UNSELECTABLE } from '../css.js';\nimport { METERS_PER_UNIT, getPointResolution } from '../proj.js';\nimport { assert } from '../asserts.js';\n/**\n * @type {string}\n */\nvar UNITS_PROP = 'units';\n/**\n * Units for the scale line. Supported values are `'degrees'`, `'imperial'`,\n * `'nautical'`, `'metric'`, `'us'`.\n * @enum {string}\n */\nexport var Units = {\n    DEGREES: 'degrees',\n    IMPERIAL: 'imperial',\n    NAUTICAL: 'nautical',\n    METRIC: 'metric',\n    US: 'us',\n};\n/**\n * @const\n * @type {Array<number>}\n */\nvar LEADING_DIGITS = [1, 2, 5];\n/**\n * @const\n * @type {number}\n */\nvar DEFAULT_DPI = 25.4 / 0.28;\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:units', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types\n *     |'change:units', Return>} ScaleLineOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-scale-line'] CSS Class name.\n * @property {number} [minWidth=64] Minimum width in pixels at the OGC default dpi. The width will be\n * adjusted to match the dpi used.\n * @property {number} [maxWidth] Maximum width in pixels at the OGC default dpi. The width will be\n * adjusted to match the dpi used.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {HTMLElement|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {import(\"./ScaleLine.js\").Units|string} [units='metric'] Units.\n * @property {boolean} [bar=false] Render scalebars instead of a line.\n * @property {number} [steps=4] Number of steps the scalebar should use. Use even numbers\n * for best results. Only applies when `bar` is `true`.\n * @property {boolean} [text=false] Render the text scale above of the scalebar. Only applies\n * when `bar` is `true`.\n * @property {number|undefined} [dpi=undefined] dpi of output device such as printer. Only applies\n * when `bar` is `true`. If undefined the OGC default screen pixel size of 0.28mm will be assumed.\n */\n/**\n * @classdesc\n * A control displaying rough y-axis distances, calculated for the center of the\n * viewport. For conformal projections (e.g. EPSG:3857, the default view\n * projection in OpenLayers), the scale is valid for all directions.\n * No scale line will be shown when the y-axis distance of a pixel at the\n * viewport center cannot be calculated in the view projection.\n * By default the scale line will show in the bottom left portion of the map,\n * but this can be changed by using the css selector `.ol-scale-line`.\n * When specifying `bar` as `true`, a scalebar will be rendered instead\n * of a scaleline.\n *\n * @api\n */\nvar ScaleLine = /** @class */ (function (_super) {\n    __extends(ScaleLine, _super);\n    /**\n     * @param {Options} [opt_options] Scale line options.\n     */\n    function ScaleLine(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var className = options.className !== undefined\n            ? options.className\n            : options.bar\n                ? 'ol-scale-bar'\n                : 'ol-scale-line';\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            render: options.render,\n            target: options.target,\n        }) || this;\n        /***\n         * @type {ScaleLineOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {ScaleLineOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {ScaleLineOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {HTMLElement}\n         */\n        _this.innerElement_ = document.createElement('div');\n        _this.innerElement_.className = className + '-inner';\n        _this.element.className = className + ' ' + CLASS_UNSELECTABLE;\n        _this.element.appendChild(_this.innerElement_);\n        /**\n         * @private\n         * @type {?import(\"../View.js\").State}\n         */\n        _this.viewState_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.minWidth_ = options.minWidth !== undefined ? options.minWidth : 64;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.maxWidth_ = options.maxWidth;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderedVisible_ = false;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.renderedWidth_ = undefined;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.renderedHTML_ = '';\n        _this.addChangeListener(UNITS_PROP, _this.handleUnitsChanged_);\n        _this.setUnits(options.units || Units.METRIC);\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.scaleBar_ = options.bar || false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.scaleBarSteps_ = options.steps || 4;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.scaleBarText_ = options.text || false;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.dpi_ = options.dpi || undefined;\n        return _this;\n    }\n    /**\n     * Return the units to use in the scale line.\n     * @return {import(\"./ScaleLine.js\").Units} The units\n     * to use in the scale line.\n     * @observable\n     * @api\n     */\n    ScaleLine.prototype.getUnits = function () {\n        return this.get(UNITS_PROP);\n    };\n    /**\n     * @private\n     */\n    ScaleLine.prototype.handleUnitsChanged_ = function () {\n        this.updateElement_();\n    };\n    /**\n     * Set the units to use in the scale line.\n     * @param {import(\"./ScaleLine.js\").Units} units The units to use in the scale line.\n     * @observable\n     * @api\n     */\n    ScaleLine.prototype.setUnits = function (units) {\n        this.set(UNITS_PROP, units);\n    };\n    /**\n     * Specify the dpi of output device such as printer.\n     * @param {number|undefined} dpi The dpi of output device.\n     * @api\n     */\n    ScaleLine.prototype.setDpi = function (dpi) {\n        this.dpi_ = dpi;\n    };\n    /**\n     * @private\n     */\n    ScaleLine.prototype.updateElement_ = function () {\n        var viewState = this.viewState_;\n        if (!viewState) {\n            if (this.renderedVisible_) {\n                this.element.style.display = 'none';\n                this.renderedVisible_ = false;\n            }\n            return;\n        }\n        var center = viewState.center;\n        var projection = viewState.projection;\n        var units = this.getUnits();\n        var pointResolutionUnits = units == Units.DEGREES ? ProjUnits.DEGREES : ProjUnits.METERS;\n        var pointResolution = getPointResolution(projection, viewState.resolution, center, pointResolutionUnits);\n        var minWidth = (this.minWidth_ * (this.dpi_ || DEFAULT_DPI)) / DEFAULT_DPI;\n        var maxWidth = this.maxWidth_ !== undefined\n            ? (this.maxWidth_ * (this.dpi_ || DEFAULT_DPI)) / DEFAULT_DPI\n            : undefined;\n        var nominalCount = minWidth * pointResolution;\n        var suffix = '';\n        if (units == Units.DEGREES) {\n            var metersPerDegree = METERS_PER_UNIT[ProjUnits.DEGREES];\n            nominalCount *= metersPerDegree;\n            if (nominalCount < metersPerDegree / 60) {\n                suffix = '\\u2033'; // seconds\n                pointResolution *= 3600;\n            }\n            else if (nominalCount < metersPerDegree) {\n                suffix = '\\u2032'; // minutes\n                pointResolution *= 60;\n            }\n            else {\n                suffix = '\\u00b0'; // degrees\n            }\n        }\n        else if (units == Units.IMPERIAL) {\n            if (nominalCount < 0.9144) {\n                suffix = 'in';\n                pointResolution /= 0.0254;\n            }\n            else if (nominalCount < 1609.344) {\n                suffix = 'ft';\n                pointResolution /= 0.3048;\n            }\n            else {\n                suffix = 'mi';\n                pointResolution /= 1609.344;\n            }\n        }\n        else if (units == Units.NAUTICAL) {\n            pointResolution /= 1852;\n            suffix = 'NM';\n        }\n        else if (units == Units.METRIC) {\n            if (nominalCount < 0.001) {\n                suffix = 'μm';\n                pointResolution *= 1000000;\n            }\n            else if (nominalCount < 1) {\n                suffix = 'mm';\n                pointResolution *= 1000;\n            }\n            else if (nominalCount < 1000) {\n                suffix = 'm';\n            }\n            else {\n                suffix = 'km';\n                pointResolution /= 1000;\n            }\n        }\n        else if (units == Units.US) {\n            if (nominalCount < 0.9144) {\n                suffix = 'in';\n                pointResolution *= 39.37;\n            }\n            else if (nominalCount < 1609.344) {\n                suffix = 'ft';\n                pointResolution /= 0.30480061;\n            }\n            else {\n                suffix = 'mi';\n                pointResolution /= 1609.3472;\n            }\n        }\n        else {\n            assert(false, 33); // Invalid units\n        }\n        var i = 3 * Math.floor(Math.log(minWidth * pointResolution) / Math.log(10));\n        var count, width, decimalCount;\n        var previousCount, previousWidth, previousDecimalCount;\n        while (true) {\n            decimalCount = Math.floor(i / 3);\n            var decimal = Math.pow(10, decimalCount);\n            count = LEADING_DIGITS[((i % 3) + 3) % 3] * decimal;\n            width = Math.round(count / pointResolution);\n            if (isNaN(width)) {\n                this.element.style.display = 'none';\n                this.renderedVisible_ = false;\n                return;\n            }\n            if (maxWidth !== undefined && width >= maxWidth) {\n                count = previousCount;\n                width = previousWidth;\n                decimalCount = previousDecimalCount;\n                break;\n            }\n            else if (width >= minWidth) {\n                break;\n            }\n            previousCount = count;\n            previousWidth = width;\n            previousDecimalCount = decimalCount;\n            ++i;\n        }\n        var html;\n        if (this.scaleBar_) {\n            html = this.createScaleBar(width, count, suffix);\n        }\n        else {\n            html = count.toFixed(decimalCount < 0 ? -decimalCount : 0) + ' ' + suffix;\n        }\n        if (this.renderedHTML_ != html) {\n            this.innerElement_.innerHTML = html;\n            this.renderedHTML_ = html;\n        }\n        if (this.renderedWidth_ != width) {\n            this.innerElement_.style.width = width + 'px';\n            this.renderedWidth_ = width;\n        }\n        if (!this.renderedVisible_) {\n            this.element.style.display = '';\n            this.renderedVisible_ = true;\n        }\n    };\n    /**\n     * @private\n     * @param {number} width The current width of the scalebar.\n     * @param {number} scale The current scale.\n     * @param {string} suffix The suffix to append to the scale text.\n     * @return {string} The stringified HTML of the scalebar.\n     */\n    ScaleLine.prototype.createScaleBar = function (width, scale, suffix) {\n        var mapScale = '1 : ' + Math.round(this.getScaleForResolution()).toLocaleString();\n        var scaleSteps = [];\n        var stepWidth = width / this.scaleBarSteps_;\n        var backgroundColor = 'ol-scale-singlebar-odd';\n        for (var i = 0; i < this.scaleBarSteps_; i++) {\n            if (i === 0) {\n                // create the first marker at position 0\n                scaleSteps.push(this.createMarker('absolute', i));\n            }\n            scaleSteps.push('<div>' +\n                '<div ' +\n                'class=\"ol-scale-singlebar ' +\n                backgroundColor +\n                '\" ' +\n                'style=' +\n                '\"width: ' +\n                stepWidth +\n                'px;\"' +\n                '>' +\n                '</div>' +\n                this.createMarker('relative', i) +\n                /*render text every second step, except when only 2 steps */\n                (i % 2 === 0 || this.scaleBarSteps_ === 2\n                    ? this.createStepText(i, width, false, scale, suffix)\n                    : '') +\n                '</div>');\n            if (i === this.scaleBarSteps_ - 1) {\n                {\n                    /*render text at the end */\n                }\n                scaleSteps.push(this.createStepText(i + 1, width, true, scale, suffix));\n            }\n            // switch style of steps\n            backgroundColor =\n                backgroundColor === 'ol-scale-singlebar-odd'\n                    ? 'ol-scale-singlebar-even'\n                    : 'ol-scale-singlebar-odd';\n        }\n        var scaleBarText;\n        if (this.scaleBarText_) {\n            scaleBarText =\n                '<div ' +\n                    'class=\"ol-scale-text\" ' +\n                    'style=\"width: ' +\n                    width +\n                    'px;\">' +\n                    mapScale +\n                    '</div>';\n        }\n        else {\n            scaleBarText = '';\n        }\n        var container = '<div ' +\n            'style=\"display: flex;\">' +\n            scaleBarText +\n            scaleSteps.join('') +\n            '</div>';\n        return container;\n    };\n    /**\n     * Creates a marker at given position\n     * @param {string} position The position, absolute or relative\n     * @param {number} i The iterator\n     * @return {string} The stringified div containing the marker\n     */\n    ScaleLine.prototype.createMarker = function (position, i) {\n        var top = position === 'absolute' ? 3 : -10;\n        return ('<div ' +\n            'class=\"ol-scale-step-marker\" ' +\n            'style=\"position: ' +\n            position +\n            ';' +\n            'top: ' +\n            top +\n            'px;\"' +\n            '></div>');\n    };\n    /**\n     * Creates the label for a marker marker at given position\n     * @param {number} i The iterator\n     * @param {number} width The width the scalebar will currently use\n     * @param {boolean} isLast Flag indicating if we add the last step text\n     * @param {number} scale The current scale for the whole scalebar\n     * @param {string} suffix The suffix for the scale\n     * @return {string} The stringified div containing the step text\n     */\n    ScaleLine.prototype.createStepText = function (i, width, isLast, scale, suffix) {\n        var length = i === 0 ? 0 : Math.round((scale / this.scaleBarSteps_) * i * 100) / 100;\n        var lengthString = length + (i === 0 ? '' : ' ' + suffix);\n        var margin = i === 0 ? -3 : (width / this.scaleBarSteps_) * -1;\n        var minWidth = i === 0 ? 0 : (width / this.scaleBarSteps_) * 2;\n        return ('<div ' +\n            'class=\"ol-scale-step-text\" ' +\n            'style=\"' +\n            'margin-left: ' +\n            margin +\n            'px;' +\n            'text-align: ' +\n            (i === 0 ? 'left' : 'center') +\n            '; ' +\n            'min-width: ' +\n            minWidth +\n            'px;' +\n            'left: ' +\n            (isLast ? width + 'px' : 'unset') +\n            ';\"' +\n            '>' +\n            lengthString +\n            '</div>');\n    };\n    /**\n     * Returns the appropriate scale for the given resolution and units.\n     * @return {number} The appropriate scale.\n     */\n    ScaleLine.prototype.getScaleForResolution = function () {\n        var resolution = getPointResolution(this.viewState_.projection, this.viewState_.resolution, this.viewState_.center, ProjUnits.METERS);\n        var dpi = this.dpi_ || DEFAULT_DPI;\n        var inchesPerMeter = 1000 / 25.4;\n        return parseFloat(resolution.toString()) * inchesPerMeter * dpi;\n    };\n    /**\n     * Update the scale line element.\n     * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n     * @override\n     */\n    ScaleLine.prototype.render = function (mapEvent) {\n        var frameState = mapEvent.frameState;\n        if (!frameState) {\n            this.viewState_ = null;\n        }\n        else {\n            this.viewState_ = frameState.viewState;\n        }\n        this.updateElement_();\n    };\n    return ScaleLine;\n}(Control));\nexport default ScaleLine;\n//# sourceMappingURL=ScaleLine.js.map","<template>\n  <div id=\"map\"></div>\n</template>\n\n<script setup>\n  import \"ol/ol.css\";\n  import { onMounted } from \"vue\";\n  import { Map, View } from \"ol\";\n  import { Tile as TileLayer } from \"ol/layer\";\n  import { ScaleLine, defaults } from \"ol/control\";\n  import { XYZ } from \"ol/source\";\n  import { MAPURL, ATTRIBUTIONS } from \"@/constants\";\n  import updateMapSize from \"@/hooks/updateMapSize\";\n\n  const raster = new TileLayer({\n    source: new XYZ({\n      attributions: ATTRIBUTIONS,\n      url: MAPURL,\n      maxZoom: 20,\n    }),\n  });\n\n  //实例化比例尺控件（ScaleLine）\n  const scaleLineControl = new ScaleLine({\n    //设置比例尺单位，degrees、imperial、us、nautical、metric（度量单位）\n    units: \"metric\",\n  });\n  const initMap = () => {\n    const map = new Map({\n      //初始化map\n      target: \"map\",\n      //地图容器中加载的图层\n      layers: [\n        //加载瓦片图层数据\n        raster,\n      ],\n      view: new View({\n        projection: \"EPSG:4326\", // 坐标系，有EPSG:4326和EPSG:3 857\n        center: [0, 0], // 深圳坐标\n        //地图初始显示级别\n        zoom: 5,\n      }),\n      //加载控件到地图容器中\n      //加载比例尺控件\n      controls: defaults().extend([scaleLineControl]),\n    });\n    // 侧边栏变化更新地图\n    updateMapSize(map);\n  };\n  onMounted(() => {\n    initMap();\n  });\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  #map {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  }\n</style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=b2c7d636&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/openlayers/openlayers/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.6_vue@3.4.6_webpack@4.47.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b2c7d636\"]])\n\nexport default __exports__"],"sourceRoot":""}