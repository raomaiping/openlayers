(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5731e298"],{"04b1":function(e,t,n){"use strict";var o=n("15a3");t.a=(...e)=>{const t=document.querySelector(".el-aside .menu .el-scrollbar__view"),n=new MutationObserver((function(t){for(let n of t)if("childList"===n.type);else if("attributes"===n.type&&"style"===n.attributeName)for(let t=0;t<e.length;t++)e[t].updateSize()}));n.observe(t,{attributes:!0,childList:!0,subtree:!0}),Object(o.onBeforeUnmount)((()=>{n.disconnect()}))}},"0507":function(e,t,n){e.exports=n.p+"img/chips.856c05f4.png"},"47bd":function(e,t,n){e.exports=n.p+"img/ice_cream.ece690c8.png"},bd1f:function(e,t,n){"use strict";n("cd76")},c854:function(e,t,n){"use strict";n.r(t);var o=n("15a3"),i=(n("16fa"),n("d0a2")),s=n("80bc"),r=n("fb1a"),a=n("76f7"),l=n("8e03"),c=n("fa69"),u=n("f4fc"),d=n("6bae"),p=n("ce84"),h=n("5a50"),f=n("91c3"),m=n("04b1"),g=n("701f"),v=n("5e28"),b=n("a147"),_=n("e7b8");const y=({coordinate:e,vectorSource:t,imageUrl:n,name:o="标注点"})=>{const i=new b.a({geometry:new _.a(e),name:o});i.setStyle((e=>new g.c({image:new v.a({crossOrigin:"anonymous",src:e,scale:.1})}))(n)),t.addFeature(i)};var C=n("0fef");class P extends C.b{constructor(){super({handleDownEvent:O,handleDragEvent:E,handleMoveEvent:w,handleUpEvent:F}),this.coordinate_=null,this.cursor_="pointer",this.feature_=null,this.previousCursor_=void 0}}function O(e){const t=e.map.forEachFeatureAtPixel(e.pixel,(function(e){return e}));return t&&(this.coordinate_=e.coordinate,this.feature_=t),!!t}function E(e){const t=e.coordinate[0]-this.coordinate_[0],n=e.coordinate[1]-this.coordinate_[1];this.feature_.getGeometry().translate(t,n),this.coordinate_[0]=e.coordinate[0],this.coordinate_[1]=e.coordinate[1]}function w(e){if(this.cursor_){const t=e.map.forEachFeatureAtPixel(e.pixel,(function(e){return e})),n=e.map.getTargetElement();t?n.style.cursor!=this.cursor_&&(this.previousCursor_=n.style.cursor,n.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(n.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}}function F(){return this.coordinate_=null,this.feature_=null,!1}const N={class:"top"},x=["src"];var j={__name:"index",setup(e){let t,g;const v=Object(o.ref)(null),b=Object(o.ref)(null),_=[n("0507"),n("47bd")],C=new a.a({source:new d.a({attributions:h.a,url:h.e,maxZoom:20})}),O=new p.a,E=new l.a({source:O}),w=e=>{const t=e.target.src;e.dataTransfer.setData("src",t)},F=e=>{e.preventDefault()},j=e=>{const n=e.dataTransfer.getData("src"),{offsetX:o,offsetY:i}=e,s=t.getCoordinateFromPixel([o,i]);y({coordinate:s,vectorSource:O,imageUrl:n}),e.stopPropagation()};document.oncontextmenu=function(){return!1};const M=()=>{E.getSource().removeFeature(b.value),b.value=null,g.setPosition(null)};return Object(o.onMounted)((()=>{t=new i.a({target:"map",interactions:Object(f.a)().extend([new P]),layers:[C,E],view:new s.a({projection:"EPSG:4326",center:[0,0],zoom:5}),controls:Object(c.a)().extend([new u.a])}),Object(m.a)(t),g=new r.a({element:v.value,positioning:"center-center"}),t.addOverlay(g),(e=>{e.getViewport().oncontextmenu=function(t){t.preventDefault();const n=e.getEventPixel(t),o=e.forEachFeatureAtPixel(n,(e=>e));if(o){const n=e.getEventCoordinate(t);b.value=o,g.setPosition(n)}}})(t),t.on("singleclick",(()=>{g.setPosition(null)}))})),(e,t)=>(Object(o.openBlock)(),Object(o.createElementBlock)(o.Fragment,null,[Object(o.createElementVNode)("div",N,[(Object(o.openBlock)(),Object(o.createElementBlock)(o.Fragment,null,Object(o.renderList)(_,((e,t)=>Object(o.createElementVNode)("img",{key:t,src:e,draggable:"true",onDragstart:w},null,40,x))),64))]),Object(o.createElementVNode)("div",{id:"map",onDrop:j,onDragover:F},[Object(o.createElementVNode)("div",{class:"menu",ref_key:"menu",ref:v},[Object(o.createElementVNode)("div",{class:"menu-item",onClick:M},"删除")],512)],32)],64))}},M=(n("bd1f"),n("1b82"));const L=n.n(M)()(j,[["__scopeId","data-v-770ea1d1"]]);t.default=L},cd76:function(e,t,n){},f4fc:function(e,t,n){"use strict";var o,i=n("61f0"),s=n("06f9"),r=n("f520"),a=n("bd40"),l=n("81a0"),c=n("3d7a"),u=(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],p="enterfullscreen",h="leavefullscreen",f=function(e){function t(t){var n=this,o=t||{};(n=e.call(this,{element:document.createElement("div"),target:o.target})||this).on,n.once,n.un,n.keys_=void 0!==o.keys&&o.keys,n.source_=o.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=void 0!==o.className?o.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=void 0!==o.activeClassName?o.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=void 0!==o.inactiveClassName?o.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var i=void 0!==o.label?o.label:"⤢";n.labelNode_="string"==typeof i?document.createTextNode(i):i;var r=void 0!==o.labelActive?o.labelActive:"×";n.labelActiveNode_="string"==typeof r?document.createTextNode(r):r;var l=o.tipLabel?o.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=l,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(s.a.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(a.e," ").concat(a.b),n.element.appendChild(n.button_),n}return u(t,e),t.prototype.handleClick_=function(e){e.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){var e=this.getMap();if(e){var t=e.getOwnerDocument();if(m(t))if(g(t))!function(e){e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}(t);else{var n=void 0;n=this.source_?"string"==typeof this.source_?t.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?function(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():v(e)}(n):v(n)}}},t.prototype.handleFullScreenChange_=function(){var e=this.getMap();if(e){var t=this.isInFullscreen_;this.isInFullscreen_=g(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Object(c.h)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(p)):(Object(c.h)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(h)),e.updateSize())}},t.prototype.setClassName_=function(e,t){var n,o,i,s;t?((n=e.classList).remove.apply(n,this.inactiveClassName_),(o=e.classList).add.apply(o,this.activeClassName_)):((i=e.classList).remove.apply(i,this.activeClassName_),(s=e.classList).add.apply(s,this.inactiveClassName_))},t.prototype.setMap=function(t){var n=this.getMap();n&&n.removeChangeListener(r.a.TARGET,this.boundHandleMapTargetChange_),e.prototype.setMap.call(this,t),this.handleMapTargetChange_(),t&&t.addChangeListener(r.a.TARGET,this.boundHandleMapTargetChange_)},t.prototype.handleMapTargetChange_=function(){for(var e=this.documentListeners_,t=0,n=e.length;t<n;++t)Object(l.c)(e[t]);e.length=0;var o=this.getMap();if(o){var i=o.getOwnerDocument();m(i)?this.element.classList.remove(a.f):this.element.classList.add(a.f);for(t=0,n=d.length;t<n;++t)e.push(Object(l.a)(i,d[t],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},t}(i.a);function m(e){var t=e.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&e.msFullscreenEnabled||t.requestFullscreen&&e.fullscreenEnabled)}function g(e){return!!(e.webkitIsFullScreen||e.msFullscreenElement||e.fullscreenElement)}function v(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}t.a=f},fb1a:function(e,t,n){"use strict";var o,i=n("79e4"),s=n("88b5"),r=n("bd40"),a=n("5c82"),l=n("81a0"),c=n("3d7a"),u=(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d="element",p="map",h="offset",f="position",m="positioning",g=function(e){function t(t){var n=e.call(this)||this;n.on,n.once,n.un,n.options=t,n.id=t.id,n.insertFirst=void 0===t.insertFirst||t.insertFirst,n.stopEvent=void 0===t.stopEvent||t.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==t.className?t.className:"ol-overlay-container "+r.d,n.element.style.position="absolute",n.element.style.pointerEvents="auto";var o=t.autoPan;return o&&"object"!=typeof o&&(o={animation:t.autoPanAnimation,margin:t.autoPanMargin}),n.autoPan=o||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addChangeListener(d,n.handleElementChanged),n.addChangeListener(p,n.handleMapChanged),n.addChangeListener(h,n.handleOffsetChanged),n.addChangeListener(f,n.handlePositionChanged),n.addChangeListener(m,n.handlePositioningChanged),void 0!==t.element&&n.setElement(t.element),n.setOffset(void 0!==t.offset?t.offset:[0,0]),n.setPositioning(t.positioning||"top-left"),void 0!==t.position&&n.setPosition(t.position),n}return u(t,e),t.prototype.getElement=function(){return this.get(d)},t.prototype.getId=function(){return this.id},t.prototype.getMap=function(){return this.get(p)||null},t.prototype.getOffset=function(){return this.get(h)},t.prototype.getPosition=function(){return this.get(f)},t.prototype.getPositioning=function(){return this.get(m)},t.prototype.handleElementChanged=function(){Object(c.e)(this.element);var e=this.getElement();e&&this.element.appendChild(e)},t.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(c.f)(this.element),Object(l.c)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=Object(l.a)(e,s.a.POSTRENDER,this.render,this),this.updatePixelPosition();var t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}},t.prototype.render=function(){this.updatePixelPosition()},t.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},t.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},t.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},t.prototype.setElement=function(e){this.set(d,e)},t.prototype.setMap=function(e){this.set(p,e)},t.prototype.setOffset=function(e){this.set(h,e)},t.prototype.setPosition=function(e){this.set(f,e)},t.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},t.prototype.panIntoView=function(e){var t=this.getMap();if(t&&t.getTargetElement()&&this.get(f)){var n=this.getRect(t.getTargetElement(),t.getSize()),o=this.getElement(),i=this.getRect(o,[Object(c.c)(o),Object(c.b)(o)]),s=e||{},r=void 0===s.margin?20:s.margin;if(!Object(a.h)(n,i)){var l=i[0]-n[0],u=n[2]-i[2],d=i[1]-n[1],p=n[3]-i[3],h=[0,0];if(l<0?h[0]=l-r:u<0&&(h[0]=Math.abs(u)+r),d<0?h[1]=d-r:p<0&&(h[1]=Math.abs(p)+r),0!==h[0]||0!==h[1]){var m=t.getView().getCenterInternal(),g=t.getPixelFromCoordinateInternal(m);if(!g)return;var v=[g[0]+h[0],g[1]+h[1]],b=s.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(v),duration:b.duration,easing:b.easing})}}}},t.prototype.getRect=function(e,t){var n=e.getBoundingClientRect(),o=n.left+window.pageXOffset,i=n.top+window.pageYOffset;return[o,i,o+t[0],i+t[1]]},t.prototype.setPositioning=function(e){this.set(m,e)},t.prototype.setVisible=function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)},t.prototype.updatePixelPosition=function(){var e=this.getMap(),t=this.getPosition();if(e&&e.isRendered()&&t){var n=e.getPixelFromCoordinate(t),o=e.getSize();this.updateRenderedPosition(n,o)}else this.setVisible(!1)},t.prototype.updateRenderedPosition=function(e,t){var n=this.element.style,o=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var s=Math.round(e[0]+o[0])+"px",r=Math.round(e[1]+o[1])+"px",a="0%",l="0%";"bottom-right"==i||"center-right"==i||"top-right"==i?a="-100%":"bottom-center"!=i&&"center-center"!=i&&"top-center"!=i||(a="-50%"),"bottom-left"==i||"bottom-center"==i||"bottom-right"==i?l="-100%":"center-left"!=i&&"center-center"!=i&&"center-right"!=i||(l="-50%");var c="translate(".concat(a,", ").concat(l,") translate(").concat(s,", ").concat(r,")");this.rendered.transform_!=c&&(this.rendered.transform_=c,n.transform=c,n.msTransform=c)},t.prototype.getOptions=function(){return this.options},t}(i.a);t.a=g}}]);
//# sourceMappingURL=chunk-5731e298.c2f7e8f3.js.map