(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4509329f"],{"1a4d":function(t,e,i){"use strict";var n,r=i("9738"),o=i("c1f2"),s=i("bdff"),a=i("494c"),l=i("0780"),h=i("5c82"),c=i("7b37"),u=i("ab98"),d=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),f=function(t){function e(e,i,n,r,o,a,l){var h=t.call(this)||this;return h.context_=e,h.pixelRatio_=i,h.extent_=n,h.transform_=r,h.viewRotation_=o,h.squaredTolerance_=a,h.userTransform_=l,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=Object(s.c)(),h}return d(e,t),e.prototype.drawImages_=function(t,e,i,n){if(this.image_){var r=Object(c.c)(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=l*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var u=0,d=r.length;u<d;u+=2){var f=r[u]-this.imageAnchorX_,g=r[u+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var p=f+this.imageAnchorX_,_=g+this.imageAnchorY_;Object(s.b)(a,p,_,1,1,h,-p,-_),o.setTransform.apply(o,a),o.translate(p,_),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,g,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=l)}},e.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=Object(c.c)(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=n){var l=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]){var u=Object(s.b)(this.tmpLocalTransform_,l,h,1,1,a,-l,-h);o.setTransform.apply(o,u),o.translate(l,h),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&o.strokeText(this.text_,l,h),this.textFillState_&&o.fillText(this.text_,l,h)}}},e.prototype.moveToLineTo_=function(t,e,i,n,r){var o=this.context_,s=Object(c.c)(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;r&&(a-=2);for(var l=2;l<a;l+=2)o.lineTo(s[l],s[l+1]);return r&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e},e.prototype.drawCircle=function(t){if(Object(h.G)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Object(u.c)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&Object(h.G)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(h.G)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Object(h.G)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),r=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var a=0,l=o.length;a<l;++a)r=this.moveToLineTo_(n,r,o[a],s,!1);i.stroke()}if(""!==this.text_){var c=t.getFlatMidpoints();this.drawText_(c,0,c.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(h.G)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(h.G)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=r.length;s<a;++s){var l=r[s];n=this.drawRings_(i,n,l,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var c=t.getFlatInteriorPoints();this.drawText_(c,0,c.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(Object(l.b)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:a.l;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){var i=this;if(t){var n=t.getColor();this.fillState_={fillStyle:Object(o.a)(n||a.b)}}else this.fillState_=null;if(e){var r=e.getColor(),s=e.getLineCap(),l=e.getLineDash(),h=e.getLineDashOffset(),c=e.getLineJoin(),u=e.getWidth(),d=e.getMiterLimit(),f=l||a.e;this.strokeState_={lineCap:void 0!==s?s:a.d,lineDash:1===this.pixelRatio_?f:f.map((function(t){return t*i.pixelRatio_})),lineDashOffset:(h||a.f)*this.pixelRatio_,lineJoin:void 0!==c?c:a.g,lineWidth:(void 0!==u?u:a.h)*this.pixelRatio_,miterLimit:void 0!==d?d:a.i,strokeStyle:Object(o.a)(r||a.k)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var i=t.getAnchor(),n=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*this.pixelRatio_,this.imageAnchorY_=i[1]*this.pixelRatio_,this.imageHeight_=e[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=e[0]*this.pixelRatio_}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:Object(o.a)(i||a.b)}}else this.textFillState_=null;var n=t.getStroke();if(n){var r=n.getColor(),s=n.getLineCap(),l=n.getLineDash(),h=n.getLineDashOffset(),c=n.getLineJoin(),u=n.getWidth(),d=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==s?s:a.d,lineDash:l||a.e,lineDashOffset:h||a.f,lineJoin:void 0!==c?c:a.g,lineWidth:void 0!==u?u:a.h,miterLimit:void 0!==d?d:a.i,strokeStyle:Object(o.a)(r||a.k)}}else this.textStrokeState_=null;var f=t.getFont(),g=t.getOffsetX(),p=t.getOffsetY(),_=t.getRotateWithView(),y=t.getRotation(),x=t.getScaleArray(),v=t.getText(),S=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==f?f:a.c,textAlign:void 0!==S?S:a.l,textBaseline:void 0!==m?m:a.m},this.text_=void 0!==v?Array.isArray(v)?v.reduce((function(t,e,i){return t+(i%2?" ":e)}),""):v:"",this.textOffsetX_=void 0!==g?this.pixelRatio_*g:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0!==y?y:0,this.textScale_=[this.pixelRatio_*x[0],this.pixelRatio_*x[1]]}else this.text_=""},e}(r.a);e.a=f},"75af":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return l})),i.d(e,"c",(function(){return h})),i.d(e,"d",(function(){return c}));var n=i("097a"),r=i("f555"),o=.5,s={Point:function(t,e,i,r,o){var s,a=i.getImage(),l=i.getText();if(a){if(a.getImageState()!=n.a.LOADED)return;var h=t;if(o){var c=a.getDeclutterMode();if("none"!==c)if(h=o,"obstacle"===c){var u=t.getBuilder(i.getZIndex(),"Image");u.setImageStyle(a,s),u.drawPoint(e,r)}else l&&l.getText()&&(s={})}var d=h.getBuilder(i.getZIndex(),"Image");d.setImageStyle(a,s),d.drawPoint(e,r)}if(l&&l.getText()){var f=t;o&&(f=o);var g=f.getBuilder(i.getZIndex(),"Text");g.setTextStyle(l,s),g.drawText(e,r)}},LineString:function(t,e,i,n,r){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawLineString(e,n)}var a=i.getText();if(a&&a.getText()){var l=(r||t).getBuilder(i.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}},Polygon:function(t,e,i,n,r){var o=i.getFill(),s=i.getStroke();if(o||s){var a=t.getBuilder(i.getZIndex(),"Polygon");a.setFillStrokeStyle(o,s),a.drawPolygon(e,n)}var l=i.getText();if(l&&l.getText()){var h=(r||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(l),h.drawText(e,n)}},MultiPoint:function(t,e,i,r,o){var s,a=i.getImage(),l=i.getText();if(a){if(a.getImageState()!=n.a.LOADED)return;var h=t;if(o){var c=a.getDeclutterMode();if("none"!==c)if(h=o,"obstacle"===c){var u=t.getBuilder(i.getZIndex(),"Image");u.setImageStyle(a,s),u.drawMultiPoint(e,r)}else l&&l.getText()&&(s={})}var d=h.getBuilder(i.getZIndex(),"Image");d.setImageStyle(a,s),d.drawMultiPoint(e,r)}if(l&&l.getText()){var f=t;o&&(f=o);var g=f.getBuilder(i.getZIndex(),"Text");g.setTextStyle(l,s),g.drawText(e,r)}},MultiLineString:function(t,e,i,n,r){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawMultiLineString(e,n)}var a=i.getText();if(a&&a.getText()){var l=(r||t).getBuilder(i.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}},MultiPolygon:function(t,e,i,n,r){var o=i.getFill(),s=i.getStroke();if(s||o){var a=t.getBuilder(i.getZIndex(),"Polygon");a.setFillStrokeStyle(o,s),a.drawMultiPolygon(e,n)}var l=i.getText();if(l&&l.getText()){var h=(r||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(l),h.drawText(e,n)}},GeometryCollection:function(t,e,i,n,r){var o,a,l=e.getGeometriesArray();for(o=0,a=l.length;o<a;++o){(0,s[l[o].getType()])(t,l[o],i,n,r)}},Circle:function(t,e,i,n,r){var o=i.getFill(),s=i.getStroke();if(o||s){var a=t.getBuilder(i.getZIndex(),"Circle");a.setFillStrokeStyle(o,s),a.drawCircle(e,n)}var l=i.getText();if(l&&l.getText()){var h=(r||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(l),h.drawText(e,n)}}};function a(t,e){return parseInt(Object(r.c)(t),10)-parseInt(Object(r.c)(e),10)}function l(t,e){var i=h(t,e);return i*i}function h(t,e){return o*t/e}function c(t,e,i,r,o,a,l){var h=!1,c=i.getImage();if(c){var d=c.getImageState();d==n.a.LOADED||d==n.a.ERROR?c.unlistenImageChange(o):(d==n.a.IDLE&&c.load(),c.listenImageChange(o),h=!0)}return function(t,e,i,n,r,o){var a=i.getGeometryFunction()(e);if(!a)return;var l=a.simplifyTransformed(n,r),h=i.getRenderer();if(h)u(t,l,i,e);else{(0,s[l.getType()])(t,l,i,e,o)}}(t,e,i,r,a,l),h}function u(t,e,i,n){if("GeometryCollection"!=e.getType())t.getBuilder(i.getZIndex(),"Default").drawCustom(e,n,i.getRenderer(),i.getHitDetectionRenderer());else for(var r=e.getGeometries(),o=0,s=r.length;o<s;++o)u(t,r[o],i,n)}},"8e03":function(t,e,i){"use strict";var n,r=i("0d06"),o={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},s=[o.FILL],a=[o.STROKE],l=[o.BEGIN_PATH],h=[o.CLOSE_PATH],c=o,u=i("2aba"),d=i("9738"),f=i("c1f2"),g=i("5c82"),p=i("494c"),_=i("0780"),y=i("298c"),x=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),v=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=i,o.pixelRatio=r,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return x(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatPointCoordinates=function(t,e){for(var i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,r=this.coordinates,o=r.length,s=0,a=t.length;s<a;s+=e)n[0]=t[s],n[1]=t[s+1],Object(g.g)(i,n)&&(r[o++]=n[0],r[o++]=n[1]);return o},e.prototype.appendFlatLineCoordinates=function(t,e,i,n,r,o){var s=this.coordinates,a=s.length,l=this.getBufferedMaxExtent();o&&(e+=n);var h,c,d,f=t[e],p=t[e+1],_=this.tmpCoordinate_,y=!0;for(h=e+n;h<i;h+=n)_[0]=t[h],_[1]=t[h+1],(d=Object(g.j)(l,_))!==c?(y&&(s[a++]=f,s[a++]=p,y=!1),s[a++]=_[0],s[a++]=_[1]):d===u.a.INTERSECTING?(s[a++]=_[0],s[a++]=_[1],y=!1):y=!0,f=_[0],p=_[1],c=d;return(r&&y||h===e+n)&&(s[a++]=f,s[a++]=p),a},e.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],l=this.appendFlatLineCoordinates(t,e,a,n,!1,!1);r.push(l),e=a}return e},e.prototype.drawCustom=function(t,e,i,n){this.beginGeometry(t,e);var r,o,s,a,l,h=t.getType(),u=t.getStride(),d=this.coordinates.length;switch(h){case"MultiPolygon":r=t.getOrientedFlatCoordinates(),a=[];var f=t.getEndss();l=0;for(var g=0,p=f.length;g<p;++g){var _=[];l=this.drawCustomCoordinates_(r,l,f[g],u,_),a.push(_)}this.instructions.push([c.CUSTOM,d,a,t,i,y.c]),this.hitDetectionInstructions.push([c.CUSTOM,d,a,t,n||i,y.c]);break;case"Polygon":case"MultiLineString":s=[],r="Polygon"==h?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),l=this.drawCustomCoordinates_(r,0,t.getEnds(),u,s),this.instructions.push([c.CUSTOM,d,s,t,i,y.b]),this.hitDetectionInstructions.push([c.CUSTOM,d,s,t,n||i,y.b]);break;case"LineString":case"Circle":r=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(r,0,r.length,u,!1,!1),this.instructions.push([c.CUSTOM,d,o,t,i,y.a]),this.hitDetectionInstructions.push([c.CUSTOM,d,o,t,n||i,y.a]);break;case"MultiPoint":r=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(r,u))>d&&(this.instructions.push([c.CUSTOM,d,o,t,i,y.a]),this.hitDetectionInstructions.push([c.CUSTOM,d,o,t,n||i,y.a]));break;case"Point":r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),o=this.coordinates.length,this.instructions.push([c.CUSTOM,d,o,t,i]),this.hitDetectionInstructions.push([c.CUSTOM,d,o,t,n||i])}this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[c.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[c.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,r=e.length,o=-1;for(t=0;t<r;++t)(n=(i=e[t])[0])==c.END_GEOMETRY?o=t:n==c.BEGIN_GEOMETRY&&(i[2]=t,Object(_.h)(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=Object(f.a)(n||p.b)}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=Object(f.a)(r||p.k);var o=e.getLineCap();i.lineCap=void 0!==o?o:p.d;var s=e.getLineDash();i.lineDash=s?s.slice():p.e;var a=e.getLineDashOffset();i.lineDashOffset=a||p.f;var l=e.getLineJoin();i.lineJoin=void 0!==l?l:p.g;var h=e.getWidth();i.lineWidth=void 0!==h?h:p.h;var c=e.getMiterLimit();i.miterLimit=void 0!==c?c:p.i,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[c.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[c.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!Object(_.b)(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[c.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(g.e)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Object(g.d)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(d.a),S=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),m=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterMode_=void 0,o.declutterImageWithText_=void 0,o}return S(e,t),e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,n);this.instructions.push([c.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([c.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,n);this.instructions.push([c.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([c.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e},e}(v),b=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),O=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return b(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,n){var r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),s=[c.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([c.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,p.e,p.f],l);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(a),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([c.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],l);for(var o=t.getEnds(),s=t.getFlatCoordinates(),h=t.getStride(),u=0,d=0,f=o.length;d<f;++d)u=this.drawFlatCoordinates_(s,u,o[d],h);this.hitDetectionInstructions.push(a),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(a),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(a),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(l)},e}(v),T=i("04db"),C=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),k=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return C(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var r=this.state,o=void 0!==r.fillStyle,u=void 0!==r.strokeStyle,d=i.length;this.instructions.push(l),this.hitDetectionInstructions.push(l);for(var f=0;f<d;++f){var g=i[f],p=this.coordinates.length,_=this.appendFlatLineCoordinates(t,e,g,n,!0,!u),y=[c.MOVE_TO_LINE_TO,p,_];this.instructions.push(y),this.hitDetectionInstructions.push(y),u&&(this.instructions.push(h),this.hitDetectionInstructions.push(h)),e=g}return o&&(this.instructions.push(s),this.hitDetectionInstructions.push(s)),u&&(this.instructions.push(a),this.hitDetectionInstructions.push(a)),e},e.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([c.SET_FILL_STYLE,p.b]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([c.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),h=t.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,h,!1,!1);var d=[c.CIRCLE,u];this.instructions.push(l,d),this.hitDetectionInstructions.push(l,d),void 0!==i.fillStyle&&(this.instructions.push(s),this.hitDetectionInstructions.push(s)),void 0!==i.strokeStyle&&(this.instructions.push(a),this.hitDetectionInstructions.push(a)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([c.SET_FILL_STYLE,p.b]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([c.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([c.SET_FILL_STYLE,p.b]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([c.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),l=0,h=0,u=o.length;h<u;++h)l=this.drawFlatCoordinatess_(s,l,o[h],a);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,r=i.length;n<r;++n)i[n]=Object(T.e)(i[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(v),w=i("7da9"),I=i("f555");function R(t,e,i,n,r){var o,s,a,l,h,c,u,d,f,g=i,p=i,_=0,y=0,x=i;for(o=i;o<n;o+=r){var v=e[o],S=e[o+1];void 0!==l&&(d=v-l,f=S-h,a=Math.sqrt(d*d+f*f),void 0!==c&&(y+=s,Math.acos((c*d+u*f)/(s*a))>t&&(y>_&&(_=y,g=x,p=o),y=0,x=o-r)),s=a,c=d,u=f),l=v,h=S}return(y+=a)>_?[x,o]:[g,p]}var D=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),L={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},E={Circle:k,Default:v,Image:m,LineString:O,Polygon:k,Text:function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return D(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||n)){var o=this.coordinates,s=o.length,a=t.getType(),l=null,h=t.getStride();if(r.placement!==w.a.LINE||"LineString"!=a&&"MultiLineString"!=a&&"Polygon"!=a&&"MultiPolygon"!=a){var u=r.overflow?null:[];switch(a){case"Point":case"MultiPoint":l=t.getFlatCoordinates();break;case"LineString":l=t.getFlatMidpoint();break;case"Circle":l=t.getCenter();break;case"MultiLineString":l=t.getFlatMidpoints(),h=2;break;case"Polygon":l=t.getFlatInteriorPoint(),r.overflow||u.push(l[2]/this.resolution),h=3;break;case"MultiPolygon":var d=t.getFlatInteriorPoints();l=[];for(C=0,k=d.length;C<k;C+=3)r.overflow||u.push(d[C+2]/this.resolution),l.push(d[C],d[C+1]);if(0===l.length)return;h=2}if((M=this.appendFlatPointCoordinates(l,h))===s)return;if(u&&(M-s)/2!=l.length/h){var f=s/2;u=u.filter((function(t,e){var i=o[2*(f+e)]===l[e*h]&&o[2*(f+e)+1]===l[e*h+1];return i||--f,i}))}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var _=r.padding;if(_!=p.j&&(r.scale[0]<0||r.scale[1]<0)){var y=r.padding[0],x=r.padding[1],v=r.padding[2],S=r.padding[3];r.scale[0]<0&&(x=-x,S=-S),r.scale[1]<0&&(y=-y,v=-v),_=[y,x,v,S]}var m=this.pixelRatio;this.instructions.push([c.DRAW_IMAGE,s,M,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,_==p.j?p.j:_.map((function(t){return t*m})),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]);var b=1/m;this.hitDetectionInstructions.push([c.DRAW_IMAGE,s,M,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[b,b],NaN,void 0,this.declutterImageWithText_,_,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]),this.endGeometry(e)}else{if(!Object(g.G)(this.getBufferedMaxExtent(),t.getExtent()))return;var O=void 0;if(l=t.getFlatCoordinates(),"LineString"==a)O=[l.length];else if("MultiLineString"==a)O=t.getEnds();else if("Polygon"==a)O=t.getEnds().slice(0,1);else if("MultiPolygon"==a){var T=t.getEndss();O=[];for(var C=0,k=T.length;C<k;++C)O.push(T[C][0])}this.beginGeometry(t,e);for(var I=r.textAlign,D=0,L=void 0,E=0,j=O.length;E<j;++E){if(null==I){var F=R(r.maxAngle,l,D,O[E],h);D=F[0],L=F[1]}else L=O[E];for(var C=D;C<L;C+=h)o.push(l[C],l[C+1]);var M=o.length;D=O[E],this.drawChars_(s,M),s=M}this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||p.l,justify:e.justify,textBaseline:e.textBaseline||p.m,scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e){var i=this.textStrokeState_,n=this.textState_,r=this.strokeKey_,o=this.textKey_,s=this.fillKey_;this.saveTextStates_();var a=this.pixelRatio,l=L[n.textBaseline],h=this.textOffsetY_*a,u=this.text_,d=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([c.DRAW_CHARS,t,e,l,n.overflow,s,n.maxAngle,a,h,r,d*a,u,o,1]),this.hitDetectionInstructions.push([c.DRAW_CHARS,t,e,l,n.overflow,s,n.maxAngle,1,h,r,d,u,o,1/a])},e.prototype.setTextStyle=function(t,e){var i,n,r;if(t){var o=t.getFill();o?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=Object(f.a)(o.getColor()||p.b)):(n=null,this.textFillState_=n);var s=t.getStroke();if(s){(r=this.textStrokeState_)||(r={},this.textStrokeState_=r);var a=s.getLineDash(),l=s.getLineDashOffset(),h=s.getWidth(),c=s.getMiterLimit();r.lineCap=s.getLineCap()||p.d,r.lineDash=a?a.slice():p.e,r.lineDashOffset=void 0===l?p.f:l,r.lineJoin=s.getLineJoin()||p.g,r.lineWidth=void 0===h?p.h:h,r.miterLimit=void 0===c?p.i:c,r.strokeStyle=Object(f.a)(s.getColor()||p.k)}else r=null,this.textStrokeState_=r;i=this.textState_;var u=t.getFont()||p.c;Object(p.q)(u);var d=t.getScaleArray();i.overflow=t.getOverflow(),i.font=u,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||p.m,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||p.j,i.scale=void 0===d?[1,1]:d;var g=t.getOffsetX(),_=t.getOffsetY(),y=t.getRotateWithView(),x=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===g?0:g,this.textOffsetY_=void 0===_?0:_,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0===x?0:x,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:Object(I.c)(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+Object(I.c)(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},e}(v)},j=function(){function t(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var n in i){var r=i[n].finish();t[e][n]=r}}return t},t.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);var r=n[e];void 0===r&&(r=new(0,E[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=r);return r},t}(),F=i("e037"),M=i("6b01"),P=i("bdff"),A=i("92a2"),W=i("7b37");function G(t,e,i,n,r,o,s,a,l,h,c,u){var d=t[e],f=t[e+1],g=0,p=0,_=0,y=0;function x(){g=d,p=f,d=t[e+=n],f=t[e+1],y+=_,_=Math.sqrt((d-g)*(d-g)+(f-p)*(f-p))}do{x()}while(e<i-n&&y+_<o);for(var v=0===_?0:(o-y)/_,S=Object(A.e)(g,d,v),m=Object(A.e)(p,f,v),b=e-n,O=y,T=o+a*l(h,r,c);e<i-n&&y+_<T;)x();v=0===_?0:(T-y)/_;var C,k=Object(A.e)(g,d,v),w=Object(A.e)(p,f,v);if(u){var I=[S,m,k,w];Object(W.a)(I,0,4,2,u,I,I),C=I[0]>I[2]}else C=S>k;var R,D=Math.PI,L=[],E=b+n===e;if(_=0,y=O,d=t[e=b],f=t[e+1],E){x(),R=Math.atan2(f-p,d-g),C&&(R+=R>0?-D:D);var j=(k+S)/2,F=(w+m)/2;return L[0]=[j,F,(T-o)/2,R,r],L}for(var M=0,P=(r=r.replace(/\n/g," ")).length;M<P;){x();var G=Math.atan2(f-p,d-g);if(C&&(G+=G>0?-D:D),void 0!==R){var B=G-R;if(B+=B>D?-2*D:B<-D?2*D:0,Math.abs(B)>s)return null}R=G;for(var Y=M,N=0;M<P;++M){var X=a*l(h,r[C?P-M-1:M],c);if(e+n<i&&y+_<o+N+X/2)break;N+=X}if(M!==Y){var J=C?r.substring(P-Y,P-M):r.substring(Y,M);v=0===_?0:(o+N/2-y)/_;j=Object(A.e)(g,d,v),F=Object(A.e)(p,f,v);L.push([j,F,N/2,G,J]),o+=N}}return L}var B=i("4726"),Y=Object(g.k)(),N=[],X=[],J=[],Z=[];function H(t){return t[3].declutterBox}var K=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function V(t,e){return"start"!==e&&"end"!==e||K.test(t)||(e="start"===e?"left":"right"),L[e]}function q(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}var U=function(){function t(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=Object(P.c)(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,i,n){var r=t+e+i+n;if(this.labels_[r])return this.labels_[r];var o=n?this.strokeStates[n]:null,s=i?this.fillStates[i]:null,a=this.textStates[e],l=this.pixelRatio,h=[a.scale[0]*l,a.scale[1]*l],c=Array.isArray(t),u=a.justify?L[a.justify]:V(Array.isArray(t)?t[0]:t,a.textAlign||p.l),d=n&&o.lineWidth?o.lineWidth:0,f=c?t:t.split("\n").reduce(q,[]),g=Object(p.o)(a,f),_=g.width,y=g.height,x=g.widths,v=g.heights,S=g.lineWidths,m=_+d,b=[],O=(m+2)*h[0],T=(y+d)*h[1],C={width:O<0?Math.floor(O):Math.ceil(O),height:T<0?Math.floor(T):Math.ceil(T),contextInstructions:b};(1==h[0]&&1==h[1]||b.push("scale",h),n)&&(b.push("strokeStyle",o.strokeStyle),b.push("lineWidth",d),b.push("lineCap",o.lineCap),b.push("lineJoin",o.lineJoin),b.push("miterLimit",o.miterLimit),(M.h?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(b.push("setLineDash",[o.lineDash]),b.push("lineDashOffset",o.lineDashOffset)));i&&b.push("fillStyle",s.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");for(var k,w=.5-u,I=u*m+w*d,R=[],D=[],E=0,j=0,F=0,P=0,A=0,W=f.length;A<W;A+=2){var G=f[A];if("\n"!==G){var B=f[A+1]||a.font;B!==k&&(n&&R.push("font",B),i&&D.push("font",B),k=B),E=Math.max(E,v[F]);var Y=[G,I+w*x[F]+u*(x[F]-S[P]),.5*(d+E)+j];I+=x[F],n&&R.push("strokeText",Y),i&&D.push("fillText",Y),++F}else j+=E,E=0,I=u*m+w*d,++P}return Array.prototype.push.apply(b,R),Array.prototype.push.apply(b,D),this.labels_[r]=C,C},t.prototype.replayTextBackground_=function(t,e,i,n,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(t,e,i,n,r,o,s,a,l,h,c,u,d,f,p,_){var y,x=i-(s*=u[0]),v=n-(a*=u[1]),S=r+l>t?t-l:r,m=o+h>e?e-h:o,b=f[3]+S*u[0]+f[1],O=f[0]+m*u[1]+f[2],T=x-f[3],C=v-f[0];return(p||0!==c)&&(N[0]=T,Z[0]=T,N[1]=C,X[1]=C,X[0]=T+b,J[0]=X[0],J[1]=C+O,Z[1]=J[1]),0!==c?(y=Object(P.b)(Object(P.c)(),i,n,1,1,c,-i,-n),Object(P.a)(y,N),Object(P.a)(y,X),Object(P.a)(y,J),Object(P.a)(y,Z),Object(g.l)(Math.min(N[0],X[0],J[0],Z[0]),Math.min(N[1],X[1],J[1],Z[1]),Math.max(N[0],X[0],J[0],Z[0]),Math.max(N[1],X[1],J[1],Z[1]),Y)):Object(g.l)(Math.min(T,T+b),Math.min(C,C+O),Math.max(T,T+b),Math.max(C,C+O),Y),d&&(x=Math.round(x),v=Math.round(v)),{drawImageX:x,drawImageY:v,drawImageW:S,drawImageH:m,originX:l,originY:h,declutterBox:{minX:Y[0],minY:Y[1],maxX:Y[2],maxY:Y[3],value:_},canvasTransform:y,scale:u}},t.prototype.replayImageOrLabel_=function(t,e,i,n,r,o,s){var a=!(!o&&!s),l=n.declutterBox,h=t.canvas,c=s?s[2]*n.scale[0]/2:0;return l.minX-c<=h.width/e&&l.maxX+c>=0&&l.minY-c<=h.height/e&&l.maxY+c>=0&&(a&&this.replayTextBackground_(t,N,X,J,Z,o,s),Object(p.n)(t,n.canvasTransform,r,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=Object(P.a)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.drawLabelWithPointPlacement_=function(t,e,i,n){var r=this.textStates[e],o=this.createLabel(t,e,n,i),s=this.strokeStates[i],a=this.pixelRatio,l=V(Array.isArray(t)?t[0]:t,r.textAlign||p.l),h=L[r.textBaseline||p.m],c=s&&s.lineWidth?s.lineWidth:0;return{label:o,anchorX:l*(o.width/a-2*r.scale[0])+2*(.5-l)*c,anchorY:h*o.height/a+2*(.5-h)*c}},t.prototype.execute_=function(t,e,i,n,r,o,s,a){var l;this.pixelCoordinates_&&Object(_.b)(i,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=Object(W.c)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),Object(P.j)(this.renderedTransform_,i));for(var h,u,d,f,y,x,v,S,m,b,O,T,C,k,w,I,R=0,D=n.length,E=0,j=0,F=0,M=null,A=null,Y=this.coordinateCache_,N=this.viewRotation_,X=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,J={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},Z=this.instructions!=n||this.overlaps?0:200;R<D;){var K=n[R];switch(K[0]){case c.BEGIN_GEOMETRY:C=K[1],I=K[3],C.getGeometry()?void 0===s||Object(g.G)(s,I.getExtent())?++R:R=K[2]+1:R=K[2];break;case c.BEGIN_PATH:j>Z&&(this.fill_(t),j=0),F>Z&&(t.stroke(),F=0),j||F||(t.beginPath(),f=NaN,y=NaN),++R;break;case c.CIRCLE:var V=l[E=K[1]],q=l[E+1],U=l[E+2]-V,z=l[E+3]-q,Q=Math.sqrt(U*U+z*z);t.moveTo(V+Q,q),t.arc(V,q,Q,0,2*Math.PI,!0),++R;break;case c.CLOSE_PATH:t.closePath(),++R;break;case c.CUSTOM:E=K[1],h=K[2];var $=K[3],tt=K[4],et=6==K.length?K[5]:void 0;J.geometry=$,J.feature=C,R in Y||(Y[R]=[]);var it=Y[R];et?et(l,E,h,2,it):(it[0]=l[E],it[1]=l[E+1],it.length=2),tt(it,J),++R;break;case c.DRAW_IMAGE:E=K[1],h=K[2],S=K[3],u=K[4],d=K[5];var nt=K[6],rt=K[7],ot=K[8],st=K[9],at=K[10],lt=K[11],ht=K[12],ct=K[13],ut=K[14],dt=K[15];if(!S&&K.length>=20){m=K[19],b=K[20],O=K[21],T=K[22];var ft=this.drawLabelWithPointPlacement_(m,b,O,T);S=ft.label,K[3]=S;var gt=K[23];u=(ft.anchorX-gt)*this.pixelRatio,K[4]=u;var pt=K[24];d=(ft.anchorY-pt)*this.pixelRatio,K[5]=d,nt=S.height,K[6]=nt,ct=S.width,K[13]=ct}var _t=void 0;K.length>25&&(_t=K[25]);var yt=void 0,xt=void 0,vt=void 0;K.length>17?(yt=K[16],xt=K[17],vt=K[18]):(yt=p.j,xt=!1,vt=!1),at&&X?lt+=N:at||X||(lt-=N);for(var St=0;E<h;E+=2)if(!(_t&&_t[St++]<ct/this.pixelRatio)){var mt=[t,e,S,Vt=this.calculateImageOrLabelDimensions_(S.width,S.height,l[E],l[E+1],ct,nt,u,d,ot,st,lt,ht,r,yt,xt||vt,C),rt,xt?M:null,vt?A:null];if(a){if("none"===ut)continue;if("obstacle"===ut){a.insert(Vt.declutterBox);continue}var bt=void 0,Ot=void 0;if(dt){var Tt=h-E;if(!dt[Tt]){dt[Tt]=mt;continue}if(bt=dt[Tt],delete dt[Tt],Ot=H(bt),a.collides(Ot))continue}if(a.collides(Vt.declutterBox))continue;bt&&(a.insert(Ot),this.replayImageOrLabel_.apply(this,bt)),a.insert(Vt.declutterBox)}this.replayImageOrLabel_.apply(this,mt)}++R;break;case c.DRAW_CHARS:var Ct=K[1],kt=K[2],wt=K[3],It=K[4];T=K[5];var Rt=K[6],Dt=K[7],Lt=K[8];O=K[9];var Et=K[10];m=K[11],b=K[12];var jt=[K[13],K[13]],Ft=this.textStates[b],Mt=Ft.font,Pt=[Ft.scale[0]*Dt,Ft.scale[1]*Dt],At=void 0;Mt in this.widths_?At=this.widths_[Mt]:(At={},this.widths_[Mt]=At);var Wt=Object(B.a)(l,Ct,kt,2),Gt=Math.abs(Pt[0])*Object(p.p)(Mt,m,At);if(It||Gt<=Wt){var Bt=this.textStates[b].textAlign,Yt=G(l,Ct,kt,2,m,(Wt-Gt)*L[Bt],Rt,Math.abs(Pt[0]),p.p,Mt,At,X?0:this.viewRotation_);t:if(Yt){var Nt=[],Xt=void 0,Jt=void 0,Zt=void 0,Ht=void 0,Kt=void 0;if(O)for(Xt=0,Jt=Yt.length;Xt<Jt;++Xt){Zt=(Kt=Yt[Xt])[4],Ht=this.createLabel(Zt,b,"",O),u=Kt[2]+(Pt[0]<0?-Et:Et),d=wt*Ht.height+2*(.5-wt)*Et*Pt[1]/Pt[0]-Lt;var Vt=this.calculateImageOrLabelDimensions_(Ht.width,Ht.height,Kt[0],Kt[1],Ht.width,Ht.height,u,d,0,0,Kt[3],jt,!1,p.j,!1,C);if(a&&a.collides(Vt.declutterBox))break t;Nt.push([t,e,Ht,Vt,1,null,null])}if(T)for(Xt=0,Jt=Yt.length;Xt<Jt;++Xt){Zt=(Kt=Yt[Xt])[4],Ht=this.createLabel(Zt,b,T,""),u=Kt[2],d=wt*Ht.height-Lt;Vt=this.calculateImageOrLabelDimensions_(Ht.width,Ht.height,Kt[0],Kt[1],Ht.width,Ht.height,u,d,0,0,Kt[3],jt,!1,p.j,!1,C);if(a&&a.collides(Vt.declutterBox))break t;Nt.push([t,e,Ht,Vt,1,null,null])}a&&a.load(Nt.map(H));for(var qt=0,Ut=Nt.length;qt<Ut;++qt)this.replayImageOrLabel_.apply(this,Nt[qt])}}++R;break;case c.END_GEOMETRY:if(void 0!==o){var zt=o(C=K[1],I);if(zt)return zt}++R;break;case c.FILL:Z?j++:this.fill_(t),++R;break;case c.MOVE_TO_LINE_TO:for(E=K[1],h=K[2],k=l[E],v=(w=l[E+1])+.5|0,(x=k+.5|0)===f&&v===y||(t.moveTo(k,w),f=x,y=v),E+=2;E<h;E+=2)x=(k=l[E])+.5|0,v=(w=l[E+1])+.5|0,E!=h-2&&x===f&&v===y||(t.lineTo(k,w),f=x,y=v);++R;break;case c.SET_FILL_STYLE:M=K,this.alignFill_=K[2],j&&(this.fill_(t),j=0,F&&(t.stroke(),F=0)),t.fillStyle=K[1],++R;break;case c.SET_STROKE_STYLE:A=K,F&&(t.stroke(),F=0),this.setStrokeStyle_(t,K),++R;break;case c.STROKE:Z?F++:t.stroke(),++R;break;default:++R}}j&&this.fill_(t),F&&t.stroke()},t.prototype.execute=function(t,e,i,n,r,o){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,r,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,e,i,n,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,r)},t}(),z=i("3d7a"),Q=i("32a2"),$=["Polygon","Circle","LineString","Image","Text","Default"],tt=function(){function t(t,e,i,n,r,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Object(P.c)(),this.createExecutors_(r)}return t.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);var n=t[e];for(var r in n){var o=n[r];i[r]=new U(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],n=0,r=t.length;n<r;++n)if(t[n]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o){var s=2*(n=Math.round(n))+1,a=Object(P.b)(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=Object(z.a)(s,s));var h,c=this.hitDetectionContext_;c.canvas.width!==s||c.canvas.height!==s?(c.canvas.width=s,c.canvas.height=s):l||c.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(h=Object(g.k)(),Object(g.r)(h,t),Object(g.d)(h,e*(this.renderBuffer_+n),h));var u,d=function(t){if(void 0!==et[t])return et[t];for(var e=2*t+1,i=t*t,n=new Array(i+1),r=0;r<=t;++r)for(var o=0;o<=t;++o){var s=r*r+o*o;if(s>i)break;var a=n[s];a||(a=[],n[s]=a),a.push(4*((t+r)*e+(t+o))+3),r>0&&a.push(4*((t-r)*e+(t+o))+3),o>0&&(a.push(4*((t+r)*e+(t-o))+3),r>0&&a.push(4*((t-r)*e+(t-o))+3))}for(var l=[],h=(r=0,n.length);r<h;++r)n[r]&&l.push.apply(l,n[r]);return et[t]=l,l}(n);function f(t,e){for(var i=c.getImageData(0,0,s,s).data,a=0,l=d.length;a<l;a++)if(i[d[a]]>0){if(!o||"Image"!==u&&"Text"!==u||-1!==o.indexOf(t)){var h=(d[a]-3)/4,f=n-h%s,g=n-(h/s|0),p=r(t,e,f*f+g*g);if(p)return p}c.clearRect(0,0,s,s);break}}var p,y,x,v,S,m=Object.keys(this.executorsByZIndex_).map(Number);for(m.sort(_.g),p=m.length-1;p>=0;--p){var b=m[p].toString();for(x=this.executorsByZIndex_[b],y=$.length-1;y>=0;--y)if(void 0!==(v=x[u=$[y]])&&(S=v.executeHitDetection(c,a,i,f,h)))return S}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],n=e[1],r=e[2],o=e[3],s=[i,n,i,o,r,o,r,n];return Object(W.c)(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return Object(Q.d)(this.executorsByZIndex_)},t.prototype.execute=function(t,e,i,n,r,o,s){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(_.g),this.maxExtent_&&(t.save(),this.clip(t,i));var l,h,c,u,d,f,g=o||$;for(s&&a.reverse(),l=0,h=a.length;l<h;++l){var p=a[l].toString();for(d=this.executorsByZIndex_[p],c=0,u=g.length;c<u;++c){void 0!==(f=d[g[c]])&&f.execute(t,e,i,n,r,s)}}this.maxExtent_&&t.restore()},t}(),et={};var it=tt,nt=i("fc2a"),rt=i("1a4d"),ot=i("0d46"),st=i("5e28"),at=.5;var lt=i("75af"),ht=i("7c6d"),ct=i("b2ce"),ut=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dt=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=Object(g.k)(),i.wrappedRenderedExtent_=Object(g.k)(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i.compositionContext_=null,i.opacity_=1,i}return ut(e,t),e.prototype.renderWorlds=function(t,e,i){var n=e.extent,r=e.viewState,o=r.center,s=r.resolution,a=r.projection,l=r.rotation,h=a.getExtent(),c=this.getLayer().getSource(),u=e.pixelRatio,d=e.viewHints,f=!(d[nt.a.ANIMATING]||d[nt.a.INTERACTING]),p=this.compositionContext_,_=Math.round(e.size[0]*u),y=Math.round(e.size[1]*u),x=c.getWrapX()&&a.canWrapX(),v=x?Object(g.F)(h):null,S=x?Math.ceil((n[2]-h[2])/v)+1:1,m=x?Math.floor((n[0]-h[0])/v):0;do{var b=this.getRenderTransform(o,s,l,u,_,y,m*v);t.execute(p,1,b,l,f,void 0,i)}while(++m<S)},e.prototype.setupCompositionContext_=function(){if(1!==this.opacity_){var t=Object(z.a)(this.context.canvas.width,this.context.canvas.height,F.a);this.compositionContext_=t}else this.compositionContext_=this.context},e.prototype.releaseCompositionContext_=function(){if(1!==this.opacity_){var t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Object(z.d)(this.compositionContext_),F.a.push(this.compositionContext_.canvas),this.compositionContext_=null}},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())},e.prototype.renderFrame=function(t,e){var i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];Object(P.e)(this.pixelTransform,1/i,1/i),Object(P.d)(this.inversePixelTransform,this.pixelTransform);var r=Object(P.k)(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));var o=this.context,s=o.canvas,a=this.replayGroup_,l=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!l||l.isEmpty()))return null;var h=Math.round(t.size[0]*i),c=Math.round(t.size[1]*i);s.width!=h||s.height!=c?(s.width=h,s.height=c,s.style.transform!==r&&(s.style.transform=r)):this.containerReused||o.clearRect(0,0,h,c),this.preRender(o,t);var u=t.viewState,d=u.projection;this.opacity_=n.opacity,this.setupCompositionContext_();var f=!1,p=!0;if(n.extent&&this.clipping){var _=Object(ht.l)(n.extent,d);(f=(p=Object(g.G)(_,t.extent))&&!Object(g.h)(_,t.extent))&&this.clipUnrotated(this.compositionContext_,t,_)}return p&&this.renderWorlds(a,t),f&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==u.rotation&&(this.renderedRotation_=u.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];Object(P.a)(this.pixelTransform,i);var n=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,s=this.renderedProjection_,a=this.wrappedRenderedExtent_,l=this.getLayer(),h=[],c=i[0]*at,u=i[1]*at;h.push(this.getRenderTransform(n,r,o,at,c,u,0).slice());var d=l.getSource(),f=s.getExtent();if(d.getWrapX()&&s.canWrapX()&&!Object(g.h)(f,a)){for(var p=a[0],y=Object(g.F)(f),x=0,v=void 0;p<f[0];)v=y*--x,h.push(this.getRenderTransform(n,r,o,at,c,u,v).slice()),p+=y;for(x=0,p=a[2];p>f[2];)v=y*++x,h.push(this.getRenderTransform(n,r,o,at,c,u,v).slice()),p-=y}this.hitDetectionImageData_=function(t,e,i,n,r,o,s){var a=t[0]*at,l=t[1]*at,h=Object(z.a)(a,l);h.imageSmoothingEnabled=!1;for(var c=h.canvas,u=new rt.a(h,at,r,null,s),d=i.length,f=Math.floor(16777215/d),p={},y=1;y<=d;++y){var x=i[y-1],v=x.getStyleFunction()||n;if(n){var S=v(x,o);if(S){Array.isArray(S)||(S=[S]);for(var m="#"+("000000"+(y*f).toString(16)).slice(-6),b=0,O=S.length;b<O;++b){var T=S[b],C=T.getGeometryFunction()(x);if(C&&Object(g.G)(r,C.getExtent())){var k=T.clone(),w=k.getFill();w&&w.setColor(m);var I=k.getStroke();I&&(I.setColor(m),I.setLineDash(null)),k.setText(void 0);var R=T.getImage();if(R&&0!==R.getOpacity()){var D=R.getImageSize();if(!D)continue;var L=Object(z.a)(D[0],D[1],void 0,{alpha:!1}),E=L.canvas;L.fillStyle=m,L.fillRect(0,0,E.width,E.height),k.setImage(new st.a({img:E,imgSize:D,anchor:R.getAnchor(),anchorXUnits:ot.a.PIXELS,anchorYUnits:ot.a.PIXELS,offset:R.getOrigin(),opacity:1,size:R.getSize(),scale:R.getScale(),rotation:R.getRotation(),rotateWithView:R.getRotateWithView()}))}var j=k.getZIndex()||0;(P=p[j])||(P={},p[j]=P,P.Polygon=[],P.Circle=[],P.LineString=[],P.Point=[]),P[C.getType().replace("Multi","")].push(C,k)}}}}}for(var F=Object.keys(p).map(Number).sort(_.g),M=(y=0,F.length);y<M;++y){var P=p[F[y]];for(var A in P){var W=P[A];for(b=0,O=W.length;b<O;b+=2){u.setStyle(W[b+1]);for(var G=0,B=e.length;G<B;++G)u.setTransform(e[G]),u.drawGeometry(W[b])}}}return h.getImageData(0,0,c.width,c.height)}(i,h,this.renderedFeatures_,l.getStyleFunction(),a,r,o)}e(function(t,e,i){var n=[];if(i){var r=Math.floor(Math.round(t[0])*at),o=Math.floor(Math.round(t[1])*at),s=4*(Object(A.b)(r,0,i.width-1)+Object(A.b)(o,0,i.height-1)*i.width),a=i.data[s],l=i.data[s+1],h=i.data[s+2]+256*(l+256*a),c=Math.floor(16777215/e.length);h&&h%c==0&&n.push(e[h/c-1])}return n}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){var o=this;if(this.replayGroup_){var s,a=e.viewState.resolution,l=e.viewState.rotation,h=this.getLayer(),c={},u=function(t,e,i){var o=Object(I.c)(t),s=c[o];if(s){if(!0!==s&&i<s.distanceSq){if(0===i)return c[o]=!0,r.splice(r.lastIndexOf(s),1),n(t,h,e);s.geometry=e,s.distanceSq=i}}else{if(0===i)return c[o]=!0,n(t,h,e);r.push(c[o]={feature:t,layer:h,geometry:e,distanceSq:i,callback:n})}},d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some((function(n){return s=n.forEachFeatureAtCoordinate(t,a,l,i,u,n===o.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((function(t){return t.value})):null)})),s}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var n=t.viewHints[nt.a.ANIMATING],r=t.viewHints[nt.a.INTERACTING],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(this.ready&&!o&&n||!s&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var a=t.extent,l=t.viewState,h=l.projection,c=l.resolution,u=t.pixelRatio,d=e.getRevision(),f=e.getRenderBuffer(),p=e.getRenderOrder();void 0===p&&(p=lt.a);var y=l.center.slice(),x=Object(g.d)(a,f*c),v=x.slice(),S=[x.slice()],m=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!Object(g.h)(m,t.extent)){var b=Object(g.F)(m),O=Math.max(Object(g.F)(x)/2,b);x[0]=m[0]-O,x[2]=m[2]+O,Object(ct.l)(y,h);var T=Object(g.M)(S[0],h);T[0]<m[0]&&T[2]<m[2]?S.push([T[0]+b,T[1],T[2]+b,T[3]]):T[0]>m[0]&&T[2]>m[2]&&S.push([T[0]-b,T[1],T[2]-b,T[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==p&&Object(g.h)(this.wrappedRenderedExtent_,x))return Object(_.b)(this.renderedExtent_,v)||(this.hitDetectionImageData_=null,this.renderedExtent_=v),this.renderedCenter_=y,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var C,k=new j(Object(lt.c)(c,u),x,c,u);this.getLayer().getDeclutter()&&(C=new j(Object(lt.c)(c,u),x,c,u));var w,I=Object(ht.r)();if(I){for(var R=0,D=S.length;R<D;++R){var L=S[R],E=Object(ht.u)(L,h);i.loadFeatures(E,Object(ht.v)(c,h),I)}w=Object(ht.q)(I,h)}else for(R=0,D=S.length;R<D;++R)i.loadFeatures(S[R],c,h);var F=Object(lt.b)(c,u),M=!0,P=function(t){var i,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,c)),i){var r=this.renderFeature(t,F,i,k,w,C);M=M&&!r}}.bind(this),A=Object(ht.u)(x,h),W=i.getFeaturesInExtent(A);p&&W.sort(p);for(R=0,D=W.length;R<D;++R)P(W[R]);this.renderedFeatures_=W,this.ready=M;var G=k.finish(),B=new it(x,c,u,i.getOverlaps(),G,e.getRenderBuffer());return C&&(this.declutterExecutorGroup=new it(x,c,u,i.getOverlaps(),C.finish(),e.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=p,this.renderedExtent_=v,this.wrappedRenderedExtent_=x,this.renderedCenter_=y,this.renderedProjection_=h,this.replayGroup_=B,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,r,o){if(!i)return!1;var s=!1;if(Array.isArray(i))for(var a=0,l=i.length;a<l;++a)s=Object(lt.d)(n,t,i[a],e,this.boundHandleStyleImageChange_,r,o)||s;else s=Object(lt.d)(n,t,i,e,this.boundHandleStyleImageChange_,r,o);return s},e}(F.b),ft=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gt=function(t){function e(e){return t.call(this,e)||this}return ft(e,t),e.prototype.createRenderer=function(){return new dt(this)},e}(r.a);e.a=gt},9738:function(t,e,i){"use strict";var n=function(){function t(){}return t.prototype.drawCustom=function(t,e,i,n){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}();e.a=n}}]);
//# sourceMappingURL=chunk-4509329f.9a89abcd.js.map